(function(K,Y){typeof exports=="object"&&typeof module<"u"?module.exports=Y():typeof define=="function"&&define.amd?define(Y):(K=typeof globalThis<"u"?globalThis:K||self,K.CPQConfigurator=Y())})(this,function(){"use strict";var so=Object.defineProperty;var qi=K=>{throw TypeError(K)};var ao=(K,Y,ve)=>Y in K?so(K,Y,{enumerable:!0,configurable:!0,writable:!0,value:ve}):K[Y]=ve;var zr=(K,Y,ve)=>ao(K,typeof Y!="symbol"?Y+"":Y,ve),qr=(K,Y,ve)=>Y.has(K)||qi("Cannot "+ve);var M=(K,Y,ve)=>(qr(K,Y,"read from private field"),ve?ve.call(K):Y.get(K)),le=(K,Y,ve)=>Y.has(K)?qi("Cannot add the same private member more than once"):Y instanceof WeakSet?Y.add(K):Y.set(K,ve),It=(K,Y,ve,pt)=>(qr(K,Y,"write to private field"),pt?pt.call(K,ve):Y.set(K,ve),ve),ht=(K,Y,ve)=>(qr(K,Y,"access private method"),ve);var zi,Ot,jt,Rt,zt,qt,Nt,Vt,Ut,Ft,Bt,Ht,Qt,Yt,Gt,Jt,Wt,pe,Et,He,Se,Ni,Vi,Ui,Fi,Bi,Hi;var Y=Array.isArray,ve=Array.prototype.indexOf,pt=Array.from,Qi=Object.defineProperty,Ct=Object.getOwnPropertyDescriptor,Nr=Object.getOwnPropertyDescriptors,Yi=Object.prototype,Gi=Array.prototype,dr=Object.getPrototypeOf,Vr=Object.isExtensible;const Ur=()=>{};function Ji(t){return t()}function fr(t){for(var e=0;e<t.length;e++)t[e]()}function Wi(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const r=[];for(const i of t)if(r.push(i),r.length===e)break;return r}const Ve=2,Fr=4,Kt=8,_r=16,et=32,ut=64,hr=128,Te=256,Xt=512,De=1024,tt=2048,vt=4096,rt=8192,pr=16384,Br=32768,Zt=65536,Ki=1<<19,Hr=1<<20,gr=1<<21,gt=Symbol("$state"),Xi=Symbol("");function Qr(t){return t===this.v}function Zi(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Yr(t){return!Zi(t,this.v)}function $i(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function en(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function tn(t){throw new Error("https://svelte.dev/e/effect_orphan")}function rn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function nn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function sn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function an(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let kt=!1,oo=!1;function on(){kt=!0}const mr=1,yr=2,Gr=4,ln=8,un=16,Jr=1,vn=2,we=Symbol(),cn="http://www.w3.org/1999/xhtml";function Wr(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ie=null;function Kr(t){ie=t}function Ge(t,e=!1,r){var i=ie={p:ie,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};kt&&!e&&(ie.l={s:null,u:null,r1:[],r2:Mt(!1)}),oi(()=>{i.d=!0})}function Je(t){const e=ie;if(e!==null){const o=e.e;if(o!==null){var r=J,i=X;e.e=null;try{for(var s=0;s<o.length;s++){var n=o[s];st(n.effect),Xe(n.reaction),xr(n.fn)}}finally{st(r),Xe(i)}}ie=e.p,e.m=!0}return{}}function Tt(){return!kt||ie!==null&&ie.l===null}function Ue(t){if(typeof t!="object"||t===null||gt in t)return t;const e=dr(t);if(e!==Yi&&e!==Gi)return t;var r=new Map,i=Y(t),s=U(0),n=X,o=l=>{var v=X;Xe(n);var u=l();return Xe(v),u};return i&&r.set("length",U(t.length)),new Proxy(t,{defineProperty(l,v,u){return(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&nn(),o(()=>{var p=r.get(v);p===void 0?(p=U(u.value),r.set(v,p)):P(p,u.value,!0)}),!0},deleteProperty(l,v){var u=r.get(v);if(u===void 0){if(v in l){const d=o(()=>U(we));r.set(v,d),br(s)}}else{if(i&&typeof v=="string"){var p=r.get("length"),f=Number(v);Number.isInteger(f)&&f<p.v&&P(p,f)}P(u,we),br(s)}return!0},get(l,v,u){if(v===gt)return t;var p=r.get(v),f=v in l;if(p===void 0&&(!f||Ct(l,v)?.writable)&&(p=o(()=>{var y=Ue(f?l[v]:we),x=U(y);return x}),r.set(v,p)),p!==void 0){var d=a(p);return d===we?void 0:d}return Reflect.get(l,v,u)},getOwnPropertyDescriptor(l,v){var u=Reflect.getOwnPropertyDescriptor(l,v);if(u&&"value"in u){var p=r.get(v);p&&(u.value=a(p))}else if(u===void 0){var f=r.get(v),d=f?.v;if(f!==void 0&&d!==we)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return u},has(l,v){if(v===gt)return!0;var u=r.get(v),p=u!==void 0&&u.v!==we||Reflect.has(l,v);if(u!==void 0||J!==null&&(!p||Ct(l,v)?.writable)){u===void 0&&(u=o(()=>{var d=p?Ue(l[v]):we,y=U(d);return y}),r.set(v,u));var f=a(u);if(f===we)return!1}return p},set(l,v,u,p){var f=r.get(v),d=v in l;if(i&&v==="length")for(var y=u;y<f.v;y+=1){var x=r.get(y+"");x!==void 0?P(x,we):y in l&&(x=o(()=>U(we)),r.set(y+"",x))}if(f===void 0)(!d||Ct(l,v)?.writable)&&(f=o(()=>{var E=U(void 0);return P(E,Ue(u)),E}),r.set(v,f));else{d=f.v!==we;var B=o(()=>Ue(u));P(f,B)}var L=Reflect.getOwnPropertyDescriptor(l,v);if(L?.set&&L.set.call(p,u),!d){if(i&&typeof v=="string"){var q=r.get("length"),I=Number(v);Number.isInteger(I)&&I>=q.v&&P(q,I+1)}br(s)}return!0},ownKeys(l){a(s);var v=Reflect.ownKeys(l).filter(f=>{var d=r.get(f);return d===void 0||d.v!==we});for(var[u,p]of r)p.v!==we&&!(u in l)&&v.push(u);return v},setPrototypeOf(){sn()}})}function br(t,e=1){P(t,t.v+e)}function $t(t){var e=Ve|tt,r=X!==null&&(X.f&Ve)!==0?X:null;return J===null||r!==null&&(r.f&Te)!==0?e|=Te:J.f|=Hr,{ctx:ie,deps:null,effects:null,equals:Qr,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??J}}function Me(t){const e=$t(t);return pi(e),e}function Xr(t){const e=$t(t);return e.equals=Yr,e}function Zr(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)We(e[r])}}function dn(t){for(var e=t.parent;e!==null;){if((e.f&Ve)===0)return e;e=e.parent}return null}function $r(t){var e,r=J;st(dn(t));try{Zr(t),e=bi(t)}finally{st(r)}return e}function ei(t){var e=$r(t);if(t.equals(e)||(t.v=e,t.wv=mi()),!bt){var r=(at||(t.f&Te)!==0)&&t.deps!==null?vt:De;Fe(t,r)}}const Dt=new Map;function Mt(t,e){var r={f:0,v:t,reactions:null,equals:Qr,rv:0,wv:0};return r}function U(t,e){const r=Mt(t);return pi(r),r}function fn(t,e=!1,r=!0){var s;const i=Mt(t);return e||(i.equals=Yr),kt&&r&&ie!==null&&ie.l!==null&&((s=ie.l).s??(s.s=[])).push(i),i}function P(t,e,r=!1){X!==null&&!Ke&&Tt()&&(X.f&(Ve|_r))!==0&&!it?.includes(t)&&an();let i=r?Ue(e):e;return wr(t,i)}function wr(t,e){if(!t.equals(e)){var r=t.v;bt?Dt.set(t,e):Dt.set(t,r),t.v=e,(t.f&Ve)!==0&&((t.f&tt)!==0&&$r(t),Fe(t,(t.f&Te)===0?De:vt)),t.wv=mi(),ti(t,tt),Tt()&&J!==null&&(J.f&De)!==0&&(J.f&(et|ut))===0&&(ze===null?Sn([t]):ze.push(t))}return e}function ti(t,e){var r=t.reactions;if(r!==null)for(var i=Tt(),s=r.length,n=0;n<s;n++){var o=r[n],l=o.f;(l&tt)===0&&(!i&&o===J||(Fe(o,e),(l&(De|Te))!==0&&((l&Ve)!==0?ti(o,vt):cr(o))))}}let _n=!1;var ri,ii,ni,si;function hn(){if(ri===void 0){ri=window,ii=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;ni=Ct(e,"firstChild").get,si=Ct(e,"nextSibling").get,Vr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Vr(r)&&(r.__t=void 0)}}function er(t=""){return document.createTextNode(t)}function Ae(t){return ni.call(t)}function tr(t){return si.call(t)}function c(t,e){return Ae(t)}function Re(t,e){{var r=Ae(t);return r instanceof Comment&&r.data===""?tr(r):r}}function m(t,e=1,r=!1){let i=t;for(;e--;)i=tr(i);return i}function pn(t){t.textContent=""}function ai(t){J===null&&X===null&&tn(),X!==null&&(X.f&Te)!==0&&J===null&&en(),bt&&$i()}function gn(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function ct(t,e,r,i=!0){var s=J,n={ctx:ie,deps:null,nodes_start:null,nodes_end:null,f:t|tt,first:null,fn:e,last:null,next:null,parent:s,prev:null,teardown:null,transitions:null,wv:0};if(r)try{kr(n),n.f|=Br}catch(v){throw We(n),v}else e!==null&&cr(n);var o=r&&n.deps===null&&n.first===null&&n.nodes_start===null&&n.teardown===null&&(n.f&(Hr|hr))===0;if(!o&&i&&(s!==null&&gn(n,s),X!==null&&(X.f&Ve)!==0)){var l=X;(l.effects??(l.effects=[])).push(n)}return n}function oi(t){const e=ct(Kt,null,!1);return Fe(e,De),e.teardown=t,e}function xe(t){ai();var e=J!==null&&(J.f&et)!==0&&ie!==null&&!ie.m;if(e){var r=ie;(r.e??(r.e=[])).push({fn:t,effect:J,reaction:X})}else{var i=xr(t);return i}}function mn(t){return ai(),Sr(t)}function mt(t){const e=ct(ut,t,!0);return()=>{We(e)}}function yn(t){const e=ct(ut,t,!0);return(r={})=>new Promise(i=>{r.outro?ir(e,()=>{We(e),i(void 0)}):(We(e),i(void 0))})}function xr(t){return ct(Fr,t,!1)}function Sr(t){return ct(Kt,t,!0)}function k(t,e=[],r=$t){const i=e.map(r);return rr(()=>t(...i.map(a)))}function rr(t,e=0){return ct(Kt|_r|e,t,!0)}function yt(t,e=!0){return ct(Kt|et,t,!0,e)}function li(t){var e=t.teardown;if(e!==null){const r=bt,i=X;hi(!0),Xe(null);try{e.call(null)}finally{hi(r),Xe(i)}}}function ui(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var i=r.next;(r.f&ut)!==0?r.parent=null:We(r,e),r=i}}function bn(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&et)===0&&We(e),e=r}}function We(t,e=!0){var r=!1;(e||(t.f&Ki)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(vi(t.nodes_start,t.nodes_end),r=!0),ui(t,e&&!r),vr(t,0),Fe(t,pr);var i=t.transitions;if(i!==null)for(const n of i)n.stop();li(t);var s=t.parent;s!==null&&s.first!==null&&ci(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function vi(t,e){for(;t!==null;){var r=t===e?null:tr(t);t.remove(),t=r}}function ci(t){var e=t.parent,r=t.prev,i=t.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=r))}function ir(t,e){var r=[];Er(t,r,!0),di(r,()=>{We(t),e&&e()})}function di(t,e){var r=t.length;if(r>0){var i=()=>--r||e();for(var s of t)s.out(i)}else e()}function Er(t,e,r){if((t.f&rt)===0){if(t.f^=rt,t.transitions!==null)for(const o of t.transitions)(o.is_global||r)&&e.push(o);for(var i=t.first;i!==null;){var s=i.next,n=(i.f&Zt)!==0||(i.f&et)!==0;Er(i,e,n?r:!1),i=s}}}function nr(t){fi(t,!0)}function fi(t,e){if((t.f&rt)!==0){t.f^=rt,(t.f&De)!==0&&(Fe(t,tt),cr(t));for(var r=t.first;r!==null;){var i=r.next,s=(r.f&Zt)!==0||(r.f&et)!==0;fi(r,s?e:!1),r=i}if(t.transitions!==null)for(const n of t.transitions)(n.is_global||e)&&n.in()}}let sr=[];function wn(){var t=sr;sr=[],fr(t)}function Ir(t){sr.length===0&&queueMicrotask(wn),sr.push(t)}function xn(t){var e=J;if((e.f&Br)===0){if((e.f&hr)===0)throw t;e.fn(t)}else _i(t,e)}function _i(t,e){for(;e!==null;){if((e.f&hr)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let Cr=!1,ar=null,dt=!1,bt=!1;function hi(t){bt=t}let or=[],lo=[],X=null,Ke=!1;function Xe(t){X=t}let J=null;function st(t){J=t}let it=null;function pi(t){X!==null&&X.f&gr&&(it===null?it=[t]:it.push(t))}let me=null,Le=0,ze=null;function Sn(t){ze=t}let gi=1,lr=0,at=!1;function mi(){return++gi}function ur(t){var e=t.f;if((e&tt)!==0)return!0;if((e&vt)!==0){var r=t.deps,i=(e&Te)!==0;if(r!==null){var s,n,o=(e&Xt)!==0,l=i&&J!==null&&!at,v=r.length;if(o||l){var u=t,p=u.parent;for(s=0;s<v;s++)n=r[s],(o||!n?.reactions?.includes(u))&&(n.reactions??(n.reactions=[])).push(u);o&&(u.f^=Xt),l&&p!==null&&(p.f&Te)===0&&(u.f^=Te)}for(s=0;s<v;s++)if(n=r[s],ur(n)&&ei(n),n.wv>t.wv)return!0}(!i||J!==null&&!at)&&Fe(t,De)}return!1}function yi(t,e,r=!0){var i=t.reactions;if(i!==null)for(var s=0;s<i.length;s++){var n=i[s];it?.includes(t)||((n.f&Ve)!==0?yi(n,e,!1):e===n&&(r?Fe(n,tt):(n.f&De)!==0&&Fe(n,vt),cr(n)))}}function bi(t){var y;var e=me,r=Le,i=ze,s=X,n=at,o=it,l=ie,v=Ke,u=t.f;me=null,Le=0,ze=null,at=(u&Te)!==0&&(Ke||!dt||X===null),X=(u&(et|ut))===0?t:null,it=null,Kr(t.ctx),Ke=!1,lr++,t.f|=gr;try{var p=(0,t.fn)(),f=t.deps;if(me!==null){var d;if(vr(t,Le),f!==null&&Le>0)for(f.length=Le+me.length,d=0;d<me.length;d++)f[Le+d]=me[d];else t.deps=f=me;if(!at)for(d=Le;d<f.length;d++)((y=f[d]).reactions??(y.reactions=[])).push(t)}else f!==null&&Le<f.length&&(vr(t,Le),f.length=Le);if(Tt()&&ze!==null&&!Ke&&f!==null&&(t.f&(Ve|vt|tt))===0)for(d=0;d<ze.length;d++)yi(ze[d],t);return s!==null&&s!==t&&(lr++,ze!==null&&(i===null?i=ze:i.push(...ze))),p}catch(x){xn(x)}finally{me=e,Le=r,ze=i,X=s,at=n,it=o,Kr(l),Ke=v,t.f^=gr}}function En(t,e){let r=e.reactions;if(r!==null){var i=ve.call(r,t);if(i!==-1){var s=r.length-1;s===0?r=e.reactions=null:(r[i]=r[s],r.pop())}}r===null&&(e.f&Ve)!==0&&(me===null||!me.includes(e))&&(Fe(e,vt),(e.f&(Te|Xt))===0&&(e.f^=Xt),Zr(e),vr(e,0))}function vr(t,e){var r=t.deps;if(r!==null)for(var i=e;i<r.length;i++)En(t,r[i])}function kr(t){var e=t.f;if((e&pr)===0){Fe(t,De);var r=J,i=dt;J=t,dt=!0;try{(e&_r)!==0?bn(t):ui(t),li(t);var s=bi(t);t.teardown=typeof s=="function"?s:null,t.wv=gi;var n}finally{dt=i,J=r}}}function In(){try{rn()}catch(t){if(ar!==null)_i(t,ar);else throw t}}function Cn(){var t=dt;try{var e=0;for(dt=!0;or.length>0;){e++>1e3&&In();var r=or,i=r.length;or=[];for(var s=0;s<i;s++){var n=Tn(r[s]);kn(n)}Dt.clear()}}finally{Cr=!1,dt=t,ar=null}}function kn(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var i=t[r];(i.f&(pr|rt))===0&&ur(i)&&(kr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?ci(i):i.fn=null))}}function cr(t){Cr||(Cr=!0,queueMicrotask(Cn));for(var e=ar=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(ut|et))!==0){if((r&De)===0)return;e.f^=De}}or.push(e)}function Tn(t){for(var e=[],r=t;r!==null;){var i=r.f,s=(i&(et|ut))!==0,n=s&&(i&De)!==0;if(!n&&(i&rt)===0){(i&Fr)!==0?e.push(r):s?r.f^=De:ur(r)&&kr(r);var o=r.first;if(o!==null){r=o;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)r=l.next,l=l.parent}return e}function a(t){var e=t.f,r=(e&Ve)!==0;if(X!==null&&!Ke){if(!it?.includes(t)){var i=X.deps;t.rv<lr&&(t.rv=lr,me===null&&i!==null&&i[Le]===t?Le++:me===null?me=[t]:(!at||!me.includes(t))&&me.push(t))}}else if(r&&t.deps===null&&t.effects===null){var s=t,n=s.parent;n!==null&&(n.f&Te)===0&&(s.f^=Te)}return r&&(s=t,ur(s)&&ei(s)),bt&&Dt.has(t)?Dt.get(t):t.v}function At(t){var e=Ke;try{return Ke=!0,t()}finally{Ke=e}}const Dn=-7169;function Fe(t,e){t.f=t.f&Dn|e}function Mn(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(gt in t)Tr(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&gt in r&&Tr(r)}}}function Tr(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{Tr(t[i],e)}catch{}const r=dr(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const i=Nr(r);for(let s in i){const n=i[s].get;if(n)try{n.call(t)}catch{}}}}}const An=["touchstart","touchmove"];function Ln(t){return An.includes(t)}let wi=!1;function Pn(){wi||(wi=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function xi(t){var e=X,r=J;Xe(null),st(null);try{return t()}finally{Xe(e),st(r)}}function On(t,e,r,i=r){t.addEventListener(e,()=>xi(r));const s=t.__on_r;s?t.__on_r=()=>{s(),i(!0)}:t.__on_r=()=>i(!0),Pn()}const Si=new Set,Dr=new Set;function jn(t,e,r,i={}){function s(n){if(i.capture||Lt.call(e,n),!n.cancelBubble)return xi(()=>r?.call(this,n))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Ir(()=>{e.addEventListener(t,s,i)}):e.addEventListener(t,s,i),s}function Rn(t,e,r,i,s){var n={capture:i,passive:s},o=jn(t,e,r,n);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&oi(()=>{e.removeEventListener(t,o,n)})}function ot(t){for(var e=0;e<t.length;e++)Si.add(t[e]);for(var r of Dr)r(t)}function Lt(t){var e=this,r=e.ownerDocument,i=t.type,s=t.composedPath?.()||[],n=s[0]||t.target,o=0,l=t.__root;if(l){var v=s.indexOf(l);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var u=s.indexOf(e);if(u===-1)return;v<=u&&(o=v)}if(n=s[o]||t.target,n!==e){Qi(t,"currentTarget",{configurable:!0,get(){return n||r}});var p=X,f=J;Xe(null),st(null);try{for(var d,y=[];n!==null;){var x=n.assignedSlot||n.parentNode||n.host||null;try{var B=n["__"+i];if(B!=null&&(!n.disabled||t.target===n))if(Y(B)){var[L,...q]=B;L.apply(n,[t,...q])}else B.call(n,t)}catch(I){d?y.push(I):d=I}if(t.cancelBubble||x===e||x===null)break;n=x}if(d){for(let I of y)queueMicrotask(()=>{throw I});throw d}}finally{t.__root=e,delete t.currentTarget,Xe(p),st(f)}}}function Mr(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ft(t,e){var r=J;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function w(t,e){var r=(e&Jr)!==0,i=(e&vn)!==0,s,n=!t.startsWith("<!>");return()=>{s===void 0&&(s=Mr(n?t:"<!>"+t),r||(s=Ae(s)));var o=i||ii?document.importNode(s,!0):s.cloneNode(!0);if(r){var l=Ae(o),v=o.lastChild;ft(l,v)}else ft(o,o);return o}}function zn(t,e,r="svg"){var i=!t.startsWith("<!>"),s=(e&Jr)!==0,n=`<${r}>${i?t:"<!>"+t}</${r}>`,o;return()=>{if(!o){var l=Mr(n),v=Ae(l);if(s)for(o=document.createDocumentFragment();Ae(v);)o.appendChild(Ae(v));else o=Ae(v)}var u=o.cloneNode(!0);if(s){var p=Ae(u),f=u.lastChild;ft(p,f)}else ft(u,u);return u}}function Ar(t,e){return zn(t,e,"svg")}function wt(t=""){{var e=er(t+"");return ft(e,e),e}}function xt(){var t=document.createDocumentFragment(),e=document.createComment(""),r=er();return t.append(e,r),ft(e,r),t}function _(t,e){t!==null&&t.before(e)}function D(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function qn(t,e){return Nn(t,e)}const St=new Map;function Nn(t,{target:e,anchor:r,props:i={},events:s,context:n,intro:o=!0}){hn();var l=new Set,v=f=>{for(var d=0;d<f.length;d++){var y=f[d];if(!l.has(y)){l.add(y);var x=Ln(y);e.addEventListener(y,Lt,{passive:x});var B=St.get(y);B===void 0?(document.addEventListener(y,Lt,{passive:x}),St.set(y,1)):St.set(y,B+1)}}};v(pt(Si)),Dr.add(v);var u=void 0,p=yn(()=>{var f=r??e.appendChild(er());return yt(()=>{if(n){Ge({});var d=ie;d.c=n}s&&(i.$$events=s),u=t(f,i)||{},n&&Je()}),()=>{for(var d of l){e.removeEventListener(d,Lt);var y=St.get(d);--y===0?(document.removeEventListener(d,Lt),St.delete(d)):St.set(d,y)}Dr.delete(v),f!==r&&f.parentNode?.removeChild(f)}});return Vn.set(u,p),u}let Vn=new WeakMap;function S(t,e,[r,i]=[0,0]){var s=t,n=null,o=null,l=we,v=r>0?Zt:0,u=!1;const p=(d,y=!0)=>{u=!0,f(y,d)},f=(d,y)=>{l!==(l=d)&&(l?(n?nr(n):y&&(n=yt(()=>y(s))),o&&ir(o,()=>{o=null})):(o?nr(o):y&&(o=yt(()=>y(s,[r+1,i]))),n&&ir(n,()=>{n=null})))};rr(()=>{u=!1,e(p),u||f(null,null)},v)}function qe(t,e){return e}function Un(t,e,r,i){for(var s=[],n=e.length,o=0;o<n;o++)Er(e[o].e,s,!0);var l=n>0&&s.length===0&&r!==null;if(l){var v=r.parentNode;pn(v),v.append(r),i.clear(),lt(t,e[0].prev,e[n-1].next)}di(s,()=>{for(var u=0;u<n;u++){var p=e[u];l||(i.delete(p.k),lt(t,p.prev,p.next)),We(p.e,!l)}})}function Ne(t,e,r,i,s,n=null){var o=t,l={flags:e,items:new Map,first:null},v=(e&Gr)!==0;if(v){var u=t;o=u.appendChild(er())}var p=null,f=!1,d=Xr(()=>{var y=r();return Y(y)?y:y==null?[]:pt(y)});rr(()=>{var y=a(d),x=y.length;f&&x===0||(f=x===0,Fn(y,l,o,s,e,i,r),n!==null&&(x===0?p?nr(p):p=yt(()=>n(o)):p!==null&&ir(p,()=>{p=null})),a(d))})}function Fn(t,e,r,i,s,n,o){var l=(s&ln)!==0,v=(s&(mr|yr))!==0,u=t.length,p=e.items,f=e.first,d=f,y,x=null,B,L=[],q=[],I,E,b,A;if(l)for(A=0;A<u;A+=1)I=t[A],E=n(I,A),b=p.get(E),b!==void 0&&(b.a?.measure(),(B??(B=new Set)).add(b));for(A=0;A<u;A+=1){if(I=t[A],E=n(I,A),b=p.get(E),b===void 0){var R=d?d.e.nodes_start:r;x=Hn(R,e,x,x===null?e.first:x.next,I,E,A,i,s,o),p.set(E,x),L=[],q=[],d=x.next;continue}if(v&&Bn(b,I,A,s),(b.e.f&rt)!==0&&(nr(b.e),l&&(b.a?.unfix(),(B??(B=new Set)).delete(b))),b!==d){if(y!==void 0&&y.has(b)){if(L.length<q.length){var H=q[0],Z;x=H.prev;var ee=L[0],$=L[L.length-1];for(Z=0;Z<L.length;Z+=1)Ei(L[Z],H,r);for(Z=0;Z<q.length;Z+=1)y.delete(q[Z]);lt(e,ee.prev,$.next),lt(e,x,ee),lt(e,$,H),d=H,x=$,A-=1,L=[],q=[]}else y.delete(b),Ei(b,d,r),lt(e,b.prev,b.next),lt(e,b,x===null?e.first:x.next),lt(e,x,b),x=b;continue}for(L=[],q=[];d!==null&&d.k!==E;)(d.e.f&rt)===0&&(y??(y=new Set)).add(d),q.push(d),d=d.next;if(d===null)continue;b=d}L.push(b),x=b,d=b.next}if(d!==null||y!==void 0){for(var de=y===void 0?[]:pt(y);d!==null;)(d.e.f&rt)===0&&de.push(d),d=d.next;var Ee=de.length;if(Ee>0){var Qe=(s&Gr)!==0&&u===0?r:null;if(l){for(A=0;A<Ee;A+=1)de[A].a?.measure();for(A=0;A<Ee;A+=1)de[A].a?.fix()}Un(e,de,Qe,p)}}l&&Ir(()=>{if(B!==void 0)for(b of B)b.a?.apply()}),J.first=e.first&&e.first.e,J.last=x&&x.e}function Bn(t,e,r,i){(i&mr)!==0&&wr(t.v,e),(i&yr)!==0?wr(t.i,r):t.i=r}function Hn(t,e,r,i,s,n,o,l,v,u){var p=(v&mr)!==0,f=(v&un)===0,d=p?f?fn(s,!1,!1):Mt(s):s,y=(v&yr)===0?o:Mt(o),x={i:y,v:d,k:n,a:null,e:null,prev:r,next:i};try{return x.e=yt(()=>l(t,d,y,u),_n),x.e.prev=r&&r.e,x.e.next=i&&i.e,r===null?e.first=x:(r.next=x,r.e.next=x.e),i!==null&&(i.prev=x,i.e.prev=x.e),x}finally{}}function Ei(t,e,r){for(var i=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,n=t.e.nodes_start;n!==i;){var o=tr(n);s.before(n),n=o}}function lt(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Qn(t,e,r=!1,i=!1,s=!1){var n=t,o="";k(()=>{var l=J;if(o!==(o=e()??"")&&(l.nodes_start!==null&&(vi(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),o!=="")){var v=o+"";r?v=`<svg>${v}</svg>`:i&&(v=`<math>${v}</math>`);var u=Mr(v);if((r||i)&&(u=Ae(u)),ft(Ae(u),u.lastChild),r||i)for(;Ae(u);)n.before(Ae(u));else n.before(u)}})}function Ii(t,e,...r){var i=t,s=Ur,n;rr(()=>{s!==(s=e())&&(n&&(We(n),n=null),n=yt(()=>s(i,...r)))},Zt)}const Ci=[...` 	
\r\f \v\uFEFF`];function Yn(t,e,r){var i=t==null?"":""+t;if(e&&(i=i?i+" "+e:e),r){for(var s in r)if(r[s])i=i?i+" "+s:s;else if(i.length)for(var n=s.length,o=0;(o=i.indexOf(s,o))>=0;){var l=o+n;(o===0||Ci.includes(i[o-1]))&&(l===i.length||Ci.includes(i[l]))?i=(o===0?"":i.substring(0,o))+i.substring(l+1):o=l}}return i===""?null:i}function Gn(t,e){return t==null?null:String(t)}function he(t,e,r,i,s,n){var o=t.__className;if(o!==r||o===void 0){var l=Yn(r,i,n);l==null?t.removeAttribute("class"):e?t.className=l:t.setAttribute("class",l),t.__className=r}else if(n&&s!==n)for(var v in n){var u=!!n[v];(s==null||u!==!!s[v])&&t.classList.toggle(v,u)}return n}function Lr(t,e,r,i){var s=t.__style;if(s!==e){var n=Gn(e);n==null?t.removeAttribute("style"):t.style.cssText=n,t.__style=e}return i}const Jn=Symbol("is custom element"),Wn=Symbol("is html");function Kn(t,e){var r=ki(t);r.checked!==(r.checked=e??void 0)&&(t.checked=e)}function Pt(t,e,r,i){var s=ki(t);s[e]!==(s[e]=r)&&(e==="loading"&&(t[Xi]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Xn(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function ki(t){return t.__attributes??(t.__attributes={[Jn]:t.nodeName.includes("-"),[Wn]:t.namespaceURI===cn})}var Ti=new Map;function Xn(t){var e=Ti.get(t.nodeName);if(e)return e;Ti.set(t.nodeName,e=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=Nr(i);for(var n in r)r[n].set&&e.push(n);i=dr(i)}return e}function Di(t,e,r=e){var i=Tt();On(t,"input",s=>{var n=s?t.defaultValue:t.value;if(n=Pr(t)?Or(n):n,r(n),i&&n!==(n=e())){var o=t.selectionStart,l=t.selectionEnd;t.value=n??"",l!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(l,t.value.length))}}),At(e)==null&&t.value&&r(Pr(t)?Or(t.value):t.value),Sr(()=>{var s=e();Pr(t)&&s===Or(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Pr(t){var e=t.type;return e==="number"||e==="range"}function Or(t){return t===""?null:+t}function Mi(t,e){return t===e||t?.[gt]===e}function Ai(t={},e,r,i){return xr(()=>{var s,n;return Sr(()=>{s=n,n=[],At(()=>{t!==r(...n)&&(e(t,...n),s&&Mi(r(...s),t)&&e(null,...s))})}),()=>{Ir(()=>{n&&Mi(r(...n),t)&&e(null,...n)})}}),t}function Li(t=!1){const e=ie,r=e.l.u;if(!r)return;let i=()=>Mn(e.s);if(t){let s=0,n={};const o=$t(()=>{let l=!1;const v=e.s;for(const u in v)v[u]!==n[u]&&(n[u]=v[u],l=!0);return l&&s++,s});i=()=>a(o)}r.b.length&&mn(()=>{Pi(e,i),fr(r.b)}),xe(()=>{const s=At(()=>r.m.map(Ji));return()=>{for(const n of s)typeof n=="function"&&n()}}),r.a.length&&xe(()=>{Pi(e,i),fr(r.a)})}function Pi(t,e){if(t.l.s)for(const r of t.l.s)a(r);e()}function ye(t,e,r,i){var s;s=t[e];var n=i,o=!0,l=()=>(o&&(o=!1,n=i),n);s===void 0&&i!==void 0&&(s=l());var v;return v=()=>{var u=t[e];return u===void 0?l():(o=!0,u)},v}function Oi(t){ie===null&&Wr(),kt&&ie.l!==null?$n(ie).m.push(t):xe(()=>{const e=At(t);if(typeof e=="function")return e})}function Zn(t){ie===null&&Wr(),Oi(()=>()=>At(t))}function $n(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const es="5";typeof window<"u"&&((zi=window.__svelte??(window.__svelte={})).v??(zi.v=new Set)).add(es);function jr(t,e){let r;return function(...i){clearTimeout(r),r=setTimeout(()=>t.apply(this,i),e)}}function ts(t,e){let r;return function(...i){r||(t.apply(this,i),r=!0,setTimeout(()=>r=!1,e))}}class rs{constructor(e,r={}){this.baseUrl=e||"http://localhost:8080/api/v1",this.modelId=r.modelId,this.authToken=r.authToken,this.timeout=r.timeout||3e4,this.retryAttempts=r.retryAttempts||2,this.retryDelay=r.retryDelay||1e3}async request(e,r={}){const i=`${this.baseUrl}${e}`,s={method:"GET",headers:{"Content-Type":"application/json","X-Request-ID":this.generateRequestId(),...this.authToken&&{Authorization:`Bearer ${this.authToken}`},...r.headers},...r};s.body&&typeof s.body=="object"&&(s.body=JSON.stringify(s.body));let n;for(let o=0;o<this.retryAttempts;o++)try{const l=new AbortController,v=setTimeout(()=>l.abort(),this.timeout),u=await fetch(i,{...s,signal:l.signal});if(clearTimeout(v),u.status===401)throw new Error("Authentication required");if(u.status===404){const f=new Error("Resource not found");throw f.code="NOT_FOUND",f}if(u.status===429){const f=u.headers.get("Retry-After");throw new Error(`Rate limited. Retry after ${f}s`)}if(!u.ok){const f=await u.json().catch(()=>({}));throw new Error(f.error?.message||`HTTP ${u.status}: ${u.statusText}`)}const p=await u.json();return p.data!==void 0?p:{data:p}}catch(l){if(n=l,l.message.includes("4")||l.name==="AbortError"||response?.status>=400&&response?.status<500)throw l;o<this.retryAttempts-1&&await this.delay(this.retryDelay*Math.pow(2,o))}throw n}generateRequestId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}delay(e){return new Promise(r=>setTimeout(r,e))}async getModel(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}`)}async getModelOptions(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/options`)}async getModelGroups(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/groups`)}async createConfiguration(e={}){const r={model_id:this.modelId,selections:this.formatSelections(e)};return this.request("/configurations",{method:"POST",body:r})}async updateConfiguration(e,r){const i={model_id:this.modelId,selections:this.formatSelections(r)};return this.request(`/configurations/${e}`,{method:"PUT",body:i})}async validateConfiguration(e){const r={model_id:this.modelId,selections:this.formatSelections(e)};return this.request("/configurations/validate-selection",{method:"POST",body:r})}async getConfiguration(e){return this.request(`/configurations/${e}`)}async deleteConfiguration(e){return this.request(`/configurations/${e}`,{method:"DELETE"})}async calculatePricing(e,r={}){const i={model_id:this.modelId,selections:this.formatSelections(e),context:r};return this.request("/pricing/calculate",{method:"POST",body:i})}async simulatePricing(e){const r={model_id:this.modelId,scenarios:e.map(i=>({...i,selections:this.formatSelections(i.selections)}))};return this.request("/pricing/simulate",{method:"POST",body:r})}async getVolumeTiers(){return this.request(`/pricing/volume-tiers/${this.modelId}`)}async getConfigurationAnalytics(e="30d"){return this.request(`/analytics/configurations?model_id=${this.modelId}&range=${e}`)}async getPricingAnalytics(e="30d"){return this.request(`/analytics/pricing?model_id=${this.modelId}&range=${e}`)}formatSelections(e){return Array.isArray(e)?e:Object.entries(e).filter(([r,i])=>i>0).map(([r,i])=>({option_id:r,quantity:i}))}setModelId(e){this.modelId=e}setAuthToken(e){this.authToken=e}}const ji="cpq_";function is(t,e){try{localStorage.setItem(ji+t,JSON.stringify(e))}catch(r){console.warn("Failed to persist data:",r)}}function ns(t){try{const e=localStorage.getItem(ji+t);return e?JSON.parse(e):null}catch(e){return console.warn("Failed to recover data:",e),null}}class ss{constructor(){le(this,Se);le(this,Ot,U(""));le(this,jt,U(null));le(this,Rt,U(Ue({})));le(this,zt,U(Ue({violations:[],isValid:!0})));le(this,qt,U(null));le(this,Nt,U(!1));le(this,Vt,U(!1));le(this,Ut,U(!1));le(this,Ft,U(null));le(this,Bt,U(0));le(this,Ht,U(null));le(this,Qt,U(null));le(this,Yt,U(!1));le(this,Gt,U(Ue([])));le(this,Jt,U(-1));zr(this,"maxHistorySize",50);le(this,Wt,U(Ue(navigator.onLine)));zr(this,"retryQueue",[]);le(this,pe,null);le(this,Et,!1);le(this,He,[])}get modelId(){return a(M(this,Ot))}set modelId(e){P(M(this,Ot),e,!0)}get model(){return a(M(this,jt))}set model(e){P(M(this,jt),e,!0)}get selections(){return a(M(this,Rt))}set selections(e){P(M(this,Rt),e,!0)}get validationResults(){return a(M(this,zt))}set validationResults(e){P(M(this,zt),e,!0)}get pricingData(){return a(M(this,qt))}set pricingData(e){P(M(this,qt),e,!0)}get isLoading(){return a(M(this,Nt))}set isLoading(e){P(M(this,Nt),e,!0)}get isValidating(){return a(M(this,Vt))}set isValidating(e){P(M(this,Vt),e,!0)}get isPricing(){return a(M(this,Ut))}set isPricing(e){P(M(this,Ut),e,!0)}get error(){return a(M(this,Ft))}set error(e){P(M(this,Ft),e,!0)}get currentStep(){return a(M(this,Bt))}set currentStep(e){P(M(this,Bt),e,!0)}get configurationId(){return a(M(this,Ht))}set configurationId(e){P(M(this,Ht),e,!0)}get lastSaved(){return a(M(this,Qt))}set lastSaved(e){P(M(this,Qt),e,!0)}get isDirty(){return a(M(this,Yt))}set isDirty(e){P(M(this,Yt),e,!0)}get history(){return a(M(this,Gt))}set history(e){P(M(this,Gt),e,!0)}get historyIndex(){return a(M(this,Jt))}set historyIndex(e){P(M(this,Jt),e,!0)}get isOnline(){return a(M(this,Wt))}set isOnline(e){P(M(this,Wt),e,!0)}get isValid(){return this.validationResults.isValid&&this.validationResults.violations.length===0}get totalPrice(){return this.pricingData?.total_price||0}get basePrice(){return this.pricingData?.base_price||0}get adjustments(){return this.pricingData?.adjustments||[]}get selectedOptions(){return this.model?.option_groups?this.model.option_groups.flatMap(e=>e.options.filter(r=>this.selections[r.id]>0).map(r=>({...r,quantity:this.selections[r.id],group_name:e.name}))):[]}get completionPercentage(){if(!this.model?.option_groups)return 0;const e=this.model.option_groups.filter(i=>i.required);if(!e.length)return 100;const r=e.filter(i=>i.options.some(s=>this.selections[s.id]>0));return Math.round(r.length/e.length*100)}get canProceedToNextStep(){return this.completionPercentage>=100&&this.isValid&&!this.isValidating}get canUndo(){return this.historyIndex>0}get canRedo(){return this.historyIndex<this.history.length-1}initialize(e=window.__API_BASE_URL__){M(this,Et)||(It(this,Et,!0),It(this,pe,new rs(e)),ht(this,Se,Bi).call(this),ht(this,Se,Ni).call(this),ht(this,Se,Vi).call(this))}destroy(){M(this,He).forEach(e=>e()),It(this,He,[]),It(this,pe,null),It(this,Et,!1)}setModelId(e){this.modelId!==e&&(this.modelId=e,(this.model||this.error)&&this.reset())}async loadModel(){if(!M(this,pe)||this.isLoading||!this.modelId){console.log("Skipping loadModel:",{api:!!M(this,pe),isLoading:this.isLoading,modelId:this.modelId});return}console.log("Loading model:",this.modelId),this.isLoading=!0,this.error=null;try{const e=await M(this,pe).getModel();if(console.log("Model loaded successfully:",e),this.model=e.data||e,this.model?.option_groups)for(const r of this.model.option_groups)r.required&&r.selection_type==="single"&&r.min_selections>0&&!r.options.some(s=>this.selections[s.id]>0)&&r.options.length>0&&(this.selections[r.options[0].id]=1)}catch(e){console.error("Failed to load model:",e),this.error={type:"load",message:e.message||"Failed to load model",code:e.code},!this.isOnline&&!e.message.includes("404")&&this.retryQueue.push(()=>this.loadModel())}finally{this.isLoading=!1}}updateSelection(e,r){const i={...this.selections};if(r>0?this.selections[e]=r:delete this.selections[e],this.model?.option_groups){const s=this.model.option_groups.flatMap(n=>n.options).find(n=>n.id===e);if(s){const n=this.model.option_groups.find(o=>o.options.some(l=>l.id===s.id));if(n?.selection_type==="single"&&r>0)for(const o of n.options)o.id!==e&&delete this.selections[o.id]}}JSON.stringify(i)!==JSON.stringify(this.selections)&&(this.isDirty=!0,ht(this,Se,Hi).call(this))}async validateSelections(){if(!(!M(this,pe)||this.isValidating)){this.isValidating=!0;try{const e=await M(this,pe).validateConfiguration(this.selections);this.validationResults={violations:e.data?.violations||[],isValid:e.data?.is_valid??!0}}catch(e){this.isOnline?this.error={type:"validation",message:e.message}:this.validationResults={violations:[],isValid:!0}}finally{this.isValidating=!1}}}async calculatePricing(){if(!(!M(this,pe)||this.isPricing)){this.isPricing=!0;try{const e=await M(this,pe).calculatePricing(this.selections);this.pricingData=e.data||e}catch(e){this.isOnline?this.error={type:"pricing",message:e.message}:this.pricingData=this.pricingData||null}finally{this.isPricing=!1}}}async saveConfiguration(){if(!(!M(this,pe)||!this.isDirty))try{let e;return this.configurationId?e=await M(this,pe).updateConfiguration(this.configurationId,this.selections):(e=await M(this,pe).createConfiguration(this.selections),this.configurationId=e.data?.id||e.id),this.lastSaved=new Date,this.isDirty=!1,e}catch(e){throw this.isOnline?this.error={type:"save",message:e.message}:this.retryQueue.push(()=>this.saveConfiguration()),e}}undo(){this.canUndo&&(this.historyIndex--,this.selections={...this.history[this.historyIndex].selections},this.isDirty=!0)}redo(){this.canRedo&&(this.historyIndex++,this.selections={...this.history[this.historyIndex].selections},this.isDirty=!0)}nextStep(){this.canProceedToNextStep&&(this.currentStep=Math.min(this.currentStep+1,3))}previousStep(){this.currentStep=Math.max(this.currentStep-1,0)}reset(){this.model=null,this.selections={},this.validationResults={violations:[],isValid:!0},this.pricingData=null,this.currentStep=0,this.configurationId=null,this.lastSaved=null,this.isDirty=!1,this.error=null,this.isLoading=!1,this.isValidating=!1,this.isPricing=!1,this.history=[],this.historyIndex=-1,this.retryQueue=[]}clearError(){this.error=null}}Ot=new WeakMap,jt=new WeakMap,Rt=new WeakMap,zt=new WeakMap,qt=new WeakMap,Nt=new WeakMap,Vt=new WeakMap,Ut=new WeakMap,Ft=new WeakMap,Bt=new WeakMap,Ht=new WeakMap,Qt=new WeakMap,Yt=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,Wt=new WeakMap,pe=new WeakMap,Et=new WeakMap,He=new WeakMap,Se=new WeakSet,Ni=function(){const e=mt(()=>{xe(()=>{this.modelId&&M(this,pe)&&!this.model&&!this.error&&(M(this,pe).modelId=this.modelId,this.loadModel())})});M(this,He).push(e);const r=jr(()=>{Object.keys(this.selections).length>0&&this.validateSelections()},300),i=mt(()=>{xe(()=>{JSON.stringify(this.selections),r()})});M(this,He).push(i);const s=jr(()=>{this.isValid&&Object.keys(this.selections).length>0&&this.calculatePricing()},500),n=mt(()=>{xe(()=>{this.isValid+JSON.stringify(this.selections),s()})});M(this,He).push(n);const o=jr(()=>{this.isDirty&&this.saveConfiguration()},2e3),l=mt(()=>{xe(()=>{this.isDirty&&o()})});M(this,He).push(l);const v=mt(()=>{xe(()=>{ht(this,Se,Fi).call(this)})});M(this,He).push(v)},Vi=function(){const e=()=>{this.isOnline=!0,ht(this,Se,Ui).call(this)},r=()=>{this.isOnline=!1};window.addEventListener("online",e),window.addEventListener("offline",r),M(this,He).push(()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)})},Ui=async function(){for(;this.retryQueue.length>0&&this.isOnline;){const e=this.retryQueue.shift();try{await e()}catch(r){console.error("Retry failed:",r)}}},Fi=function(){const e={modelId:this.modelId,selections:this.selections,configurationId:this.configurationId,currentStep:this.currentStep,lastSaved:this.lastSaved};is("cpq_config_state",e)},Bi=function(){const e=ns("cpq_config_state");e&&(this.modelId=e.modelId||"",this.selections=e.selections||{},this.configurationId=e.configurationId||null,this.currentStep=e.currentStep||0,this.lastSaved=e.lastSaved||null)},Hi=function(){this.history=this.history.slice(0,this.historyIndex+1),this.history.push({selections:{...this.selections},timestamp:Date.now()}),this.history.length>this.maxHistorySize&&(this.history=this.history.slice(-this.maxHistorySize)),this.historyIndex=this.history.length-1};const h=new ss;var as=Ar('<svg viewBox="0 0 20 20" fill="currentColor" class="svelte-fs3n5v"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),os=w('<div><div class="step-icon svelte-fs3n5v"><!></div> <span class="step-name svelte-fs3n5v"> </span></div>'),ls=w('<div class="progress-indicator svelte-fs3n5v"><div class="progress-bar svelte-fs3n5v"><div class="progress-fill svelte-fs3n5v"></div></div> <div class="progress-steps svelte-fs3n5v"></div> <div class="progress-text svelte-fs3n5v"> </div></div>');function us(t,e){let r=ye(e,"currentStep",3,0),i=ye(e,"completionPercentage",3,0);const s=[{name:"Configure",icon:"1"},{name:"Validate",icon:"2"},{name:"Price",icon:"3"},{name:"Complete",icon:"4"}];var n=ls(),o=c(n),l=c(o),v=m(o,2);Ne(v,21,()=>s,qe,(f,d,y)=>{var x=os();let B;var L=c(x),q=c(L);{var I=R=>{var H=as();_(R,H)},E=R=>{var H=wt();k(()=>D(H,a(d).icon)),_(R,H)};S(q,R=>{y<r()?R(I):R(E,!1)})}var b=m(L,2),A=c(b);k(R=>{B=he(x,1,"step svelte-fs3n5v",null,B,R),D(A,a(d).name)},[()=>({active:y===r(),completed:y<r()})]),_(f,x)});var u=m(v,2),p=c(u);k(()=>{Lr(l,`width: ${i()??""}%`),D(p,`${i()??""}% Complete`)}),_(t,n)}var vs=w('<p class="loading-message svelte-c70bjm"> </p>'),cs=w('<div><div class="spinner-content svelte-c70bjm"><div></div> <!></div></div>');function ds(t,e){let r=ye(e,"size",3,"medium"),i=ye(e,"message",3,""),s=ye(e,"overlay",3,!1);const n={small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"};var o=cs();let l;var v=c(o),u=c(v),p=m(u,2);{var f=d=>{var y=vs(),x=c(y);k(()=>D(x,i())),_(d,y)};S(p,d=>{i()&&d(f)})}k(d=>{l=he(o,1,"loading-spinner svelte-c70bjm",null,l,d),he(u,1,`spinner ${n[r()]??""}`,"svelte-c70bjm")},[()=>({overlay:s()})]),_(t,o)}function fs(t,e,r,i){P(e,!1),P(r,""),i()&&i()()}var _s=w('<button class="retry-btn svelte-me7lub">Try Again</button>'),hs=w('<div class="error-boundary svelte-me7lub"><div class="error-content svelte-me7lub"><svg class="error-icon svelte-me7lub" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> <h3 class="svelte-me7lub">Something went wrong</h3> <p class="svelte-me7lub"> </p> <!></div></div>');function ps(t,e){Ge(e,!0);let r=ye(e,"error",3,null),i=ye(e,"onRetry",3,null),s=ye(e,"fallback",3,null),n=U(!1),o=U("");xe(()=>{r()&&(P(n,!0),P(o,r().message||"An unexpected error occurred",!0))});var l=xt(),v=Re(l);{var u=f=>{var d=xt(),y=Re(d);{var x=L=>{var q=xt(),I=Re(q);Ii(I,s),_(L,q)},B=L=>{var q=hs(),I=c(q),E=m(c(I),4),b=c(E),A=m(E,2);{var R=H=>{var Z=_s();Z.__click=[fs,n,o,i],_(H,Z)};S(A,H=>{i()&&H(R)})}k(()=>D(b,a(o))),_(L,q)};S(y,L=>{s()?L(x):L(B,!1)})}_(f,d)},p=f=>{var d=xt(),y=Re(d);Ii(y,()=>e.children??Ur),_(f,d)};S(v,f=>{a(n)?f(u):f(p,!1)})}_(t,l),Je()}ot(["click"]);function gs(t){const{items:e,itemHeight:r,containerHeight:i,buffer:s=5}=t;let n=$state(0),o=$derived(Math.floor(n/r)),l=$derived(Math.ceil((n+i)/r)),v=$derived(Math.max(0,o-s)),u=$derived(Math.min(e.length,l+s)),p=$derived(v*r);return{visibleItems:$derived(e.slice(v,u)),totalHeight:e.length*r,offsetY:p,updateScroll(f){n=f}}}function Be(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}function ms(t,e,r,i,s){if(e.group.selection_type==="single"){const n=a(r)?0:1;P(i,n,!0),h.updateSelection(e.option.id,n)}else s(a(r)?-a(i):1)}var ys=w('<span class="option-sku svelte-cwem91"> </span>'),bs=w('<span class="price-unit svelte-cwem91"> </span>'),ws=w('<p class="option-description svelte-cwem91"> </p>'),xs=w('<span class="attribute svelte-cwem91"><span class="attribute-key svelte-cwem91"> </span> <span class="attribute-value svelte-cwem91"> </span></span>'),Ss=w('<div class="option-attributes svelte-cwem91"></div>'),Es=w('<div class="error-text svelte-cwem91"> </div>'),Is=w('<div class="option-errors svelte-cwem91"></div>'),Cs=w('<label class="radio-control svelte-cwem91"><input type="radio" class="radio-input svelte-cwem91"/> <span class="radio-label svelte-cwem91">Select</span></label>'),ks=(t,e)=>e(-1),Ts=(t,e)=>e(parseInt(t.target.value)||0),Ds=(t,e)=>e(1),Ms=w('<div class="quantity-total svelte-cwem91"> </div>'),As=w('<div class="quantity-controls svelte-cwem91"><button type="button" class="quantity-btn svelte-cwem91" aria-label="Decrease quantity"><svg class="icon svelte-cwem91" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" class="svelte-cwem91"></path></svg></button> <input type="number" class="quantity-input svelte-cwem91" min="0"/> <button type="button" class="quantity-btn svelte-cwem91" aria-label="Increase quantity"><svg class="icon svelte-cwem91" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" class="svelte-cwem91"></path></svg></button></div> <!>',1),Ls=w('<div class="availability-warning svelte-cwem91">Limited availability</div>'),Ps=w('<div class="availability-error svelte-cwem91">Out of stock</div>'),Os=w('<div><div class="option-header svelte-cwem91"><div class="option-info svelte-cwem91"><h4 class="option-name svelte-cwem91"> </h4> <!></div> <div class="option-price svelte-cwem91"> <!></div></div> <!> <!> <!> <div class="option-controls svelte-cwem91"><!></div> <!></div>');function Ri(t,e){Ge(e,!0);let r=U(Ue(h.selections[e.option.id]||0)),i=Me(()=>a(r)>0),s=!1;const n=ts(g=>{h.updateSelection(e.option.id,g)},100);let o=Me(()=>h.validationResults.violations.filter(g=>g.option_id===e.option.id));function l(g){const C=Math.max(0,a(r)+g);if(e.group.max_selections&&g>0){const T=e.group.options.filter(j=>h.selections[j.id]>0).length;if(!a(i)&&T>=e.group.max_selections)return}P(r,C,!0),n(C)}xe(()=>{P(r,h.selections[e.option.id]||0,!0)});var v=Os();let u;var p=c(v),f=c(p),d=c(f),y=c(d),x=m(d,2);{var B=g=>{var C=ys(),T=c(C);k(()=>D(T,`SKU: ${e.option.sku??""}`)),_(g,C)};S(x,g=>{e.option.sku&&g(B)})}var L=m(f,2),q=c(L),I=m(q);{var E=g=>{var C=bs(),T=c(C);k(()=>D(T,`/${e.option.price_unit??""}`)),_(g,C)};S(I,g=>{e.option.price_unit&&g(E)})}var b=m(p,2);{var A=g=>{var C=ws(),T=c(C);k(()=>D(T,e.option.description)),_(g,C)};S(b,g=>{e.option.description&&g(A)})}var R=m(b,2);{var H=g=>{var C=Ss();Ne(C,21,()=>Object.entries(e.option.attributes),qe,(T,j)=>{var N=Me(()=>Wi(a(j),2));let te=()=>a(N)[0],V=()=>a(N)[1];var ce=xs(),ae=c(ce),ne=c(ae),fe=m(ae,2),Pe=c(fe);k(()=>{D(ne,`${te()??""}:`),D(Pe,V())}),_(T,ce)}),_(g,C)};S(R,g=>{e.option.attributes&&Object.keys(e.option.attributes).length>0&&g(H)})}var Z=m(R,2);{var ee=g=>{var C=Is();Ne(C,21,()=>a(o),qe,(T,j)=>{var N=Es(),te=c(N);k(()=>D(te,a(j).message)),_(T,N)}),_(g,C)};S(Z,g=>{a(o).length>0&&g(ee)})}var $=m(Z,2),de=c($);{var Ee=g=>{var C=Cs(),T=c(C);T.__change=[ms,e,i,r,l],k(()=>{Pt(T,"name",`group-${e.group.id}`),Kn(T,a(i))}),_(g,C)},Qe=g=>{var C=As(),T=Re(C),j=c(T);j.__click=[ks,l];var N=m(j,2);N.__change=[Ts,n];var te=m(N,2);te.__click=[Ds,l];var V=m(T,2);{var ce=ae=>{var ne=Ms(),fe=c(ne);k(Pe=>D(fe,`Total: ${Pe??""}`),[()=>Be(e.option.base_price*a(r))]),_(ae,ne)};S(V,ae=>{a(r)>0&&ae(ce)})}k(()=>{j.disabled=a(r)===0,Pt(N,"max",e.option.max_quantity||999),te.disabled=e.option.max_quantity&&a(r)>=e.option.max_quantity}),Di(N,()=>a(r),ae=>P(r,ae)),_(g,C)};S(de,g=>{e.group.selection_type==="single"?g(Ee):g(Qe,!1)})}var Ie=m($,2);{var O=g=>{var C=Ls();_(g,C)},z=(g,C)=>{{var T=j=>{var N=Ps();_(j,N)};S(g,j=>{e.option.availability==="out_of_stock"&&j(T)},C)}};S(Ie,g=>{e.option.availability==="limited"?g(O):g(z,!1)})}k((g,C)=>{u=he(v,1,"option-card svelte-cwem91",null,u,g),D(y,e.option.name),D(q,`${C??""} `)},[()=>({selected:a(i),"has-errors":a(o).length>0,loading:s}),()=>Be(e.option.base_price)]),_(t,v),Je()}ot(["change","click"]);var js=(t,e)=>P(e,!a(e)),Rs=w('<span class="required-badge svelte-4o0mr">Required</span>'),zs=w('<span class="selection-type">Single selection</span>'),qs=w('<span class="selection-type">Multiple selection <!></span>'),Ns=w('<span class="selection-count svelte-4o0mr"> </span>'),Vs=w('<p class="group-description svelte-4o0mr"> </p>'),Us=w('<div class="error-message svelte-4o0mr"><svg class="error-icon svelte-4o0mr" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> </div>'),Fs=w('<div class="group-errors svelte-4o0mr"></div>'),Bs=w('<div class="search-box svelte-4o0mr"><input type="search" placeholder="Search options..." class="search-input svelte-4o0mr"/></div>'),Hs=w('<div class="virtual-scroll-container svelte-4o0mr" style="height: 600px"><div><div></div></div></div>'),Qs=w('<div class="options-grid svelte-4o0mr"></div>'),Ys=w('<div class="no-results svelte-4o0mr"> </div>'),Gs=w('<div class="group-content svelte-4o0mr"><!> <!> <!> <div><!></div> <!></div>'),Js=w('<div><div class="group-header svelte-4o0mr"><div class="header-content svelte-4o0mr"><h3 class="group-title svelte-4o0mr"> <!></h3> <div class="group-meta svelte-4o0mr"><!> <!></div></div> <button class="expand-toggle svelte-4o0mr"><svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div> <!></div>');function Ws(t,e){Ge(e,!0);let r=U(!0),i=U(""),s=U(!1),n=U(null),o,l=Me(()=>e.group.options.filter(O=>O.name.toLowerCase().includes(a(i).toLowerCase())||O.description?.toLowerCase().includes(a(i).toLowerCase())));xe(()=>{a(l).length>20?(P(s,!0),P(n,gs({items:a(l),itemHeight:120,containerHeight:600,buffer:3}),!0)):(P(s,!1),P(n,null))});let v=Me(()=>e.group.options.some(O=>h.selections[O.id]>0)),u=Me(()=>h.validationResults.violations.some(O=>O.group_id===e.group.id||e.group.options.some(z=>O.option_id===z.id))),p=Me(()=>h.validationResults.violations.filter(O=>O.group_id===e.group.id||e.group.options.some(z=>O.option_id===z.id)));function f(O){a(n)&&a(n).updateScroll(O.target.scrollTop)}var d=Js();let y;var x=c(d);x.__click=[js,r];var B=c(x),L=c(B),q=c(L),I=m(q);{var E=O=>{var z=Rs();_(O,z)};S(I,O=>{e.group.required&&O(E)})}var b=m(L,2),A=c(b);{var R=O=>{var z=zs();_(O,z)},H=(O,z)=>{{var g=C=>{var T=qs(),j=m(c(T));{var N=te=>{var V=wt();k(()=>D(V,`(${(e.group.min_selections||0)??""}-${e.group.max_selections||"∞"})`)),_(te,V)};S(j,te=>{(e.group.min_selections>0||e.group.max_selections)&&te(N)})}_(C,T)};S(O,C=>{e.group.selection_type==="multiple"&&C(g)},z)}};S(A,O=>{e.group.selection_type==="single"?O(R):O(H,!1)})}var Z=m(A,2);{var ee=O=>{var z=Ns(),g=c(z);k(C=>D(g,`${C??""} selected`),[()=>e.group.options.filter(C=>h.selections[C.id]>0).length]),_(O,z)};S(Z,O=>{a(v)&&O(ee)})}var $=m(B,2),de=c($);let Ee;var Qe=m(x,2);{var Ie=O=>{var z=Gs(),g=c(z);{var C=F=>{var G=Vs(),oe=c(G);k(()=>D(oe,e.group.description)),_(F,G)};S(g,F=>{e.group.description&&F(C)})}var T=m(g,2);{var j=F=>{var G=Fs();Ne(G,21,()=>a(p),qe,(oe,ge)=>{var Ce=Us(),Q=m(c(Ce));k(()=>D(Q,` ${a(ge).message??""}`)),_(oe,Ce)}),_(F,G)};S(T,F=>{a(p).length>0&&F(j)})}var N=m(T,2);{var te=F=>{var G=Bs(),oe=c(G);Di(oe,()=>a(i),ge=>P(i,ge)),_(F,G)};S(N,F=>{a(l).length>10&&F(te)})}var V=m(N,2);let ce;var ae=c(V);{var ne=F=>{var G=Hs(),oe=c(G),ge=c(oe);Ne(ge,21,()=>a(n)?.visibleItems||[],qe,(Ce,Q)=>{Ri(Ce,{get option(){return a(Q)},get group(){return e.group}})}),Ai(G,Ce=>o=Ce,()=>o),k(()=>{Lr(oe,`height: ${(a(n)?.totalHeight||0)??""}px; position: relative;`),Lr(ge,`transform: translateY(${(a(n)?.offsetY||0)??""}px);`)}),Rn("scroll",G,f),_(F,G)},fe=F=>{var G=Qs();Ne(G,21,()=>a(l),qe,(oe,ge)=>{Ri(oe,{get option(){return a(ge)},get group(){return e.group}})}),_(F,G)};S(ae,F=>{a(s)&&a(n)?F(ne):F(fe,!1)})}var Pe=m(V,2);{var Ye=F=>{var G=Ys(),oe=c(G);k(()=>D(oe,`No options found matching "${a(i)??""}"`)),_(F,G)};S(Pe,F=>{a(l).length===0&&F(Ye)})}k(F=>ce=he(V,1,"options-container",null,ce,F),[()=>({virtual:a(s)})]),_(O,z)};S(Qe,O=>{a(r)&&O(Ie)})}k((O,z)=>{y=he(d,1,"option-group svelte-4o0mr",null,y,O),D(q,`${e.group.name??""} `),Pt($,"aria-label",a(r)?"Collapse":"Expand"),Ee=he(de,0,"icon svelte-4o0mr",null,Ee,z)},[()=>({"has-errors":a(u)}),()=>({rotated:a(r)})]),_(t,d),Je()}ot(["click"]);var Ks=w('<span class="calculating svelte-jzost2"><span class="spinner svelte-jzost2"></span> Calculating...</span>'),Xs=(t,e)=>P(e,!a(e)),Zs=w('<button class="toggle-btn svelte-jzost2"> </button>'),$s=w('<div class="price-row savings svelte-jzost2"><span>Total Savings</span> <span> </span></div>'),ea=w('<div class="price-per-unit svelte-jzost2"> </div>'),ta=w('<span class="item-quantity svelte-jzost2"> </span>'),ra=w('<div class="item-group svelte-jzost2"> </div>'),ia=w('<div class="item-reason svelte-jzost2"> </div>'),na=w('<span class="percentage svelte-jzost2"> </span>'),sa=w("<span> <!></span>"),aa=w('<div><div class="item-info svelte-jzost2"><div class="item-name svelte-jzost2"> <!></div> <!> <!></div> <div class="item-price svelte-jzost2"><!></div></div>'),oa=w('<div class="pricing-breakdown svelte-jzost2"><h4 class="breakdown-title svelte-jzost2">Price Breakdown</h4> <div class="breakdown-items svelte-jzost2"></div></div>'),la=(t,e)=>P(e,!a(e)),ua=w('<div class="discount-item svelte-jzost2"><div><div class="discount-name svelte-jzost2"> </div> <div class="discount-tier svelte-jzost2"> </div></div> <div class="discount-save svelte-jzost2"> </div></div>'),va=w('<div class="volume-details svelte-jzost2"></div>'),ca=w('<div class="volume-discounts svelte-jzost2"><button class="volume-header svelte-jzost2"><span>Volume Discounts Applied</span> <span class="discount-amount svelte-jzost2"> </span></button> <!></div>'),da=w('<div class="pricing-summary svelte-jzost2"><div class="price-row subtotal svelte-jzost2"><span>Subtotal</span> <span> </span></div> <!> <div class="price-row total svelte-jzost2"><span>Total Price</span> <span class="total-amount svelte-jzost2"> </span></div> <!></div> <!> <!>',1),fa=w('<div class="no-selections svelte-jzost2"><p>Select options to see pricing</p></div>'),_a=w('<div class="pricing-display svelte-jzost2"><div class="pricing-header svelte-jzost2"><h3 class="pricing-title svelte-jzost2">Pricing Summary <!></h3> <!></div> <!></div>');function ha(t,e){Ge(e,!0);let r=ye(e,"detailed",3,!0),i=U(Ue(r())),s=U(!1),n=Me(()=>()=>{if(!h.pricingData)return null;const I=h.pricingData,E=[];return h.selectedOptions.forEach(b=>{E.push({type:"option",name:b.name,quantity:b.quantity,unitPrice:b.base_price,total:b.base_price*b.quantity,group:b.group_name})}),I.adjustments&&I.adjustments.forEach(b=>{E.push({type:"adjustment",name:b.description||b.type,reason:b.reason,amount:b.amount,percentage:b.percentage})}),E}),o=Me(()=>()=>h.pricingData?.adjustments?h.pricingData.adjustments.filter(I=>I.type==="volume_discount").map(I=>({...I,saved:Math.abs(I.amount)})):[]),l=Me(()=>()=>h.pricingData?.adjustments?h.pricingData.adjustments.filter(I=>I.amount<0).reduce((I,E)=>I+Math.abs(E.amount),0):0);var v=_a(),u=c(v),p=c(u),f=m(c(p));{var d=I=>{var E=Ks();_(I,E)};S(f,I=>{h.isPricing&&I(d)})}var y=m(p,2);{var x=I=>{var E=Zs();E.__click=[Xs,i];var b=c(E);k(()=>D(b,`${a(i)?"Hide":"Show"} Details`)),_(I,E)};S(y,I=>{r()&&a(n)&&a(n).length>0&&I(x)})}var B=m(u,2);{var L=I=>{var E=da(),b=Re(E),A=c(b),R=m(c(A),2),H=c(R),Z=m(A,2);{var ee=T=>{var j=$s(),N=m(c(j),2),te=c(N);k(V=>D(te,`-${V??""}`),[()=>Be(a(l))]),_(T,j)};S(Z,T=>{a(l)>0&&T(ee)})}var $=m(Z,2),de=m(c($),2),Ee=c(de),Qe=m($,2);{var Ie=T=>{var j=ea(),N=c(j);k(te=>D(N,`${te??""} per unit`),[()=>Be(h.pricingData.price_per_unit)]),_(T,j)};S(Qe,T=>{h.pricingData.price_per_unit&&T(Ie)})}var O=m(b,2);{var z=T=>{var j=oa(),N=m(c(j),2);Ne(N,21,()=>a(n),qe,(te,V)=>{var ce=aa(),ae=c(ce),ne=c(ae),fe=c(ne),Pe=m(fe);{var Ye=W=>{var ue=ta(),_e=c(ue);k(()=>D(_e,`×${a(V).quantity??""}`)),_(W,ue)};S(Pe,W=>{a(V).quantity>1&&W(Ye)})}var F=m(ne,2);{var G=W=>{var ue=ra(),_e=c(ue);k(()=>D(_e,a(V).group)),_(W,ue)};S(F,W=>{a(V).group&&W(G)})}var oe=m(F,2);{var ge=W=>{var ue=ia(),_e=c(ue);k(()=>D(_e,a(V).reason)),_(W,ue)};S(oe,W=>{a(V).reason&&W(ge)})}var Ce=m(ae,2),Q=c(Ce);{var se=W=>{var ue=wt();k(_e=>D(ue,_e),[()=>Be(a(V).total)]),_(W,ue)},Oe=(W,ue)=>{{var _e=Ze=>{var re=sa();let je;var $e=c(re),_t=m($e);{var be=ke=>{var nt=na(),Rr=c(nt);k(()=>D(Rr,`(${a(V).percentage??""}%)`)),_(ke,nt)};S(_t,ke=>{a(V).percentage&&ke(be)})}k((ke,nt)=>{je=he(re,1,"svelte-jzost2",null,je,ke),D($e,`${a(V).amount<0?"-":"+"}${nt??""} `)},[()=>({discount:a(V).amount<0}),()=>Be(Math.abs(a(V).amount))]),_(Ze,re)};S(W,Ze=>{a(V).type==="adjustment"&&Ze(_e)},ue)}};S(Q,W=>{a(V).type==="option"?W(se):W(Oe,!1)})}k(()=>{he(ce,1,`breakdown-item type-${a(V).type??""}`,"svelte-jzost2"),D(fe,`${a(V).name??""} `)}),_(te,ce)}),_(T,j)};S(O,T=>{a(i)&&a(n)&&T(z)})}var g=m(O,2);{var C=T=>{var j=ca(),N=c(j);N.__click=[la,s];var te=m(c(N),2),V=c(te),ce=m(N,2);{var ae=ne=>{var fe=va();Ne(fe,21,()=>a(o),qe,(Pe,Ye)=>{var F=ua(),G=c(F),oe=c(G),ge=c(oe),Ce=m(oe,2),Q=c(Ce),se=m(G,2),Oe=c(se);k(W=>{D(ge,a(Ye).description),D(Q,`Tier: ${a(Ye).tier_name||"Volume"}`),D(Oe,`Save ${W??""}`)},[()=>Be(a(Ye).saved)]),_(Pe,F)}),_(ne,fe)};S(ce,ne=>{a(s)&&ne(ae)})}k(ne=>D(V,`Save ${ne??""}`),[()=>Be(a(o).reduce((ne,fe)=>ne+fe.saved,0))]),_(T,j)};S(g,T=>{a(o).length>0&&T(C)})}k((T,j)=>{D(H,T),D(Ee,j)},[()=>Be(h.basePrice),()=>Be(h.totalPrice)]),_(I,E)},q=(I,E)=>{{var b=A=>{var R=fa();_(A,R)};S(I,A=>{!h.isPricing&&h.selectedOptions.length===0&&A(b)},E)}};S(B,I=>{h.pricingData?I(L):I(q,!1)})}_(t,v),Je()}ot(["click"]);var pa=w('<span class="validating-indicator svelte-hbmmex"><span class="spinner svelte-hbmmex"></span> Checking...</span>'),ga=Ar('<svg class="status-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> Valid',1),ma=Ar('<svg class="status-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> ',1),ya=w("<div><!></div>"),ba=(t,e)=>P(e,"all"),wa=(t,e)=>P(e,"error"),xa=w("<button> </button>"),Sa=(t,e)=>P(e,"warning"),Ea=w("<button> </button>"),Ia=(t,e)=>P(e,"info"),Ca=w("<button> </button>"),ka=w('<div class="violation-details svelte-hbmmex"> </div>'),Ta=w('<span class="affected-option svelte-hbmmex"> </span> <!>',1),Da=w('<div class="affected-options svelte-hbmmex">Affects: <!></div>'),Ma=w('<div class="rule-expression svelte-hbmmex">Rule: <code class="svelte-hbmmex"> </code></div>'),Aa=w("<li> </li>"),La=w('<div class="violation-suggestions svelte-hbmmex"><div class="suggestions-title svelte-hbmmex">Suggestions:</div> <ul class="suggestions-list svelte-hbmmex"></ul></div>'),Pa=(t,e,r)=>e(a(r)),Oa=w('<button class="auto-fix-btn svelte-hbmmex"><svg class="fix-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path></svg> Auto-fix</button>'),ja=w('<div><div class="violation-header svelte-hbmmex"><svg class="violation-icon svelte-hbmmex" viewBox="0 0 20 20"><!></svg> <div class="violation-content svelte-hbmmex"><div class="violation-message svelte-hbmmex"> </div> <!> <!> <!></div></div> <!> <!></div>'),Ra=w('<div class="validation-filters svelte-hbmmex"><button> </button> <!> <!> <!></div> <div class="violations-list svelte-hbmmex"></div>',1),za=w('<div class="valid-message svelte-hbmmex"><svg class="valid-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <p class="svelte-hbmmex">Your configuration is valid and meets all requirements.</p></div>'),qa=w('<div class="validation-display svelte-hbmmex"><div class="validation-header svelte-hbmmex"><h3 class="validation-title svelte-hbmmex">Configuration Validation <!></h3> <!></div> <!></div>');function Na(t,e){Ge(e,!0);let r=!0,i=U("all"),s=Me(()=>()=>{const E=h.validationResults.violations||[],b={error:[],warning:[],info:[]};return E.forEach(A=>{const R=A.severity||"error";b[R]&&b[R].push(A)}),b}),n=Me(()=>()=>a(i)==="all"?h.validationResults.violations||[]:a(s)()[a(i)]||[]);function o(E){switch(E){case"warning":return'<path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />';case"info":return'<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />';default:return'<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />'}}function l(E){switch(E){case"warning":return"var(--warning)";case"info":return"var(--primary)";default:return"var(--error)"}}function v(E){if(E.auto_fix_action){const b=E.auto_fix_action;b.type==="add_selection"?h.updateSelection(b.option_id,b.quantity||1):b.type==="remove_selection"&&h.updateSelection(b.option_id,0)}}var u=qa(),p=c(u),f=c(p),d=m(c(f));{var y=E=>{var b=pa();_(E,b)};S(d,E=>{h.isValidating&&E(y)})}var x=m(f,2);{var B=E=>{var b=ya();let A;var R=c(b);{var H=ee=>{var $=ga();_(ee,$)},Z=ee=>{var $=ma(),de=m(Re($));k(()=>D(de,`${a(n).length??""} Issues`)),_(ee,$)};S(R,ee=>{h.isValid?ee(H):ee(Z,!1)})}k(ee=>A=he(b,1,"validation-status svelte-hbmmex",null,A,ee),[()=>({valid:h.isValid})]),_(E,b)};S(x,E=>{h.isValidating||E(B)})}var L=m(p,2);{var q=E=>{var b=Ra(),A=Re(b),R=c(A);let H;R.__click=[ba,i];var Z=c(R),ee=m(R,2);{var $=z=>{var g=xa();let C;g.__click=[wa,i];var T=c(g);k((j,N)=>{C=he(g,1,"filter-btn error svelte-hbmmex",null,C,j),D(T,`Errors (${N??""})`)},[()=>({active:a(i)==="error"}),()=>a(s)().error.length]),_(z,g)};S(ee,z=>{a(s)().error.length>0&&z($)})}var de=m(ee,2);{var Ee=z=>{var g=Ea();let C;g.__click=[Sa,i];var T=c(g);k((j,N)=>{C=he(g,1,"filter-btn warning svelte-hbmmex",null,C,j),D(T,`Warnings (${N??""})`)},[()=>({active:a(i)==="warning"}),()=>a(s)().warning.length]),_(z,g)};S(de,z=>{a(s)().warning.length>0&&z(Ee)})}var Qe=m(de,2);{var Ie=z=>{var g=Ca();let C;g.__click=[Ia,i];var T=c(g);k((j,N)=>{C=he(g,1,"filter-btn info svelte-hbmmex",null,C,j),D(T,`Info (${N??""})`)},[()=>({active:a(i)==="info"}),()=>a(s)().info.length]),_(z,g)};S(Qe,z=>{a(s)().info.length>0&&z(Ie)})}var O=m(A,2);Ne(O,21,()=>a(n),qe,(z,g)=>{var C=ja(),T=c(C),j=c(T),N=c(j);Qn(N,()=>o(a(g).severity||"error"),!0);var te=m(j,2),V=c(te),ce=c(V),ae=m(V,2);{var ne=Q=>{var se=ka(),Oe=c(se);k(()=>D(Oe,a(g).details)),_(Q,se)};S(ae,Q=>{a(g).details&&Q(ne)})}var fe=m(ae,2);{var Pe=Q=>{var se=Da(),Oe=m(c(se));Ne(Oe,17,()=>a(g).affected_options,qe,(W,ue,_e)=>{var Ze=Ta(),re=Re(Ze),je=c(re),$e=m(re,2);{var _t=be=>{var ke=wt(",");_(be,ke)};S($e,be=>{_e<a(g).affected_options.length-1&&be(_t)})}k(be=>D(je,be),[()=>h.model?.option_groups.flatMap(be=>be.options).find(be=>be.id===a(ue))?.name||a(ue)]),_(W,Ze)}),_(Q,se)};S(fe,Q=>{a(g).affected_options&&a(g).affected_options.length>0&&Q(Pe)})}var Ye=m(fe,2);{var F=Q=>{var se=Ma(),Oe=m(c(se)),W=c(Oe);k(()=>D(W,a(g).rule_expression)),_(Q,se)};S(Ye,Q=>{a(g).rule_expression&&r&&Q(F)})}var G=m(T,2);{var oe=Q=>{var se=La(),Oe=m(c(se),2);Ne(Oe,21,()=>a(g).suggestions,qe,(W,ue)=>{var _e=Aa(),Ze=c(_e);k(()=>D(Ze,a(ue))),_(W,_e)}),_(Q,se)};S(G,Q=>{a(g).suggestions&&a(g).suggestions.length>0&&Q(oe)})}var ge=m(G,2);{var Ce=Q=>{var se=Oa();se.__click=[Pa,v,g],_(Q,se)};S(ge,Q=>{a(g).auto_fix_action&&Q(Ce)})}k(Q=>{he(C,1,`violation-item severity-${a(g).severity||"error"}`,"svelte-hbmmex"),Pt(j,"fill",Q),D(ce,a(g).message)},[()=>l(a(g).severity||"error")]),_(z,C)}),k(z=>{H=he(R,1,"filter-btn svelte-hbmmex",null,H,z),D(Z,`All (${h.validationResults.violations.length??""})`)},[()=>({active:a(i)==="all"})]),_(E,b)},I=(E,b)=>{{var A=R=>{var H=za();_(R,H)};S(E,R=>{h.isValid&&!h.isValidating&&R(A)},b)}};S(L,E=>{!h.isValid&&a(n).length>0?E(q):E(I,!1)})}_(t,u),Je()}ot(["click"]),on();async function Va(){try{await h.saveConfiguration()}catch(t){console.error("Failed to save:",t)}}var Ua=w('<div class="configuration-summary svelte-31i1s8"><h3 class="svelte-31i1s8">Configuration Summary</h3> <div class="summary-stats svelte-31i1s8"><div class="stat svelte-31i1s8"><span class="stat-value svelte-31i1s8"> </span> <span class="stat-label svelte-31i1s8">Options Selected</span></div> <div class="stat svelte-31i1s8"><span class="stat-value svelte-31i1s8"> </span> <span class="stat-label svelte-31i1s8">Total Price</span></div></div> <div class="summary-actions svelte-31i1s8"><button class="action-btn primary svelte-31i1s8">Save Configuration</button> <button class="action-btn secondary svelte-31i1s8">Export</button></div></div>');function Fa(t,e){Ge(e,!1);function r(){const x={modelId:h.modelId,modelName:h.model?.name,selections:h.selections,pricing:h.pricingData,timestamp:new Date().toISOString()},B=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),L=URL.createObjectURL(B),q=document.createElement("a");q.href=L,q.download=`configuration-${Date.now()}.json`,q.click(),URL.revokeObjectURL(L)}Li();var i=Ua(),s=m(c(i),2),n=c(s),o=c(n),l=c(o),v=m(n,2),u=c(v),p=c(u),f=m(s,2),d=c(f);d.__click=[Va];var y=m(d,2);y.__click=r,k(x=>{D(l,h.selectedOptions.length),D(p,x)},[()=>Be(h.totalPrice)],Xr),_(t,i),Je()}ot(["click"]);var Ba=w(`<div class="network-banner offline svelte-id3e46"><svg class="icon svelte-id3e46" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd"></path><path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"></path></svg> <span>You're offline - changes will be saved when connection is restored</span></div>`);function Ha(t,e){Ge(e,!0);let r=U(!1);xe(()=>{P(r,!h.isOnline)});var i=xt(),s=Re(i);{var n=o=>{var l=Ba();_(o,l)};S(s,o=>{a(r)&&o(n)})}_(t,i),Je()}var Qa=()=>h.undo(),Ya=()=>h.redo(),Ga=w('<div class="undo-redo svelte-2vt889"><button class="action-btn svelte-2vt889" title="Undo"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-2vt889"><path d="M12.207 2.293a1 1 0 010 1.414L10.914 5H13a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5h-2.586l1.293 1.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z"></path></svg></button> <button class="action-btn svelte-2vt889" title="Redo"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-2vt889"><path d="M7.793 2.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L9.086 7H7a5 5 0 00-5 5v2a1 1 0 11-2 0v-2a7 7 0 017-7h2.586L7.793 3.707a1 1 0 010-1.414z"></path></svg></button></div>');function Ja(t,e){Ge(e,!1),Li();var r=Ga(),i=c(r);i.__click=[Qa];var s=m(i,2);s.__click=[Ya],k(()=>{i.disabled=!h.canUndo,s.disabled=!h.canRedo}),_(t,r),Je()}ot(["click"]);var Wa=w('<div class="error-state svelte-1m2ujmu"><svg class="error-icon svelte-1m2ujmu" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <h2 class="svelte-1m2ujmu">Model Not Found</h2> <p class="svelte-1m2ujmu"> </p> <p class="error-details svelte-1m2ujmu">Please check the model ID and try again.</p></div>'),Ka=w('<p class="configurator-description svelte-1m2ujmu"> </p>'),Xa=()=>h.previousStep(),Za=w('<span class="save-indicator svelte-1m2ujmu"><!></span>'),$a=(t,e)=>{h.currentStep===3?e():h.nextStep()},eo=w('<div class="configurator-header svelte-1m2ujmu"><div class="header-content"><h1 class="configurator-title svelte-1m2ujmu"> </h1> <!></div> <!></div> <!> <div><div class="options-panel svelte-1m2ujmu"><!></div> <div class="sidebar-panel svelte-1m2ujmu"><!> <!> <!></div></div> <div class="configurator-actions svelte-1m2ujmu"><button type="button" class="btn btn-secondary svelte-1m2ujmu">Previous</button> <div class="action-group svelte-1m2ujmu"><!> <button type="button" class="btn btn-primary svelte-1m2ujmu"> </button></div></div>',1),to=w('<div class="no-model svelte-1m2ujmu"><p>No model selected</p></div>'),ro=w('<div class="configurator-content svelte-1m2ujmu"><!></div>'),io=w("<div><!> <!></div>");function no(t,e){Ge(e,!0);let r=ye(e,"theme",3,"light"),i=ye(e,"apiUrl",3,"http://localhost:8080/api/v1"),s=ye(e,"embedMode",3,!1),n=ye(e,"onComplete",3,null),o=ye(e,"onConfigurationChange",3,null),l=ye(e,"onError",3,null),v;typeof window<"u"&&(window.__API_BASE_URL__=i()),Oi(()=>{if(h.initialize(i()),e.modelId&&setTimeout(()=>{h.setModelId(e.modelId)},0),document.documentElement.setAttribute("data-theme",r()),o()){const L=mt(()=>{xe(()=>{h.isDirty&&h.selections&&o()({selections:h.selections,validation:h.validationResults,pricing:h.pricingData})})});return()=>L()}}),Zn(()=>{h.destroy()});function u(){const L={modelId:h.modelId,selections:h.selections,pricing:h.pricingData,validation:h.validationResults};n()&&n()(L)}function p(L){console.error("Configuration error:",L),l()&&l()(L)}function f(){h.clearError(),h.loadModel()}xe(()=>{h.error&&p(h.error)});var d=io();let y;var x=c(d);Ha(x,{});var B=m(x,2);ps(B,{get error(){return h.error},onRetry:f,children:q=>{var I=ro(),E=c(I);{var b=R=>{var H=Wa(),Z=m(c(H),4),ee=c(Z);k(()=>D(ee,`The model with ID "${e.modelId??""}" could not be found.`)),_(R,H)},A=(R,H)=>{{var Z=$=>{ds($,{size:"large",message:"Loading configuration..."})},ee=($,de)=>{{var Ee=Ie=>{var O=eo(),z=Re(O),g=c(z),C=c(g),T=c(C),j=m(C,2);{var N=re=>{var je=Ka(),$e=c(je);k(()=>D($e,h.model.description)),_(re,je)};S(j,re=>{h.model.description&&re(N)})}var te=m(g,2);Ja(te,{});var V=m(z,2);us(V,{get currentStep(){return h.currentStep},get completionPercentage(){return h.completionPercentage}});var ce=m(V,2);let ae;var ne=c(ce),fe=c(ne);{var Pe=re=>{var je=xt(),$e=Re(je);Ne($e,17,()=>h.model.option_groups,qe,(_t,be)=>{Ws(_t,{get group(){return a(be)}})}),_(re,je)};S(fe,re=>{h.model.option_groups&&re(Pe)})}var Ye=m(ne,2),F=c(Ye);Na(F,{});var G=m(F,2);const oe=Me(()=>!s());ha(G,{get detailed(){return a(oe)}});var ge=m(G,2);{var Ce=re=>{Fa(re,{})};S(ge,re=>{h.completionPercentage===100&&re(Ce)})}var Q=m(ce,2),se=c(Q);se.__click=[Xa];var Oe=m(se,2),W=c(Oe);{var ue=re=>{var je=Za(),$e=c(je);{var _t=ke=>{var nt=wt();k(Rr=>D(nt,`Last saved ${Rr??""}`),[()=>new Date(h.lastSaved).toLocaleTimeString()]),_(ke,nt)},be=ke=>{var nt=wt("Unsaved changes");_(ke,nt)};S($e,ke=>{h.lastSaved?ke(_t):ke(be,!1)})}_(re,je)};S(W,re=>{h.isDirty&&re(ue)})}var _e=m(W,2);_e.__click=[$a,u];var Ze=c(_e);k(re=>{D(T,h.model.name),ae=he(ce,1,"configurator-body svelte-1m2ujmu",null,ae,re),se.disabled=h.currentStep===0,_e.disabled=!h.canProceedToNextStep&&h.currentStep<3,D(Ze,h.currentStep===3?"Complete":"Next")},[()=>({compact:s()})]),_(Ie,O)},Qe=Ie=>{var O=to();_(Ie,O)};S($,Ie=>{h.model?Ie(Ee):Ie(Qe,!1)},de)}};S(R,$=>{h.isLoading?$(Z):$(ee,!1)},H)}};S(E,R=>{h.error&&h.error.code==="NOT_FOUND"?R(b):R(A,!1)})}_(q,I)},$$slots:{default:!0}}),Ai(d,L=>v=L,()=>v),k(L=>{y=he(d,1,"cpq-configurator svelte-1m2ujmu",null,y,L),Pt(d,"data-theme",r())},[()=>({"embed-mode":s()})]),_(t,d),Je()}return ot(["click"]),typeof window<"u"&&!window.__API_BASE_URL__&&(window.__API_BASE_URL__="http://localhost:8080/api/v1"),window.CPQConfigurator={instances:new Map,embed:function(t){const{container:e,modelId:r,theme:i="light",apiUrl:s=window.__API_BASE_URL__,onComplete:n=null,onConfigurationChange:o=null,onError:l=null,...v}=t;if(!e||!r)throw new Error("CPQConfigurator.embed() requires container and modelId options");const u=typeof e=="string"?document.querySelector(e):e;if(!u)throw new Error(`Container element not found: ${e}`);window.__API_BASE_URL__=s;const p=this.instances.get(u);p&&(p.$destroy(),this.instances.delete(u));try{const f=qn(no,{target:u,props:{modelId:r,theme:i,apiUrl:s,embedMode:!0,onComplete:n,onConfigurationChange:o,onError:l,...v}});return this.instances.set(u,f),{destroy:()=>{f.$destroy(),this.instances.delete(u)},update:d=>{Object.assign(f.$state,d)},getConfiguration:()=>f.getConfiguration?.()||null,reset:()=>{f.reset?.()}}}catch(f){throw console.error("Failed to embed configurator:",f),f}},create:function(t){const e=document.createElement("div");return e.className="cpq-configurator-container",document.body.appendChild(e),this.embed({...t,container:e,embedMode:!1})},destroyAll:function(){this.instances.forEach((t,e)=>{t.$destroy()}),this.instances.clear()},version:"1.0.0"},typeof document<"u"&&document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-cpq-model-id]").forEach(e=>{const r=e.dataset.cpqModelId,i=e.dataset.cpqTheme||"light",s=e.dataset.cpqApiUrl||window.__API_BASE_URL__;try{window.CPQConfigurator.embed({container:e,modelId:r,theme:i,apiUrl:s})}catch(n){console.error("Auto-initialization failed:",n)}})}),window.CPQConfigurator});
