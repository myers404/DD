(function(oe,ie){typeof exports=="object"&&typeof module<"u"?module.exports=ie():typeof define=="function"&&define.amd?define(ie):(oe=typeof globalThis<"u"?globalThis:oe||self,oe.CPQConfigurator=ie())})(this,function(){"use strict";var li=oe=>{throw TypeError(oe)};var fr=(oe,ie,ce)=>ie.has(oe)||li("Cannot "+ce);var q=(oe,ie,ce)=>(fr(oe,ie,"read from private field"),ce?ce.call(oe):ie.get(oe)),se=(oe,ie,ce)=>ie.has(oe)?li("Cannot add the same private member more than once"):ie instanceof WeakSet?ie.add(oe):ie.set(oe,ce),Ue=(oe,ie,ce,Ye)=>(fr(oe,ie,"write to private field"),Ye?Ye.call(oe,ce):ie.set(oe,ce),ce),_r=(oe,ie,ce)=>(fr(oe,ie,"access private method"),ce);var oi,vt,ct,ft,_t,gt,ht,pt,mt,xt,yt,bt,wt,St,Ct,at,ot,Re,ze,Et,gr;var ie=Array.isArray,ce=Array.prototype.indexOf,Ye=Array.from,di=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor,hr=Object.getOwnPropertyDescriptors,ui=Object.prototype,vi=Array.prototype,Yt=Object.getPrototypeOf,pr=Object.isExtensible;function ci(t){return t()}function Gt(t){for(var e=0;e<t.length;e++)t[e]()}const we=2,mr=4,It=8,Jt=16,Ie=32,Je=64,Wt=128,_e=256,Pt=512,ge=1024,Pe=2048,He=4096,Te=8192,Kt=16384,xr=32768,Zt=65536,fi=1<<17,_i=1<<19,yr=1<<20,Xt=1<<21,We=Symbol("$state"),gi=Symbol("legacy props"),hi=Symbol("");function br(t){return t===this.v}function pi(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function $t(t){return!pi(t,this.v)}function mi(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function xi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function yi(t){throw new Error("https://svelte.dev/e/effect_orphan")}function bi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function wi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Si(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ci(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ei(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ke=!1,fo=!1;function ki(){Ke=!0}const er=1,tr=2,wr=4,Ii=8,Pi=16,Ti=1,Mi=2,Oi=4,Di=8,Ri=16,Ai=1,Ni=2,fe=Symbol(),Li="http://www.w3.org/1999/xhtml";function Sr(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ne=null;function Cr(t){ne=t}function Me(t,e=!1,r){var i=ne={p:ne,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Ke&&!e&&(ne.l={s:null,u:null,r1:[],r2:lt(!1)}),Bi(()=>{i.d=!0})}function Oe(t){const e=ne;if(e!==null){const s=e.e;if(s!==null){var r=W,i=X;e.e=null;try{for(var n=0;n<s.length;n++){var a=s[n];tt(a.effect),je(a.reaction),Lr(a.fn)}}finally{tt(r),je(i)}}ne=e.p,e.m=!0}return{}}function Tt(){return!Ke||ne!==null&&ne.l===null}function Ee(t){if(typeof t!="object"||t===null||We in t)return t;const e=Yt(t);if(e!==ui&&e!==vi)return t;var r=new Map,i=ie(t),n=J(0),a=X,s=u=>{var v=X;je(a);var c=u();return je(v),c};return i&&r.set("length",J(t.length)),new Proxy(t,{defineProperty(u,v,c){return(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Si(),s(()=>{var f=r.get(v);f===void 0?(f=J(c.value),r.set(v,f)):B(f,c.value,!0)}),!0},deleteProperty(u,v){var c=r.get(v);if(c===void 0){if(v in u){const d=s(()=>J(fe));r.set(v,d),rr(n)}}else{if(i&&typeof v=="string"){var f=r.get("length"),_=Number(v);Number.isInteger(_)&&_<f.v&&B(f,_)}B(c,fe),rr(n)}return!0},get(u,v,c){if(v===We)return t;var f=r.get(v),_=v in u;if(f===void 0&&(!_||Ge(u,v)?.writable)&&(f=s(()=>{var p=Ee(_?u[v]:fe),m=J(p);return m}),r.set(v,f)),f!==void 0){var d=l(f);return d===fe?void 0:d}return Reflect.get(u,v,c)},getOwnPropertyDescriptor(u,v){var c=Reflect.getOwnPropertyDescriptor(u,v);if(c&&"value"in c){var f=r.get(v);f&&(c.value=l(f))}else if(c===void 0){var _=r.get(v),d=_?.v;if(_!==void 0&&d!==fe)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return c},has(u,v){if(v===We)return!0;var c=r.get(v),f=c!==void 0&&c.v!==fe||Reflect.has(u,v);if(c!==void 0||W!==null&&(!f||Ge(u,v)?.writable)){c===void 0&&(c=s(()=>{var d=f?Ee(u[v]):fe,p=J(d);return p}),r.set(v,c));var _=l(c);if(_===fe)return!1}return f},set(u,v,c,f){var _=r.get(v),d=v in u;if(i&&v==="length")for(var p=c;p<_.v;p+=1){var m=r.get(p+"");m!==void 0?B(m,fe):p in u&&(m=s(()=>J(fe)),r.set(p+"",m))}if(_===void 0)(!d||Ge(u,v)?.writable)&&(_=s(()=>{var y=J(void 0);return B(y,Ee(c)),y}),r.set(v,_));else{d=_.v!==fe;var D=s(()=>Ee(c));B(_,D)}var R=Reflect.getOwnPropertyDescriptor(u,v);if(R?.set&&R.set.call(f,c),!d){if(i&&typeof v=="string"){var A=r.get("length"),T=Number(v);Number.isInteger(T)&&T>=A.v&&B(A,T+1)}rr(n)}return!0},ownKeys(u){l(n);var v=Reflect.ownKeys(u).filter(_=>{var d=r.get(_);return d===void 0||d.v!==fe});for(var[c,f]of r)f.v!==fe&&!(c in u)&&v.push(c);return v},setPrototypeOf(){Ci()}})}function rr(t,e=1){B(t,t.v+e)}function Ze(t){var e=we|Pe,r=X!==null&&(X.f&we)!==0?X:null;return W===null||r!==null&&(r.f&_e)!==0?e|=_e:W.f|=yr,{ctx:ne,deps:null,effects:null,equals:br,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??W}}function me(t){const e=Ze(t);return Hr(e),e}function Er(t){const e=Ze(t);return e.equals=$t,e}function kr(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)qe(e[r])}}function qi(t){for(var e=t.parent;e!==null;){if((e.f&we)===0)return e;e=e.parent}return null}function Ir(t){var e,r=W;tt(qi(t));try{kr(t),e=Jr(t)}finally{tt(r)}return e}function Pr(t){var e=Ir(t);if(t.equals(e)||(t.v=e,t.wv=Yr()),!et){var r=(Fe||(t.f&_e)!==0)&&t.deps!==null?He:ge;Ce(t,r)}}const st=new Map;function lt(t,e){var r={f:0,v:t,reactions:null,equals:br,rv:0,wv:0};return r}function J(t,e){const r=lt(t);return Hr(r),r}function Tr(t,e=!1,r=!0){var n;const i=lt(t);return e||(i.equals=$t),Ke&&r&&ne!==null&&ne.l!==null&&((n=ne.l).s??(n.s=[])).push(i),i}function B(t,e,r=!1){X!==null&&!ke&&Tt()&&(X.f&(we|Jt))!==0&&!De?.includes(t)&&Ei();let i=r?Ee(e):e;return ir(t,i)}function ir(t,e){if(!t.equals(e)){var r=t.v;et?st.set(t,e):st.set(t,r),t.v=e,(t.f&we)!==0&&((t.f&Pe)!==0&&Ir(t),Ce(t,(t.f&_e)===0?ge:He)),t.wv=Yr(),Mr(t,Pe),Tt()&&W!==null&&(W.f&ge)!==0&&(W.f&(Ie|Je))===0&&(xe===null?Zi([t]):xe.push(t))}return e}function nr(t,e=1){var r=l(t),i=e===1?r++:r--;return B(t,r),i}function Mr(t,e){var r=t.reactions;if(r!==null)for(var i=Tt(),n=r.length,a=0;a<n;a++){var s=r[a],u=s.f;(u&Pe)===0&&(!i&&s===W||(Ce(s,e),(u&(ge|_e))!==0&&((u&we)!==0?Mr(s,He):Vt(s))))}}let ji=!1;var Or,Dr,Rr,Ar;function Fi(){if(Or===void 0){Or=window,Dr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Rr=Ge(e,"firstChild").get,Ar=Ge(e,"nextSibling").get,pr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),pr(r)&&(r.__t=void 0)}}function Mt(t=""){return document.createTextNode(t)}function Xe(t){return Rr.call(t)}function Ot(t){return Ar.call(t)}function o(t,e){return Xe(t)}function Le(t,e){{var r=Xe(t);return r instanceof Comment&&r.data===""?Ot(r):r}}function g(t,e=1,r=!1){let i=t;for(;e--;)i=Ot(i);return i}function Vi(t){t.textContent=""}function Nr(t){W===null&&X===null&&yi(),X!==null&&(X.f&_e)!==0&&W===null&&xi(),et&&mi()}function zi(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function $e(t,e,r,i=!0){var n=W,a={ctx:ne,deps:null,nodes_start:null,nodes_end:null,f:t|Pe,first:null,fn:e,last:null,next:null,parent:n,prev:null,teardown:null,transitions:null,wv:0};if(r)try{lr(a),a.f|=xr}catch(v){throw qe(a),v}else e!==null&&Vt(a);var s=r&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(yr|Wt))===0;if(!s&&i&&(n!==null&&zi(a,n),X!==null&&(X.f&we)!==0)){var u=X;(u.effects??(u.effects=[])).push(a)}return a}function Bi(t){const e=$e(It,null,!1);return Ce(e,ge),e.teardown=t,e}function Se(t){Nr();var e=W!==null&&(W.f&Ie)!==0&&ne!==null&&!ne.m;if(e){var r=ne;(r.e??(r.e=[])).push({fn:t,effect:W,reaction:X})}else{var i=Lr(t);return i}}function Ui(t){return Nr(),Qi(t)}function Hi(t){const e=$e(Je,t,!0);return(r={})=>new Promise(i=>{r.outro?Dt(e,()=>{qe(e),i(void 0)}):(qe(e),i(void 0))})}function Lr(t){return $e(mr,t,!1)}function Qi(t){return $e(It,t,!0)}function O(t,e=[],r=Ze){const i=e.map(r);return ar(()=>t(...i.map(l)))}function ar(t,e=0){return $e(It|Jt|e,t,!0)}function dt(t,e=!0){return $e(It|Ie,t,!0,e)}function qr(t){var e=t.teardown;if(e!==null){const r=et,i=X;Ur(!0),je(null);try{e.call(null)}finally{Ur(r),je(i)}}}function jr(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var i=r.next;(r.f&Je)!==0?r.parent=null:qe(r,e),r=i}}function Yi(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Ie)===0&&qe(e),e=r}}function qe(t,e=!0){var r=!1;(e||(t.f&_i)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Gi(t.nodes_start,t.nodes_end),r=!0),jr(t,e&&!r),Ft(t,0),Ce(t,Kt);var i=t.transitions;if(i!==null)for(const a of i)a.stop();qr(t);var n=t.parent;n!==null&&n.first!==null&&Fr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Gi(t,e){for(;t!==null;){var r=t===e?null:Ot(t);t.remove(),t=r}}function Fr(t){var e=t.parent,r=t.prev,i=t.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=r))}function Dt(t,e){var r=[];or(t,r,!0),Vr(r,()=>{qe(t),e&&e()})}function Vr(t,e){var r=t.length;if(r>0){var i=()=>--r||e();for(var n of t)n.out(i)}else e()}function or(t,e,r){if((t.f&Te)===0){if(t.f^=Te,t.transitions!==null)for(const s of t.transitions)(s.is_global||r)&&e.push(s);for(var i=t.first;i!==null;){var n=i.next,a=(i.f&Zt)!==0||(i.f&Ie)!==0;or(i,e,a?r:!1),i=n}}}function Rt(t){zr(t,!0)}function zr(t,e){if((t.f&Te)!==0){t.f^=Te,(t.f&ge)!==0&&(Ce(t,Pe),Vt(t));for(var r=t.first;r!==null;){var i=r.next,n=(r.f&Zt)!==0||(r.f&Ie)!==0;zr(r,n?e:!1),r=i}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}let At=[];function Ji(){var t=At;At=[],Gt(t)}function Wi(t){At.length===0&&queueMicrotask(Ji),At.push(t)}function Ki(t){var e=W;if((e.f&xr)===0){if((e.f&Wt)===0)throw t;e.fn(t)}else Br(t,e)}function Br(t,e){for(;e!==null;){if((e.f&Wt)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let sr=!1,Nt=null,Qe=!1,et=!1;function Ur(t){et=t}let Lt=[],_o=[],X=null,ke=!1;function je(t){X=t}let W=null;function tt(t){W=t}let De=null;function Hr(t){X!==null&&X.f&Xt&&(De===null?De=[t]:De.push(t))}let ve=null,he=0,xe=null;function Zi(t){xe=t}let Qr=1,qt=0,Fe=!1;function Yr(){return++Qr}function jt(t){var e=t.f;if((e&Pe)!==0)return!0;if((e&He)!==0){var r=t.deps,i=(e&_e)!==0;if(r!==null){var n,a,s=(e&Pt)!==0,u=i&&W!==null&&!Fe,v=r.length;if(s||u){var c=t,f=c.parent;for(n=0;n<v;n++)a=r[n],(s||!a?.reactions?.includes(c))&&(a.reactions??(a.reactions=[])).push(c);s&&(c.f^=Pt),u&&f!==null&&(f.f&_e)===0&&(c.f^=_e)}for(n=0;n<v;n++)if(a=r[n],jt(a)&&Pr(a),a.wv>t.wv)return!0}(!i||W!==null&&!Fe)&&Ce(t,ge)}return!1}function Gr(t,e,r=!0){var i=t.reactions;if(i!==null)for(var n=0;n<i.length;n++){var a=i[n];De?.includes(t)||((a.f&we)!==0?Gr(a,e,!1):e===a&&(r?Ce(a,Pe):(a.f&ge)!==0&&Ce(a,He),Vt(a)))}}function Jr(t){var p;var e=ve,r=he,i=xe,n=X,a=Fe,s=De,u=ne,v=ke,c=t.f;ve=null,he=0,xe=null,Fe=(c&_e)!==0&&(ke||!Qe||X===null),X=(c&(Ie|Je))===0?t:null,De=null,Cr(t.ctx),ke=!1,qt++,t.f|=Xt;try{var f=(0,t.fn)(),_=t.deps;if(ve!==null){var d;if(Ft(t,he),_!==null&&he>0)for(_.length=he+ve.length,d=0;d<ve.length;d++)_[he+d]=ve[d];else t.deps=_=ve;if(!Fe)for(d=he;d<_.length;d++)((p=_[d]).reactions??(p.reactions=[])).push(t)}else _!==null&&he<_.length&&(Ft(t,he),_.length=he);if(Tt()&&xe!==null&&!ke&&_!==null&&(t.f&(we|He|Pe))===0)for(d=0;d<xe.length;d++)Gr(xe[d],t);return n!==null&&n!==t&&(qt++,xe!==null&&(i===null?i=xe:i.push(...xe))),f}catch(m){Ki(m)}finally{ve=e,he=r,xe=i,X=n,Fe=a,De=s,Cr(u),ke=v,t.f^=Xt}}function Xi(t,e){let r=e.reactions;if(r!==null){var i=ce.call(r,t);if(i!==-1){var n=r.length-1;n===0?r=e.reactions=null:(r[i]=r[n],r.pop())}}r===null&&(e.f&we)!==0&&(ve===null||!ve.includes(e))&&(Ce(e,He),(e.f&(_e|Pt))===0&&(e.f^=Pt),kr(e),Ft(e,0))}function Ft(t,e){var r=t.deps;if(r!==null)for(var i=e;i<r.length;i++)Xi(t,r[i])}function lr(t){var e=t.f;if((e&Kt)===0){Ce(t,ge);var r=W,i=Qe;W=t,Qe=!0;try{(e&Jt)!==0?Yi(t):jr(t),qr(t);var n=Jr(t);t.teardown=typeof n=="function"?n:null,t.wv=Qr;var a}finally{Qe=i,W=r}}}function $i(){try{bi()}catch(t){if(Nt!==null)Br(t,Nt);else throw t}}function en(){var t=Qe;try{var e=0;for(Qe=!0;Lt.length>0;){e++>1e3&&$i();var r=Lt,i=r.length;Lt=[];for(var n=0;n<i;n++){var a=rn(r[n]);tn(a)}st.clear()}}finally{sr=!1,Qe=t,Nt=null}}function tn(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var i=t[r];(i.f&(Kt|Te))===0&&jt(i)&&(lr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Fr(i):i.fn=null))}}function Vt(t){sr||(sr=!0,queueMicrotask(en));for(var e=Nt=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(Je|Ie))!==0){if((r&ge)===0)return;e.f^=ge}}Lt.push(e)}function rn(t){for(var e=[],r=t;r!==null;){var i=r.f,n=(i&(Ie|Je))!==0,a=n&&(i&ge)!==0;if(!a&&(i&Te)===0){(i&mr)!==0?e.push(r):n?r.f^=ge:jt(r)&&lr(r);var s=r.first;if(s!==null){r=s;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}return e}function l(t){var e=t.f,r=(e&we)!==0;if(X!==null&&!ke){if(!De?.includes(t)){var i=X.deps;t.rv<qt&&(t.rv=qt,ve===null&&i!==null&&i[he]===t?he++:ve===null?ve=[t]:(!Fe||!ve.includes(t))&&ve.push(t))}}else if(r&&t.deps===null&&t.effects===null){var n=t,a=n.parent;a!==null&&(a.f&_e)===0&&(n.f^=_e)}return r&&(n=t,jt(n)&&Pr(n)),et&&st.has(t)?st.get(t):t.v}function zt(t){var e=ke;try{return ke=!0,t()}finally{ke=e}}const nn=-7169;function Ce(t,e){t.f=t.f&nn|e}function an(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(We in t)dr(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&We in r&&dr(r)}}}function dr(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{dr(t[i],e)}catch{}const r=Yt(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const i=hr(r);for(let n in i){const a=i[n].get;if(a)try{a.call(t)}catch{}}}}}const on=["touchstart","touchmove"];function sn(t){return on.includes(t)}const Wr=new Set,ur=new Set;function rt(t){for(var e=0;e<t.length;e++)Wr.add(t[e]);for(var r of ur)r(t)}function Bt(t){var e=this,r=e.ownerDocument,i=t.type,n=t.composedPath?.()||[],a=n[0]||t.target,s=0,u=t.__root;if(u){var v=n.indexOf(u);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var c=n.indexOf(e);if(c===-1)return;v<=c&&(s=v)}if(a=n[s]||t.target,a!==e){di(t,"currentTarget",{configurable:!0,get(){return a||r}});var f=X,_=W;je(null),tt(null);try{for(var d,p=[];a!==null;){var m=a.assignedSlot||a.parentNode||a.host||null;try{var D=a["__"+i];if(D!=null&&(!a.disabled||t.target===a))if(ie(D)){var[R,...A]=D;R.apply(a,[t,...A])}else D.call(a,t)}catch(T){d?p.push(T):d=T}if(t.cancelBubble||m===e||m===null)break;a=m}if(d){for(let T of p)queueMicrotask(()=>{throw T});throw d}}finally{t.__root=e,delete t.currentTarget,je(f),tt(_)}}}function Kr(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ut(t,e){var r=W;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function C(t,e){var r=(e&Ai)!==0,i=(e&Ni)!==0,n,a=!t.startsWith("<!>");return()=>{n===void 0&&(n=Kr(a?t:"<!>"+t),r||(n=Xe(n)));var s=i||Dr?document.importNode(n,!0):n.cloneNode(!0);if(r){var u=Xe(s),v=s.lastChild;ut(u,v)}else ut(s,s);return s}}function ln(t,e,r="svg"){var i=!t.startsWith("<!>"),n=`<${r}>${i?t:"<!>"+t}</${r}>`,a;return()=>{if(!a){var s=Kr(n),u=Xe(s);a=Xe(u)}var v=a.cloneNode(!0);return ut(v,v),v}}function Zr(t,e){return ln(t,e,"svg")}function Ut(t=""){{var e=Mt(t+"");return ut(e,e),e}}function it(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Mt();return t.append(e,r),ut(e,r),t}function w(t,e){t!==null&&t.before(e)}function k(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function dn(t,e){return un(t,e)}const nt=new Map;function un(t,{target:e,anchor:r,props:i={},events:n,context:a,intro:s=!0}){Fi();var u=new Set,v=_=>{for(var d=0;d<_.length;d++){var p=_[d];if(!u.has(p)){u.add(p);var m=sn(p);e.addEventListener(p,Bt,{passive:m});var D=nt.get(p);D===void 0?(document.addEventListener(p,Bt,{passive:m}),nt.set(p,1)):nt.set(p,D+1)}}};v(Ye(Wr)),ur.add(v);var c=void 0,f=Hi(()=>{var _=r??e.appendChild(Mt());return dt(()=>{if(a){Me({});var d=ne;d.c=a}n&&(i.$$events=n),c=t(_,i)||{},a&&Oe()}),()=>{for(var d of u){e.removeEventListener(d,Bt);var p=nt.get(d);--p===0?(document.removeEventListener(d,Bt),nt.delete(d)):nt.set(d,p)}ur.delete(v),_!==r&&_.parentNode?.removeChild(_)}});return vn.set(c,f),c}let vn=new WeakMap;function P(t,e,[r,i]=[0,0]){var n=t,a=null,s=null,u=fe,v=r>0?Zt:0,c=!1;const f=(d,p=!0)=>{c=!0,_(p,d)},_=(d,p)=>{u!==(u=d)&&(u?(a?Rt(a):p&&(a=dt(()=>p(n))),s&&Dt(s,()=>{s=null})):(s?Rt(s):p&&(s=dt(()=>p(n,[r+1,i]))),a&&Dt(a,()=>{a=null})))};ar(()=>{c=!1,e(f),c||_(null,null)},v)}function ye(t,e){return e}function cn(t,e,r,i){for(var n=[],a=e.length,s=0;s<a;s++)or(e[s].e,n,!0);var u=a>0&&n.length===0&&r!==null;if(u){var v=r.parentNode;Vi(v),v.append(r),i.clear(),Ve(t,e[0].prev,e[a-1].next)}Vr(n,()=>{for(var c=0;c<a;c++){var f=e[c];u||(i.delete(f.k),Ve(t,f.prev,f.next)),qe(f.e,!u)}})}function be(t,e,r,i,n,a=null){var s=t,u={flags:e,items:new Map,first:null},v=(e&wr)!==0;if(v){var c=t;s=c.appendChild(Mt())}var f=null,_=!1,d=Er(()=>{var p=r();return ie(p)?p:p==null?[]:Ye(p)});ar(()=>{var p=l(d),m=p.length;_&&m===0||(_=m===0,fn(p,u,s,n,e,i,r),a!==null&&(m===0?f?Rt(f):f=dt(()=>a(s)):f!==null&&Dt(f,()=>{f=null})),l(d))})}function fn(t,e,r,i,n,a,s){var u=(n&Ii)!==0,v=(n&(er|tr))!==0,c=t.length,f=e.items,_=e.first,d=_,p,m=null,D,R=[],A=[],T,y,x,S;if(u)for(S=0;S<c;S+=1)T=t[S],y=a(T,S),x=f.get(y),x!==void 0&&(x.a?.measure(),(D??(D=new Set)).add(x));for(S=0;S<c;S+=1){if(T=t[S],y=a(T,S),x=f.get(y),x===void 0){var I=d?d.e.nodes_start:r;m=gn(I,e,m,m===null?e.first:m.next,T,y,S,i,n,s),f.set(y,m),R=[],A=[],d=m.next;continue}if(v&&_n(x,T,S,n),(x.e.f&Te)!==0&&(Rt(x.e),u&&(x.a?.unfix(),(D??(D=new Set)).delete(x))),x!==d){if(p!==void 0&&p.has(x)){if(R.length<A.length){var N=A[0],L;m=N.prev;var K=R[0],Q=R[R.length-1];for(L=0;L<R.length;L+=1)Xr(R[L],N,r);for(L=0;L<A.length;L+=1)p.delete(A[L]);Ve(e,K.prev,Q.next),Ve(e,m,K),Ve(e,Q,N),d=N,m=Q,S-=1,R=[],A=[]}else p.delete(x),Xr(x,d,r),Ve(e,x.prev,x.next),Ve(e,x,m===null?e.first:m.next),Ve(e,m,x),m=x;continue}for(R=[],A=[];d!==null&&d.k!==y;)(d.e.f&Te)===0&&(p??(p=new Set)).add(d),A.push(d),d=d.next;if(d===null)continue;x=d}R.push(x),m=x,d=x.next}if(d!==null||p!==void 0){for(var U=p===void 0?[]:Ye(p);d!==null;)(d.e.f&Te)===0&&U.push(d),d=d.next;var $=U.length;if($>0){var Z=(n&wr)!==0&&c===0?r:null;if(u){for(S=0;S<$;S+=1)U[S].a?.measure();for(S=0;S<$;S+=1)U[S].a?.fix()}cn(e,U,Z,f)}}u&&Wi(()=>{if(D!==void 0)for(x of D)x.a?.apply()}),W.first=e.first&&e.first.e,W.last=m&&m.e}function _n(t,e,r,i){(i&er)!==0&&ir(t.v,e),(i&tr)!==0?ir(t.i,r):t.i=r}function gn(t,e,r,i,n,a,s,u,v,c){var f=(v&er)!==0,_=(v&Pi)===0,d=f?_?Tr(n,!1,!1):lt(n):n,p=(v&tr)===0?s:lt(s),m={i:p,v:d,k:a,a:null,e:null,prev:r,next:i};try{return m.e=dt(()=>u(t,d,p,c),ji),m.e.prev=r&&r.e,m.e.next=i&&i.e,r===null?e.first=m:(r.next=m,r.e.next=m.e),i!==null&&(i.prev=m,i.e.prev=m.e),m}finally{}}function Xr(t,e,r){for(var i=t.next?t.next.e.nodes_start:r,n=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==i;){var s=Ot(a);n.before(a),a=s}}function Ve(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function hn(t,e,r){var i=t==null?"":""+t;return i===""?null:i}function le(t,e,r,i,n,a){var s=t.__className;if(s!==r||s===void 0){var u=hn(r);u==null?t.removeAttribute("class"):t.className=u,t.__className=r}return a}const pn=Symbol("is custom element"),mn=Symbol("is html");function xn(t,e){var r=ei(t);r.value===(r.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function $r(t,e,r,i){var n=ei(t);n[e]!==(n[e]=r)&&(e==="loading"&&(t[hi]=r),r==null?t.removeAttribute(e):typeof r!="string"&&yn(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function ei(t){return t.__attributes??(t.__attributes={[pn]:t.nodeName.includes("-"),[mn]:t.namespaceURI===Li})}var ti=new Map;function yn(t){var e=ti.get(t.nodeName);if(e)return e;ti.set(t.nodeName,e=[]);for(var r,i=t,n=Element.prototype;n!==i;){r=hr(i);for(var a in r)r[a].set&&e.push(a);i=Yt(i)}return e}function bn(t=!1){const e=ne,r=e.l.u;if(!r)return;let i=()=>an(e.s);if(t){let n=0,a={};const s=Ze(()=>{let u=!1;const v=e.s;for(const c in v)v[c]!==a[c]&&(a[c]=v[c],u=!0);return u&&n++,n});i=()=>l(s)}r.b.length&&Ui(()=>{ri(e,i),Gt(r.b)}),Se(()=>{const n=zt(()=>r.m.map(ci));return()=>{for(const a of n)typeof a=="function"&&a()}}),r.a.length&&Se(()=>{ri(e,i),Gt(r.a)})}function ri(t,e){if(t.l.s)for(const r of t.l.s)l(r);e()}let Ht=!1;function wn(t){var e=Ht;try{return Ht=!1,[t(),Ht]}finally{Ht=e}}function ii(t){return t.ctx?.d??!1}function de(t,e,r,i){var n=(r&Ti)!==0,a=!Ke||(r&Mi)!==0,s=(r&Di)!==0,u=(r&Ri)!==0,v=!1,c;s?[c,v]=wn(()=>t[e]):c=t[e];var f=We in t||gi in t,_=s&&(Ge(t,e)?.set??(f&&e in t&&(I=>t[e]=I)))||void 0,d=i,p=!0,m=!1,D=()=>(m=!0,p&&(p=!1,u?d=zt(i):d=i),d);c===void 0&&i!==void 0&&(_&&a&&wi(),c=D(),_&&_(c));var R;if(a)R=()=>{var I=t[e];return I===void 0?D():(p=!0,m=!1,I)};else{var A=(n?Ze:Er)(()=>t[e]);A.f|=fi,R=()=>{var I=l(A);return I!==void 0&&(d=void 0),I===void 0?d:I}}if((r&Oi)===0&&a)return R;if(_){var T=t.$$legacy;return function(I,N){return arguments.length>0?((!a||!N||T||v)&&_(N?R():I),I):R()}}var y=!1,x=Tr(c),S=Ze(()=>{var I=R(),N=l(x);return y?(y=!1,N):x.v=I});return s&&l(S),n||(S.equals=$t),function(I,N){if(arguments.length>0){const L=N?l(S):a&&s?Ee(I):I;if(!S.equals(L)){if(y=!0,B(x,L),m&&d!==void 0&&(d=L),ii(S))return I;zt(()=>l(S))}return I}return ii(S)?S.v:l(S)}}function Sn(t){ne===null&&Sr(),Ke&&ne.l!==null?En(ne).m.push(t):Se(()=>{const e=zt(t);if(typeof e=="function")return e})}function Cn(t,e,{bubbles:r=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:i})}function ni(){const t=ne;return t===null&&Sr(),(e,r,i)=>{const n=t.s.$$events?.[e];if(n){const a=ie(n)?n.slice():[n],s=Cn(e,r,i);for(const u of a)u.call(t.x,s);return!s.defaultPrevented}return!0}}function En(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const kn="5";typeof window<"u"&&((oi=window.__svelte??(window.__svelte={})).v??(oi.v=new Set)).add(kn);class In{constructor(e,r={}){this.baseUrl=e||"http://localhost:8080/api/v1",this.modelId=r.modelId,this.authToken=r.authToken,this.timeout=r.timeout||1e4}async request(e,r={}){const i=`${this.baseUrl}${e}`,n={method:"GET",headers:{"Content-Type":"application/json",...this.authToken&&{Authorization:`Bearer ${this.authToken}`},...r.headers},...r};n.body&&typeof n.body=="object"&&(n.body=JSON.stringify(n.body));try{const a=new AbortController,s=setTimeout(()=>a.abort(),this.timeout),u=await fetch(i,{...n,signal:a.signal});if(clearTimeout(s),!u.ok)throw new Error(`HTTP ${u.status}: ${u.statusText}`);return await u.json()}catch(a){throw a.name==="AbortError"?new Error("Request timeout"):a}}async getModel(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}`)}async getModelOptions(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/options`)}async createConfiguration(e={}){return this.request("/configurations",{method:"POST",body:{model_id:this.modelId,selections:Object.entries(e).map(([r,i])=>({option_id:r,quantity:i}))}})}async updateConfiguration(e,r){return this.request(`/configurations/${e}`,{method:"PUT",body:{model_id:this.modelId,selections:Object.entries(r).map(([i,n])=>({option_id:i,quantity:n}))}})}async validateConfiguration(e){return this.request("/configurations/validate-selection",{method:"POST",body:{model_id:this.modelId,selections:Object.entries(e).map(([r,i])=>({option_id:r,quantity:i}))}})}async calculatePricing(e,r={}){return this.request("/pricing/calculate",{method:"POST",body:{model_id:this.modelId,selections:Object.entries(e).map(([i,n])=>({option_id:i,quantity:n})),context:r}})}async getVolumeTiers(){return this.request(`/pricing/volume-tiers/${this.modelId}`)}}class Pn{constructor(){se(this,Et);se(this,vt,J(""));se(this,ct,J(null));se(this,ft,J(Ee({})));se(this,_t,J(Ee([])));se(this,gt,J(null));se(this,ht,J(!1));se(this,pt,J(!1));se(this,mt,J(!1));se(this,xt,J(null));se(this,yt,J(0));se(this,bt,J(null));se(this,wt,J(null));se(this,St,J(!1));se(this,Ct,J(null));se(this,at,"");se(this,ot,"");se(this,Re,new Map);se(this,ze,!1);this.initialized=!1}get modelId(){return l(q(this,vt))}set modelId(e){B(q(this,vt),e,!0)}get model(){return l(q(this,ct))}set model(e){B(q(this,ct),e,!0)}get selections(){return l(q(this,ft))}set selections(e){B(q(this,ft),e,!0)}get validationResults(){return l(q(this,_t))}set validationResults(e){B(q(this,_t),e,!0)}get pricingData(){return l(q(this,gt))}set pricingData(e){B(q(this,gt),e,!0)}get isLoading(){return l(q(this,ht))}set isLoading(e){B(q(this,ht),e,!0)}get isValidating(){return l(q(this,pt))}set isValidating(e){B(q(this,pt),e,!0)}get isPricing(){return l(q(this,mt))}set isPricing(e){B(q(this,mt),e,!0)}get error(){return l(q(this,xt))}set error(e){B(q(this,xt),e,!0)}get currentStep(){return l(q(this,yt))}set currentStep(e){B(q(this,yt),e,!0)}get configurationId(){return l(q(this,bt))}set configurationId(e){B(q(this,bt),e,!0)}get lastSaved(){return l(q(this,wt))}set lastSaved(e){B(q(this,wt),e,!0)}get isDirty(){return l(q(this,St))}set isDirty(e){B(q(this,St),e,!0)}get api(){return l(q(this,Ct))}set api(e){B(q(this,Ct),e,!0)}initialize(){this.initialized||(this.initialized=!0,console.log("ðŸ”§ ConfigurationStore initialized"),Se(()=>{this.modelId&&!q(this,ze)&&(console.log("ðŸ”„ ModelId changed, initializing API client:",this.modelId),this.api=new In("http://localhost:8080/api/v1",{modelId:this.modelId}),this.loadModel())}),Se(()=>{const e=JSON.stringify(this.selections);if(this.api&&Object.keys(this.selections).length>0&&e!==q(this,at)){_r(this,Et,gr).call(this,"validation");const r=setTimeout(()=>{Ue(this,at,e),this.validateSelections()},300);q(this,Re).set("validation",r)}}),Se(()=>{const e=JSON.stringify(this.selections);if(this.api&&this.isValid&&Object.keys(this.selections).length>0&&e!==q(this,ot)){_r(this,Et,gr).call(this,"pricing");const r=setTimeout(()=>{Ue(this,ot,e),this.calculatePricing()},500);q(this,Re).set("pricing",r)}}),Se(()=>{if(this.isDirty&&this.configurationId){const e=setInterval(()=>{this.saveConfiguration()},3e4);return()=>clearInterval(e)}}))}get isValid(){return this.validationResults.length===0}get totalPrice(){return this.pricingData?.total_price||0}get basePrice(){return this.pricingData?.base_price||0}get adjustments(){return this.pricingData?.adjustments||[]}get selectedOptions(){if(!this.model?.option_groups)return[];const e=[];for(const r of this.model.option_groups)for(const i of r.options)this.selections[i.id]>0&&e.push({...i,quantity:this.selections[i.id],group_name:r.name});return e}get completionPercentage(){if(!this.model?.option_groups)return 0;const e=this.model.option_groups.filter(i=>i.required);if(e.length===0)return 100;const r=e.filter(i=>i.options.some(n=>this.selections[n.id]>0));return Math.round(r.length/e.length*100)}get canProceedToNextStep(){return this.completionPercentage>=100&&this.isValid}setModelId(e){console.log("ðŸ†” setModelId called:",{current:this.modelId,new:e}),this.modelId!==e&&(console.log("ðŸ”„ ModelId changing from",this.modelId,"to",e),this.modelId=e,this.reset())}async loadModel(){if(!this.api||q(this,ze)){console.log("âš ï¸ Skipping loadModel - no API or already loading");return}Ue(this,ze,!0),this.isLoading=!0,this.error=null,console.log("ðŸ“¡ Loading model:",this.modelId);try{const e=await this.api.getModel();if(console.log("âœ… Model loaded successfully:",e.name),this.model=e,Object.keys(this.selections).length===0){const r={};if(e.option_groups)for(const i of e.option_groups)for(const n of i.options)n.default_selected&&(r[n.id]=n.default_quantity||1);Object.keys(r).length>0&&(console.log("ðŸŽ¯ Setting initial selections:",r),this.selections=r,this.isDirty=!0)}}catch(e){this.error=e.message,console.error("âŒ Failed to load model:",e)}finally{this.isLoading=!1,Ue(this,ze,!1),console.log("ðŸ loadModel completed")}}updateSelection(e,r){(this.selections[e]||0)!==r&&(r>0?this.selections[e]=r:delete this.selections[e],this.isDirty=!0,this.selections={...this.selections})}async validateSelections(){if(!(!this.api||this.isValidating)){this.isValidating=!0;try{const e=await this.api.validateConfiguration(this.selections);this.validationResults=e.violations||[]}catch(e){console.error("Validation failed:",e),this.validationResults=[{type:"error",message:"Failed to validate configuration. Please try again."}]}finally{this.isValidating=!1}}}async calculatePricing(){if(!(!this.api||this.isPricing)){this.isPricing=!0;try{const e=await this.api.calculatePricing(this.selections);this.pricingData=e}catch(e){console.error("Pricing calculation failed:",e),this.pricingData=null}finally{this.isPricing=!1}}}async saveConfiguration(){if(!this.api||!this.isDirty)return null;try{let e;return this.configurationId?e=await this.api.updateConfiguration(this.configurationId,{selections:this.selections,pricing:this.pricingData}):(e=await this.api.createConfiguration({model_id:this.modelId,selections:this.selections,pricing:this.pricingData}),this.configurationId=e.id),this.lastSaved=new Date,this.isDirty=!1,e}catch(e){throw console.error("Failed to save configuration:",e),e}}nextStep(){this.canProceedToNextStep&&(this.currentStep=Math.min(this.currentStep+1,3))}previousStep(){this.currentStep=Math.max(this.currentStep-1,0)}goToStep(e){this.currentStep=Math.max(0,Math.min(e,3))}reset(){console.log("ðŸ”„ Resetting store state");for(const e of q(this,Re).values())clearTimeout(e);q(this,Re).clear(),this.model=null,this.selections={},this.validationResults=[],this.pricingData=null,this.currentStep=0,this.configurationId=null,this.lastSaved=null,this.isDirty=!1,this.error=null,Ue(this,at,""),Ue(this,ot,""),Ue(this,ze,!1)}generateShareableUrl(){const e={modelId:this.modelId,selections:this.selections,timestamp:Date.now()},r=btoa(JSON.stringify(e));return`${window.location.origin}/configure/${this.modelId}?config=${r}`}loadFromShareableUrl(e){try{const r=JSON.parse(atob(e));r.modelId&&r.selections&&(this.setModelId(r.modelId),this.selections=r.selections,this.isDirty=!0)}catch(r){console.warn("Failed to load shared configuration:",r)}}exportConfiguration(){return{model_id:this.modelId,model_name:this.model?.name,selections:this.selectedOptions.map(e=>({option_id:e.id,option_name:e.name,quantity:this.selections[e.id],unit_price:e.base_price,total_price:e.base_price*this.selections[e.id]})),pricing:this.pricingData,validation:{is_valid:this.isValid,errors:this.validationResults},metadata:{created_at:new Date().toISOString(),completion_percentage:this.completionPercentage}}}}vt=new WeakMap,ct=new WeakMap,ft=new WeakMap,_t=new WeakMap,gt=new WeakMap,ht=new WeakMap,pt=new WeakMap,mt=new WeakMap,xt=new WeakMap,yt=new WeakMap,bt=new WeakMap,wt=new WeakMap,St=new WeakMap,Ct=new WeakMap,at=new WeakMap,ot=new WeakMap,Re=new WeakMap,ze=new WeakMap,Et=new WeakSet,gr=function(e){const r=q(this,Re).get(e);r&&(clearTimeout(r),q(this,Re).delete(e))};const h=new Pn;ki();var Tn=C('<div class="absolute inset-0 flex items-center" aria-hidden="true"><div></div></div>'),Mn=(t,e)=>h.goToStep(l(e).id),On=Zr('<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Dn=C('<span class="text-sm font-medium"> </span>'),Rn=C('<li><!> <button><!></button> <div class="mt-2 text-center"><div> </div> <div> </div></div></li>'),An=C('<nav aria-label="Progress"><ol class="flex items-center"></ol></nav>');function Nn(t,e){Me(e,!1);const r=[{id:0,name:"Select",description:"Choose your product"},{id:1,name:"Configure",description:"Customize options"},{id:2,name:"Review",description:"Verify & price"},{id:3,name:"Complete",description:"Finalize order"}];bn();var i=An(),n=o(i);be(n,5,()=>r,ye,(a,s,u)=>{var v=Rn(),c=o(v);{var f=x=>{var S=Tn(),I=o(S);O(()=>le(I,1,`h-0.5 w-full ${h.currentStep>l(s).id?"bg-primary-600":"bg-gray-200"}`)),w(x,S)};P(c,x=>{u<r.length-1&&x(f)})}var _=g(c,2);_.__click=[Mn,s];var d=o(_);{var p=x=>{var S=On();w(x,S)},m=x=>{var S=Dn(),I=o(S);O(()=>k(I,l(s).id+1)),w(x,S)};P(d,x=>{h.currentStep>l(s).id?x(p):x(m,!1)})}var D=g(_,2),R=o(D),A=o(R),T=g(R,2),y=o(T);O(()=>{le(v,1,`relative ${u<r.length-1?"pr-8 sm:pr-20":""}`),le(_,1,`relative w-8 h-8 flex items-center justify-center rounded-full transition-colors
                 ${h.currentStep>l(s).id?"bg-primary-600 text-white":h.currentStep===l(s).id?"bg-primary-50 border-2 border-primary-600 text-primary-600":"bg-white border-2 border-gray-300 text-gray-500"}`),$r(_,"aria-current",h.currentStep===l(s).id?"step":void 0),le(R,1,`text-xs font-medium ${h.currentStep>=l(s).id?"text-gray-900":"text-gray-500"}`),k(A,l(s).name),le(T,1,`text-xs ${h.currentStep>=l(s).id?"text-gray-500":"text-gray-400"}`),k(y,l(s).description)}),w(a,v)}),w(t,i),Oe()}rt(["click"]);var Ln=C('<p class="mt-4 text-sm text-gray-600"> </p>'),qn=C('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" aria-live="polite"><div class="bg-white rounded-lg p-6 text-center"><div></div> <!></div></div>'),jn=C('<span class="ml-3 text-sm text-gray-600"> </span>'),Fn=C('<div class="flex items-center justify-center" aria-live="polite"><div></div> <!></div>');function ai(t,e){let r=de(e,"size",3,"md"),i=de(e,"color",3,"primary"),n=de(e,"message",3,""),a=de(e,"overlay",3,!1);const s={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"},u={primary:"border-primary-600",gray:"border-gray-600",white:"border-white"};var v=it(),c=Le(v);{var f=d=>{var p=qn(),m=o(p),D=o(m),R=g(D,2);{var A=T=>{var y=Ln(),x=o(y);O(()=>k(x,n())),w(T,y)};P(R,T=>{n()&&T(A)})}O(()=>le(D,1,`animate-spin rounded-full ${s[r()]??""} border-2 border-gray-200 ${u[i()]??""} border-t-transparent mx-auto`)),w(d,p)},_=d=>{var p=Fn(),m=o(p),D=g(m,2);{var R=A=>{var T=jn(),y=o(T);O(()=>k(y,n())),w(A,T)};P(D,A=>{n()&&A(R)})}O(()=>le(m,1,`animate-spin rounded-full ${s[r()]??""} border-2 border-gray-200 ${u[i()]??""} border-t-transparent`)),w(d,p)};P(c,d=>{a()?d(f):d(_,!1)})}w(t,v)}function Vn(t,e,r,i){e()<r()&&i("retry")}function zn(t,e){e(!e())}var Bn=C('<div class="mt-3 text-xs text-red-600 bg-red-100 p-2 rounded border"><pre class="whitespace-pre-wrap"> </pre></div>'),Un=C('<button type="button" class="text-sm bg-red-100 text-red-800 px-3 py-1 rounded hover:bg-red-200 transition-colors"> </button>'),Hn=C('<div class="rounded-md bg-red-50 p-4 border border-red-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3 flex-1"><h3 class="text-sm font-medium text-red-800"> </h3> <div class="mt-2 text-sm text-red-700"><p> </p></div> <!> <div class="mt-4 flex space-x-3"><!> <button type="button" class="text-sm text-red-600 hover:text-red-500 underline"> </button></div></div></div></div>');function Qn(t,e){Me(e,!0);let r=de(e,"error",3,null),i=de(e,"context",3,"Application"),n=de(e,"showDetails",7,!1),a=de(e,"retryable",3,!0),s=de(e,"retryCount",3,0),u=de(e,"maxRetries",3,3);const v=ni();let c=me(()=>a()&&s()<u());var f=it(),_=Le(f);{var d=p=>{var m=Hn(),D=o(m),R=g(o(D),2),A=o(R),T=o(A),y=g(A,2),x=o(y),S=o(x),I=g(y,2);{var N=Z=>{var M=Bn(),b=o(M),E=o(b);O(V=>k(E,V),[()=>r().stack||JSON.stringify(r(),null,2)]),w(Z,M)};P(I,Z=>{n()&&Z(N)})}var L=g(I,2),K=o(L);{var Q=Z=>{var M=Un();M.__click=[Vn,s,u,v];var b=o(M);O(()=>k(b,`Retry ${s()>0?`(${s()}/${u()})`:""}`)),w(Z,M)};P(K,Z=>{l(c)&&Z(Q)})}var U=g(K,2);U.__click=[zn,n];var $=o(U);O(()=>{k(T,`${i()??""} Error`),k(S,`Something went wrong. ${r().message||"An unexpected error occurred."}`),k($,`${n()?"Hide":"Show"} Details`)}),w(p,m)};P(_,p=>{r()&&p(d)})}w(t,f),Oe()}rt(["click"]);function Yn(t,e,r){e.group.max_selections&&l(r)>=e.group.max_selections||nr(r)}function Gn(t,e){l(e)>0&&nr(e,-1)}function Jn(t,e,r){l(e)?B(r,0):B(r,1)}var Wn=C('<div class="absolute -top-2 -right-2 w-6 h-6 bg-primary-600 rounded-full flex items-center justify-center"><svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),Kn=C('<p class="mt-1 text-sm text-gray-500"> </p>'),Zn=C('<span class="text-xs text-gray-500"> </span>'),Xn=C('<div class="text-xs text-primary-600"> </div>'),$n=C('<span class="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded"> </span>'),ea=C('<span class="text-xs text-gray-500"> </span>'),ta=C('<div class="mt-2 flex flex-wrap gap-1"><!> <!></div>'),ra=C('<div class="w-2 h-2 bg-white rounded-full"></div>'),ia=C('<button type="button"><div><!></div> <span> </span></button>'),na=C('<div class="flex items-center space-x-3"><span class="text-sm text-gray-500">Quantity:</span> <div class="flex items-center space-x-2"><button type="button"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg></button> <span class="w-8 text-center text-sm font-medium"> </span> <button type="button"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></button></div></div>'),aa=C('<div class="text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded"> </div>'),oa=C('<div><!> <div class="p-4"><div class="flex items-start justify-between"><div class="flex-1"><h3 class="text-sm font-medium text-gray-900"> </h3> <!></div> <div class="ml-4 text-right"><div class="text-sm font-medium text-gray-900"> <!></div> <!></div></div> <!> <div class="mt-4 flex items-center justify-between"><!> <!></div></div></div>');function sa(t,e){Me(e,!0);let r=J(Ee(h.selections[e.option.id]||0)),i=me(()=>l(r)>0),n=me(()=>l(r)*e.option.base_price);Se(()=>{h.updateSelection(e.option.id,l(r))}),Se(()=>{if(e.group.selection_type==="single"&&l(i))for(const M of e.group.options)M.id!==e.option.id&&h.selections[M.id]>0&&h.updateSelection(M.id,0)});var a=oa(),s=o(a);{var u=M=>{var b=Wn();w(M,b)};P(s,M=>{l(i)&&M(u)})}var v=g(s,2),c=o(v),f=o(c),_=o(f),d=o(_),p=g(_,2);{var m=M=>{var b=Kn(),E=o(b);O(()=>k(E,e.option.description)),w(M,b)};P(p,M=>{e.option.description&&M(m)})}var D=g(f,2),R=o(D),A=o(R),T=g(A);{var y=M=>{var b=Zn(),E=o(b);O(()=>k(E,`/${e.option.price_unit??""}`)),w(M,b)};P(T,M=>{e.option.price_unit&&e.option.price_unit!=="each"&&M(y)})}var x=g(R,2);{var S=M=>{var b=Xn(),E=o(b);O(V=>k(E,`Total: $${V??""}`),[()=>l(n).toFixed(2)]),w(M,b)};P(x,M=>{l(n)>e.option.base_price&&M(S)})}var I=g(c,2);{var N=M=>{var b=ta(),E=o(b);be(E,17,()=>e.option.constraints.slice(0,3),ye,(z,j)=>{var Y=$n(),ee=o(Y);O(()=>k(ee,l(j))),w(z,Y)});var V=g(E,2);{var te=z=>{var j=ea(),Y=o(j);O(()=>k(Y,`+${e.option.constraints.length-3} more`)),w(z,j)};P(V,z=>{e.option.constraints.length>3&&z(te)})}w(M,b)};P(I,M=>{e.option.constraints&&e.option.constraints.length>0&&M(N)})}var L=g(I,2),K=o(L);{var Q=M=>{var b=ia();b.__click=[Jn,i,r];var E=o(b),V=o(E);{var te=Y=>{var ee=ra();w(Y,ee)};P(V,Y=>{l(i)&&Y(te)})}var z=g(E,2),j=o(z);O(()=>{le(b,1,`flex items-center space-x-2 text-sm font-medium
                 ${l(i)?"text-primary-600":"text-gray-500 hover:text-gray-700"}`),le(E,1,`w-4 h-4 rounded-full border-2 flex items-center justify-center
                      ${l(i)?"border-primary-600 bg-primary-600":"border-gray-300"}`),k(j,l(i)?"Selected":"Select")}),w(M,b)},U=M=>{var b=na(),E=g(o(b),2),V=o(E);V.__click=[Gn,r];var te=g(V,2),z=o(te),j=g(te,2);j.__click=[Yn,e,r],O(()=>{le(V,1,`w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center
                     ${l(r)>0?"hover:bg-gray-100 text-gray-700":"text-gray-400 cursor-not-allowed"}`),V.disabled=l(r)<=0,k(z,l(r)),le(j,1,`w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center
                     hover:bg-gray-100 text-gray-700
                     ${e.group.max_selections&&l(r)>=e.group.max_selections?"opacity-50 cursor-not-allowed":""}`),j.disabled=e.group.max_selections&&l(r)>=e.group.max_selections}),w(M,b)};P(K,M=>{e.group.selection_type==="single"?M(Q):M(U,!1)})}var $=g(K,2);{var Z=M=>{var b=aa(),E=o(b);O(()=>k(E,e.option.availability_status)),w(M,b)};P($,M=>{e.option.availability_status&&e.option.availability_status!=="available"&&M(Z)})}O(M=>{le(a,1,`relative rounded-lg border-2 transition-all duration-200 
            ${l(i)?"border-primary-500 bg-primary-50":"border-gray-200 bg-white hover:border-gray-300"}`),k(d,e.option.name),k(A,`$${M??""} `)},[()=>e.option.base_price.toFixed(2)]),w(t,a),Oe()}rt(["click"]);var la=C('<span class="ml-2 text-sm text-red-500">*</span>'),da=Zr('<svg class="ml-2 w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'),ua=C('<p class="mt-1 text-sm text-gray-500"> </p>'),va=C('<div class="text-xs text-gray-400">Choose one</div>'),ca=C('<div class="text-xs text-gray-400"><!></div>'),fa=C("<div> </div>"),_a=C('<div class="mt-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2"></div>'),ga=C('<div class="text-xs bg-gray-50 p-2 rounded"> </div>'),ha=C('<div class="mt-4 text-sm text-gray-600"><details class="group"><summary class="cursor-pointer font-medium group-hover:text-gray-800"> </summary> <div class="mt-2 space-y-1"></div></details></div>'),pa=C('<div class="mb-8"><div class="mb-4"><div class="flex items-center justify-between"><div><h2 class="text-lg font-medium text-gray-900 flex items-center"> <!> <!></h2> <!></div> <div class="text-right"><div class="text-sm text-gray-500"> <!> selected</div> <!></div></div> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div> <!></div>');function ma(t,e){Me(e,!0);let r=me(()=>e.group.options.reduce((b,E)=>b+(h.selections[E.id]||0),0)),i=me(()=>e.group.required),n=me(()=>!l(i)||l(r)>=(e.group.min_selections||1)),a=me(()=>h.validationResults.some(b=>b.group_id===e.group.id||e.group.options.some(E=>b.option_id===E.id)));var s=pa(),u=o(s),v=o(u),c=o(v),f=o(c),_=o(f),d=g(_);{var p=b=>{var E=la();w(b,E)};P(d,b=>{l(i)&&b(p)})}var m=g(d,2);{var D=b=>{var E=da();w(b,E)};P(m,b=>{l(n)&&b(D)})}var R=g(f,2);{var A=b=>{var E=ua(),V=o(E);O(()=>k(V,e.group.description)),w(b,E)};P(R,b=>{e.group.description&&b(A)})}var T=g(c,2),y=o(T),x=o(y),S=g(x);{var I=b=>{var E=Ut();O(()=>k(E,`/ ${e.group.max_selections??""}`)),w(b,E)};P(S,b=>{e.group.max_selections&&b(I)})}var N=g(y,2);{var L=b=>{var E=va();w(b,E)},K=(b,E)=>{{var V=te=>{var z=ca(),j=o(z);{var Y=H=>{var F=Ut();O(()=>k(F,`${e.group.min_selections??""}-${e.group.max_selections??""} required`)),w(H,F)},ee=(H,F)=>{{var ae=re=>{var ue=Ut();O(()=>k(ue,`Min ${e.group.min_selections??""} required`)),w(re,ue)},G=(re,ue)=>{{var Ae=Ne=>{var Qt=Ut();O(()=>k(Qt,`Max ${e.group.max_selections??""} allowed`)),w(Ne,Qt)};P(re,Ne=>{e.group.max_selections&&Ne(Ae)},ue)}};P(H,re=>{e.group.min_selections?re(ae):re(G,!1)},F)}};P(j,H=>{e.group.min_selections&&e.group.max_selections?H(Y):H(ee,!1)})}w(te,z)};P(b,te=>{(e.group.min_selections||e.group.max_selections)&&te(V)},E)}};P(N,b=>{e.group.selection_type==="single"?b(L):b(K,!1)})}var Q=g(v,2);{var U=b=>{var E=_a();be(E,21,()=>h.validationResults,ye,(V,te)=>{var z=it(),j=Le(z);{var Y=ee=>{var H=fa(),F=o(H);O(()=>k(F,l(te).message)),w(ee,H)};P(j,ee=>{l(te).group_id===e.group.id&&ee(Y)})}w(V,z)}),w(b,E)};P(Q,b=>{l(a)&&b(U)})}var $=g(u,2);be($,21,()=>e.group.options,ye,(b,E)=>{sa(b,{get option(){return l(E)},get group(){return e.group}})});var Z=g($,2);{var M=b=>{var E=ha(),V=o(E),te=o(V),z=o(te),j=g(te,2);be(j,21,()=>e.group.constraints,ye,(Y,ee)=>{var H=ga(),F=o(H);O(()=>k(F,l(ee))),w(Y,H)}),O(()=>k(z,`View Constraints (${e.group.constraints.length??""})`)),w(b,E)};P(Z,b=>{e.group.constraints&&e.group.constraints.length>0&&b(M)})}O(()=>{k(_,`${e.group.name??""} `),k(x,`${l(r)??""} `)}),w(t,s),Oe()}var xa=C('<div class="text-sm text-gray-500 flex items-center"><div class="animate-spin w-4 h-4 border-2 border-gray-300 border-t-primary-600 rounded-full mr-2"></div> Calculating...</div>'),ya=C('<div class="text-sm text-green-600">Updated</div>'),ba=C('<span class="text-green-600 ml-2"> </span>'),wa=C('<div class="text-sm text-gray-500"> <!></div>'),Sa=C('<div class="text-gray-500 text-xs"> </div>'),Ca=C('<div class="flex justify-between text-sm"><div class="flex-1"><div class="text-gray-900"> </div> <!></div> <div class="text-gray-900 font-medium"> </div></div>'),Ea=C('<div class="flex justify-between text-sm"><span class="text-gray-600"> </span> <span> </span></div>'),ka=C('<div class="space-y-3"><h4 class="text-sm font-medium text-gray-700 border-b border-gray-200 pb-2">Price Breakdown</h4> <!> <div class="border-t border-gray-200 pt-3"><div class="flex justify-between text-sm"><span class="text-gray-500">Subtotal</span> <span class="text-gray-900"> </span></div></div> <!> <div class="border-t border-gray-200 pt-3"><div class="flex justify-between text-lg font-medium"><span class="text-gray-900">Total</span> <span class="text-gray-900"> </span></div></div></div>'),Ia=()=>h.saveConfiguration(),Pa=C('<div class="mt-6 space-y-3"><button type="button" class="w-full bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 transition-colors">Save Configuration</button> <button type="button" class="w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors">Export Configuration</button></div>'),Ta=C('<div class="bg-white rounded-lg border border-gray-200 p-6"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-medium text-gray-900">Pricing</h3> <!></div> <div class="text-center mb-6"><div class="text-3xl font-bold text-gray-900"> </div> <!></div> <!> <!></div>');function vr(t,e){Me(e,!0);let r=de(e,"detailed",3,!1),i=de(e,"showBreakdown",3,!0),n=me(()=>h.adjustments.reduce((y,x)=>x.amount<0?y+Math.abs(x.amount):y,0));var a=Ta(),s=o(a),u=g(o(s),2);{var v=y=>{var x=xa();w(y,x)},c=(y,x)=>{{var S=I=>{var N=ya();w(I,N)};P(y,I=>{h.pricingData&&I(S)},x)}};P(u,y=>{h.isPricing?y(v):y(c,!1)})}var f=g(s,2),_=o(f),d=o(_),p=g(_,2);{var m=y=>{var x=wa(),S=o(x),I=g(S);{var N=L=>{var K=ba(),Q=o(K);O(U=>k(Q,`Save $${U??""}`),[()=>l(n).toFixed(2)]),w(L,K)};P(I,L=>{l(n)>0&&L(N)})}O(L=>k(S,`Base: $${L??""} `),[()=>h.basePrice.toFixed(2)]),w(y,x)};P(p,y=>{h.basePrice!==h.totalPrice&&y(m)})}var D=g(f,2);{var R=y=>{var x=ka(),S=g(o(x),2);be(S,17,()=>h.selectedOptions,ye,(E,V)=>{var te=Ca(),z=o(te),j=o(z),Y=o(j),ee=g(j,2);{var H=G=>{var re=Sa(),ue=o(re);O(Ae=>k(ue,`$${Ae??""} Ã— ${h.selections[l(V).id]??""}`),[()=>l(V).base_price.toFixed(2)]),w(G,re)};P(ee,G=>{h.selections[l(V).id]>1&&G(H)})}var F=g(z,2),ae=o(F);O(G=>{k(Y,l(V).name),k(ae,`$${G??""}`)},[()=>(l(V).base_price*h.selections[l(V).id]).toFixed(2)]),w(E,te)});var I=g(S,2),N=o(I),L=g(o(N),2),K=o(L),Q=g(I,2);{var U=E=>{var V=it(),te=Le(V);be(te,17,()=>h.adjustments,ye,(z,j)=>{var Y=Ea(),ee=o(Y),H=o(ee),F=g(ee,2),ae=o(F);O(G=>{k(H,l(j).rule_name||l(j).name),le(F,1,l(j).amount<0?"text-green-600":"text-red-600"),k(ae,`${l(j).amount<0?"-":"+"}$${G??""}`)},[()=>Math.abs(l(j).amount).toFixed(2)]),w(z,Y)}),w(E,V)};P(Q,E=>{h.adjustments.length>0&&E(U)})}var $=g(Q,2),Z=o($),M=g(o(Z),2),b=o(M);O((E,V)=>{k(K,`$${E??""}`),k(b,`$${V??""}`)},[()=>h.basePrice.toFixed(2),()=>h.totalPrice.toFixed(2)]),w(y,x)};P(D,y=>{i()&&h.pricingData&&h.selectedOptions.length>0&&y(R)})}var A=g(D,2);{var T=y=>{var x=Pa(),S=o(x);S.__click=[Ia];var I=g(S,2);I.__click=()=>{const N=h.exportConfiguration(),L=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),K=URL.createObjectURL(L),Q=document.createElement("a");Q.href=K,Q.download=`configuration-${Date.now()}.json`,Q.click()},w(y,x)};P(A,y=>{r()&&y(T)})}O(y=>k(d,`$${y??""}`),[()=>h.totalPrice.toFixed(2)]),w(t,a),Oe()}rt(["click"]);var Ma=C("<li> </li>"),Oa=C('<div class="rounded-md bg-red-50 p-4 border border-red-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-red-800"> </h3> <div class="mt-2 text-sm text-red-700"><ul class="space-y-1"></ul></div></div></div></div>'),Da=C("<li> </li>"),Ra=C('<div class="rounded-md bg-yellow-50 p-4 border border-yellow-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-yellow-800"> </h3> <div class="mt-2 text-sm text-yellow-700"><ul class="space-y-1"></ul></div></div></div></div>'),Aa=C("<li> </li>"),Na=C('<div class="rounded-md bg-blue-50 p-4 border border-blue-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800"> </h3> <div class="mt-2 text-sm text-blue-700"><ul class="space-y-1"></ul></div></div></div></div>'),La=C('<div class="space-y-3"><!> <!> <!></div>'),qa=C('<div class="text-center py-4"><div class="animate-spin w-6 h-6 border-2 border-gray-300 border-t-primary-600 rounded-full mx-auto"></div> <p class="mt-2 text-sm text-gray-500">Validating configuration...</p></div>'),ja=C('<div class="rounded-md bg-green-50 p-4 border border-green-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-green-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-green-800">Configuration Valid</h3> <div class="mt-2 text-sm text-green-700"><p>Your configuration meets all requirements and constraints.</p></div></div></div></div>');function cr(t,e){Me(e,!0);let r=de(e,"showSuggestions",3,!0),i=me(()=>h.validationResults.filter(f=>f.severity==="error"||f.level==="error")),n=me(()=>h.validationResults.filter(f=>f.severity==="warning"||f.level==="warning")),a=me(()=>h.validationResults.filter(f=>f.severity==="info"||f.level==="suggestion"));var s=it(),u=Le(s);{var v=f=>{var _=La(),d=o(_);{var p=T=>{var y=Oa(),x=o(y),S=g(o(x),2),I=o(S),N=o(I),L=g(I,2),K=o(L);be(K,21,()=>l(i),ye,(Q,U)=>{var $=Ma(),Z=o($);O(()=>k(Z,`â€¢ ${l(U).message??""}`)),w(Q,$)}),O(()=>k(N,`Configuration Errors (${l(i).length??""})`)),w(T,y)};P(d,T=>{l(i).length>0&&T(p)})}var m=g(d,2);{var D=T=>{var y=Ra(),x=o(y),S=g(o(x),2),I=o(S),N=o(I),L=g(I,2),K=o(L);be(K,21,()=>l(n),ye,(Q,U)=>{var $=Da(),Z=o($);O(()=>k(Z,`â€¢ ${l(U).message??""}`)),w(Q,$)}),O(()=>k(N,`Warnings (${l(n).length??""})`)),w(T,y)};P(m,T=>{l(n).length>0&&T(D)})}var R=g(m,2);{var A=T=>{var y=Na(),x=o(y),S=g(o(x),2),I=o(S),N=o(I),L=g(I,2),K=o(L);be(K,21,()=>l(a),ye,(Q,U)=>{var $=Aa(),Z=o($);O(()=>k(Z,`â€¢ ${l(U).message??""}`)),w(Q,$)}),O(()=>k(N,`Suggestions (${l(a).length??""})`)),w(T,y)};P(R,T=>{r()&&l(a).length>0&&T(A)})}w(f,_)},c=(f,_)=>{{var d=m=>{var D=qa();w(m,D)},p=m=>{var D=ja();w(m,D)};P(f,m=>{h.isValidating?m(d):m(p,!1)},_)}};P(u,f=>{h.validationResults.length>0?f(v):f(c,!1)})}w(t,s),Oe()}var Fa=C('<div class="text-sm text-gray-500 mt-1"> </div>'),Va=C('<div class="text-sm text-gray-600 mt-1"> </div>'),za=C('<div class="text-sm text-gray-500"> </div>'),Ba=C('<div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"><div class="flex-1"><div class="font-medium text-gray-900"> </div> <!> <!></div> <div class="text-right"><div class="font-medium text-gray-900"> </div> <!></div></div>'),Ua=C('<div class="bg-white rounded-lg border border-gray-200 p-6"><h3 class="text-lg font-medium text-gray-900 mb-4">Selected Options</h3> <div class="space-y-4"></div></div>'),Ha=(t,e)=>B(e,!0),Qa=()=>h.saveConfiguration(),Ya=(t,e)=>B(e,!1),Ga=t=>t.stopPropagation(),Ja=(t,e,r)=>e(l(r)),Wa=(t,e)=>B(e,!1),Ka=C('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-6 max-w-md w-full mx-4"><h3 class="text-lg font-medium text-gray-900 mb-4">Share Configuration</h3> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">Shareable Link</label> <div class="flex"><input type="text" readonly="" class="flex-1 px-3 py-2 border border-gray-300 rounded-l-md text-sm bg-gray-50"/> <button type="button" class="px-4 py-2 bg-primary-600 text-white rounded-r-md hover:bg-primary-700 transition-colors text-sm"> </button></div></div> <div class="flex justify-end space-x-3"><button type="button" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">Close</button></div></div></div></div>'),Za=C('<div class="space-y-6"><div class="bg-white rounded-lg border border-gray-200 p-6"><h2 class="text-xl font-semibold text-gray-900 mb-4">Configuration Summary</h2> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-2xl font-bold text-primary-600"> </div> <div class="text-sm text-gray-500">Options Selected</div></div> <div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-2xl font-bold text-primary-600"> </div> <div class="text-sm text-gray-500">Complete</div></div> <div class="text-center p-4 bg-gray-50 rounded-lg"><div> </div> <div class="text-sm text-gray-500"> </div></div></div></div> <!> <div class="bg-white rounded-lg border border-gray-200 p-6"><h3 class="text-lg font-medium text-gray-900 mb-4">Validation Status</h3> <!></div> <!> <div class="bg-white rounded-lg border border-gray-200 p-6"><h3 class="text-lg font-medium text-gray-900 mb-4">Actions</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><button type="button" class="flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg> Share Configuration</button> <button type="button" class="flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Export Configuration</button> <button type="button" class="flex items-center justify-center px-4 py-2 bg-primary-600 text-white rounded-md text-sm font-medium hover:bg-primary-700 transition-colors"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path></svg> Save Configuration</button> <button type="button" class="flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700 transition-colors"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 3H3m4 10v6a1 1 0 001 1h6a1 1 0 001-1v-6m-8 0V9a1 1 0 011-1h6a1 1 0 011 1v4.01"></path></svg> Request Quote</button></div></div></div> <!>',1);function Xa(t,e){Me(e,!0);let r=me(()=>h.generateShareableUrl()),i=J(!1),n=J(!1);async function a(z){try{await navigator.clipboard.writeText(z),B(n,!0),setTimeout(()=>B(n,!1),2e3)}catch(j){console.warn("Failed to copy to clipboard:",j)}}function s(){const z=h.exportConfiguration(),j=new Blob([JSON.stringify(z,null,2)],{type:"application/json"}),Y=URL.createObjectURL(j),ee=document.createElement("a");ee.href=Y,ee.download=`configuration-${Date.now()}.json`,ee.click(),URL.revokeObjectURL(Y)}var u=Za(),v=Le(u),c=o(v),f=g(o(c),2),_=o(f),d=o(_),p=o(d),m=g(_,2),D=o(m),R=o(D),A=g(m,2),T=o(A),y=o(T),x=g(T,2),S=o(x),I=g(c,2);{var N=z=>{var j=Ua(),Y=g(o(j),2);be(Y,21,()=>h.selectedOptions,ye,(ee,H)=>{var F=Ba(),ae=o(F),G=o(ae),re=o(G),ue=g(G,2);{var Ae=pe=>{var Be=Fa(),kt=o(Be);O(()=>k(kt,l(H).description)),w(pe,Be)};P(ue,pe=>{l(H).description&&pe(Ae)})}var Ne=g(ue,2);{var Qt=pe=>{var Be=Va(),kt=o(Be);O(()=>k(kt,`Quantity: ${h.selections[l(H).id]??""}`)),w(pe,Be)};P(Ne,pe=>{h.selections[l(H).id]>1&&pe(Qt)})}var so=g(ae,2),si=o(so),lo=o(si),uo=g(si,2);{var vo=pe=>{var Be=za(),kt=o(Be);O(co=>k(kt,`$${co??""} each`),[()=>l(H).base_price.toFixed(2)]),w(pe,Be)};P(uo,pe=>{h.selections[l(H).id]>1&&pe(vo)})}O(pe=>{k(re,l(H).name),k(lo,`$${pe??""}`)},[()=>(l(H).base_price*h.selections[l(H).id]).toFixed(2)]),w(ee,F)}),w(z,j)};P(I,z=>{h.selectedOptions.length>0&&z(N)})}var L=g(I,2),K=g(o(L),2);cr(K,{});var Q=g(L,2);vr(Q,{detailed:!0});var U=g(Q,2),$=g(o(U),2),Z=o($);Z.__click=[Ha,i];var M=g(Z,2);M.__click=s;var b=g(M,2);b.__click=[Qa];var E=g(b,2),V=g(v,2);{var te=z=>{var j=Ka();j.__click=[Ya,i];var Y=o(j);Y.__click=[Ga];var ee=g(o(Y),2),H=o(ee),F=g(o(H),2),ae=o(F),G=g(ae,2);G.__click=[Ja,a,r];var re=o(G),ue=g(H,2),Ae=o(ue);Ae.__click=[Wa,i],O(()=>{xn(ae,l(r)),k(re,l(n)?"Copied!":"Copy")}),w(z,j)};P(V,z=>{l(i)&&z(te)})}O(()=>{k(p,h.selectedOptions.length),k(R,`${h.completionPercentage??""}%`),le(T,1,`text-2xl font-bold ${h.isValid?"text-green-600":"text-red-600"}`),k(y,h.isValid?"âœ“":"âœ—"),k(S,h.isValid?"Valid":"Has Errors"),b.disabled=!h.isValid,E.disabled=!h.isValid}),w(t,u),Oe()}rt(["click"]);var $a=C('<div class="space-y-6"><!> <!> <!></div>'),eo=C('<div class="mt-4"><!> <!></div>'),to=()=>h.previousStep(),ro=(t,e)=>h.canProceedToNextStep?e():h.nextStep(),io=C('<div class="mt-8 flex justify-between items-center"><button type="button">Previous</button> <button type="button"> </button></div>'),no=C("<!> <div><div><!></div> <!></div> <!>",1),ao=C("<div><!></div>");function oo(t,e){Me(e,!0);let r=de(e,"theme",7,"light"),i=de(e,"apiUrl",3,"http://localhost:8080/api/v1"),n=de(e,"embedMode",3,!1),a=de(e,"onComplete",3,null),s=de(e,"onConfigurationChange",3,null);de(e,"onError",3,null),ni();let u=J(0),v=Ee(n()),c=J(!1);typeof window<"u"&&(window.__API_BASE_URL__=i()),Sn(()=>{console.log("ðŸš€ ConfiguratorApp mounting with modelId:",e.modelId),h.initialize(),l(c)||(h.setModelId(e.modelId),B(c,!0)),document.documentElement.setAttribute("data-theme",r()),n()&&f()}),Se(()=>{l(c)&&e.modelId!==h.modelId&&(console.log("ðŸ“ ModelId prop changed, updating store:",e.modelId),h.setModelId(e.modelId))});function f(){window.addEventListener("message",_),window.parent!==window&&window.parent.postMessage({type:"cpq-configurator-ready",modelId:e.modelId},"*"),new ResizeObserver(()=>{window.parent!==window&&window.parent.postMessage({type:"cpq-configurator-resize",height:document.body.scrollHeight},"*")}).observe(document.body)}function _(y){const{type:x,data:S}=y.data;switch(x){case"cpq-set-theme":r(S.theme),document.documentElement.setAttribute("data-theme",r());break;case"cpq-load-configuration":S.config&&h.loadFromShareableUrl(S.config);break;case"cpq-get-configuration":window.parent.postMessage({type:"cpq-configuration-response",configuration:h.exportConfiguration()},"*");break}}function d(){nr(u),h.loadModel()}function p(){s()&&s()(h.exportConfiguration()),n()&&window.parent!==window&&window.parent.postMessage({type:"cpq-configuration-change",configuration:h.exportConfiguration()},"*")}function m(){const y=h.exportConfiguration();a()&&a()(y),n()&&window.parent!==window&&window.parent.postMessage({type:"cpq-configuration-complete",configuration:y},"*")}Se(()=>{l(c)&&Object.keys(h.selections).length>0&&p()});var D=ao(),R=o(D);{var A=y=>{Qn(y,{get error(){return h.error},onRetry:d,get retryCount(){return l(u)}})},T=(y,x)=>{{var S=N=>{ai(N,{message:"Loading product configuration...",size:"large"})},I=(N,L)=>{{var K=U=>{var $=no(),Z=Le($);{var M=F=>{Nn(F,{get currentStep(){return h.currentStep},totalSteps:4,get completionPercentage(){return h.completionPercentage}})};P(Z,F=>{n()||F(M)})}var b=g(Z,2),E=o(b),V=o(E);{var te=F=>{var ae=it(),G=Le(ae);be(G,17,()=>h.model.option_groups,ye,(re,ue)=>{ma(re,{get group(){return l(ue)}})}),w(F,ae)};P(V,F=>{h.model.option_groups&&F(te)})}var z=g(E,2);{var j=F=>{var ae=$a(),G=o(ae);cr(G,{});var re=g(G,2);vr(re,{detailed:!0});var ue=g(re,2);{var Ae=Ne=>{Xa(Ne,{})};P(ue,Ne=>{h.completionPercentage>=100&&Ne(Ae)})}w(F,ae)},Y=F=>{var ae=eo(),G=o(ae);vr(G,{detailed:!1});var re=g(G,2);cr(re,{}),w(F,ae)};P(z,F=>{n()?F(Y,!1):F(j)})}var ee=g(b,2);{var H=F=>{var ae=io(),G=o(ae);G.__click=[to];var re=g(G,2);re.__click=[ro,m];var ue=o(re);O(()=>{le(G,1,`flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors
                 ${h.currentStep===0?"opacity-50 cursor-not-allowed":""}`),G.disabled=h.currentStep===0,le(re,1,`flex items-center px-4 py-2 bg-primary-600 text-white rounded-md text-sm font-medium hover:bg-primary-700 transition-colors
                 ${!h.canProceedToNextStep&&h.currentStep===3?"opacity-50 cursor-not-allowed":""}`),re.disabled=!h.canProceedToNextStep&&h.currentStep===3,k(ue,h.currentStep===3?"Complete Configuration":"Next")}),w(F,ae)};P(ee,F=>{n()||F(H)})}O(()=>{le(b,1,`grid grid-cols-1 ${n()?"lg:grid-cols-1":"lg:grid-cols-3"} gap-6`),le(E,1,`${n()?"col-span-1":"col-span-2"} space-y-6`)}),w(U,$)},Q=U=>{ai(U,{message:"Initializing configurator...",size:"large"})};P(N,U=>{h.model?U(K):U(Q,!1)},L)}};P(y,N=>{h.isLoading?N(S):N(I,!1)},x)}};P(R,y=>{h.error?y(A):y(T,!1)})}O(()=>{le(D,1,`cpq-configurator ${n()?"cpq-embed-mode":""} ${v?"cpq-compact":""}`),$r(D,"data-theme",r())}),w(t,D),Oe()}return rt(["click"]),window.CPQConfigurator={embed:function(t){const{container:e,modelId:r,theme:i="light",apiUrl:n="http://localhost:8080/api/v1",onComplete:a=null,onConfigurationChange:s=null,onError:u=null,...v}=t;if(!e||!r)throw new Error("CPQConfigurator.embed() requires container and modelId options");const c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`Container element not found: ${e}`);const f=dn(oo,{target:c,props:{modelId:r,theme:i,apiUrl:n,embedMode:!1,onComplete:a,onConfigurationChange:s,onError:u,...v}});return{destroy:()=>{f&&typeof f.destroy=="function"&&f.destroy()},update:_=>{f&&typeof f.$set=="function"&&f.$set(_)}}},version:"1.0.0"},document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-cpq-configurator]").forEach(e=>{const r=e.getAttribute("data-cpq-model-id"),i=e.getAttribute("data-cpq-theme")||"light",n=e.getAttribute("data-cpq-api-url")||"http://localhost:8080/api/v1";r&&window.CPQConfigurator.embed({container:e,modelId:r,theme:i,apiUrl:n,onComplete:a=>{const s=new CustomEvent("cpq-configuration-complete",{detail:{configuration:a},bubbles:!0});e.dispatchEvent(s)},onConfigurationChange:a=>{const s=new CustomEvent("cpq-configuration-change",{detail:{configuration:a},bubbles:!0});e.dispatchEvent(s)},onError:a=>{const s=new CustomEvent("cpq-error",{detail:{error:a},bubbles:!0});e.dispatchEvent(s)}})})}),window.CPQConfigurator});
