(function(te,se){typeof exports=="object"&&typeof module<"u"?module.exports=se():typeof define=="function"&&define.amd?define(se):(te=typeof globalThis<"u"?globalThis:te||self,te.CPQConfigurator=se())})(this,function(){"use strict";var Hr=te=>{throw TypeError(te)};var Yr=(te,se,_e)=>se.has(te)||Hr("Cannot "+_e);var G=(te,se,_e)=>(Yr(te,se,"read from private field"),_e?_e.call(te):se.get(te)),ve=(te,se,_e)=>se.has(te)?Hr("Cannot add the same private member more than once"):se instanceof WeakSet?se.add(te):se.set(te,_e),de=(te,se,_e,pt)=>(Yr(te,se,"write to private field"),pt?pt.call(te,_e):se.set(te,_e),_e);var Gr,et,tt,rt,it,st,nt,ot,at,lt,ut,ct,vt,dt,ft,_t;const te="5";typeof window<"u"&&((Gr=window.__svelte??(window.__svelte={})).v??(Gr.v=new Set)).add(te);const se=1,_e=2,pt=4,Qr=8,Wr=16,Jr=1,Kr=4,Zr=8,Xr=16,$r=1,ei=2,pe=Symbol(),ti="http://www.w3.org/1999/xhtml",ir=!1;var jt=Array.isArray,ri=Array.prototype.indexOf,sr=Array.from,mt=Object.getOwnPropertyDescriptor,ii=Object.getOwnPropertyDescriptors,si=Object.prototype,ni=Array.prototype,nr=Object.getPrototypeOf;function oi(t){for(var e=0;e<t.length;e++)t[e]()}function ai(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const r=[];for(const s of t)if(r.push(s),r.length===e)break;return r}const Ce=2,or=4,yt=8,zt=16,Te=32,Je=64,Lt=128,me=256,bt=512,ye=1024,Pe=2048,Ge=4096,qe=8192,Ft=16384,ar=32768,Ut=65536,li=1<<19,lr=1<<20,Vt=1<<21,Ke=Symbol("$state"),ui=Symbol("legacy props"),ci=Symbol("");function ur(t){return t===this.v}function vi(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Bt(t){return!vi(t,this.v)}function di(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function fi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function _i(t){throw new Error("https://svelte.dev/e/effect_orphan")}function pi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function hi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function gi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function mi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function yi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let bi=!1;function cr(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let be=null;function vr(t){be=t}function ze(t,e=!1,r){var s=be={p:be,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};yr(()=>{s.d=!0})}function Le(t){const e=be;if(e!==null){const o=e.e;if(o!==null){var r=J,s=W;e.e=null;try{for(var i=0;i<o.length;i++){var n=o[i];$e(n.effect),Ue(n.reaction),br(n.fn)}}finally{$e(r),Ue(s)}}be=e.p,e.m=!0}return{}}function dr(){return!0}function De(t){if(typeof t!="object"||t===null||Ke in t)return t;const e=nr(t);if(e!==si&&e!==ni)return t;var r=new Map,s=jt(t),i=H(0),n=W,o=l=>{var a=W;Ue(n);var v=l();return Ue(a),v};return s&&r.set("length",H(t.length)),new Proxy(t,{defineProperty(l,a,v){return(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&gi(),o(()=>{var p=r.get(a);p===void 0?(p=H(v.value),r.set(a,p)):O(p,v.value,!0)}),!0},deleteProperty(l,a){var v=r.get(a);if(v===void 0){if(a in l){const c=o(()=>H(pe));r.set(a,c),Gt(i)}}else{if(s&&typeof a=="string"){var p=r.get("length"),_=Number(a);Number.isInteger(_)&&_<p.v&&O(p,_)}O(v,pe),Gt(i)}return!0},get(l,a,v){if(a===Ke)return t;var p=r.get(a),_=a in l;if(p===void 0&&(!_||mt(l,a)?.writable)&&(p=o(()=>{var h=De(_?l[a]:pe),w=H(h);return w}),r.set(a,p)),p!==void 0){var c=d(p);return c===pe?void 0:c}return Reflect.get(l,a,v)},getOwnPropertyDescriptor(l,a){var v=Reflect.getOwnPropertyDescriptor(l,a);if(v&&"value"in v){var p=r.get(a);p&&(v.value=d(p))}else if(v===void 0){var _=r.get(a),c=_?.v;if(_!==void 0&&c!==pe)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return v},has(l,a){if(a===Ke)return!0;var v=r.get(a),p=v!==void 0&&v.v!==pe||Reflect.has(l,a);if(v!==void 0||J!==null&&(!p||mt(l,a)?.writable)){v===void 0&&(v=o(()=>{var c=p?De(l[a]):pe,h=H(c);return h}),r.set(a,v));var _=d(v);if(_===pe)return!1}return p},set(l,a,v,p){var _=r.get(a),c=a in l;if(s&&a==="length")for(var h=v;h<_.v;h+=1){var w=r.get(h+"");w!==void 0?O(w,pe):h in l&&(w=o(()=>H(pe)),r.set(h+"",w))}if(_===void 0)(!c||mt(l,a)?.writable)&&(_=o(()=>{var E=H(void 0);return O(E,De(v)),E}),r.set(a,_));else{c=_.v!==pe;var F=o(()=>De(v));O(_,F)}var S=Reflect.getOwnPropertyDescriptor(l,a);if(S?.set&&S.set.call(p,v),!c){if(s&&typeof a=="string"){var V=r.get("length"),B=Number(a);Number.isInteger(B)&&B>=V.v&&O(V,B+1)}Gt(i)}return!0},ownKeys(l){d(i);var a=Reflect.ownKeys(l).filter(_=>{var c=r.get(_);return c===void 0||c.v!==pe});for(var[v,p]of r)p.v!==pe&&!(v in l)&&a.push(v);return a},setPrototypeOf(){mi()}})}function Gt(t,e=1){O(t,t.v+e)}function fr(t){try{if(t!==null&&typeof t=="object"&&Ke in t)return t[Ke]}catch{}return t}function wi(t,e){return Object.is(fr(t),fr(e))}function wt(t){var e=Ce|Pe,r=W!==null&&(W.f&Ce)!==0?W:null;return J===null||r!==null&&(r.f&me)!==0?e|=me:J.f|=lr,{ctx:be,deps:null,effects:null,equals:ur,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??J}}function Ee(t){const e=wt(t);return xr(e),e}function Ai(t){const e=wt(t);return e.equals=Bt,e}function _r(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)He(e[r])}}function ki(t){for(var e=t.parent;e!==null;){if((e.f&Ce)===0)return e;e=e.parent}return null}function pr(t){var e,r=J;$e(ki(t));try{_r(t),e=qr(t)}finally{$e(r)}return e}function hr(t){var e=pr(t);if(t.equals(e)||(t.v=e,t.wv=Or()),!Xe){var r=(Ve||(t.f&me)!==0)&&t.deps!==null?Ge:ye;Ie(t,r)}}const ht=new Map;function At(t,e){var r={f:0,v:t,reactions:null,equals:ur,rv:0,wv:0};return r}function H(t,e){const r=At(t);return xr(r),r}function gr(t,e=!1,r=!0){const s=At(t);return e||(s.equals=Bt),s}function O(t,e,r=!1){W!==null&&!Oe&&dr()&&(W.f&(Ce|zt))!==0&&!Re?.includes(t)&&yi();let s=r?De(e):e;return Ht(t,s)}function Ht(t,e){if(!t.equals(e)){var r=t.v;Xe?ht.set(t,e):ht.set(t,r),t.v=e,(t.f&Ce)!==0&&((t.f&Pe)!==0&&pr(t),Ie(t,(t.f&me)===0?ye:Ge)),t.wv=Or(),mr(t,Pe),J!==null&&(J.f&ye)!==0&&(J.f&(Te|Je))===0&&(ke===null?ji([t]):ke.push(t))}return e}function mr(t,e){var r=t.reactions;if(r!==null)for(var s=r.length,i=0;i<s;i++){var n=r[i],o=n.f;(o&Pe)===0&&(Ie(n,e),(o&(ye|me))!==0&&((o&Ce)!==0?mr(n,Ge):Dt(n)))}}let Si=!1;var Ci,Ei,Ii;function Yt(t=""){return document.createTextNode(t)}function kt(t){return Ei.call(t)}function St(t){return Ii.call(t)}function u(t,e){return kt(t)}function Me(t,e){{var r=kt(t);return r instanceof Comment&&r.data===""?St(r):r}}function f(t,e=1,r=!1){let s=t;for(;e--;)s=St(s);return s}function xi(t){t.textContent=""}function Pi(t){J===null&&W===null&&_i(),W!==null&&(W.f&me)!==0&&J===null&&fi(),Xe&&di()}function Oi(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Ze(t,e,r,s=!0){var i=J,n={ctx:be,deps:null,nodes_start:null,nodes_end:null,f:t|Pe,first:null,fn:e,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(r)try{Xt(n),n.f|=ar}catch(a){throw He(n),a}else e!==null&&Dt(n);var o=r&&n.deps===null&&n.first===null&&n.nodes_start===null&&n.teardown===null&&(n.f&(lr|Lt))===0;if(!o&&s&&(i!==null&&Oi(n,i),W!==null&&(W.f&Ce)!==0)){var l=W;(l.effects??(l.effects=[])).push(n)}return n}function yr(t){const e=Ze(yt,null,!1);return Ie(e,ye),e.teardown=t,e}function Fe(t){Pi();var e=J!==null&&(J.f&Te)!==0&&be!==null&&!be.m;if(e){var r=be;(r.e??(r.e=[])).push({fn:t,effect:J,reaction:W})}else{var s=br(t);return s}}function Ti(t){const e=Ze(Je,t,!0);return()=>{He(e)}}function br(t){return Ze(or,t,!1)}function qi(t){return Ze(yt,t,!0)}function T(t,e=[],r=wt){const s=e.map(r);return Qt(()=>t(...s.map(d)))}function Qt(t,e=0){return Ze(yt|zt|e,t,!0)}function Ct(t,e=!0){return Ze(yt|Te,t,!0,e)}function wr(t){var e=t.teardown;if(e!==null){const r=Xe,s=W;Ir(!0),Ue(null);try{e.call(null)}finally{Ir(r),Ue(s)}}}function Ar(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var s=r.next;(r.f&Je)!==0?r.parent=null:He(r,e),r=s}}function Di(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Te)===0&&He(e),e=r}}function He(t,e=!0){var r=!1;(e||(t.f&li)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Mi(t.nodes_start,t.nodes_end),r=!0),Ar(t,e&&!r),qt(t,0),Ie(t,Ft);var s=t.transitions;if(s!==null)for(const n of s)n.stop();wr(t);var i=t.parent;i!==null&&i.first!==null&&kr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Mi(t,e){for(;t!==null;){var r=t===e?null:St(t);t.remove(),t=r}}function kr(t){var e=t.parent,r=t.prev,s=t.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=r))}function Wt(t,e){var r=[];Jt(t,r,!0),Sr(r,()=>{He(t),e&&e()})}function Sr(t,e){var r=t.length;if(r>0){var s=()=>--r||e();for(var i of t)i.out(s)}else e()}function Jt(t,e,r){if((t.f&qe)===0){if(t.f^=qe,t.transitions!==null)for(const o of t.transitions)(o.is_global||r)&&e.push(o);for(var s=t.first;s!==null;){var i=s.next,n=(s.f&Ut)!==0||(s.f&Te)!==0;Jt(s,e,n?r:!1),s=i}}}function Et(t){Cr(t,!0)}function Cr(t,e){if((t.f&qe)!==0){t.f^=qe,(t.f&ye)!==0&&(Ie(t,Pe),Dt(t));for(var r=t.first;r!==null;){var s=r.next,i=(r.f&Ut)!==0||(r.f&Te)!==0;Cr(r,i?e:!1),r=s}if(t.transitions!==null)for(const n of t.transitions)(n.is_global||e)&&n.in()}}let It=[];function Ri(){var t=It;It=[],oi(t)}function Kt(t){It.length===0&&queueMicrotask(Ri),It.push(t)}function Ni(t){var e=J;if((e.f&ar)===0){if((e.f&Lt)===0)throw t;e.fn(t)}else Er(t,e)}function Er(t,e){for(;e!==null;){if((e.f&Lt)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let Zt=!1,xt=null,Ye=!1,Xe=!1;function Ir(t){Xe=t}let Pt=[],Qn=[],W=null,Oe=!1;function Ue(t){W=t}let J=null;function $e(t){J=t}let Re=null;function xr(t){W!==null&&W.f&Vt&&(Re===null?Re=[t]:Re.push(t))}let fe=null,we=0,ke=null;function ji(t){ke=t}let Pr=1,Ot=0,Ve=!1;function Or(){return++Pr}function Tt(t){var e=t.f;if((e&Pe)!==0)return!0;if((e&Ge)!==0){var r=t.deps,s=(e&me)!==0;if(r!==null){var i,n,o=(e&bt)!==0,l=s&&J!==null&&!Ve,a=r.length;if(o||l){var v=t,p=v.parent;for(i=0;i<a;i++)n=r[i],(o||!n?.reactions?.includes(v))&&(n.reactions??(n.reactions=[])).push(v);o&&(v.f^=bt),l&&p!==null&&(p.f&me)===0&&(v.f^=me)}for(i=0;i<a;i++)if(n=r[i],Tt(n)&&hr(n),n.wv>t.wv)return!0}(!s||J!==null&&!Ve)&&Ie(t,ye)}return!1}function Tr(t,e,r=!0){var s=t.reactions;if(s!==null)for(var i=0;i<s.length;i++){var n=s[i];Re?.includes(t)||((n.f&Ce)!==0?Tr(n,e,!1):e===n&&(r?Ie(n,Pe):(n.f&ye)!==0&&Ie(n,Ge),Dt(n)))}}function qr(t){var h;var e=fe,r=we,s=ke,i=W,n=Ve,o=Re,l=be,a=Oe,v=t.f;fe=null,we=0,ke=null,Ve=(v&me)!==0&&(Oe||!Ye||W===null),W=(v&(Te|Je))===0?t:null,Re=null,vr(t.ctx),Oe=!1,Ot++,t.f|=Vt;try{var p=(0,t.fn)(),_=t.deps;if(fe!==null){var c;if(qt(t,we),_!==null&&we>0)for(_.length=we+fe.length,c=0;c<fe.length;c++)_[we+c]=fe[c];else t.deps=_=fe;if(!Ve)for(c=we;c<_.length;c++)((h=_[c]).reactions??(h.reactions=[])).push(t)}else _!==null&&we<_.length&&(qt(t,we),_.length=we);if(dr()&&ke!==null&&!Oe&&_!==null&&(t.f&(Ce|Ge|Pe))===0)for(c=0;c<ke.length;c++)Tr(ke[c],t);return i!==null&&i!==t&&(Ot++,ke!==null&&(s===null?s=ke:s.push(...ke))),p}catch(w){Ni(w)}finally{fe=e,we=r,ke=s,W=i,Ve=n,Re=o,vr(l),Oe=a,t.f^=Vt}}function zi(t,e){let r=e.reactions;if(r!==null){var s=ri.call(r,t);if(s!==-1){var i=r.length-1;i===0?r=e.reactions=null:(r[s]=r[i],r.pop())}}r===null&&(e.f&Ce)!==0&&(fe===null||!fe.includes(e))&&(Ie(e,Ge),(e.f&(me|bt))===0&&(e.f^=bt),_r(e),qt(e,0))}function qt(t,e){var r=t.deps;if(r!==null)for(var s=e;s<r.length;s++)zi(t,r[s])}function Xt(t){var e=t.f;if((e&Ft)===0){Ie(t,ye);var r=J,s=Ye;J=t,Ye=!0;try{(e&zt)!==0?Di(t):Ar(t),wr(t);var i=qr(t);t.teardown=typeof i=="function"?i:null,t.wv=Pr;var n;ir&&bi&&(t.f&Pe)!==0&&t.deps}finally{Ye=s,J=r}}}function Li(){try{pi()}catch(t){if(xt!==null)Er(t,xt);else throw t}}function Fi(){var t=Ye;try{var e=0;for(Ye=!0;Pt.length>0;){e++>1e3&&Li();var r=Pt,s=r.length;Pt=[];for(var i=0;i<s;i++){var n=Vi(r[i]);Ui(n)}ht.clear()}}finally{Zt=!1,Ye=t,xt=null}}function Ui(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var s=t[r];(s.f&(Ft|qe))===0&&Tt(s)&&(Xt(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null?kr(s):s.fn=null))}}function Dt(t){Zt||(Zt=!0,queueMicrotask(Fi));for(var e=xt=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(Je|Te))!==0){if((r&ye)===0)return;e.f^=ye}}Pt.push(e)}function Vi(t){for(var e=[],r=t;r!==null;){var s=r.f,i=(s&(Te|Je))!==0,n=i&&(s&ye)!==0;if(!n&&(s&qe)===0){(s&or)!==0?e.push(r):i?r.f^=ye:Tt(r)&&Xt(r);var o=r.first;if(o!==null){r=o;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)r=l.next,l=l.parent}return e}function d(t){var e=t.f,r=(e&Ce)!==0;if(W!==null&&!Oe){if(!Re?.includes(t)){var s=W.deps;t.rv<Ot&&(t.rv=Ot,fe===null&&s!==null&&s[we]===t?we++:fe===null?fe=[t]:(!Ve||!fe.includes(t))&&fe.push(t))}}else if(r&&t.deps===null&&t.effects===null){var i=t,n=i.parent;n!==null&&(n.f&me)===0&&(i.f^=me)}return r&&(i=t,Tt(i)&&hr(i)),Xe&&ht.has(t)?ht.get(t):t.v}function $t(t){var e=Oe;try{return Oe=!0,t()}finally{Oe=e}}const Bi=-7169;function Ie(t,e){t.f=t.f&Bi|e}let Dr=!1;function Gi(){Dr||(Dr=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Hi(t){var e=W,r=J;Ue(null),$e(null);try{return t()}finally{Ue(e),$e(r)}}function Yi(t,e,r,s=r){t.addEventListener(e,()=>Hi(r));const i=t.__on_r;i?t.__on_r=()=>{i(),s(!0)}:t.__on_r=()=>s(!0),Gi()}const Qi=new Set,Wi=new Set;function gt(t){for(var e=0;e<t.length;e++)Qi.add(t[e]);for(var r of Wi)r(t)}function Ji(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Mt(t,e){var r=J;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function A(t,e){var r=(e&$r)!==0,s=(e&ei)!==0,i,n=!t.startsWith("<!>");return()=>{i===void 0&&(i=Ji(n?t:"<!>"+t),r||(i=kt(i)));var o=s||Ci?document.importNode(i,!0):i.cloneNode(!0);if(r){var l=kt(o),a=o.lastChild;Mt(l,a)}else Mt(o,o);return o}}function Mr(t=""){{var e=Yt(t+"");return Mt(e,e),e}}function Qe(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Yt();return t.append(e,r),Mt(e,r),t}function g(t,e){t!==null&&t.before(e)}function x(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Rr(t){be===null&&cr(),Fe(()=>{const e=$t(t);if(typeof e=="function")return e})}function Ki(t,e,{bubbles:r=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:s})}function Zi(){const t=be;return t===null&&cr(),(e,r,s)=>{const i=t.s.$$events?.[e];if(i){const n=jt(i)?i.slice():[i],o=Ki(e,r,s);for(const l of n)l.call(t.x,o);return!o.defaultPrevented}return!0}}function I(t,e,[r,s]=[0,0]){var i=t,n=null,o=null,l=pe,a=r>0?Ut:0,v=!1;const p=(c,h=!0)=>{v=!0,_(h,c)},_=(c,h)=>{l!==(l=c)&&(l?(n?Et(n):h&&(n=Ct(()=>h(i))),o&&Wt(o,()=>{o=null})):(o?Et(o):h&&(o=Ct(()=>h(i,[r+1,s]))),n&&Wt(n,()=>{n=null})))};Qt(()=>{v=!1,e(p),v||_(null,null)},a)}function Ne(t,e){return e}function Xi(t,e,r,s){for(var i=[],n=e.length,o=0;o<n;o++)Jt(e[o].e,i,!0);var l=n>0&&i.length===0&&r!==null;if(l){var a=r.parentNode;xi(a),a.append(r),s.clear(),Be(t,e[0].prev,e[n-1].next)}Sr(i,()=>{for(var v=0;v<n;v++){var p=e[v];l||(s.delete(p.k),Be(t,p.prev,p.next)),He(p.e,!l)}})}function je(t,e,r,s,i,n=null){var o=t,l={flags:e,items:new Map,first:null},a=(e&pt)!==0;if(a){var v=t;o=v.appendChild(Yt())}var p=null,_=!1,c=Ai(()=>{var h=r();return jt(h)?h:h==null?[]:sr(h)});Qt(()=>{var h=d(c),w=h.length;_&&w===0||(_=w===0,$i(h,l,o,i,e,s,r),n!==null&&(w===0?p?Et(p):p=Ct(()=>n(o)):p!==null&&Wt(p,()=>{p=null})),d(c))})}function $i(t,e,r,s,i,n,o){var l=(i&Qr)!==0,a=(i&(se|_e))!==0,v=t.length,p=e.items,_=e.first,c=_,h,w=null,F,S=[],V=[],B,E,y,m;if(l)for(m=0;m<v;m+=1)B=t[m],E=n(B,m),y=p.get(E),y!==void 0&&(y.a?.measure(),(F??(F=new Set)).add(y));for(m=0;m<v;m+=1){if(B=t[m],E=n(B,m),y=p.get(E),y===void 0){var M=c?c.e.nodes_start:r;w=ts(M,e,w,w===null?e.first:w.next,B,E,m,s,i,o),p.set(E,w),S=[],V=[],c=w.next;continue}if(a&&es(y,B,m,i),(y.e.f&qe)!==0&&(Et(y.e),l&&(y.a?.unfix(),(F??(F=new Set)).delete(y))),y!==c){if(h!==void 0&&h.has(y)){if(S.length<V.length){var C=V[0],R;w=C.prev;var re=S[0],X=S[S.length-1];for(R=0;R<S.length;R+=1)Nr(S[R],C,r);for(R=0;R<V.length;R+=1)h.delete(V[R]);Be(e,re.prev,X.next),Be(e,w,re),Be(e,X,C),c=C,w=X,m-=1,S=[],V=[]}else h.delete(y),Nr(y,c,r),Be(e,y.prev,y.next),Be(e,y,w===null?e.first:w.next),Be(e,w,y),w=y;continue}for(S=[],V=[];c!==null&&c.k!==E;)(c.e.f&qe)===0&&(h??(h=new Set)).add(c),V.push(c),c=c.next;if(c===null)continue;y=c}S.push(y),w=y,c=y.next}if(c!==null||h!==void 0){for(var ie=h===void 0?[]:sr(h);c!==null;)(c.e.f&qe)===0&&ie.push(c),c=c.next;var ne=ie.length;if(ne>0){var Z=(i&pt)!==0&&v===0?r:null;if(l){for(m=0;m<ne;m+=1)ie[m].a?.measure();for(m=0;m<ne;m+=1)ie[m].a?.fix()}Xi(e,ie,Z,p)}}l&&Kt(()=>{if(F!==void 0)for(y of F)y.a?.apply()}),J.first=e.first&&e.first.e,J.last=w&&w.e}function es(t,e,r,s){(s&se)!==0&&Ht(t.v,e),(s&_e)!==0?Ht(t.i,r):t.i=r}function ts(t,e,r,s,i,n,o,l,a,v){var p=(a&se)!==0,_=(a&Wr)===0,c=p?_?gr(i,!1,!1):At(i):i,h=(a&_e)===0?o:At(o),w={i:h,v:c,k:n,a:null,e:null,prev:r,next:s};try{return w.e=Ct(()=>l(t,c,h,v),Si),w.e.prev=r&&r.e,w.e.next=s&&s.e,r===null?e.first=w:(r.next=w,r.e.next=w.e),s!==null&&(s.prev=w,s.e.prev=w.e),w}finally{}}function Nr(t,e,r){for(var s=t.next?t.next.e.nodes_start:r,i=e?e.e.nodes_start:r,n=t.e.nodes_start;n!==s;){var o=St(n);i.before(n),n=o}}function Be(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function rs(t,e,r,s,i){var n=e.$$slots?.[r],o=!1;n===!0&&(n=e.children,o=!0),n===void 0||n(t,o?()=>s:s)}const jr=[...` 	
\r\f \v\uFEFF`];function is(t,e,r){var s=t==null?"":""+t;if(e&&(s=s?s+" "+e:e),r){for(var i in r)if(r[i])s=s?s+" "+i:i;else if(s.length)for(var n=i.length,o=0;(o=s.indexOf(i,o))>=0;){var l=o+n;(o===0||jr.includes(s[o-1]))&&(l===s.length||jr.includes(s[l]))?s=(o===0?"":s.substring(0,o))+s.substring(l+1):o=l}}return s===""?null:s}function ss(t,e){return t==null?null:String(t)}function Ae(t,e,r,s,i,n){var o=t.__className;if(o!==r||o===void 0){var l=is(r,s,n);l==null?t.removeAttribute("class"):e?t.className=l:t.setAttribute("class",l),t.__className=r}else if(n&&i!==n)for(var a in n){var v=!!n[a];(i==null||v!==!!i[a])&&t.classList.toggle(a,v)}return n}function zr(t,e,r,s){var i=t.__style;if(i!==e){var n=ss(e);n==null?t.removeAttribute("style"):t.style.cssText=n,t.__style=e}return s}const ns=Symbol("is custom element"),os=Symbol("is html");function as(t,e){var r=Fr(t);r.value===(r.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Lr(t,e,r,s){var i=Fr(t);i[e]!==(i[e]=r)&&(e==="loading"&&(t[ci]=r),r==null?t.removeAttribute(e):typeof r!="string"&&ls(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Fr(t){return t.__attributes??(t.__attributes={[ns]:t.nodeName.includes("-"),[os]:t.namespaceURI===ti})}var Ur=new Map;function ls(t){var e=Ur.get(t.nodeName);if(e)return e;Ur.set(t.nodeName,e=[]);for(var r,s=t,i=Element.prototype;i!==s;){r=ii(s);for(var n in r)r[n].set&&e.push(n);s=nr(s)}return e}const er=new Set;function Vr(t,e,r,s,i=s){var n=r.getAttribute("type")==="checkbox",o=t;if(e!==null)for(var l of e)o=o[l]??(o[l]=[]);o.push(r),Yi(r,"change",()=>{var a=r.__value;n&&(a=us(o,a,r.checked)),i(a)},()=>i(n?[]:null)),qi(()=>{var a=s();n?(a=a||[],r.checked=a.includes(r.__value)):r.checked=wi(r.__value,a)}),yr(()=>{var a=o.indexOf(r);a!==-1&&o.splice(a,1)}),er.has(o)||(er.add(o),Kt(()=>{o.sort((a,v)=>a.compareDocumentPosition(v)===4?-1:1),er.delete(o)})),Kt(()=>{})}function us(t,e,r){for(var s=new Set,i=0;i<t.length;i+=1)t[i].checked&&s.add(t[i].__value);return r||s.delete(e),Array.from(s)}let Rt=!1;function cs(t){var e=Rt;try{return Rt=!1,[t(),Rt]}finally{Rt=e}}function Br(t){return t.ctx?.d??!1}function he(t,e,r,s){var i=(r&Jr)!==0,n=!0,o=(r&Zr)!==0,l=(r&Xr)!==0,a=!1,v;o?[v,a]=cs(()=>t[e]):v=t[e];var p=Ke in t||ui in t,_=o&&(mt(t,e)?.set??(p&&e in t&&(m=>t[e]=m)))||void 0,c=s,h=!0,w=!1,F=()=>(w=!0,h&&(h=!1,l?c=$t(s):c=s),c);v===void 0&&s!==void 0&&(_&&n&&hi(),v=F(),_&&_(v));var S;if(S=()=>{var m=t[e];return m===void 0?F():(h=!0,w=!1,m)},(r&Kr)===0&&n)return S;if(_){var V=t.$$legacy;return function(m,M){return arguments.length>0?((!M||V||a)&&_(M?S():m),m):S()}}var B=!1,E=gr(v),y=wt(()=>{var m=S(),M=d(E);return B?(B=!1,M):E.v=m});return o&&d(y),i||(y.equals=Bt),function(m,M){if(arguments.length>0){const C=M?d(y):o?De(m):m;if(!y.equals(C)){if(B=!0,O(E,C),w&&c!==void 0&&(c=C),Br(y))return m;$t(()=>d(y))}return m}return Br(y)?y.v:d(y)}}class vs{constructor(e,r={}){this.baseUrl=e||window.__API_BASE_URL__||"http://localhost:8080/api/v1",this.modelId=r.modelId,this.authToken=r.authToken||localStorage.getItem("auth_token"),this.timeout=r.timeout||1e4,console.log("API Client initialized:",{baseUrl:this.baseUrl,modelId:this.modelId,hasAuth:!!this.authToken})}async request(e,r={}){e.startsWith("/")||(e="/"+e);const s=`${this.baseUrl}${e}`;console.log("API Request:",r.method||"GET",s);const i={method:"GET",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json",...this.authToken&&{Authorization:`Bearer ${this.authToken}`},...r.headers},...r};i.body&&typeof i.body=="object"&&(i.body=JSON.stringify(i.body));try{const n=new AbortController,o=setTimeout(()=>n.abort(),this.timeout),l=await fetch(s,{...i,signal:n.signal});if(clearTimeout(o),!l.ok){const v=await l.text();let p=`HTTP ${l.status}: ${l.statusText}`;try{const _=JSON.parse(v);p=_.message||_.error||p}catch{v.includes("<html")||(p=v||p)}throw console.error(`API Error from ${e}:`,p),l.status===404?new Error(`Endpoint not found: ${s}. Please check if the backend server is running and the API path is correct.`):new Error(p)}const a=await l.json();if(console.log(`API Response from ${e}:`,a),a.success!==void 0){if(a.success&&a.data!==void 0)return a.data;if(!a.success)throw new Error(a.error||a.message||"Request failed")}return(e.includes("/groups")||e.includes("/options"))&&console.log(`Note: ${e} returned unwrapped response, structure:`,Array.isArray(a)?"Array":typeof a,"Keys:",a?Object.keys(a).slice(0,5):"none"),a}catch(n){throw n.name==="AbortError"?new Error("Request timeout"):n}}setAuthToken(e){this.authToken=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}async login(e,r){const s=await this.request("/auth/login",{method:"POST",body:{username:e,password:r}});return s.token&&this.setAuthToken(s.token),s}async validateToken(){return this.request("/auth/validate",{method:"POST"})}async getModel(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}`);if(console.log("getModel response:",e),e&&e.id&&!e.option_groups&&!e.groups)try{const r=await this.getModelOptions();e.options=r}catch(r){console.warn("Failed to fetch model options separately:",r)}return e}async getModelOptions(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/options`);return console.log("getModelOptions response:",e),e}async getModelGroups(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/groups?include=options`);return console.log("getModelGroups response:",e),e}async getModelStatistics(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/statistics`)}async createConfiguration(e={}){return this.request("/configurations",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e)}})}async getConfiguration(e){return this.request(`/configurations/${e}?model_id=${this.modelId}`)}async updateConfiguration(e,r){return this.request(`/configurations/${e}`,{method:"PUT",body:{model_id:this.modelId,selections:this.formatSelections(r)}})}async validateSelections(e){return this.request("/configurations/validate-selection",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e)}})}async getAvailableOptions(e){return this.request(`/configurations/${e}/available-options?model_id=${this.modelId}`)}async calculatePricing(e,r={}){return this.request("/pricing/calculate",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e),context:r}})}async getVolumeTiers(){return this.request(`/pricing/volume-tiers/${this.modelId}`)}async simulatePricing(e){return this.request("/pricing/simulate",{method:"POST",body:{model_id:this.modelId,scenarios:e}})}formatSelections(e){return Object.entries(e).filter(([r,s])=>s>0).map(([r,s])=>({option_id:r,quantity:s}))}}class ds{constructor(){ve(this,et);ve(this,tt);ve(this,rt);ve(this,it);ve(this,st);ve(this,nt);ve(this,ot);ve(this,at);ve(this,lt);ve(this,ut);ve(this,ct);ve(this,vt);ve(this,dt);ve(this,ft);ve(this,_t);de(this,et,H("")),de(this,tt,H(null)),de(this,rt,H(De({}))),de(this,it,H(De([]))),de(this,st,H(null)),de(this,nt,H(De([]))),de(this,ot,H(!1)),de(this,at,H(!1)),de(this,lt,H(!1)),de(this,ut,H(null)),de(this,ct,H(0)),de(this,vt,H(null)),de(this,dt,H(null)),de(this,ft,H(!1)),de(this,_t,H(0)),this.api=null,this._initialized=!1,this._debounceTimers=new Map,this._loadingPromise=null}get modelId(){return d(G(this,et))}set modelId(e){O(G(this,et),e,!0)}get model(){return d(G(this,tt))}set model(e){O(G(this,tt),e,!0)}get selections(){return d(G(this,rt))}set selections(e){O(G(this,rt),e,!0)}get validationResults(){return d(G(this,it))}set validationResults(e){O(G(this,it),e,!0)}get pricingData(){return d(G(this,st))}set pricingData(e){O(G(this,st),e,!0)}get availableOptions(){return d(G(this,nt))}set availableOptions(e){O(G(this,nt),e,!0)}get isLoading(){return d(G(this,ot))}set isLoading(e){O(G(this,ot),e,!0)}get isValidating(){return d(G(this,at))}set isValidating(e){O(G(this,at),e,!0)}get isPricing(){return d(G(this,lt))}set isPricing(e){O(G(this,lt),e,!0)}get error(){return d(G(this,ut))}set error(e){O(G(this,ut),e,!0)}get retryCount(){return d(G(this,ct))}set retryCount(e){O(G(this,ct),e,!0)}get configurationId(){return d(G(this,vt))}set configurationId(e){O(G(this,vt),e,!0)}get lastSaved(){return d(G(this,dt))}set lastSaved(e){O(G(this,dt),e,!0)}get isDirty(){return d(G(this,ft))}set isDirty(e){O(G(this,ft),e,!0)}get currentStep(){return d(G(this,_t))}set currentStep(e){O(G(this,_t),e,!0)}initialize(){this._initialized||(this._initialized=!0,console.log("🔧 ConfigurationStore initialized"),this._testConnection(),Fe(()=>{this.modelId&&!this._loadingPromise&&(this.api=new vs(window.__API_BASE_URL__,{modelId:this.modelId}),this.loadModel())}),Fe(()=>{this.api&&Object.keys(this.selections).length>0&&this.model&&this._debounce("validate",()=>this.validateSelections(),300)}),Fe(()=>{this.api&&this.isValid&&Object.keys(this.selections).length>0&&this.model&&this._debounce("pricing",()=>this.calculatePricing(),500)}),Fe(()=>{this.isDirty&&this.configurationId&&this._debounce("save",()=>this.saveConfiguration(),3e4)}))}get isValid(){return this.validationResults.length===0}get totalPrice(){return this.pricingData?.total_price||0}get basePrice(){return this.pricingData?.base_price||0}get adjustments(){return this.pricingData?.adjustments||[]}get selectedOptions(){if(!this.model?.option_groups||!Array.isArray(this.model.option_groups))return[];const e=[];for(const r of this.model.option_groups)if(!(!r.options||!Array.isArray(r.options)))for(const s of r.options)this.selections[s.id]>0&&e.push({...s,quantity:this.selections[s.id],group_name:r.name,group_id:r.id});return e}get completionPercentage(){if(!this.model?.option_groups||!Array.isArray(this.model.option_groups))return 0;const e=this.model.option_groups.filter(s=>s.required);if(e.length===0)return 100;const r=e.filter(s=>s.options&&Array.isArray(s.options)&&s.options.some(i=>this.selections[i.id]>0));return Math.round(r.length/e.length*100)}get canProceedToNextStep(){return this.completionPercentage>=100&&this.isValid}setModelId(e){console.log("setModelId called with:",e),this.modelId!==e&&(this.modelId=e,this.reset())}async loadModel(){if(!(!this.api||this._loadingPromise))return this._loadingPromise=this._executeWithRetry(async()=>{this.isLoading=!0,this.error=null;try{let e;try{e=await this.api.getModel(),console.log("Raw model response:",e)}catch(i){throw i.message.includes("404")?new Error(`Model "${this.modelId}" not found. Use the debug test page to list available models, or check /api/v1/models endpoint.`):i}if(!e||typeof e!="object")throw new Error("Invalid model data received");if(this.model={id:e.id||e.ID||e.model_id,name:e.name||e.Name||"Configuration",description:e.description||e.Description,option_groups:[]},e.option_groups&&Array.isArray(e.option_groups))this.model.option_groups=e.option_groups,console.log("Using option_groups from model");else if(e.groups&&Array.isArray(e.groups))this.model.option_groups=e.groups,console.log("Using groups from model");else if(e.data?.groups&&Array.isArray(e.data.groups))this.model.option_groups=e.data.groups,console.log("Using groups from model.data");else{console.log("Fetching groups separately...");try{const i=await this.api.getModelGroups();console.log("Groups API response:",i),Array.isArray(i)?this.model.option_groups=i:i.groups?this.model.option_groups=i.groups:i.option_groups?this.model.option_groups=i.option_groups:i.data&&Array.isArray(i.data)?this.model.option_groups=i.data:i.data?.groups&&(this.model.option_groups=i.data.groups)}catch(i){console.error("Failed to load groups:",i)}}if((!this.model.option_groups||this.model.option_groups.length===0)&&(e.options||e.Options)){console.log("No groups found, but model has flat options array");const i=e.options||e.Options,n=new Map;i.forEach(o=>{const l=o.group_id||o.groupId||o.group||"default";n.has(l)||n.set(l,{id:l,name:o.group_name||o.groupName||l,options:[]}),n.get(l).options.push(o)}),this.model.option_groups=Array.from(n.values()),console.log("Created groups from flat options:",this.model.option_groups)}if(console.log("Groups loaded:",this.model.option_groups?.length||0,"groups"),this.model.option_groups?.length>0&&(console.log("First group structure:",this.model.option_groups[0]),console.log("Group properties:",Object.keys(this.model.option_groups[0]))),!this.model.option_groups.some(i=>i.options&&Array.isArray(i.options)&&i.options.length>0||i.Options&&Array.isArray(i.Options)&&i.Options.length>0||i.items&&Array.isArray(i.items)&&i.items.length>0||i.choices&&Array.isArray(i.choices)&&i.choices.length>0)&&this.model.option_groups.length>0){console.log("No options found in groups, fetching options separately...");try{const i=await this.api.getModelOptions();console.log("Options API response:",i);let n=[];Array.isArray(i)?n=i:i.options?n=i.options:i.data&&Array.isArray(i.data)?n=i.data:i.data?.options&&(n=i.data.options),console.log("Total options found:",n.length),n.length>0&&(console.log("First option structure:",n[0]),console.log("Option properties:",Object.keys(n[0]))),n.length>0&&(this.model.option_groups=this.model.option_groups.map(o=>{const l=n.filter(a=>a.group_id===o.id||a.groupId===o.id||a.group===o.id||a.group_name===o.name||a.groupName===o.name||a.group_id===o.name||o.group_id&&(a.group_id===o.group_id||a.group===o.group_id));return console.log(`Group "${o.name}" matched ${l.length} options`),l.length===0&&this.model.option_groups.length===1?(console.warn("No options matched group criteria, showing all options in single group"),{...o,options:n}):{...o,options:l}}))}catch(i){console.error("Failed to load options:",i)}}this.model.option_groups=this.model.option_groups.map(i=>{let n=[];return Array.isArray(i.options)?n=i.options:Array.isArray(i.Options)?n=i.Options:Array.isArray(i.items)?n=i.items:Array.isArray(i.choices)?n=i.choices:i.data?.options&&Array.isArray(i.data.options)&&(n=i.data.options),{...i,options:n}}),this.model.option_groups.reduce((i,n)=>i+(n.options?.length||0),0)===0&&this.model.option_groups.length>0?(console.warn("No options found in any group. Creating demo options for testing..."),this.usingDemoData=!0,this.model.option_groups=this.model.option_groups.map((i,n)=>({...i,options:this._createDemoOptions(i,n)}))):this.usingDemoData=!1,console.log("=== Final Model Structure ==="),console.log("Model:",this.model),console.log("Groups summary:",this.model.option_groups.map(i=>({id:i.id,name:i.name,optionsCount:i.options?.length||0,options:i.options?.slice(0,2)}))),this._initializeSelections()}finally{this.isLoading=!1,this._loadingPromise=null}}),this._loadingPromise}updateSelection(e,r){r=Math.max(0,r);const s=this._getGroupForOption(e);if(s){if(s.selection_type==="single"&&r>0&&s.options&&Array.isArray(s.options))for(const i of s.options)i.id!==e&&(this.selections[i.id]=0);s.max_selections&&r>s.max_selections&&(r=s.max_selections)}r===0?delete this.selections[e]:this.selections[e]=r,this.isDirty=!0}async validateSelections(){if(!(!this.api||this.isValidating)){if(Object.keys(this.selections).length===0){this.validationResults=[];return}await this._executeWithRetry(async()=>{this.isValidating=!0;try{const e=await this.api.validateSelections(this.selections);this.validationResults=e.validation_errors||[],this.availableOptions=e.available_options||[]}finally{this.isValidating=!1}})}}async calculatePricing(e={}){!this.api||this.isPricing||!this.isValid||await this._executeWithRetry(async()=>{this.isPricing=!0;try{const r=await this.api.calculatePricing(this.selections,e);this.pricingData=r}finally{this.isPricing=!1}})}async createConfiguration(){if(!this.api)return;const e=await this.api.createConfiguration(this.selections);return this.configurationId=e.id,this.isDirty=!1,this.lastSaved=new Date,e}async saveConfiguration(){if(!(!this.api||!this.configurationId||!this.isDirty))try{await this.api.updateConfiguration(this.configurationId,this.selections),this.isDirty=!1,this.lastSaved=new Date}catch(e){console.error("Failed to save configuration:",e)}}async loadConfiguration(e){this.api&&await this._executeWithRetry(async()=>{this.isLoading=!0;try{const r=await this.api.getConfiguration(e);this.configurationId=r.id,this.selections=this._parseSelections(r.selections),this.isDirty=!1,await Promise.all([this.validateSelections(),this.calculatePricing()])}finally{this.isLoading=!1}})}async loadAvailableOptions(){if(!(!this.api||!this.configurationId))try{const e=await this.api.getAvailableOptions(this.configurationId);this.availableOptions=e.available_options||[]}catch(e){console.error("Failed to load available options:",e)}}exportConfiguration(){return{model_id:this.modelId,selections:this.selections,timestamp:new Date().toISOString(),total_price:this.totalPrice,is_valid:this.isValid}}importConfiguration(e){if(e.model_id!==this.modelId)throw new Error("Configuration is for a different model");this.selections=e.selections||{},this.isDirty=!0}reset(){this.selections={},this.validationResults=[],this.pricingData=null,this.availableOptions=[],this.error=null,this.configurationId=null,this.isDirty=!1,this.currentStep=0,this._clearAllTimers()}async _testConnection(){if(window.__API_BASE_URL__)try{const e=await fetch(`${window.__API_BASE_URL__}/health`);e.ok?console.log("✅ API connection successful"):console.warn("⚠️ API health check returned:",e.status)}catch(e){console.error("❌ API connection failed:",e.message)}}_debounce(e,r,s){this._clearTimer(e);const i=setTimeout(r,s);this._debounceTimers.set(e,i)}_clearTimer(e){const r=this._debounceTimers.get(e);r&&(clearTimeout(r),this._debounceTimers.delete(e))}_clearAllTimers(){for(const e of this._debounceTimers.values())clearTimeout(e);this._debounceTimers.clear()}_getGroupForOption(e){if(!this.model?.option_groups||!Array.isArray(this.model.option_groups))return null;for(const r of this.model.option_groups)if(r.options&&Array.isArray(r.options)&&r.options.some(s=>s.id===e))return r;return null}_initializeSelections(){if(!(!this.model?.option_groups||!Array.isArray(this.model.option_groups))){for(const e of this.model.option_groups)if(!(!e.options||!Array.isArray(e.options)))for(const r of e.options)r.preselected&&!this.selections[r.id]&&(this.selections[r.id]=1)}}_parseSelections(e){const r={};for(const s of e)s.quantity>0&&(r[s.option_id]=s.quantity);return r}async _executeWithRetry(e,r=3){for(let s=0;s<=r;s++)try{return await e()}catch(i){if(this.error=i.message,this.retryCount=s,s===r||i.message.includes("401")||i.message.includes("404"))throw console.error("API call failed after retries:",i.message),i;await new Promise(n=>setTimeout(n,Math.pow(2,s)*1e3))}}}et=new WeakMap,tt=new WeakMap,rt=new WeakMap,it=new WeakMap,st=new WeakMap,nt=new WeakMap,ot=new WeakMap,at=new WeakMap,lt=new WeakMap,ut=new WeakMap,ct=new WeakMap,vt=new WeakMap,dt=new WeakMap,ft=new WeakMap,_t=new WeakMap;const b=new ds;var fs=A("<div></div>"),_s=A('<div><div class="step-icon svelte-19jrra3"><!></div> <div class="step-label svelte-19jrra3"> </div></div> <!>',1),ps=A('<div class="progress-indicator svelte-19jrra3"><div class="steps svelte-19jrra3"></div> <div class="progress-bar svelte-19jrra3"><div class="progress-fill svelte-19jrra3"></div></div></div>');function hs(t,e){ze(e,!0);let r=he(e,"steps",19,()=>[]),s=he(e,"currentStep",3,0),i=he(e,"completionPercentage",3,0);var n=ps(),o=u(n);je(o,21,r,Ne,(v,p,_)=>{var c=_s(),h=Me(c);let w;var F=u(h),S=u(F);{var V=C=>{var R=Mr("✓");g(C,R)},B=C=>{var R=Mr();T(()=>x(R,d(p).icon||_+1)),g(C,R)};I(S,C=>{_<s()?C(V):C(B,!1)})}var E=f(F,2),y=u(E),m=f(h,2);{var M=C=>{var R=fs();let re;T(X=>re=Ae(R,1,"step-connector svelte-19jrra3",null,re,X),[()=>({completed:_<s()})]),g(C,R)};I(m,C=>{_<r().length-1&&C(M)})}T(C=>{w=Ae(h,1,"step svelte-19jrra3",null,w,C),x(y,d(p).label)},[()=>({active:_===s(),completed:_<s()})]),g(v,c)});var l=f(o,2),a=u(l);T(()=>zr(a,`width: ${i()??""}%`)),g(t,n),Le()}var gs=A('<div><div class="spinner svelte-kq7kpf"></div> <p class="message svelte-kq7kpf"> </p></div>');function ms(t,e){let r=he(e,"message",3,"Loading..."),s=he(e,"size",3,"medium");var i=gs(),n=f(u(i),2),o=u(n);T(()=>{Ae(i,1,`loading-spinner ${s()??""}`,"svelte-kq7kpf"),x(o,r())}),g(t,i)}function ys(t,e,r){O(e,null),O(r,null)}function bs(){location.reload()}var ws=A('<div class="error-boundary svelte-1dzw8vs"><div class="error-content svelte-1dzw8vs"><h2 class="svelte-1dzw8vs">Something went wrong</h2> <p class="error-message svelte-1dzw8vs"> </p> <!> <div class="error-actions svelte-1dzw8vs"><button class="btn btn-secondary svelte-1dzw8vs">Try Again</button> <button class="btn btn-primary svelte-1dzw8vs">Reload Page</button></div></div></div>');function As(t,e){ze(e,!0);let r=H(null),s=H(null);Rr(()=>{const a=v=>{O(r,v.error||new Error("Unknown error"),!0),O(s,{componentStack:v.filename||"Unknown",lineNumber:v.lineno,columnNumber:v.colno},!0),console.error("Error caught by boundary:",d(r)),v.preventDefault()};return window.addEventListener("error",a),window.addEventListener("unhandledrejection",v=>{O(r,new Error(v.reason),!0),O(s,{componentStack:"Promise rejection"},!0),v.preventDefault()}),()=>{window.removeEventListener("error",a)}});var i=Qe(),n=Me(i);{var o=a=>{var v=ws(),p=u(v),_=f(u(p),2),c=u(_),h=f(_,2);I(h,V=>{});var w=f(h,2),F=u(w);F.__click=[ys,r,s];var S=f(F,2);S.__click=[bs],T(()=>x(c,d(r).message)),g(a,v)},l=a=>{var v=Qe(),p=Me(v);rs(p,e,"default",{}),g(a,v)};I(n,a=>{d(r)?a(o):a(l,!1)})}g(t,i),Le()}gt(["click"]);function ks(t,e,r,s){d(e)<r()&&s(d(e)+1)}function Ss(t,e,r){d(e)>0&&r(d(e)-1)}function Cs(t,e,r){e(d(r)?0:1)}var Es=A('<span class="sku svelte-14bz86j"> </span>'),Is=A('<p class="description svelte-14bz86j"> </p>'),xs=A('<span class="price-each svelte-14bz86j">each</span>'),Ps=A('<span class="total-price svelte-14bz86j"> </span>'),Os=A("<button> </button>"),Ts=(t,e)=>e(parseInt(t.target.value)||0),qs=A('<div class="quantity-controls svelte-14bz86j"><button class="qty-button svelte-14bz86j" aria-label="Decrease quantity">−</button> <input type="number" min="0" aria-label="Quantity" class="svelte-14bz86j"/> <button class="qty-button svelte-14bz86j" aria-label="Increase quantity">+</button></div>'),Ds=A('<div class="unavailable-overlay svelte-14bz86j"><span class="svelte-14bz86j">Not available with current selection</span></div>'),Ms=A('<div><div class="option-header svelte-14bz86j"><h4 class="svelte-14bz86j"> </h4> <!></div> <!> <div class="price-section svelte-14bz86j"><span class="base-price svelte-14bz86j"> <!></span> <!></div> <div class="actions svelte-14bz86j"><!></div> <!></div>');function Rs(t,e){ze(e,!0);let r=Ee(()=>b.selections[e.option.id]||0),s=Ee(()=>d(r)>0),i=Ee(()=>!b.availableOptions.length||b.availableOptions.some(k=>k.option_id===e.option.id)),n=Ee(()=>d(r)*(e.option.base_price||0));function o(){return e.group.selection_type==="single"?1:e.group.max_selections||10}function l(k){!d(i)&&k>0||b.updateSelection(e.option.id,k)}var a=Ms();let v;var p=u(a),_=u(p),c=u(_),h=f(_,2);{var w=k=>{var q=Es(),P=u(q);T(()=>x(P,`SKU: ${e.option.sku??""}`)),g(k,q)};I(h,k=>{e.option.sku&&k(w)})}var F=f(p,2);{var S=k=>{var q=Is(),P=u(q);T(()=>x(P,e.option.description)),g(k,q)};I(F,k=>{e.option.description&&k(S)})}var V=f(F,2),B=u(V),E=u(B),y=f(E);{var m=k=>{var q=xs();g(k,q)};I(y,k=>{d(r)>1&&k(m)})}var M=f(B,2);{var C=k=>{var q=Ps(),P=u(q);T(N=>x(P,`Total: $${N??""}`),[()=>d(n).toFixed(2)]),g(k,q)};I(M,k=>{d(r)>1&&k(C)})}var R=f(V,2),re=u(R);{var X=k=>{var q=Os();let P;q.__click=[Cs,l,s];var N=u(q);T(Y=>{P=Ae(q,1,"select-button svelte-14bz86j",null,P,Y),q.disabled=!d(i),x(N,d(s)?"✓ Selected":"Select")},[()=>({selected:d(s)})]),g(k,q)},ie=k=>{var q=qs(),P=u(q);P.__click=[Ss,r,l];var N=f(P,2);N.__change=[Ts,l];var Y=f(N,2);Y.__click=[ks,r,o,l],T((z,Q)=>{P.disabled=d(r)===0,as(N,d(r)),Lr(N,"max",z),N.disabled=!d(i),Y.disabled=Q},[o,()=>d(r)>=o()||!d(i)]),g(k,q)};I(re,k=>{e.group.selection_type==="single"?k(X):k(ie,!1)})}var ne=f(R,2);{var Z=k=>{var q=Ds();g(k,q)};I(ne,k=>{!d(i)&&!d(s)&&k(Z)})}T((k,q)=>{v=Ae(a,1,"option-card svelte-14bz86j",null,v,k),x(c,e.option.name),x(E,`$${q??""} `)},[()=>({selected:d(s),unavailable:!d(i)}),()=>(e.option.base_price||0).toFixed(2)]),g(t,a),Le()}gt(["click","change"]);var Ns=(t,e)=>O(e,!d(e)),js=A('<span class="required svelte-6zoark">*</span>'),zs=A('<p class="group-description svelte-6zoark"> </p>'),Ls=A('<span class="selection-constraint svelte-6zoark"> </span>'),Fs=A('<span class="selection-constraint svelte-6zoark"> </span>'),Us=A('<div class="no-options svelte-6zoark"><p class="svelte-6zoark">No options available</p> <p class="help-text svelte-6zoark">Check API response</p></div>'),Vs=A('<div class="group-content svelte-6zoark"><div class="selection-info svelte-6zoark"><span class="selection-type svelte-6zoark"> </span> <!> <!></div> <div class="options-grid svelte-6zoark"><!></div></div>'),Bs=A('<div><div class="group-header svelte-6zoark"><div class="group-info svelte-6zoark"><h3 class="svelte-6zoark"> <!></h3> <!></div> <button class="expand-toggle svelte-6zoark" aria-label="Toggle group"><svg width="20" height="20" viewBox="0 0 20 20"><path fill="currentColor" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path></svg></button></div> <!></div>');function Gs(t,e){ze(e,!0);let r=H(!0),s=Ee(()=>e.group.options&&Array.isArray(e.group.options)&&e.group.options.some(E=>b.selections[E.id]>0));Fe(()=>{e.group.options?.length===0&&console.warn(`⚠️ Group "${e.group.name}" has no options!`,{groupId:e.group.id,groupData:e.group})});var i=Bs();let n;var o=u(i);o.__click=[Ns,r];var l=u(o),a=u(l),v=u(a),p=f(v);{var _=E=>{var y=js();g(E,y)};I(p,E=>{e.group.required&&E(_)})}var c=f(a,2);{var h=E=>{var y=zs(),m=u(y);T(()=>x(m,e.group.description)),g(E,y)};I(c,E=>{e.group.description&&E(h)})}var w=f(l,2),F=u(w);let S;var V=f(o,2);{var B=E=>{var y=Vs(),m=u(y),M=u(m),C=u(M),R=f(M,2);{var re=P=>{var N=Ls(),Y=u(N);T(()=>x(Y,`Min: ${e.group.min_selections??""}`)),g(P,N)};I(R,P=>{e.group.min_selections&&P(re)})}var X=f(R,2);{var ie=P=>{var N=Fs(),Y=u(N);T(()=>x(Y,`Max: ${e.group.max_selections??""}`)),g(P,N)};I(X,P=>{e.group.max_selections&&P(ie)})}var ne=f(m,2),Z=u(ne);{var k=P=>{var N=Qe(),Y=Me(N);je(Y,17,()=>e.group.options,Ne,(z,Q)=>{Rs(z,{get option(){return d(Q)},get group(){return e.group}})}),g(P,N)},q=P=>{var N=Us();g(P,N)};I(Z,P=>{e.group.options&&Array.isArray(e.group.options)?P(k):P(q,!1)})}T(()=>x(C,e.group.selection_type==="single"?"Choose one":"Choose multiple")),g(E,y)};I(V,E=>{d(r)&&E(B)})}T((E,y)=>{n=Ae(i,1,"option-group svelte-6zoark",null,n,E),x(v,`${e.group.name??""} `),S=Ae(F,0,"icon svelte-6zoark",null,S,y)},[()=>({"has-selection":d(s)}),()=>({rotated:!d(r)})]),g(t,i),Le()}gt(["click"]);var Hs=A('<div class="loading svelte-13kqu2s"><span class="spinner svelte-13kqu2s"></span> Calculating price...</div>'),Ys=A('<div class="price-line adjustment svelte-13kqu2s"><span class="label svelte-13kqu2s"> </span> <span> </span></div>'),Qs=A('<div class="adjustments svelte-13kqu2s"></div>'),Ws=A('<div class="price-line svelte-13kqu2s"><span class="label svelte-13kqu2s">Savings</span> <span class="amount discount svelte-13kqu2s"> </span></div>'),Js=A('<div class="price-line svelte-13kqu2s"><span class="label svelte-13kqu2s">Additional Charges</span> <span class="amount svelte-13kqu2s"> </span></div>'),Ks=A("<!> <!>",1),Zs=A('<div class="price-breakdown svelte-13kqu2s"><div class="price-line svelte-13kqu2s"><span class="label svelte-13kqu2s">Base Price</span> <span class="amount svelte-13kqu2s"> </span></div> <!></div>'),Xs=A('<div class="savings-badge svelte-13kqu2s"> </div>'),$s=A('<div class="price-summary svelte-13kqu2s"><div class="price-line total svelte-13kqu2s"><span class="label svelte-13kqu2s">Total Price</span> <span class="amount svelte-13kqu2s"> </span></div> <!> <!></div>'),en=A("<div><!></div>");function tr(t,e){ze(e,!0);let r=he(e,"detailed",3,!1),s=he(e,"showBreakdown",3,!0),i=Ee(()=>b.adjustments.filter(c=>c.amount<0).reduce((c,h)=>c+Math.abs(h.amount),0)),n=Ee(()=>b.adjustments.filter(c=>c.amount>0).reduce((c,h)=>c+h.amount,0)),o=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c);var l=en();let a;var v=u(l);{var p=c=>{var h=Hs();g(c,h)},_=c=>{var h=$s(),w=u(h),F=f(u(w),2),S=u(F),V=f(w,2);{var B=m=>{var M=Zs(),C=u(M),R=f(u(C),2),re=u(R),X=f(C,2);{var ie=Z=>{var k=Qs();je(k,21,()=>b.adjustments,Ne,(q,P)=>{var N=Ys(),Y=u(N),z=u(Y),Q=f(Y,2);let ae;var ue=u(Q);T((ee,ge)=>{x(z,`${d(P).type==="discount"?"−":"+"}
                    ${d(P).description??""}`),ae=Ae(Q,1,"amount svelte-13kqu2s",null,ae,ee),x(ue,ge)},[()=>({discount:d(P).amount<0}),()=>o(Math.abs(d(P).amount))]),g(q,N)}),g(Z,k)},ne=Z=>{var k=Ks(),q=Me(k);{var P=z=>{var Q=Ws(),ae=f(u(Q),2),ue=u(ae);T(ee=>x(ue,`−${ee??""}`),[()=>o(d(i))]),g(z,Q)};I(q,z=>{d(i)>0&&z(P)})}var N=f(q,2);{var Y=z=>{var Q=Js(),ae=f(u(Q),2),ue=u(ae);T(ee=>x(ue,`+${ee??""}`),[()=>o(d(n))]),g(z,Q)};I(N,z=>{d(n)>0&&z(Y)})}g(Z,k)};I(X,Z=>{r()&&b.adjustments.length>0?Z(ie):Z(ne,!1)})}T(Z=>x(re,Z),[()=>o(b.basePrice)]),g(m,M)};I(V,m=>{s()&&(b.basePrice!==b.totalPrice||r())&&m(B)})}var E=f(V,2);{var y=m=>{var M=Xs(),C=u(M);T(R=>x(C,`You save ${R??""}!`),[()=>o(d(i))]),g(m,M)};I(E,m=>{d(i)>0&&m(y)})}T(m=>x(S,m),[()=>o(b.totalPrice)]),g(c,h)};I(v,c=>{b.isPricing?c(p):c(_,!1)})}T(c=>a=Ae(l,1,"pricing-display svelte-13kqu2s",null,a,c),[()=>({detailed:r()})]),g(t,l),Le()}var tn=A('<div class="validating svelte-bayq38"><span class="spinner svelte-bayq38"></span> Validating configuration...</div>'),rn=A('<p class="svelte-bayq38">Your current selection meets all requirements.</p>'),sn=A('<div class="valid-state svelte-bayq38"><span class="icon svelte-bayq38">✅</span> <div class="message"><h4 class="svelte-bayq38">Configuration Valid</h4> <!></div></div>'),nn=A('<h4 class="severity-header svelte-bayq38"> </h4>'),on=A('<span class="compact-icon svelte-bayq38"> </span>'),an=A('<span class="error-field svelte-bayq38"> </span>'),ln=A('<li><!> <span class="error-message svelte-bayq38"> </span> <!></li>'),un=A('<div class="severity-group svelte-bayq38"><!> <ul class="error-list svelte-bayq38"></ul></div>'),cn=A('<li class="svelte-bayq38"> </li>'),vn=A('<div class="suggestions svelte-bayq38"><h4 class="svelte-bayq38">Suggestions</h4> <ul class="svelte-bayq38"></ul></div>'),dn=A('<div class="validation-results svelte-bayq38"><!> <!></div>'),fn=A("<div><!></div>");function rr(t,e){ze(e,!0);let r=he(e,"compact",3,!1),s=Ee(()=>()=>{const _={error:[],warning:[],info:[]};for(const c of b.validationResults){const h=c.severity||"error";_[h].push(c)}return _});const i={error:"❌",warning:"⚠️",info:"ℹ️"},n={error:"#dc2626",warning:"#f59e0b",info:"#3b82f6"};var o=fn();let l;var a=u(o);{var v=_=>{var c=tn();g(_,c)},p=(_,c)=>{{var h=F=>{var S=sn(),V=f(u(S),2),B=f(u(V),2);{var E=y=>{var m=rn();g(y,m)};I(B,y=>{r()||y(E)})}g(F,S)},w=F=>{var S=dn(),V=u(S);je(V,17,()=>Object.entries(d(s)()),Ne,(y,m)=>{var M=Ee(()=>ai(d(m),2));let C=()=>d(M)[0],R=()=>d(M)[1];var re=Qe(),X=Me(re);{var ie=ne=>{var Z=un(),k=u(Z);{var q=N=>{var Y=nn(),z=u(Y);T(Q=>{zr(Y,`color: ${n[C()]??""}`),x(z,`${i[C()]??""} ${Q??""}s`)},[()=>C().charAt(0).toUpperCase()+C().slice(1)]),g(N,Y)};I(k,N=>{r()||N(q)})}var P=f(k,2);je(P,21,R,Ne,(N,Y)=>{var z=ln(),Q=u(z);{var ae=L=>{var D=on(),j=u(D);T(()=>x(j,i[C()])),g(L,D)};I(Q,L=>{r()&&L(ae)})}var ue=f(Q,2),ee=u(ue),ge=f(ue,2);{var U=L=>{var D=an(),j=u(D);T(()=>x(j,`(${d(Y).field??""})`)),g(L,D)};I(ge,L=>{d(Y).field&&!r()&&L(U)})}T(()=>{Ae(z,1,`error-item ${C()??""}`,"svelte-bayq38"),x(ee,d(Y).message)}),g(N,z)}),g(ne,Z)};I(X,ne=>{R().length>0&&ne(ie)})}g(y,re)});var B=f(V,2);{var E=y=>{var m=vn(),M=f(u(m),2);je(M,21,()=>b.validationResults.filter(C=>C.suggestion),Ne,(C,R)=>{var re=cn(),X=u(re);T(()=>x(X,d(R).suggestion)),g(C,re)}),g(y,m)};I(B,y=>{!r()&&b.validationResults.some(m=>m.suggestion)&&y(E)})}g(F,S)};I(_,F=>{b.validationResults.length===0?F(h):F(w,!1)},c)}};I(a,_=>{b.isValidating?_(v):_(p,!1)})}T(_=>l=Ae(o,1,"validation-display svelte-bayq38",null,l,_),[()=>({compact:r()})]),g(t,o),Le()}async function _n(t,e){try{const r=b.exportConfiguration();await navigator.clipboard.writeText(JSON.stringify(r,null,2)),O(e,!0),setTimeout(()=>O(e,!1),2e3)}catch(r){console.error("Failed to copy:",r)}}async function pn(){b.configurationId?await b.saveConfiguration():await b.createConfiguration()}var hn=(t,e)=>O(e,!0),gn=A('<tr><td class="svelte-10y69ed"> </td><td class="muted svelte-10y69ed"> </td><td class="center svelte-10y69ed"> </td><td class="right svelte-10y69ed"> </td><td class="right bold svelte-10y69ed"> </td></tr>'),mn=A('<tr><td colspan="5" class="no-data svelte-10y69ed">No options selected</td></tr>'),yn=A('<section class="section svelte-10y69ed"><h3 class="svelte-10y69ed">Validation Results</h3> <!></section>'),bn=A('<span class="save-status svelte-10y69ed"> </span>'),wn=(t,e)=>O(e,!1),An=t=>t.stopPropagation(),kn=(t,e)=>O(e,!1),Sn=A('<div class="dialog-overlay svelte-10y69ed"><div class="dialog svelte-10y69ed"><h3 class="svelte-10y69ed">Export Configuration</h3> <div class="export-options svelte-10y69ed"><label class="svelte-10y69ed"><input type="radio"/> JSON (Complete configuration data)</label> <label class="svelte-10y69ed"><input type="radio"/> CSV (Selected options only)</label></div> <div class="dialog-actions svelte-10y69ed"><button class="btn btn-secondary svelte-10y69ed">Cancel</button> <button class="btn btn-primary svelte-10y69ed">Export</button></div></div></div>'),Cn=A('<div class="configuration-summary svelte-10y69ed"><div class="summary-header svelte-10y69ed"><h2 class="svelte-10y69ed">Configuration Summary</h2> <div class="actions svelte-10y69ed"><button class="btn btn-secondary svelte-10y69ed">Export</button> <button class="btn btn-primary svelte-10y69ed">Save Configuration</button></div></div> <div class="metrics-grid svelte-10y69ed"><div class="metric svelte-10y69ed"><div class="metric-value svelte-10y69ed"> </div> <div class="metric-label svelte-10y69ed">Options Selected</div></div> <div class="metric svelte-10y69ed"><div class="metric-value svelte-10y69ed"> </div> <div class="metric-label svelte-10y69ed">Complete</div></div> <div class="metric svelte-10y69ed"><div> </div> <div class="metric-label svelte-10y69ed">Status</div></div></div> <section class="section svelte-10y69ed"><h3 class="svelte-10y69ed">Selected Options</h3> <div class="options-table svelte-10y69ed"><table class="svelte-10y69ed"><thead><tr><th class="svelte-10y69ed">Option</th><th class="svelte-10y69ed">Group</th><th class="svelte-10y69ed">Quantity</th><th class="svelte-10y69ed">Unit Price</th><th class="svelte-10y69ed">Total</th></tr></thead><tbody><!></tbody></table></div></section> <section class="section svelte-10y69ed"><h3 class="svelte-10y69ed">Pricing Details</h3> <!></section> <!> <div class="summary-actions svelte-10y69ed"><button class="btn btn-secondary svelte-10y69ed"> </button> <!></div> <!></div>');function En(t,e){ze(e,!0);const r=[];let s=H(!1),i=H(!1),n=H("json");function o(){const U=b.exportConfiguration();let L,D,j;if(d(n)==="json")L=JSON.stringify(U,null,2),D="application/json",j="json";else{const ce=["Option","Quantity","Unit Price","Total Price"],Se=b.selectedOptions.map($=>[$.name,$.quantity,$.base_price.toFixed(2),($.quantity*$.base_price).toFixed(2)]);L=[ce.join(","),...Se.map($=>$.join(","))].join(`
`),D="text/csv",j="csv"}const K=new Blob([L],{type:D}),oe=URL.createObjectURL(K),le=document.createElement("a");le.href=oe,le.download=`configuration-${Date.now()}.${j}`,le.click(),URL.revokeObjectURL(oe),O(s,!1)}var l=Cn(),a=u(l),v=f(u(a),2),p=u(v);p.__click=[hn,s];var _=f(p,2);_.__click=[pn];var c=f(a,2),h=u(c),w=u(h),F=u(w),S=f(h,2),V=u(S),B=u(V),E=f(S,2),y=u(E);let m;var M=u(y),C=f(c,2),R=f(u(C),2),re=u(R),X=f(u(re)),ie=u(X);{var ne=U=>{var L=Qe(),D=Me(L);je(D,17,()=>b.selectedOptions,Ne,(j,K)=>{var oe=gn(),le=u(oe),ce=u(le),Se=f(le),$=u(Se),xe=f(Se),We=u(xe),Nt=f(xe),Vn=u(Nt),Bn=f(Nt),Gn=u(Bn);T((Hn,Yn)=>{x(ce,d(K).name),x($,d(K).group_name),x(We,d(K).quantity),x(Vn,`$${Hn??""}`),x(Gn,`$${Yn??""}`)},[()=>(d(K).base_price||0).toFixed(2),()=>((d(K).quantity||0)*(d(K).base_price||0)).toFixed(2)]),g(j,oe)}),g(U,L)},Z=U=>{var L=mn();g(U,L)};I(ie,U=>{b.selectedOptions.length>0?U(ne):U(Z,!1)})}var k=f(C,2),q=f(u(k),2);tr(q,{detailed:!0});var P=f(k,2);{var N=U=>{var L=yn(),D=f(u(L),2);rr(D,{}),g(U,L)};I(P,U=>{b.validationResults.length>0&&U(N)})}var Y=f(P,2),z=u(Y);z.__click=[_n,i];var Q=u(z),ae=f(z,2);{var ue=U=>{var L=bn(),D=u(L);T(j=>x(D,`Last saved: ${j??""}`),[()=>b.lastSaved.toLocaleTimeString()]),g(U,L)};I(ae,U=>{b.lastSaved&&U(ue)})}var ee=f(Y,2);{var ge=U=>{var L=Sn();L.__click=[wn,s];var D=u(L);D.__click=[An];var j=f(u(D),2),K=u(j),oe=u(K);oe.value=oe.__value="json";var le=f(K,2),ce=u(le);ce.value=ce.__value="csv";var Se=f(j,2),$=u(Se);$.__click=[kn,s];var xe=f($,2);xe.__click=o,Vr(r,[],oe,()=>d(n),We=>O(n,We)),Vr(r,[],ce,()=>d(n),We=>O(n,We)),g(U,L)};I(ee,U=>{d(s)&&U(ge)})}T(U=>{x(F,b.selectedOptions.length),x(B,`${b.completionPercentage??""}%`),m=Ae(y,1,"metric-value status svelte-10y69ed",null,m,U),x(M,b.isValid?"✓ Valid":"✗ Invalid"),x(Q,d(i)?"✓ Copied!":"Copy Configuration")},[()=>({valid:b.isValid})]),g(t,l),Le()}gt(["click"]);var In=()=>location.reload(),xn=A('<div class="error-container svelte-fpbtyb"><div class="error-message svelte-fpbtyb"><h3 class="svelte-fpbtyb">Configuration Error</h3> <p> </p> <button class="btn btn-primary svelte-fpbtyb">Reload Page</button></div></div>'),Pn=A('<div class="option-groups svelte-fpbtyb"></div>'),On=A('<div class="no-options svelte-fpbtyb"><h3 class="svelte-fpbtyb">⚠️ No Options Found</h3> <p class="svelte-fpbtyb">Groups exist but contain no options.</p> <p class="help svelte-fpbtyb">Check console for API details or use the debug test page.</p></div>'),Tn=A('<div class="no-options svelte-fpbtyb"><h3 class="svelte-fpbtyb">⚠️ No Configuration Options Available</h3> <p class="svelte-fpbtyb">The model has no option groups configured.</p> <p class="help svelte-fpbtyb">Check the browser console for API response details.</p></div>'),qn=A('<div class="configuration-step"><h2> </h2> <!> <div class="step-actions svelte-fpbtyb"><button class="btn btn-primary svelte-fpbtyb">Continue to Validation</button></div></div>'),Dn=A('<div class="validation-step"><h2>Configuration Validation</h2> <!> <div class="step-actions svelte-fpbtyb"><button class="btn btn-secondary svelte-fpbtyb">Back</button> <button class="btn btn-primary svelte-fpbtyb">Continue to Pricing</button></div></div>'),Mn=A('<div class="pricing-step"><h2>Pricing Details</h2> <!> <div class="step-actions svelte-fpbtyb"><button class="btn btn-secondary svelte-fpbtyb">Back</button> <button class="btn btn-primary svelte-fpbtyb">Continue to Summary</button></div></div>'),Rn=A('<div class="summary-step"><h2>Configuration Summary</h2> <!> <div class="step-actions svelte-fpbtyb"><button class="btn btn-secondary svelte-fpbtyb">Back</button> <button class="btn btn-success svelte-fpbtyb">Complete Configuration</button></div></div>'),Nn=A('<div class="selected-item svelte-fpbtyb"><span> </span> <span class="quantity svelte-fpbtyb"> </span></div>'),jn=A('<div class="sidebar-section svelte-fpbtyb"><h3 class="svelte-fpbtyb">Issues</h3> <!></div>'),zn=A('<aside class="configurator-sidebar svelte-fpbtyb"><div class="sidebar-section svelte-fpbtyb"><h3 class="svelte-fpbtyb">Current Selection</h3> <div class="selected-items svelte-fpbtyb"></div></div> <div class="sidebar-section svelte-fpbtyb"><h3 class="svelte-fpbtyb">Pricing Summary</h3> <!></div> <!></aside>'),Ln=A('<div class="configurator-container svelte-fpbtyb"><!> <div class="configurator-content svelte-fpbtyb"><!></div> <!></div>'),Fn=A("<div><!></div>");function Un(t,e){ze(e,!0);let r=he(e,"theme",3,"light"),s=he(e,"apiUrl",3,"/api/v1"),i=he(e,"embedMode",3,!1),n=he(e,"onComplete",3,null),o=he(e,"onConfigurationChange",3,null),l=he(e,"onError",3,null);const a=Zi();let v=H(!1),p=Ee(()=>[{id:"configure",label:"Configure",icon:"⚙️"},{id:"validate",label:"Validate",icon:"✓"},{id:"price",label:"Price",icon:"💰"},{id:"summary",label:"Summary",icon:"📋"}]);typeof window<"u"&&(window.__API_BASE_URL__=s(),console.log("Configurator initialized with API URL:",s())),Rr(()=>{b.initialize(),b.setModelId(e.modelId),O(v,!0),document.documentElement.setAttribute("data-theme",r());const S=Ti(()=>{Fe(()=>{o()&&Object.keys(b.selections).length>0&&o()(b.exportConfiguration())}),Fe(()=>{l()&&b.error&&l()(b.error)})});return()=>{S(),b.reset()}});function _(){const S=b.exportConfiguration();a("complete",S),n()?.(S)}function c(){b.currentStep<d(p).length-1&&b.currentStep++}function h(){b.currentStep>0&&b.currentStep--}var w=Fn(),F=u(w);As(F,{children:(S,V)=>{var B=Qe(),E=Me(B);{var y=M=>{ms(M,{message:"Loading configuration..."})},m=(M,C)=>{{var R=X=>{var ie=xn(),ne=u(ie),Z=f(u(ne),2),k=u(Z),q=f(Z,2);q.__click=[In],T(()=>x(k,b.error)),g(X,ie)},re=X=>{var ie=Ln(),ne=u(ie);hs(ne,{get steps(){return d(p)},get currentStep(){return b.currentStep},get completionPercentage(){return b.completionPercentage}});var Z=f(ne,2),k=u(Z);{var q=z=>{var Q=qn(),ae=u(Q),ue=u(ae),ee=f(ae,2);{var ge=j=>{var K=Qe();const oe=Ee(()=>b.model.option_groups.some($=>$.options?.length>0));var le=Me(K);{var ce=$=>{var xe=Pn();je(xe,21,()=>b.model.option_groups,Ne,(We,Nt)=>{Gs(We,{get group(){return d(Nt)}})}),g($,xe)},Se=$=>{var xe=On();g($,xe)};I(le,$=>{d(oe)?$(ce):$(Se,!1)})}g(j,K)},U=j=>{var K=Tn();g(j,K)};I(ee,j=>{b.model?.option_groups&&Array.isArray(b.model.option_groups)?j(ge):j(U,!1)})}var L=f(ee,2),D=u(L);D.__click=c,T(()=>{x(ue,`Configure Your ${b.model?.name||"Product"}`),D.disabled=!b.canProceedToNextStep}),g(z,Q)},P=(z,Q)=>{{var ae=ee=>{var ge=Dn(),U=f(u(ge),2);rr(U,{});var L=f(U,2),D=u(L);D.__click=h;var j=f(D,2);j.__click=c,T(()=>j.disabled=!b.isValid),g(ee,ge)},ue=(ee,ge)=>{{var U=D=>{var j=Mn(),K=f(u(j),2);tr(K,{detailed:!0});var oe=f(K,2),le=u(oe);le.__click=h;var ce=f(le,2);ce.__click=c,g(D,j)},L=(D,j)=>{{var K=oe=>{var le=Rn(),ce=f(u(le),2);En(ce,{});var Se=f(ce,2),$=u(Se);$.__click=h;var xe=f($,2);xe.__click=_,g(oe,le)};I(D,oe=>{b.currentStep===3&&oe(K)},j)}};I(ee,D=>{b.currentStep===2?D(U):D(L,!1)},ge)}};I(z,ee=>{b.currentStep===1?ee(ae):ee(ue,!1)},Q)}};I(k,z=>{b.currentStep===0?z(q):z(P,!1)})}var N=f(Z,2);{var Y=z=>{var Q=zn(),ae=u(Q),ue=f(u(ae),2);je(ue,21,()=>b.selectedOptions,Ne,(D,j)=>{var K=Nn(),oe=u(K),le=u(oe),ce=f(oe,2),Se=u(ce);T(()=>{x(le,d(j).name),x(Se,`×${d(j).quantity??""}`)}),g(D,K)});var ee=f(ae,2),ge=f(u(ee),2);tr(ge,{});var U=f(ee,2);{var L=D=>{var j=jn(),K=f(u(j),2);rr(K,{compact:!0}),g(D,j)};I(U,D=>{b.validationResults.length>0&&D(L)})}g(z,Q)};I(N,z=>{i()||z(Y)})}g(X,ie)};I(M,X=>{b.error&&b.retryCount>=3?X(R):X(re,!1)},C)}};I(E,M=>{!d(v)||b.isLoading?M(y):M(m,!1)})}g(S,B)},$$slots:{default:!0}}),T(()=>{Ae(w,1,`configurator-app ${i()?"embed-mode":""}`,"svelte-fpbtyb"),Lr(w,"data-theme",r())}),g(t,w),Le()}return gt(["click"]),window.CPQConfigurator={create:function(t,e={}){if(!t)throw new Error("Container element is required");if(!e.modelId)throw new Error("Model ID is required");const r=typeof t=="string"?document.querySelector(t):t;if(!r)throw new Error("Container element not found");const s=new Un({target:r,props:{modelId:e.modelId,apiUrl:e.apiUrl||"/api/v1",theme:e.theme||"light",embedMode:e.embedMode!==!1,onComplete:e.onComplete,onConfigurationChange:e.onConfigurationChange,onError:e.onError}});return{destroy:()=>s.$destroy(),updateConfig:i=>{i.modelId&&s.$set({modelId:i.modelId}),i.theme&&s.$set({theme:i.theme})},getConfiguration:()=>s.configStore?.exportConfiguration(),loadConfiguration:i=>s.configStore?.loadConfiguration(i),reset:()=>{s.configStore?.reset()}}}},document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-cpq-auto-init]").forEach(e=>{const r=e.getAttribute("data-model-id"),s=e.getAttribute("data-api-url"),i=e.getAttribute("data-theme");r&&window.CPQConfigurator.create(e,{modelId:r,apiUrl:s,theme:i,embedMode:!0})})}),window.CPQConfigurator});
