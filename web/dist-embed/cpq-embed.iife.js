var Wr=Fe=>{throw TypeError(Fe)};var Jr=(Fe,ze,Je)=>ze.has(Fe)||Wr("Cannot "+Je);var N=(Fe,ze,Je)=>(Jr(Fe,ze,"read from private field"),Je?Je.call(Fe):ze.get(Fe)),Ce=(Fe,ze,Je)=>ze.has(Fe)?Wr("Cannot add the same private member more than once"):ze instanceof WeakSet?ze.add(Fe):ze.set(Fe,Je),Ie=(Fe,ze,Je,It)=>(Jr(Fe,ze,"write to private field"),It?It.call(Fe,Je):ze.set(Fe,Je),Je);(function(){"use strict";var jr,Vt,Lt,Nt,zt,Ft,Ut,Gt,jt,Bt,Ht,Yt,Qt,Kt,Wt,Jt,Zt,Xt,$t,ei,ti,ii,ri,ni,si;var ze=Array.isArray,Je=Array.prototype.indexOf,It=Array.from,Zr=Object.defineProperty,Tt=Object.getOwnPropertyDescriptor,Xr=Object.getOwnPropertyDescriptors,$r=Object.prototype,en=Array.prototype,Xi=Object.getPrototypeOf,$i=Object.isExtensible;const tn=()=>{};function rn(t){for(var e=0;e<t.length;e++)t[e]()}function qi(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const i=[];for(const r of t)if(i.push(r),i.length===e)break;return i}const Xe=2,er=4,Ri=8,Mi=16,at=32,yt=64,Vi=128,Ye=256,ci=512,Qe=1024,ot=2048,wt=4096,lt=8192,Li=16384,tr=32768,ui=65536,nn=1<<19,ir=1<<20,Ni=1<<21,di=Symbol("$state"),sn=Symbol("legacy props"),an=Symbol("");function rr(t){return t===this.v}function on(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function zi(t){return!on(t,this.v)}function ln(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function vn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function cn(t){throw new Error("https://svelte.dev/e/effect_orphan")}function un(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function dn(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function fn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _n(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function hn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let al=!1;const Fi=1,Ui=2,nr=4,gn=8,pn=16,mn=1,bn=4,yn=8,wn=16,Sn=1,xn=2,Be=Symbol(),kn="http://www.w3.org/1999/xhtml";function Gi(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Ge=null;function sr(t){Ge=t}function $e(t,e=!1,i){var r=Ge={p:Ge,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Dn(()=>{r.d=!0})}function et(t){const e=Ge;if(e!==null){t!==void 0&&(e.x=t);const l=e.e;if(l!==null){var i=Se,r=we;e.e=null;try{for(var n=0;n<l.length;n++){var s=l[n];Rt(s.effect),_t(s.reaction),gr(s.fn)}}finally{Rt(i),_t(r)}}Ge=e.p,e.m=!0}return t||{}}function ar(){return!0}function Re(t){if(typeof t!="object"||t===null||di in t)return t;const e=Xi(t);if(e!==$r&&e!==en)return t;var i=new Map,r=ze(t),n=H(0),s=we,l=u=>{var d=we;_t(s);var _=u();return _t(d),_};return r&&i.set("length",H(t.length)),new Proxy(t,{defineProperty(u,d,_){return(!("value"in _)||_.configurable===!1||_.enumerable===!1||_.writable===!1)&&fn(),l(()=>{var S=i.get(d);S===void 0?(S=H(_.value),i.set(d,S)):z(S,_.value,!0)}),!0},deleteProperty(u,d){var _=i.get(d);if(_===void 0){if(d in u){const c=l(()=>H(Be));i.set(d,c),ji(n)}}else{if(r&&typeof d=="string"){var S=i.get("length"),b=Number(d);Number.isInteger(b)&&b<S.v&&z(S,b)}z(_,Be),ji(n)}return!0},get(u,d,_){if(d===di)return t;var S=i.get(d),b=d in u;if(S===void 0&&(!b||Tt(u,d)?.writable)&&(S=l(()=>{var p=Re(b?u[d]:Be),w=H(p);return w}),i.set(d,S)),S!==void 0){var c=o(S);return c===Be?void 0:c}return Reflect.get(u,d,_)},getOwnPropertyDescriptor(u,d){var _=Reflect.getOwnPropertyDescriptor(u,d);if(_&&"value"in _){var S=i.get(d);S&&(_.value=o(S))}else if(_===void 0){var b=i.get(d),c=b?.v;if(b!==void 0&&c!==Be)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return _},has(u,d){if(d===di)return!0;var _=i.get(d),S=_!==void 0&&_.v!==Be||Reflect.has(u,d);if(_!==void 0||Se!==null&&(!S||Tt(u,d)?.writable)){_===void 0&&(_=l(()=>{var c=S?Re(u[d]):Be,p=H(c);return p}),i.set(d,_));var b=o(_);if(b===Be)return!1}return S},set(u,d,_,S){var b=i.get(d),c=d in u;if(r&&d==="length")for(var p=_;p<b.v;p+=1){var w=i.get(p+"");w!==void 0?z(w,Be):p in u&&(w=l(()=>H(Be)),i.set(p+"",w))}if(b===void 0)(!c||Tt(u,d)?.writable)&&(b=l(()=>{var T=H(void 0);return z(T,Re(_)),T}),i.set(d,b));else{c=b.v!==Be;var D=l(()=>Re(_));z(b,D)}var M=Reflect.getOwnPropertyDescriptor(u,d);if(M?.set&&M.set.call(S,_),!c){if(r&&typeof d=="string"){var A=i.get("length"),x=Number(d);Number.isInteger(x)&&x>=A.v&&z(A,x+1)}ji(n)}return!0},ownKeys(u){o(n);var d=Reflect.ownKeys(u).filter(b=>{var c=i.get(b);return c===void 0||c.v!==Be});for(var[_,S]of i)S.v!==Be&&!(_ in u)&&d.push(_);return d},setPrototypeOf(){_n()}})}function ji(t,e=1){z(t,t.v+e)}function fi(t){var e=Xe|ot,i=we!==null&&(we.f&Xe)!==0?we:null;return Se===null||i!==null&&(i.f&Ye)!==0?e|=Ye:Se.f|=ir,{ctx:Ge,deps:null,effects:null,equals:rr,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:i??Se}}function me(t){const e=fi(t);return kr(e),e}function En(t){const e=fi(t);return e.equals=zi,e}function or(t){var e=t.effects;if(e!==null){t.effects=null;for(var i=0;i<e.length;i+=1)it(e[i])}}function An(t){for(var e=t.parent;e!==null;){if((e.f&Xe)===0)return e;e=e.parent}return null}function lr(t){var e,i=Se;Rt(An(t));try{or(t),e=Ir(t)}finally{Rt(i)}return e}function vr(t){var e=lr(t);if(t.equals(e)||(t.v=e,t.wv=Ar()),!qt){var i=(ht||(t.f&Ye)!==0)&&t.deps!==null?wt:Qe;tt(t,i)}}const ai=new Map;function _i(t,e){var i={f:0,v:t,reactions:null,equals:rr,rv:0,wv:0};return i}function H(t,e){const i=_i(t);return kr(i),i}function cr(t,e=!1,i=!0){const r=_i(t);return e||(r.equals=zi),r}function z(t,e,i=!1){we!==null&&!rt&&ar()&&(we.f&(Xe|Mi))!==0&&!vt?.includes(t)&&hn();let r=i?Re(e):e;return Bi(t,r)}function Bi(t,e){if(!t.equals(e)){var i=t.v;qt?ai.set(t,e):ai.set(t,i),t.v=e,(t.f&Xe)!==0&&((t.f&ot)!==0&&lr(t),tt(t,(t.f&Ye)===0?Qe:wt)),t.wv=Ar(),ur(t,ot),Se!==null&&(Se.f&Qe)!==0&&(Se.f&(at|yt))===0&&(Ze===null?Fn([t]):Ze.push(t))}return e}function ur(t,e){var i=t.reactions;if(i!==null)for(var r=i.length,n=0;n<r;n++){var s=i[n],l=s.f;(l&ot)===0&&(tt(s,e),(l&(Qe|Ye))!==0&&((l&Xe)!==0?ur(s,wt):Ai(s)))}}let Cn=!1;var dr,fr,_r,hr;function In(){if(dr===void 0){dr=window,fr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,i=Text.prototype;_r=Tt(e,"firstChild").get,hr=Tt(e,"nextSibling").get,$i(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),$i(i)&&(i.__t=void 0)}}function hi(t=""){return document.createTextNode(t)}function Pt(t){return _r.call(t)}function gi(t){return hr.call(t)}function a(t,e){return Pt(t)}function Ke(t,e){{var i=Pt(t);return i instanceof Comment&&i.data===""?gi(i):i}}function v(t,e=1,i=!1){let r=t;for(;e--;)r=gi(r);return r}function Tn(t){t.textContent=""}function Pn(t){Se===null&&we===null&&cn(),we!==null&&(we.f&Ye)!==0&&Se===null&&vn(),qt&&ln()}function On(t,e){var i=e.last;i===null?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}function Ot(t,e,i,r=!0){var n=Se,s={ctx:Ge,deps:null,nodes_start:null,nodes_end:null,f:t|ot,first:null,fn:e,last:null,next:null,parent:n,prev:null,teardown:null,transitions:null,wv:0};if(i)try{Qi(s),s.f|=tr}catch(d){throw it(s),d}else e!==null&&Ai(s);var l=i&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(ir|Vi))===0;if(!l&&r&&(n!==null&&On(s,n),we!==null&&(we.f&Xe)!==0)){var u=we;(u.effects??(u.effects=[])).push(s)}return s}function Dn(t){const e=Ot(Ri,null,!1);return tt(e,Qe),e.teardown=t,e}function St(t){Pn();var e=Se!==null&&(Se.f&at)!==0&&Ge!==null&&!Ge.m;if(e){var i=Ge;(i.e??(i.e=[])).push({fn:t,effect:Se,reaction:we})}else{var r=gr(t);return r}}function qn(t){const e=Ot(yt,t,!0);return()=>{it(e)}}function Rn(t){const e=Ot(yt,t,!0);return(i={})=>new Promise(r=>{i.outro?mi(e,()=>{it(e),r(void 0)}):(it(e),r(void 0))})}function gr(t){return Ot(er,t,!1)}function k(t,e=[],i=fi){const r=e.map(i);return pi(()=>t(...r.map(o)))}function pi(t,e=0){return Ot(Ri|Mi|e,t,!0)}function Dt(t,e=!0){return Ot(Ri|at,t,!0,e)}function pr(t){var e=t.teardown;if(e!==null){const i=qt,r=we;xr(!0),_t(null);try{e.call(null)}finally{xr(i),_t(r)}}}function mr(t,e=!1){var i=t.first;for(t.first=t.last=null;i!==null;){var r=i.next;(i.f&yt)!==0?i.parent=null:it(i,e),i=r}}function Mn(t){for(var e=t.first;e!==null;){var i=e.next;(e.f&at)===0&&it(e),e=i}}function it(t,e=!0){var i=!1;(e||(t.f&nn)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Vn(t.nodes_start,t.nodes_end),i=!0),mr(t,e&&!i),Ei(t,0),tt(t,Li);var r=t.transitions;if(r!==null)for(const s of r)s.stop();pr(t);var n=t.parent;n!==null&&n.first!==null&&br(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Vn(t,e){for(;t!==null;){var i=t===e?null:gi(t);t.remove(),t=i}}function br(t){var e=t.parent,i=t.prev,r=t.next;i!==null&&(i.next=r),r!==null&&(r.prev=i),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=i))}function mi(t,e){var i=[];Hi(t,i,!0),yr(i,()=>{it(t),e&&e()})}function yr(t,e){var i=t.length;if(i>0){var r=()=>--i||e();for(var n of t)n.out(r)}else e()}function Hi(t,e,i){if((t.f&lt)===0){if(t.f^=lt,t.transitions!==null)for(const l of t.transitions)(l.is_global||i)&&e.push(l);for(var r=t.first;r!==null;){var n=r.next,s=(r.f&ui)!==0||(r.f&at)!==0;Hi(r,e,s?i:!1),r=n}}}function bi(t){wr(t,!0)}function wr(t,e){if((t.f&lt)!==0){t.f^=lt,(t.f&Qe)!==0&&(tt(t,ot),Ai(t));for(var i=t.first;i!==null;){var r=i.next,n=(i.f&ui)!==0||(i.f&at)!==0;wr(i,n?e:!1),i=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let yi=[];function Ln(){var t=yi;yi=[],rn(t)}function Nn(t){yi.length===0&&queueMicrotask(Ln),yi.push(t)}function zn(t){var e=Se;if((e.f&tr)===0){if((e.f&Vi)===0)throw t;e.fn(t)}else Sr(t,e)}function Sr(t,e){for(;e!==null;){if((e.f&Vi)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let Yi=!1,wi=null,xt=!1,qt=!1;function xr(t){qt=t}let Si=[],ol=[],we=null,rt=!1;function _t(t){we=t}let Se=null;function Rt(t){Se=t}let vt=null;function kr(t){we!==null&&we.f&Ni&&(vt===null?vt=[t]:vt.push(t))}let je=null,We=0,Ze=null;function Fn(t){Ze=t}let Er=1,xi=0,ht=!1;function Ar(){return++Er}function ki(t){var e=t.f;if((e&ot)!==0)return!0;if((e&wt)!==0){var i=t.deps,r=(e&Ye)!==0;if(i!==null){var n,s,l=(e&ci)!==0,u=r&&Se!==null&&!ht,d=i.length;if(l||u){var _=t,S=_.parent;for(n=0;n<d;n++)s=i[n],(l||!s?.reactions?.includes(_))&&(s.reactions??(s.reactions=[])).push(_);l&&(_.f^=ci),u&&S!==null&&(S.f&Ye)===0&&(_.f^=Ye)}for(n=0;n<d;n++)if(s=i[n],ki(s)&&vr(s),s.wv>t.wv)return!0}(!r||Se!==null&&!ht)&&tt(t,Qe)}return!1}function Cr(t,e,i=!0){var r=t.reactions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];vt?.includes(t)||((s.f&Xe)!==0?Cr(s,e,!1):e===s&&(i?tt(s,ot):(s.f&Qe)!==0&&tt(s,wt),Ai(s)))}}function Ir(t){var p;var e=je,i=We,r=Ze,n=we,s=ht,l=vt,u=Ge,d=rt,_=t.f;je=null,We=0,Ze=null,ht=(_&Ye)!==0&&(rt||!xt||we===null),we=(_&(at|yt))===0?t:null,vt=null,sr(t.ctx),rt=!1,xi++,t.f|=Ni;try{var S=(0,t.fn)(),b=t.deps;if(je!==null){var c;if(Ei(t,We),b!==null&&We>0)for(b.length=We+je.length,c=0;c<je.length;c++)b[We+c]=je[c];else t.deps=b=je;if(!ht)for(c=We;c<b.length;c++)((p=b[c]).reactions??(p.reactions=[])).push(t)}else b!==null&&We<b.length&&(Ei(t,We),b.length=We);if(ar()&&Ze!==null&&!rt&&b!==null&&(t.f&(Xe|wt|ot))===0)for(c=0;c<Ze.length;c++)Cr(Ze[c],t);return n!==null&&n!==t&&(xi++,Ze!==null&&(r===null?r=Ze:r.push(...Ze))),S}catch(w){zn(w)}finally{je=e,We=i,Ze=r,we=n,ht=s,vt=l,sr(u),rt=d,t.f^=Ni}}function Un(t,e){let i=e.reactions;if(i!==null){var r=Je.call(i,t);if(r!==-1){var n=i.length-1;n===0?i=e.reactions=null:(i[r]=i[n],i.pop())}}i===null&&(e.f&Xe)!==0&&(je===null||!je.includes(e))&&(tt(e,wt),(e.f&(Ye|ci))===0&&(e.f^=ci),or(e),Ei(e,0))}function Ei(t,e){var i=t.deps;if(i!==null)for(var r=e;r<i.length;r++)Un(t,i[r])}function Qi(t){var e=t.f;if((e&Li)===0){tt(t,Qe);var i=Se,r=xt;Se=t,xt=!0;try{(e&Mi)!==0?Mn(t):mr(t),pr(t);var n=Ir(t);t.teardown=typeof n=="function"?n:null,t.wv=Er;var s}finally{xt=r,Se=i}}}function Gn(){try{un()}catch(t){if(wi!==null)Sr(t,wi);else throw t}}function jn(){var t=xt;try{var e=0;for(xt=!0;Si.length>0;){e++>1e3&&Gn();var i=Si,r=i.length;Si=[];for(var n=0;n<r;n++){var s=Hn(i[n]);Bn(s)}ai.clear()}}finally{Yi=!1,xt=t,wi=null}}function Bn(t){var e=t.length;if(e!==0)for(var i=0;i<e;i++){var r=t[i];(r.f&(Li|lt))===0&&ki(r)&&(Qi(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?br(r):r.fn=null))}}function Ai(t){Yi||(Yi=!0,queueMicrotask(jn));for(var e=wi=t;e.parent!==null;){e=e.parent;var i=e.f;if((i&(yt|at))!==0){if((i&Qe)===0)return;e.f^=Qe}}Si.push(e)}function Hn(t){for(var e=[],i=t;i!==null;){var r=i.f,n=(r&(at|yt))!==0,s=n&&(r&Qe)!==0;if(!s&&(r&lt)===0){(r&er)!==0?e.push(i):n?i.f^=Qe:ki(i)&&Qi(i);var l=i.first;if(l!==null){i=l;continue}}var u=i.parent;for(i=i.next;i===null&&u!==null;)i=u.next,u=u.parent}return e}function o(t){var e=t.f,i=(e&Xe)!==0;if(we!==null&&!rt){if(!vt?.includes(t)){var r=we.deps;t.rv<xi&&(t.rv=xi,je===null&&r!==null&&r[We]===t?We++:je===null?je=[t]:(!ht||!je.includes(t))&&je.push(t))}}else if(i&&t.deps===null&&t.effects===null){var n=t,s=n.parent;s!==null&&(s.f&Ye)===0&&(n.f^=Ye)}return i&&(n=t,ki(n)&&vr(n)),qt&&ai.has(t)?ai.get(t):t.v}function Ci(t){var e=rt;try{return rt=!0,t()}finally{rt=e}}const Yn=-7169;function tt(t,e){t.f=t.f&Yn|e}const Qn=["touchstart","touchmove"];function Kn(t){return Qn.includes(t)}const Tr=new Set,Ki=new Set;function gt(t){for(var e=0;e<t.length;e++)Tr.add(t[e]);for(var i of Ki)i(t)}function Ii(t){var e=this,i=e.ownerDocument,r=t.type,n=t.composedPath?.()||[],s=n[0]||t.target,l=0,u=t.__root;if(u){var d=n.indexOf(u);if(d!==-1&&(e===document||e===window)){t.__root=e;return}var _=n.indexOf(e);if(_===-1)return;d<=_&&(l=d)}if(s=n[l]||t.target,s!==e){Zr(t,"currentTarget",{configurable:!0,get(){return s||i}});var S=we,b=Se;_t(null),Rt(null);try{for(var c,p=[];s!==null;){var w=s.assignedSlot||s.parentNode||s.host||null;try{var D=s["__"+r];if(D!=null&&(!s.disabled||t.target===s))if(ze(D)){var[M,...A]=D;M.apply(s,[t,...A])}else D.call(s,t)}catch(x){c?p.push(x):c=x}if(t.cancelBubble||w===e||w===null)break;s=w}if(c){for(let x of p)queueMicrotask(()=>{throw x});throw c}}finally{t.__root=e,delete t.currentTarget,_t(S),Rt(b)}}}function Pr(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function oi(t,e){var i=Se;i.nodes_start===null&&(i.nodes_start=t,i.nodes_end=e)}function h(t,e){var i=(e&Sn)!==0,r=(e&xn)!==0,n,s=!t.startsWith("<!>");return()=>{n===void 0&&(n=Pr(s?t:"<!>"+t),i||(n=Pt(n)));var l=r||fr?document.importNode(n,!0):n.cloneNode(!0);if(i){var u=Pt(l),d=l.lastChild;oi(u,d)}else oi(l,l);return l}}function Wn(t,e,i="svg"){var r=!t.startsWith("<!>"),n=`<${i}>${r?t:"<!>"+t}</${i}>`,s;return()=>{if(!s){var l=Pr(n),u=Pt(l);s=Pt(u)}var d=s.cloneNode(!0);return oi(d,d),d}}function Jn(t,e){return Wn(t,e,"svg")}function kt(t=""){{var e=hi(t+"");return oi(e,e),e}}function ct(){var t=document.createDocumentFragment(),e=document.createComment(""),i=hi();return t.append(e,i),oi(e,i),t}function f(t,e){t!==null&&t.before(e)}function y(t,e){var i=e==null?"":typeof e=="object"?e+"":e;i!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=i,t.nodeValue=i+"")}function Zn(t,e){return Xn(t,e)}const Mt=new Map;function Xn(t,{target:e,anchor:i,props:r={},events:n,context:s,intro:l=!0}){In();var u=new Set,d=b=>{for(var c=0;c<b.length;c++){var p=b[c];if(!u.has(p)){u.add(p);var w=Kn(p);e.addEventListener(p,Ii,{passive:w});var D=Mt.get(p);D===void 0?(document.addEventListener(p,Ii,{passive:w}),Mt.set(p,1)):Mt.set(p,D+1)}}};d(It(Tr)),Ki.add(d);var _=void 0,S=Rn(()=>{var b=i??e.appendChild(hi());return Dt(()=>{if(s){$e({});var c=Ge;c.c=s}n&&(r.$$events=n),_=t(b,r)||{},s&&et()}),()=>{for(var c of u){e.removeEventListener(c,Ii);var p=Mt.get(c);--p===0?(document.removeEventListener(c,Ii),Mt.delete(c)):Mt.set(c,p)}Ki.delete(d),b!==i&&b.parentNode?.removeChild(b)}});return $n.set(_,S),_}let $n=new WeakMap;function m(t,e,[i,r]=[0,0]){var n=t,s=null,l=null,u=Be,d=i>0?ui:0,_=!1;const S=(c,p=!0)=>{_=!0,b(p,c)},b=(c,p)=>{u!==(u=c)&&(u?(s?bi(s):p&&(s=Dt(()=>p(n))),l&&mi(l,()=>{l=null})):(l?bi(l):p&&(l=Dt(()=>p(n,[i+1,r]))),s&&mi(s,()=>{s=null})))};pi(()=>{_=!1,e(S),_||b(null,null)},d)}function He(t,e){return e}function es(t,e,i,r){for(var n=[],s=e.length,l=0;l<s;l++)Hi(e[l].e,n,!0);var u=s>0&&n.length===0&&i!==null;if(u){var d=i.parentNode;Tn(d),d.append(i),r.clear(),pt(t,e[0].prev,e[s-1].next)}yr(n,()=>{for(var _=0;_<s;_++){var S=e[_];u||(r.delete(S.k),pt(t,S.prev,S.next)),it(S.e,!u)}})}function Ue(t,e,i,r,n,s=null){var l=t,u={flags:e,items:new Map,first:null},d=(e&nr)!==0;if(d){var _=t;l=_.appendChild(hi())}var S=null,b=!1,c=En(()=>{var p=i();return ze(p)?p:p==null?[]:It(p)});pi(()=>{var p=o(c),w=p.length;b&&w===0||(b=w===0,ts(p,u,l,n,e,r,i),s!==null&&(w===0?S?bi(S):S=Dt(()=>s(l)):S!==null&&mi(S,()=>{S=null})),o(c))})}function ts(t,e,i,r,n,s,l){var u=(n&gn)!==0,d=(n&(Fi|Ui))!==0,_=t.length,S=e.items,b=e.first,c=b,p,w=null,D,M=[],A=[],x,T,I,C;if(u)for(C=0;C<_;C+=1)x=t[C],T=s(x,C),I=S.get(T),I!==void 0&&(I.a?.measure(),(D??(D=new Set)).add(I));for(C=0;C<_;C+=1){if(x=t[C],T=s(x,C),I=S.get(T),I===void 0){var se=c?c.e.nodes_start:i;w=rs(se,e,w,w===null?e.first:w.next,x,T,C,r,n,l),S.set(T,w),M=[],A=[],c=w.next;continue}if(d&&is(I,x,C,n),(I.e.f&lt)!==0&&(bi(I.e),u&&(I.a?.unfix(),(D??(D=new Set)).delete(I))),I!==c){if(p!==void 0&&p.has(I)){if(M.length<A.length){var re=A[0],ne;w=re.prev;var Te=M[0],Ae=M[M.length-1];for(ne=0;ne<M.length;ne+=1)Or(M[ne],re,i);for(ne=0;ne<A.length;ne+=1)p.delete(A[ne]);pt(e,Te.prev,Ae.next),pt(e,w,Te),pt(e,Ae,re),c=re,w=Ae,C-=1,M=[],A=[]}else p.delete(I),Or(I,c,i),pt(e,I.prev,I.next),pt(e,I,w===null?e.first:w.next),pt(e,w,I),w=I;continue}for(M=[],A=[];c!==null&&c.k!==T;)(c.e.f&lt)===0&&(p??(p=new Set)).add(c),A.push(c),c=c.next;if(c===null)continue;I=c}M.push(I),w=I,c=I.next}if(c!==null||p!==void 0){for(var V=p===void 0?[]:It(p);c!==null;)(c.e.f&lt)===0&&V.push(c),c=c.next;var G=V.length;if(G>0){var _e=(n&nr)!==0&&_===0?i:null;if(u){for(C=0;C<G;C+=1)V[C].a?.measure();for(C=0;C<G;C+=1)V[C].a?.fix()}es(e,V,_e,S)}}u&&Nn(()=>{if(D!==void 0)for(I of D)I.a?.apply()}),Se.first=e.first&&e.first.e,Se.last=w&&w.e}function is(t,e,i,r){(r&Fi)!==0&&Bi(t.v,e),(r&Ui)!==0?Bi(t.i,i):t.i=i}function rs(t,e,i,r,n,s,l,u,d,_){var S=(d&Fi)!==0,b=(d&pn)===0,c=S?b?cr(n,!1,!1):_i(n):n,p=(d&Ui)===0?l:_i(l),w={i:p,v:c,k:s,a:null,e:null,prev:i,next:r};try{return w.e=Dt(()=>u(t,c,p,_),Cn),w.e.prev=i&&i.e,w.e.next=r&&r.e,i===null?e.first=w:(i.next=w,i.e.next=w.e),r!==null&&(r.prev=w,r.e.prev=w.e),w}finally{}}function Or(t,e,i){for(var r=t.next?t.next.e.nodes_start:i,n=e?e.e.nodes_start:i,s=t.e.nodes_start;s!==r;){var l=gi(s);n.before(s),s=l}}function pt(t,e,i){e===null?t.first=i:(e.next=i,e.e.next=i&&i.e),i!==null&&(i.prev=e,i.e.prev=e&&e.e)}function Dr(t,e,...i){var r=t,n=tn,s;pi(()=>{n!==(n=e())&&(s&&(it(s),s=null),s=Dt(()=>n(r,...i)))},ui)}function qr(t){var e,i,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(i=qr(t[e]))&&(r&&(r+=" "),r+=i)}else for(i in t)t[i]&&(r&&(r+=" "),r+=i);return r}function ns(){for(var t,e,i=0,r="",n=arguments.length;i<n;i++)(t=arguments[i])&&(e=qr(t))&&(r&&(r+=" "),r+=e);return r}function Et(t){return typeof t=="object"?ns(t):t??""}const Rr=[...` 	
\r\f \v\uFEFF`];function ss(t,e,i){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),i){for(var n in i)if(i[n])r=r?r+" "+n:n;else if(r.length)for(var s=n.length,l=0;(l=r.indexOf(n,l))>=0;){var u=l+s;(l===0||Rr.includes(r[l-1]))&&(u===r.length||Rr.includes(r[u]))?r=(l===0?"":r.substring(0,l))+r.substring(u+1):l=u}}return r===""?null:r}function as(t,e){return t==null?null:String(t)}function xe(t,e,i,r,n,s){var l=t.__className;if(l!==i||l===void 0){var u=ss(i,r,s);u==null?t.removeAttribute("class"):e?t.className=u:t.setAttribute("class",u),t.__className=i}else if(s&&n!==s)for(var d in s){var _=!!s[d];(n==null||_!==!!n[d])&&t.classList.toggle(d,_)}return s}function os(t,e,i,r){var n=t.__style;if(n!==e){var s=as(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const ls=Symbol("is custom element"),vs=Symbol("is html");function cs(t,e){var i=Wi(t);i.value===(i.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Mr(t,e){var i=Wi(t);i.checked!==(i.checked=e??void 0)&&(t.checked=e)}function mt(t,e,i,r){var n=Wi(t);n[e]!==(n[e]=i)&&(e==="loading"&&(t[an]=i),i==null?t.removeAttribute(e):typeof i!="string"&&us(t).includes(e)?t[e]=i:t.setAttribute(e,i))}function Wi(t){return t.__attributes??(t.__attributes={[ls]:t.nodeName.includes("-"),[vs]:t.namespaceURI===kn})}var Vr=new Map;function us(t){var e=Vr.get(t.nodeName);if(e)return e;Vr.set(t.nodeName,e=[]);for(var i,r=t,n=Element.prototype;n!==r;){i=Xr(r);for(var s in i)i[s].set&&e.push(s);r=Xi(r)}return e}let Ti=!1;function ds(t){var e=Ti;try{return Ti=!1,[t(),Ti]}finally{Ti=e}}function Lr(t){return t.ctx?.d??!1}function Z(t,e,i,r){var n=(i&mn)!==0,s=!0,l=(i&yn)!==0,u=(i&wn)!==0,d=!1,_;l?[_,d]=ds(()=>t[e]):_=t[e];var S=di in t||sn in t,b=l&&(Tt(t,e)?.set??(S&&e in t&&(C=>t[e]=C)))||void 0,c=r,p=!0,w=!1,D=()=>(w=!0,p&&(p=!1,u?c=Ci(r):c=r),c);_===void 0&&r!==void 0&&(b&&s&&dn(),_=D(),b&&b(_));var M;if(M=()=>{var C=t[e];return C===void 0?D():(p=!0,w=!1,C)},(i&bn)===0&&s)return M;if(b){var A=t.$$legacy;return function(C,se){return arguments.length>0?((!se||A||d)&&b(se?M():C),C):M()}}var x=!1,T=cr(_),I=fi(()=>{var C=M(),se=o(T);return x?(x=!1,se):T.v=C});return l&&o(I),n||(I.equals=zi),function(C,se){if(arguments.length>0){const re=se?o(I):l?Re(C):C;if(!I.equals(re)){if(x=!0,z(T,re),w&&c!==void 0&&(c=re),Lr(I))return C;Ci(()=>o(I))}return C}return Lr(I)?I.v:o(I)}}function Pi(t){Ge===null&&Gi(),St(()=>{const e=Ci(t);if(typeof e=="function")return e})}function fs(t){Ge===null&&Gi(),Pi(()=>()=>Ci(t))}function _s(t,e,{bubbles:i=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:r})}function hs(){const t=Ge;return t===null&&Gi(),(e,i,r)=>{const n=t.s.$$events?.[e];if(n){const s=ze(n)?n.slice():[n],l=_s(e,i,r);for(const u of s)u.call(t.x,l);return!l.defaultPrevented}return!0}}const gs="5";typeof window<"u"&&((jr=window.__svelte??(window.__svelte={})).v??(jr.v=new Set)).add(gs);class ps{constructor(e,i={}){this.baseUrl=e||window.__API_BASE_URL__||"http://localhost:8080/api/v1",this.modelId=i.modelId,this.authToken=i.authToken||localStorage.getItem("auth_token"),this.timeout=i.timeout||3e4,console.log("API Client initialized:",{baseUrl:this.baseUrl,modelId:this.modelId,hasAuth:!!this.authToken})}async request(e,i={}){const r=`${this.baseUrl}${e}`;console.log(`API Request: ${i.method||"GET"} ${r}`);const n={method:"GET",headers:{"Content-Type":"application/json",...this.authToken&&{Authorization:`Bearer ${this.authToken}`},...i.headers},...i};n.body&&typeof n.body=="object"&&(n.body=JSON.stringify(n.body));try{const s=new AbortController,l=setTimeout(()=>s.abort(),this.timeout),u=await fetch(r,{...n,signal:s.signal});if(clearTimeout(l),!u.ok){const _=await u.json().catch(()=>({message:u.statusText}));throw new Error(_.message||_.error||`HTTP ${u.status}`)}const d=await u.json();return(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log(`API Response from ${e}:`,d),d&&typeof d=="object"&&d.success!==void 0&&d.data!==void 0?d.data:d??(e.includes("/groups")||e.includes("/options")||e.includes("/rules")?[]:{})}catch(s){throw s.name==="AbortError"?new Error("Request timeout"):(console.error(`API Error for ${e}:`,s),s)}}async getModel(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}`);return!e.option_groups&&e.groups&&(e.option_groups=e.groups),console.log("Model structure:",{hasGroups:!!e.groups,hasOptionGroups:!!e.option_groups,hasOptions:!!e.options,groupsCount:e.groups?.length||e.option_groups?.length||0,optionsCount:e.options?.length||0}),e}async getModelGroups(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/groups`);return Array.isArray(e)?e:[]}async getModelOptions(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/options`);return Array.isArray(e)?e:[]}async getModelRules(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/rules`);return Array.isArray(e)?e:[]}async getModelPricingRules(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/pricing-rules`);return Array.isArray(e)?e:[]}async getModelStatistics(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/statistics`)}async createConfiguration(e=[]){return this.request("/configurations",{method:"POST",body:{model_id:"sample-laptop",name:`Configuration ${new Date().toISOString()}`,selections:this.formatSelections(e)}})}async getConfiguration(e){return this.request(`/configurations/${e}`)}async updateConfiguration(e,i){return this.request(`/configurations/${e}`,{method:"PUT",body:{model_id:this.modelId,...i,selections:i.selections?this.formatSelections(i.selections):void 0}})}async deleteConfiguration(e){return this.request(`/configurations/${e}`,{method:"DELETE"})}async addSelections(e,i){return this.request(`/configurations/${e}/selections`,{method:"POST",body:{selections:this.formatSelections(i)}})}async removeSelection(e,i){return this.request(`/configurations/${e}/selections/${i}`,{method:"DELETE"})}async validateConfiguration(e){return this.request(`/configurations/${e}/validate`,{method:"POST"})}async validateSelections(e){return this.request("/configurations/validate-selection",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e)}})}async getAvailableOptions(e){return this.request(`/configurations/${e}/available-options`)}async getConstraints(e){return this.request(`/configurations/${e}/constraints`)}async getConfigurationSummary(e){return this.request(`/configurations/${e}/summary`)}async cloneConfiguration(e){return this.request(`/configurations/${e}/clone`,{method:"POST"})}async calculatePrice(e,i={}){return this.request("/pricing/calculate",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e),context:i}})}async simulatePricing(e){return this.request("/pricing/simulate",{method:"POST",body:{model_id:this.modelId,scenarios:e}})}async validatePricing(e,i){return this.request("/pricing/validate",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e),expected_price:i}})}async getPricingRules(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/pricing/rules/${this.modelId}`)}async getVolumeTiers(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/pricing/volume-tiers/${this.modelId}`)}async validateModel(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/validate`,{method:"POST"})}async detectConflicts(e=[]){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/conflicts`,{method:"POST",body:{rule_ids:e}})}async analyzeImpact(e){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/impact`,{method:"POST",body:e})}async getModelQuality(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/quality`,{method:"POST"})}async getOptimizationRecommendations(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/optimize`,{method:"POST"})}formatSelections(e){return Array.isArray(e)?e:Object.entries(e).filter(([i,r])=>r>0).map(([i,r])=>({option_id:i,quantity:parseInt(r)||1}))}async batchValidate(e){return this.request("/configurations/validate",{method:"POST",body:{configurations:e}})}async bulkCalculatePricing(e){return this.request("/pricing/bulk-calculate",{method:"POST",body:{configurations:e}})}async checkHealth(){return this.request("/health")}async getStatus(){return this.request("/status")}}function Nr(t){return typeof t!="string"?!1:["=>","function","$props","$","$.strict_equals","return ","${","() =>","} else","if (",".selection_type","strict_equals","min_selections","max_selections"].some(i=>t.includes(i))}function zr(t,e=""){if(t==null)return e;const i=String(t);return typeof t=="string"&&!Nr(i)?i:Nr(i)?(console.warn("[Sanitizer] Code pattern detected and removed:",{original:i.substring(0,100)+(i.length>100?"...":""),fallback:e}),e):i}class ms{constructor(){Ce(this,Vt);Ce(this,Lt);Ce(this,Nt);Ce(this,zt);Ce(this,Ft);Ce(this,Ut);Ce(this,Gt);Ce(this,jt);Ce(this,Bt);Ce(this,Ht);Ce(this,Yt);Ce(this,Qt);Ce(this,Kt);Ce(this,Wt);Ce(this,Jt);Ce(this,Zt);Ce(this,Xt);Ce(this,$t);Ce(this,ei);Ce(this,ti);Ce(this,ii);Ce(this,ri);Ce(this,ni);Ce(this,si);Ie(this,Vt,H("")),Ie(this,Lt,H(null)),Ie(this,Nt,H(null)),Ie(this,zt,H(Re({}))),Ie(this,Ft,H(null)),Ie(this,Ut,H(null)),Ie(this,Gt,H(Re([]))),Ie(this,jt,H(Re([]))),Ie(this,Bt,H(Re([]))),Ie(this,Ht,H(Re([]))),Ie(this,Yt,H(Re([]))),Ie(this,Qt,H(Re([]))),Ie(this,Kt,H(Re([]))),Ie(this,Wt,H(!1)),Ie(this,Jt,H(!1)),Ie(this,Zt,H(!1)),Ie(this,Xt,H(!1)),Ie(this,$t,H(null)),Ie(this,ei,H(Re([]))),Ie(this,ti,H(null)),Ie(this,ii,H(null)),Ie(this,ri,H(!1)),Ie(this,ni,H(0)),Ie(this,si,H(Re(new Set))),this.api=null,this._initialized=!1,this._debounceTimers=new Map,this._modelLoaded=!1}get modelId(){return o(N(this,Vt))}set modelId(e){z(N(this,Vt),e,!0)}get model(){return o(N(this,Lt))}set model(e){z(N(this,Lt),e,!0)}get configuration(){return o(N(this,Nt))}set configuration(e){z(N(this,Nt),e,!0)}get selections(){return o(N(this,zt))}set selections(e){z(N(this,zt),e,!0)}get validationResults(){return o(N(this,Ft))}set validationResults(e){z(N(this,Ft),e,!0)}get pricingData(){return o(N(this,Ut))}set pricingData(e){z(N(this,Ut),e,!0)}get availableOptions(){return o(N(this,Gt))}set availableOptions(e){z(N(this,Gt),e,!0)}get constraints(){return o(N(this,jt))}set constraints(e){z(N(this,jt),e,!0)}get groups(){return o(N(this,Bt))}set groups(e){z(N(this,Bt),e,!0)}get options(){return o(N(this,Ht))}set options(e){z(N(this,Ht),e,!0)}get rules(){return o(N(this,Yt))}set rules(e){z(N(this,Yt),e,!0)}get pricingRules(){return o(N(this,Qt))}set pricingRules(e){z(N(this,Qt),e,!0)}get volumeTiers(){return o(N(this,Kt))}set volumeTiers(e){z(N(this,Kt),e,!0)}get isLoading(){return o(N(this,Wt))}set isLoading(e){z(N(this,Wt),e,!0)}get isValidating(){return o(N(this,Jt))}set isValidating(e){z(N(this,Jt),e,!0)}get isPricing(){return o(N(this,Zt))}set isPricing(e){z(N(this,Zt),e,!0)}get isSaving(){return o(N(this,Xt))}set isSaving(e){z(N(this,Xt),e,!0)}get error(){return o(N(this,$t))}set error(e){z(N(this,$t),e,!0)}get validationErrors(){return o(N(this,ei))}set validationErrors(e){z(N(this,ei),e,!0)}get configurationId(){return o(N(this,ti))}set configurationId(e){z(N(this,ti),e,!0)}get lastSaved(){return o(N(this,ii))}set lastSaved(e){z(N(this,ii),e,!0)}get isDirty(){return o(N(this,ri))}set isDirty(e){z(N(this,ri),e,!0)}get currentStep(){return o(N(this,ni))}set currentStep(e){z(N(this,ni),e,!0)}get expandedGroups(){return o(N(this,si))}set expandedGroups(e){z(N(this,si),e,!0)}async initialize(){this._initialized||(this._initialized=!0,console.log("🚀 ConfigurationStore initialized"),Array.isArray(this.groups)||(this.groups=[]),Array.isArray(this.options)||(this.options=[]),Array.isArray(this.rules)||(this.rules=[]),Array.isArray(this.pricingRules)||(this.pricingRules=[]),Array.isArray(this.volumeTiers)||(this.volumeTiers=[]),Array.isArray(this.availableOptions)||(this.availableOptions=[]),Array.isArray(this.validationErrors)||(this.validationErrors=[]),St(()=>{this.modelId&&!this.api&&(this.api=new ps(window.__API_BASE_URL__,{modelId:this.modelId}),this.loadModel())}),St(()=>{this.api&&Object.keys(this.selections).length>0&&this._debounce("validate",()=>this.validateSelections(),500)}),St(()=>{this.api&&this.isValid&&Object.keys(this.selections).length>0&&this._debounce("pricing",()=>this.calculatePricing(),300)}),St(()=>{this.configuration&&Object.keys(this.selections).length>0&&(this.isDirty=!0)}))}get isValid(){return!this.validationResults||this.validationResults.is_valid}get hasViolations(){return this.validationResults?.violations?.length>0}get totalPrice(){return this.pricingData?.total_price||0}get basePrice(){return this.pricingData?.base_price||0}get discounts(){return this.pricingData?.discounts||[]}get selectedCount(){return Object.values(this.selections).reduce((e,i)=>e+i,0)}get safeGroups(){return Array.isArray(this.groups)?this.groups:[]}get safeOptions(){return Array.isArray(this.options)?this.options:[]}get safeRules(){return Array.isArray(this.rules)?this.rules:[]}get safePricingRules(){return Array.isArray(this.pricingRules)?this.pricingRules:[]}get safeVolumeTiers(){return Array.isArray(this.volumeTiers)?this.volumeTiers:[]}get progress(){if(!this.model||!this._modelLoaded)return 0;const e=this.safeGroups;if(e.length===0)return 0;const i=e.filter(n=>n&&n.required).length;if(i===0)return 100;const r=e.filter(n=>n&&n.id&&this.hasGroupSelection(n.id)).length;return Math.round(r/i*100)}async loadModel(){if(this.api){this.isLoading=!0,this.error=null;try{const[e,i,r,n,s]=await Promise.all([this.api.getModel(),this.api.getModelGroups(),this.api.getModelOptions(),this.api.getModelRules().catch(()=>({data:[]})),this.api.getModelPricingRules().catch(()=>({data:[]}))]);if(this.model=e,this.groups=Array.isArray(i)?i:i&&typeof i=="object"&&i.data?i.data:i&&typeof i=="object"&&i.groups?i.groups:e&&e.option_groups&&Array.isArray(e.option_groups)?e.option_groups:e&&e.groups&&Array.isArray(e.groups)?e.groups:[],this.options=Array.isArray(r)?r:r&&typeof r=="object"&&r.data?r.data:r&&typeof r=="object"&&r.options?r.options:e&&e.options&&Array.isArray(e.options)?e.options:[],this.rules=Array.isArray(n)?n:n&&typeof n=="object"&&n.data?n.data:n&&typeof n=="object"&&n.rules?n.rules:[],this.pricingRules=Array.isArray(s)?s:s&&typeof s=="object"&&s.data?s.data:s&&typeof s=="object"&&s.pricing_rules?s.pricing_rules:[],this.groups=this.groups.map(l=>({...l,description:typeof l.description=="string"&&(l.description.includes("=>")||l.description.includes("function")||l.description.includes("$props"))?"":l.description})),this.options=this.options.map(l=>({...l,description:typeof l.description=="string"&&(l.description.includes("=>")||l.description.includes("function")||l.description.includes("$props"))?"":l.description})),Array.isArray(this.groups)||(this.groups=[]),Array.isArray(this.options)||(this.options=[]),Array.isArray(this.rules)||(this.rules=[]),Array.isArray(this.pricingRules)||(this.pricingRules=[]),this.groups.length===0&&e.option_groups&&(console.log("Using groups from model.option_groups"),this.groups=Array.isArray(e.option_groups)?e.option_groups:[]),this.groups.length===0&&e.groups&&(console.log("Using groups from model.groups"),this.groups=Array.isArray(e.groups)?e.groups:[]),this.options.length===0&&e.options&&(console.log("Using options from model.options"),this.options=Array.isArray(e.options)?e.options:[]),this.options.length===0&&this.groups.length>0){const l=[];this.groups.forEach(u=>{Array.isArray(u.options)&&u.options.forEach(d=>{l.push({...d,group_id:u.id})})}),l.length>0&&(console.log("Extracted options from groups:",l.length),this.options=l)}console.log("Model loaded:",{model:e,groups:this.groups,options:this.options,groupsCount:this.groups.length,optionsCount:this.options.length}),this.groups.forEach((l,u)=>{l.description&&typeof l.description=="string"&&(l.description.includes("=>")||l.description.includes("function"))&&console.warn(`Group ${u} (${l.name}) has function code in description:`,l.description),l.name&&typeof l.name=="string"&&(l.name.includes("=>")||l.name.includes("function"))&&console.warn(`Group ${u} has function code in name:`,l.name)}),this.options.forEach((l,u)=>{l.description&&typeof l.description=="string"&&(l.description.includes("=>")||l.description.includes("function"))&&console.warn(`Option ${u} (${l.name}) has function code in description:`,l.description),l.name&&typeof l.name=="string"&&(l.name.includes("=>")||l.name.includes("function"))&&console.warn(`Option ${u} has function code in name:`,l.name)});try{const l=await this.api.getVolumeTiers();this.volumeTiers=Array.isArray(l)?l:l&&typeof l=="object"&&l.data?l.data:l&&typeof l=="object"&&l.tiers?l.tiers:[]}catch{console.warn("Volume tiers not available"),this.volumeTiers=[]}Array.isArray(this.volumeTiers)||(this.volumeTiers=[]),this.groups.length>0||this.options.length>0?(this._modelLoaded=!0,await this.createConfiguration()):console.warn("No groups or options loaded - skipping configuration creation")}catch(e){this.error=e.message,console.error("Failed to load model:",e)}finally{this.isLoading=!1}}}async createConfiguration(){if(!(!this.api||this.configuration))try{const e=await this.api.createConfiguration([]);this.configuration=e,this.configurationId=e.id,console.log("Configuration created:",e.id)}catch(e){this.error=e.message,console.error("Failed to create configuration:",e)}}async loadConfiguration(e){if(this.api){this.isLoading=!0;try{const i=await this.api.getConfiguration(e);this.configuration=i,this.configurationId=i.id;const r={};i.selections?.forEach(n=>{r[n.option_id]=n.quantity}),this.selections=r,await Promise.all([this.validateConfiguration(),this.calculatePricing()])}catch(i){this.error=i.message}finally{this.isLoading=!1}}}async saveConfiguration(){if(!(!this.api||!this.configurationId||!this.isDirty)){this.isSaving=!0;try{await this.api.updateConfiguration(this.configurationId,{selections:this.selections,name:`Configuration ${new Date().toLocaleDateString()}`}),this.lastSaved=new Date,this.isDirty=!1}catch(e){console.error("Failed to save configuration:",e)}finally{this.isSaving=!1}}}async updateSelection(e,i){const r=this.safeOptions,n=this.safeGroups;if(r.length===0){console.warn("Cannot update selection - options not loaded");return}const s={...this.selections};i>0?s[e]=i:delete s[e];const l=r.find(u=>u.id===e);if(l){const u=n.find(d=>d.id===l.group_id);if(u?.selection_type==="single"&&r.filter(d=>d.group_id===u.id&&d.id!==e).forEach(d=>delete s[d.id]),u?.max_selections&&r.filter(_=>_.group_id===u.id&&s[_.id]).length>u.max_selections){this.error=`Maximum ${u.max_selections} selections allowed in ${u.name}`;return}}if(this.selections=s,this.configurationId)try{i>0?await this.api.addSelections(this.configurationId,s):await this.api.removeSelection(this.configurationId,e)}catch(u){this.error=u.message}}toggleOption(e){const i=this.selections[e]||0;return this.updateSelection(e,i>0?0:1)}async validateSelections(){if(!(!this.api||this.isValidating)){this.isValidating=!0,this.validationErrors=[];try{const e=await this.api.validateSelections(this.selections);this.validationResults=e,e.available_options&&(this.availableOptions=e.available_options),e.violations&&(this.validationErrors=e.violations)}catch(e){console.error("Validation failed:",e)}finally{this.isValidating=!1}}}async validateConfiguration(){if(!(!this.api||!this.configurationId)){this.isValidating=!0;try{const e=await this.api.validateConfiguration(this.configurationId);this.validationResults=e,e.available_options&&(this.availableOptions=e.available_options)}catch(e){console.error("Configuration validation failed:",e)}finally{this.isValidating=!1}}}async calculatePricing(e={}){if(!(!this.api||this.isPricing)){this.isPricing=!0;try{const i=await this.api.calculatePrice(this.selections,e);this.pricingData=i}catch(i){console.error("Pricing calculation failed:",i)}finally{this.isPricing=!1}}}hasGroupSelection(e){return this.safeOptions.filter(r=>r.group_id===e).some(r=>this.selections[r.id]>0)}getGroupSelections(e){return this.safeOptions.filter(r=>r.group_id===e&&this.selections[r.id]>0).map(r=>({...r,quantity:this.selections[r.id]}))}isOptionAvailable(e){return this.availableOptions.length?this.availableOptions.includes(e):!0}isOptionSelected(e){return this.selections[e]>0}getOptionQuantity(e){return this.selections[e]||0}toggleGroup(e){const i=new Set(this.expandedGroups);i.has(e)?i.delete(e):i.add(e),this.expandedGroups=i}isGroupExpanded(e){return this.expandedGroups.has(e)}exportConfiguration(){const e=this.safeOptions,i=Object.entries(this.selections).filter(([r,n])=>n>0).map(([r,n])=>{const s=e.find(l=>l.id===r);return{option_id:r,option_name:s?.name,quantity:n,unit_price:s?.price||0,total_price:(s?.price||0)*n}});return{id:this.configurationId,model_id:this.modelId,model_name:this.model?.name,selections:i,validation:{is_valid:this.isValid,violations:this.validationResults?.violations||[]},pricing:{base_price:this.basePrice,total_price:this.totalPrice,discounts:this.discounts,breakdown:this.pricingData?.breakdown||[]},metadata:{created:this.configuration?.created_at,updated:this.configuration?.updated_at,saved:this.lastSaved}}}reset(){this.selections={},this.validationResults=null,this.pricingData=null,this.configuration=null,this.configurationId=null,this.currentStep=0,this.isDirty=!1,this.error=null,this.validationErrors=[]}_debounce(e,i,r){clearTimeout(this._debounceTimers.get(e)),this._debounceTimers.set(e,setTimeout(i,r))}canProceedToStep(e){switch(e){case 1:return this.selectedCount>0;case 2:return this.isValid;case 3:return this.isValid&&this.pricingData;default:return!0}}nextStep(){this.currentStep<3&&this.canProceedToStep(this.currentStep+1)&&this.currentStep++}previousStep(){this.currentStep>0&&this.currentStep--}goToStep(e){e>=0&&e<=3&&this.canProceedToStep(e)&&(this.currentStep=e)}setModelId(e){this.modelId!==e&&(this.reset(),this.modelId=e)}}Vt=new WeakMap,Lt=new WeakMap,Nt=new WeakMap,zt=new WeakMap,Ft=new WeakMap,Ut=new WeakMap,Gt=new WeakMap,jt=new WeakMap,Bt=new WeakMap,Ht=new WeakMap,Yt=new WeakMap,Qt=new WeakMap,Kt=new WeakMap,Wt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap,Xt=new WeakMap,$t=new WeakMap,ei=new WeakMap,ti=new WeakMap,ii=new WeakMap,ri=new WeakMap,ni=new WeakMap,si=new WeakMap;const g=new ms;var bs=Jn('<svg class="checkmark svelte-19ib3n" width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M13.854 3.646a.5.5 0 010 .708l-7 7a.5.5 0 01-.708 0l-3.5-3.5a.5.5 0 11.708-.708L6.5 10.293l6.646-6.647a.5.5 0 01.708 0z"></path></svg>'),ys=h('<span class="step-number svelte-19ib3n"></span>'),ws=h('<div><div class="step-marker svelte-19ib3n"><!></div> <div class="step-content svelte-19ib3n"><span class="step-icon svelte-19ib3n"> </span> <span class="step-label svelte-19ib3n"> </span></div></div>'),Ss=h('<div class="progress-indicator svelte-19ib3n"><div class="progress-bar svelte-19ib3n"><div class="progress-fill svelte-19ib3n"></div></div> <div class="steps svelte-19ib3n"></div></div>');function xs(t,e){$e(e,!0);let i=Z(e,"steps",19,()=>[]),r=Z(e,"currentStep",3,0),n=Z(e,"onStepClick",3,null),s=Z(e,"canNavigate",3,!1);function l(c){s()&&n()&&c<=r()&&n()(c)}function u(c){return c<r()?"completed":c===r()?"active":"pending"}var d=Ss(),_=a(d),S=a(_),b=v(_,2);Ue(b,21,i,He,(c,p,w)=>{var D=ws();const M=me(()=>u(w)),A=me(()=>s()&&w<=r());let x;D.__click=()=>l(w),D.__keydown=G=>{o(A)&&(G.key==="Enter"||G.key===" ")&&(G.preventDefault(),l(w))};var T=a(D),I=a(T);{var C=G=>{var _e=bs();f(G,_e)},se=G=>{var _e=ys();_e.textContent=w+1,f(G,_e)};m(I,G=>{o(M)==="completed"?G(C):G(se,!1)})}var re=v(T,2),ne=a(re),Te=a(ne),Ae=v(ne,2),V=a(Ae);k(G=>{x=xe(D,1,`step ${o(M)??""}`,"svelte-19ib3n",x,G),mt(D,"role",o(A)?"button":"presentation"),mt(D,"tabindex",o(A)?0:-1),y(Te,o(p).icon),y(V,o(p).label)},[()=>({clickable:o(A)})]),f(c,D)}),k(()=>os(S,`width: ${r()===0?0:r()/(i().length-1)*100}%`)),f(t,d),et()}gt(["click","keydown"]);var ks=h('<p class="loading-message svelte-121gmln"> </p>'),Es=h('<div class="loading-overlay svelte-121gmln"><div class="loading-content svelte-121gmln"><div></div> <!></div></div>'),As=h('<p class="loading-message svelte-121gmln"> </p>'),Cs=h('<div class="loading-container svelte-121gmln"><div></div> <!></div>');function li(t,e){$e(e,!0);let i=Z(e,"size",3,"medium"),r=Z(e,"message",3,""),n=Z(e,"overlay",3,!1),s=Z(e,"color",3,"primary"),l=me(()=>({small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"})[i()]||"w-8 h-8 border-3"),u=me(()=>({primary:"border-blue-600 border-t-transparent",white:"border-white border-t-transparent",gray:"border-gray-600 border-t-transparent"})[s()]||"border-blue-600 border-t-transparent");var d=ct(),_=Ke(d);{var S=c=>{var p=Es(),w=a(p),D=a(w),M=v(D,2);{var A=x=>{var T=ks(),I=a(T);k(()=>y(I,r())),f(x,T)};m(M,x=>{r()&&x(A)})}k(()=>xe(D,1,`spinner ${o(l)??""} ${o(u)??""}`,"svelte-121gmln")),f(c,p)},b=c=>{var p=Cs(),w=a(p),D=v(w,2);{var M=A=>{var x=As(),T=a(x);k(()=>y(T,r())),f(A,x)};m(D,A=>{r()&&A(M)})}k(()=>xe(w,1,`spinner ${o(l)??""} ${o(u)??""}`,"svelte-121gmln")),f(c,p)};m(_,c=>{n()?c(S):c(b,!1)})}f(t,d),et()}var Is=()=>location.reload(),Ts=h('<div class="error-boundary svelte-szpq5s"><div class="error-content svelte-szpq5s"><div class="error-icon svelte-szpq5s">⚠️</div> <h2 class="error-title svelte-szpq5s">Something went wrong</h2> <p class="error-message svelte-szpq5s"> </p> <!> <div class="error-actions svelte-szpq5s"><button class="btn btn-primary svelte-szpq5s">Try Again</button> <button class="btn btn-secondary svelte-szpq5s">Reload Page</button></div></div></div>');function Ps(t,e){$e(e,!0);let i=Z(e,"fallback",3,null),r=Z(e,"onError",3,null),n=H(null),s=H(!1);function l(c){console.error("ErrorBoundary caught:",c.error),z(n,c.error,!0),z(s,!0),r()&&r()(c.error),c.preventDefault(),c.stopPropagation()}function u(){z(n,null),z(s,!1)}Pi(()=>(window.addEventListener("error",l),window.addEventListener("unhandledrejection",c=>{l({error:c.reason})}),()=>{window.removeEventListener("error",l),window.removeEventListener("unhandledrejection",l)}));var d=ct(),_=Ke(d);{var S=c=>{var p=ct(),w=Ke(p);{var D=A=>{var x=ct(),T=Ke(x);Dr(T,i,()=>o(n),()=>u),f(A,x)},M=A=>{var x=Ts(),T=a(x),I=v(a(T),4),C=a(I),se=v(I,2);m(se,Ae=>{});var re=v(se,2),ne=a(re);ne.__click=u;var Te=v(ne,2);Te.__click=[Is],k(()=>y(C,o(n)?.message||"An unexpected error occurred")),f(A,x)};m(w,A=>{i()?A(D):A(M,!1)})}f(c,p)},b=c=>{var p=ct(),w=Ke(p);Dr(w,()=>e.children),f(c,p)};m(_,c=>{o(s)?c(S):c(b,!1)})}f(t,d),et()}gt(["click"]);var Os=h("<p> </p>"),Ds=h("<h1> </h1>"),qs=h("<h2> </h2>"),Rs=h("<h3> </h3>"),Ms=h("<h4> </h4>"),Vs=h("<div> </div>"),Ls=h("<span> </span>");function Ji(t,e){$e(e,!0);let i=Z(e,"text",3,""),r=Z(e,"fallback",3,""),n=Z(e,"tag",3,"span"),s=Z(e,"class",3,""),l=me(()=>zr(i(),r()));var u=ct(),d=Ke(u);{var _=b=>{var c=Os(),p=a(c);k(()=>{xe(c,1,Et(s())),y(p,o(l))}),f(b,c)},S=(b,c)=>{{var p=D=>{var M=Ds(),A=a(M);k(()=>{xe(M,1,Et(s())),y(A,o(l))}),f(D,M)},w=(D,M)=>{{var A=T=>{var I=qs(),C=a(I);k(()=>{xe(I,1,Et(s())),y(C,o(l))}),f(T,I)},x=(T,I)=>{{var C=re=>{var ne=Rs(),Te=a(ne);k(()=>{xe(ne,1,Et(s())),y(Te,o(l))}),f(re,ne)},se=(re,ne)=>{{var Te=V=>{var G=Ms(),_e=a(G);k(()=>{xe(G,1,Et(s())),y(_e,o(l))}),f(V,G)},Ae=(V,G)=>{{var _e=ue=>{var ke=Vs(),Oe=a(ke);k(()=>{xe(ke,1,Et(s())),y(Oe,o(l))}),f(ue,ke)},Ve=ue=>{var ke=Ls(),Oe=a(ke);k(()=>{xe(ke,1,Et(s())),y(Oe,o(l))}),f(ue,ke)};m(V,ue=>{n()==="div"?ue(_e):ue(Ve,!1)},G)}};m(re,V=>{n()==="h4"?V(Te):V(Ae,!1)},ne)}};m(T,re=>{n()==="h3"?re(C):re(se,!1)},I)}};m(D,T=>{n()==="h2"?T(A):T(x,!1)},M)}};m(b,D=>{n()==="h1"?D(p):D(w,!1)},c)}};m(d,b=>{n()==="p"?b(_):b(S,!1)})}f(t,u),et()}function Ns(t,e,i){e(i()+1)}function zs(t,e,i){e(i()-1)}var Fs=(t,e)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e())},Us=t=>t.stopPropagation(),Gs=h('<input type="radio" class="radio-input svelte-1ll8uv2"/>'),js=t=>t.stopPropagation(),Bs=h('<input type="checkbox" class="checkbox-input svelte-1ll8uv2"/>'),Hs=h('<span class="option-sku svelte-1ll8uv2"> </span>'),Ys=h('<span class="total-price svelte-1ll8uv2"> </span>'),Qs=h('<li class="svelte-1ll8uv2"><!></li>'),Ks=h('<ul class="option-features svelte-1ll8uv2"></ul>'),Ws=t=>t.stopPropagation(),Js=(t,e)=>e(parseInt(t.target.value)||0),Zs=t=>t.stopPropagation(),Xs=h('<div class="quantity-controls svelte-1ll8uv2"><label class="quantity-label svelte-1ll8uv2">Quantity:</label> <div class="quantity-input svelte-1ll8uv2"><button class="qty-btn svelte-1ll8uv2" aria-label="Decrease quantity">−</button> <input type="number" min="1" class="qty-value svelte-1ll8uv2"/> <button class="qty-btn svelte-1ll8uv2" aria-label="Increase quantity">+</button></div></div>'),$s=h('<div class="unavailable-message svelte-1ll8uv2">Not available with current selections</div>'),ea=h('<div class="disabled-message svelte-1ll8uv2">Maximum selections reached for this group</div>'),ta=h('<div role="button"><div class="option-header svelte-1ll8uv2"><!> <div class="option-info svelte-1ll8uv2"><!> <!></div> <div class="option-price svelte-1ll8uv2"><span class="price svelte-1ll8uv2"> </span> <!></div></div> <!> <!> <!> <!> <!></div>');function ia(t,e){$e(e,!0);let i=Z(e,"selected",3,!1),r=Z(e,"quantity",3,0),n=Z(e,"disabled",3,!1),s=Z(e,"available",3,!0),l=Z(e,"selectionType",3,"multiple"),u=Z(e,"maxQuantity",3,10);function d(){n()||(l(),e.onChange(i()?0:1))}function _(E){if(n())return;const R=Math.max(0,Math.min(E,u()));e.onChange(R)}let S=me(()=>e.option.price?`$${e.option.price.toFixed(2)}`:"Included"),b=me(()=>r()>1&&e.option.price?`$${(e.option.price*r()).toFixed(2)} total`:"");var c=ta();let p;c.__click=function(...E){(l()==="single"?d:void 0)?.apply(this,E)},c.__keydown=[Fs,d];var w=a(c),D=a(w);{var M=E=>{var R=Gs();R.__change=d,R.__click=[Us],k(()=>{Mr(R,i()),R.disabled=n()}),f(E,R)},A=E=>{var R=Bs();R.__change=d,R.__click=[js],k(()=>{Mr(R,i()),R.disabled=n()}),f(E,R)};m(D,E=>{l()==="single"?E(M):E(A,!1)})}var x=v(D,2),T=a(x);Ji(T,{get text(){return e.option.name},fallback:"Unnamed Option",tag:"h4",class:"option-name"});var I=v(T,2);{var C=E=>{var R=Hs(),ve=a(R);k(()=>y(ve,`SKU: ${e.option.sku??""}`)),f(E,R)};m(I,E=>{e.option.sku&&E(C)})}var se=v(x,2),re=a(se),ne=a(re),Te=v(re,2);{var Ae=E=>{var R=Ys(),ve=a(R);k(()=>y(ve,o(b))),f(E,R)};m(Te,E=>{o(b)&&E(Ae)})}var V=v(w,2);{var G=E=>{Ji(E,{get text(){return e.option.description},tag:"p",class:"option-description"})};m(V,E=>{e.option.description&&E(G)})}var _e=v(V,2);{var Ve=E=>{var R=Ks();Ue(R,21,()=>e.option.features,He,(ve,B)=>{var Q=Qs(),be=a(Q);Ji(be,{get text(){return o(B)},tag:"span"}),f(ve,Q)}),f(E,R)};m(_e,E=>{e.option.features&&e.option.features.length>0&&E(Ve)})}var ue=v(_e,2);{var ke=E=>{var R=Xs();R.__click=[Ws];var ve=v(a(R),2),B=a(ve);B.__click=[zs,_,r];var Q=v(B,2);Q.__change=[Js,_],Q.__click=[Zs];var be=v(Q,2);be.__click=[Ns,_,r],k(()=>{B.disabled=n()||r()<=1,cs(Q,r()),mt(Q,"max",u()),Q.disabled=n(),be.disabled=n()||r()>=u()}),f(E,R)};m(ue,E=>{l()==="multiple"&&i()&&E(ke)})}var Oe=v(ue,2);{var P=E=>{var R=$s();f(E,R)};m(Oe,E=>{!s()&&!n()&&E(P)})}var X=v(Oe,2);{var L=E=>{var R=ea();f(E,R)};m(X,E=>{n()&&s()&&E(L)})}k(E=>{p=xe(c,1,"option-card svelte-1ll8uv2",null,p,E),mt(c,"tabindex",n()?-1:0),y(ne,o(S))},[()=>({selected:i(),disabled:n(),unavailable:!s()})]),f(t,c),et()}gt(["click","keydown","change"]);var ra=h('<span class="required svelte-99mz6y">*</span>'),na=h('<p class="group-description svelte-99mz6y"> </p>'),sa=h('<span class="selection-count svelte-99mz6y"> <!></span>'),aa=h('<div class="options-grid svelte-99mz6y"></div>'),oa=h('<div class="no-options svelte-99mz6y"><p>No options available in this group.</p></div>'),la=h('<div class="group-content svelte-99mz6y"><!></div>'),va=h('<div><div class="group-header svelte-99mz6y"><div class="group-info svelte-99mz6y"><h3 class="group-name svelte-99mz6y"> <!></h3> <!></div> <div class="group-meta svelte-99mz6y"><div class="selection-info svelte-99mz6y"><span class="selection-type svelte-99mz6y"> </span> <!></div> <button class="expand-toggle svelte-99mz6y"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div></div> <!></div>');function ca(t,e){$e(e,!0);let i=Z(e,"options",19,()=>[]),r=Z(e,"selections",19,()=>({})),n=Z(e,"availableOptions",19,()=>[]),s=Z(e,"expanded",3,!0),l=me(()=>Array.isArray(i())?i().filter(P=>r()[P.id]>0).length:0),u=me(()=>Array.isArray(i())?i().reduce((P,X)=>P+(r()[X.id]||0),0):0);function d(){return e.group.selection_type==="single"?"Select one":e.group.selection_type==="multiple"?e.group.min_selections&&e.group.max_selections?e.group.min_selections===e.group.max_selections?`Select exactly ${e.group.min_selections}`:`Select ${e.group.min_selections}-${e.group.max_selections}`:e.group.min_selections?`Select at least ${e.group.min_selections}`:e.group.max_selections?`Select up to ${e.group.max_selections}`:"Select multiple":""}let _=Re(d());Pi(()=>{const P=d();(P.includes("=>")||P.includes("function"))&&console.error("[OptionGroup] Selection text contains code!",{text:P,group:e.group})});function S(P,X){e.group.selection_type==="single"&&X>0&&Array.isArray(i())&&i().forEach(L=>{L.id!==P&&r()[L.id]>0&&e.onSelectionChange(L.id,0)}),!(e.group.max_selections&&X>0&&Array.isArray(i())&&i().filter(E=>E.id!==P&&r()[E.id]>0).length>=e.group.max_selections)&&e.onSelectionChange(P,X)}function b(P){return!!(n().length>0&&!n().includes(P.id)||e.group.max_selections&&!r()[P.id]&&i().filter(L=>r()[L.id]>0).length>=e.group.max_selections)}function c(P){const X=r()[P.id]>0,L=n().length===0||n().includes(P.id),E=b(P);return{selected:X,available:L,disabled:E,quantity:r()[P.id]||0}}var p=va();let w;var D=a(p);D.__click=function(...P){e.onToggle?.apply(this,P)};var M=a(D),A=a(M),x=a(A),T=v(x);{var I=P=>{var X=ra();f(P,X)};m(T,P=>{e.group.required&&P(I)})}var C=v(A,2);{var se=P=>{var X=na(),L=a(X);k(()=>y(L,e.group.description)),f(P,X)};m(C,P=>{e.group.description&&typeof e.group.description=="string"&&!e.group.description.includes("=>")&&!e.group.description.includes("function")&&!e.group.description.includes("$props")&&P(se)})}var re=v(M,2),ne=a(re),Te=a(ne),Ae=a(Te),V=v(Te,2);{var G=P=>{var X=sa(),L=a(X),E=v(L);{var R=ve=>{var B=kt();k(()=>y(B,`(${o(u)??""} total)`)),f(ve,B)};m(E,ve=>{o(u)>o(l)&&ve(R)})}k(()=>y(L,`${o(l)??""} selected `)),f(P,X)};m(V,P=>{o(l)>0&&P(G)})}var _e=v(ne,2),Ve=a(_e);let ue;var ke=v(D,2);{var Oe=P=>{var X=la(),L=a(X);{var E=ve=>{var B=aa();Ue(B,21,i,Q=>Q.id,(Q,be)=>{const Me=me(()=>c(o(be))),Le=me(()=>o(be).max_quantity||10);ia(Q,{get option(){return o(be)},get selected(){return o(Me).selected},get quantity(){return o(Me).quantity},get disabled(){return o(Me).disabled},get available(){return o(Me).available},get selectionType(){return e.group.selection_type},get maxQuantity(){return o(Le)},onChange:ut=>S(o(be).id,ut)})}),k(()=>mt(B,"data-selection-type",e.group.selection_type)),f(ve,B)},R=ve=>{var B=oa();f(ve,B)};m(L,ve=>{Array.isArray(i())&&i().length>0?ve(E):ve(R,!1)})}f(P,X)};m(ke,P=>{s()&&P(Oe)})}k((P,X,L)=>{w=xe(p,1,"option-group svelte-99mz6y",null,w,P),y(x,`${e.group.name||"Unnamed Group"} `),y(Ae,X),mt(_e,"aria-label",s()?"Collapse":"Expand"),ue=xe(Ve,0,"icon svelte-99mz6y",null,ue,L)},[()=>({expanded:s(),required:e.group.required}),()=>zr(_,e.group.selection_type==="single"?"Select one":"Select multiple"),()=>({rotated:!s()})]),f(t,p),et()}gt(["click"]);var ua=h('<div class="pricing-empty svelte-hgfbko"><p>Add options to see pricing</p></div>'),da=h('<div class="summary-row savings svelte-hgfbko"><span class="label">Total Savings</span> <span class="amount"> </span></div>'),fa=(t,e)=>z(e,!o(e)),_a=h('<button class="toggle-btn svelte-hgfbko"> <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.646 6.646a.5.5 0 01.708 0L8 9.293l2.646-2.647a.5.5 0 01.708.708l-3 3a.5.5 0 01-.708 0l-3-3a.5.5 0 010-.708z"></path></svg></button>'),ha=h('<span class="item-quantity svelte-hgfbko"> </span>'),ga=h('<div class="line-item svelte-hgfbko"><div class="item-details svelte-hgfbko"><span class="item-name svelte-hgfbko"> </span> <!></div> <span class="item-price svelte-hgfbko"> </span></div>'),pa=h('<div class="option-group svelte-hgfbko"></div>'),ma=h('<div class="pricing-section svelte-hgfbko"><h4 class="section-title svelte-hgfbko">Selected Options</h4> <!> <div class="line-item subtotal svelte-hgfbko"><span class="item-name svelte-hgfbko">Options Subtotal</span> <span class="item-price svelte-hgfbko"> </span></div></div>'),ba=(t,e)=>z(e,!o(e)),ya=h('<span class="item-description svelte-hgfbko"> </span>'),wa=h('<div class="line-item discount svelte-hgfbko"><div class="item-details svelte-hgfbko"><span class="item-name svelte-hgfbko"> </span> <!></div> <span class="item-price discount-amount svelte-hgfbko"> </span></div>'),Sa=h('<div class="pricing-section svelte-hgfbko"><h4 class="section-title svelte-hgfbko">Discounts Applied <button class="toggle-discounts svelte-hgfbko"> </button></h4> <!></div>'),xa=h('<span class="active-badge svelte-hgfbko">Active</span>'),ka=h('<div><div class="tier-range svelte-hgfbko"> <!> units</div> <div class="tier-discount svelte-hgfbko"> <!></div></div>'),Ea=h('<div class="pricing-section svelte-hgfbko"><h4 class="section-title svelte-hgfbko">Volume Pricing Tiers</h4> <div class="volume-tiers svelte-hgfbko"></div></div>'),Aa=h('<div class="line-item small svelte-hgfbko"><span class="item-name svelte-hgfbko"> </span> <span class="item-price svelte-hgfbko"> </span></div>'),Ca=h('<div class="pricing-section svelte-hgfbko"><h4 class="section-title svelte-hgfbko">Detailed Breakdown</h4> <div class="breakdown-items svelte-hgfbko"></div></div>'),Ia=h('<div class="pricing-section svelte-hgfbko"><h4 class="section-title svelte-hgfbko">Base Configuration</h4> <div class="line-item svelte-hgfbko"><span class="item-name svelte-hgfbko">Base Model Price</span> <span class="item-price svelte-hgfbko"> </span></div></div> <!> <!> <!> <!>',1),Ta=h('<div class="currency-note svelte-hgfbko"> </div>'),Pa=h('<div class="pricing-summary svelte-hgfbko"><div class="summary-row total svelte-hgfbko"><span class="label">Total Price</span> <span class="amount"> </span></div> <!> <!></div> <!> <div class="pricing-footer svelte-hgfbko"><div class="final-total svelte-hgfbko"><span class="label">Total</span> <span class="amount"> </span></div> <!></div>',1),Oa=h("<div><!></div>");function Da(t,e){$e(e,!0);let i=Z(e,"selections",19,()=>({})),r=Z(e,"options",19,()=>[]),n=Z(e,"volumeTiers",19,()=>[]),s=Z(e,"detailed",3,!1),l=H(Re(s())),u=H(!0);function d(x){return Array.isArray(r())?r().find(T=>T.id===x):null}function _(x){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x||0)}let S=me(()=>()=>e.pricingData?.discounts?e.pricingData.discounts.reduce((x,T)=>x+(T.amount||0),0):0),b=me(()=>()=>{if(!e.pricingData||!o(S))return 0;const x=e.pricingData.base_price+(e.pricingData.options_total||0);return x===0?0:Math.round(o(S)/x*100)}),c=me(()=>()=>{const x=new Map;return Object.entries(i()).forEach(([T,I])=>{if(I<=0)return;const C=d(T);if(!C)return;const se=C.group_id||"other";x.has(se)||x.set(se,[]),x.get(se).push({option:C,quantity:I,lineTotal:(C.price||0)*I})}),Array.from(x.entries())});var p=Oa();let w;var D=a(p);{var M=x=>{var T=ua();f(x,T)},A=x=>{var T=Pa(),I=Ke(T),C=a(I),se=v(a(C),2),re=a(se),ne=v(C,2);{var Te=L=>{var E=da(),R=v(a(E),2),ve=a(R);k(B=>y(ve,`-${B??""} (${o(b)??""}%)`),[()=>_(o(S))]),f(L,E)};m(ne,L=>{o(S)>0&&L(Te)})}var Ae=v(ne,2);{var V=L=>{var E=_a();E.__click=[fa,l];var R=a(E),ve=v(R);let B;k(Q=>{y(R,`${o(l)?"Hide":"Show"} Breakdown `),B=xe(ve,0,"chevron svelte-hgfbko",null,B,Q)},[()=>({rotated:o(l)})]),f(L,E)};m(Ae,L=>{s()&&L(V)})}var G=v(I,2);{var _e=L=>{var E=Ia(),R=Ke(E),ve=v(a(R),2),B=v(a(ve),2),Q=a(B),be=v(R,2);{var Me=ae=>{var De=ma(),O=v(a(De),2);Ue(O,17,()=>o(c),He,(Pe,F)=>{var K=me(()=>qi(o(F),2));let U=()=>o(K)[1];var Y=pa();Ue(Y,21,U,He,($,oe)=>{let q=()=>o(oe).option,W=()=>o(oe).quantity,de=()=>o(oe).lineTotal;var Ee=ga(),ee=a(Ee),le=a(ee),he=a(le),J=v(le,2);{var ie=te=>{var fe=ha(),Ne=a(fe);k(st=>y(Ne,`×${W()??""} @ ${st??""} each`),[()=>_(q().price)]),f(te,fe)};m(J,te=>{W()>1&&te(ie)})}var ge=v(ee,2),pe=a(ge);k(te=>{y(he,q().name),y(pe,te)},[()=>_(de())]),f($,Ee)}),f(Pe,Y)});var j=v(O,2),ce=v(a(j),2),ye=a(ce);k(Pe=>y(ye,Pe),[()=>_(e.pricingData.options_total||0)]),f(ae,De)};m(be,ae=>{o(c).length>0&&ae(Me)})}var Le=v(be,2);{var ut=ae=>{var De=Sa(),O=a(De),j=v(a(O));j.__click=[ba,u];var ce=a(j),ye=v(O,2);{var Pe=F=>{var K=ct(),U=Ke(K);Ue(U,17,()=>e.pricingData.discounts,He,(Y,$)=>{var oe=wa(),q=a(oe),W=a(q),de=a(W),Ee=v(W,2);{var ee=J=>{var ie=ya(),ge=a(ie);k(()=>y(ge,o($).description)),f(J,ie)};m(Ee,J=>{o($).description&&J(ee)})}var le=v(q,2),he=a(le);k(J=>{y(de,o($).name),y(he,`-${J??""}`)},[()=>_(o($).amount)]),f(Y,oe)}),f(F,K)};m(ye,F=>{o(u)&&F(Pe)})}k(()=>y(ce,o(u)?"Hide":"Show")),f(ae,De)};m(Le,ae=>{e.pricingData.discounts?.length>0&&ae(ut)})}var dt=v(Le,2);{var At=ae=>{var De=Ea(),O=v(a(De),2);Ue(O,21,n,He,(j,ce)=>{var ye=ka();const Pe=me(()=>e.pricingData.active_tier?.id===o(ce).id);let F;var K=a(ye),U=a(K),Y=v(U);{var $=ee=>{var le=kt();k(()=>y(le,`- ${o(ce).max_quantity??""}`)),f(ee,le)},oe=ee=>{var le=kt("+");f(ee,le)};m(Y,ee=>{o(ce).max_quantity?ee($):ee(oe,!1)})}var q=v(K,2),W=a(q),de=v(W);{var Ee=ee=>{var le=xa();f(ee,le)};m(de,ee=>{o(Pe)&&ee(Ee)})}k(ee=>{F=xe(ye,1,"tier-item svelte-hgfbko",null,F,ee),y(U,`${o(ce).min_quantity??""} `),y(W,`${o(ce).discount_percent??""}% off `)},[()=>({active:o(Pe)})]),f(j,ye)}),f(ae,De)};m(dt,ae=>{n().length>0&&s()&&ae(At)})}var bt=v(dt,2);{var qe=ae=>{var De=Ca(),O=v(a(De),2);Ue(O,21,()=>e.pricingData.breakdown,He,(j,ce)=>{var ye=Aa(),Pe=a(ye),F=a(Pe),K=v(Pe,2),U=a(K);k(Y=>{y(F,o(ce).name),y(U,Y)},[()=>_(o(ce).amount)]),f(j,ye)}),f(ae,De)};m(bt,ae=>{e.pricingData.breakdown&&s()&&ae(qe)})}k(ae=>y(Q,ae),[()=>_(e.pricingData.base_price)]),f(L,E)};m(G,L=>{o(l)&&L(_e)})}var Ve=v(G,2),ue=a(Ve),ke=v(a(ue),2),Oe=a(ke),P=v(ue,2);{var X=L=>{var E=Ta(),R=a(E);k(()=>y(R,`Prices shown in ${e.pricingData.currency??""}`)),f(L,E)};m(P,L=>{e.pricingData.currency&&e.pricingData.currency!=="USD"&&L(X)})}k((L,E)=>{y(re,L),y(Oe,E)},[()=>_(e.pricingData.total_price),()=>_(e.pricingData.total_price)]),f(x,T)};m(D,x=>{e.pricingData?x(A,!1):x(M)})}k(x=>w=xe(p,1,"pricing-display svelte-hgfbko",null,w,x),[()=>({detailed:s()})]),f(t,p),et()}gt(["click"]);var qa=h('<div class="validation-success svelte-5l87sd"><div class="success-icon svelte-5l87sd">✅</div> <div class="success-content svelte-5l87sd"><h3 class="svelte-5l87sd">Configuration Valid</h3> <p class="svelte-5l87sd">All constraints are satisfied. Your configuration is ready.</p></div></div>'),Ra=(t,e)=>z(e,"all"),Ma=(t,e)=>z(e,"critical"),Va=h("<button> </button>"),La=(t,e)=>z(e,"warning"),Na=h("<button> </button>"),za=(t,e)=>z(e,"info"),Fa=h("<button> </button>"),Ua=h('<div class="validation-header svelte-5l87sd"><h3 class="svelte-5l87sd"> </h3> <div class="severity-filters svelte-5l87sd"><button> </button> <!> <!> <!></div></div>'),Ga=h('<div class="violation-rule svelte-5l87sd"> </div>'),ja=(t,e,i)=>{t.stopPropagation(),e(o(i))},Ba=h('<button class="fix-btn svelte-5l87sd" title="Apply suggested fix">Fix</button>'),Ha=h('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Details</h4> <p class="svelte-5l87sd"> </p></div>'),Ya=h("<li> </li>"),Qa=h('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Affected Options</h4> <ul class="affected-list svelte-5l87sd"></ul></div>'),Ka=h(" <!>",1),Wa=(t,e,i)=>e.onFix(o(i)),Ja=h('<button class="apply-btn svelte-5l87sd">Apply</button>'),Za=h('<div class="suggestion svelte-5l87sd"><span class="suggestion-text"><!></span> <!></div>'),Xa=h('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Suggested Actions</h4> <div class="suggestions svelte-5l87sd"></div></div>'),$a=h('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Rule Expression</h4> <code class="expression svelte-5l87sd"> </code></div>'),eo=h('<div class="violation-details svelte-5l87sd"><!> <!> <!> <!></div>'),to=h('<div><div class="violation-header svelte-5l87sd"><div class="violation-icon svelte-5l87sd"> </div> <div class="violation-content svelte-5l87sd"><div class="violation-message svelte-5l87sd"> </div> <!></div> <div class="violation-actions svelte-5l87sd"><!> <button class="expand-btn svelte-5l87sd"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.646 6.646a.5.5 0 01.708 0L8 9.293l2.646-2.647a.5.5 0 01.708.708l-3 3a.5.5 0 01-.708 0l-3-3a.5.5 0 010-.708z"></path></svg></button></div></div> <!></div>'),io=h('<!> <div class="violations-list svelte-5l87sd"></div>',1),ro=h('<div class="validation-empty svelte-5l87sd"><p>Validating configuration...</p></div>'),no=h("<div><!></div>");function Fr(t,e){$e(e,!0);let i=Z(e,"compact",3,!1),r=H(Re(new Set)),n=H("all"),s=me(()=>e.validationResults?.violations||[]),l=me(()=>()=>o(n)==="all"?o(s):o(s).filter(A=>A.severity===o(n))),u=me(()=>()=>{const A={critical:0,warning:0,info:0};return o(s).forEach(x=>{A[x.severity||"warning"]++}),A});function d(A){const x=new Set(o(r));x.has(A)?x.delete(A):x.add(A),z(r,x,!0)}function _(A){switch(A){case"critical":return"🚫";case"warning":return"⚠️";case"info":return"ℹ️";default:return"⚠️"}}function S(A){switch(A){case"critical":return"error";case"warning":return"warning";case"info":return"info";default:return"warning"}}function b(A){e.onFix&&A.suggestions?.length>0&&e.onFix(A.suggestions[0])}var c=no();let p;var w=a(c);{var D=A=>{var x=qa();f(A,x)},M=(A,x)=>{{var T=C=>{var se=io(),re=Ke(se);{var ne=Ae=>{var V=Ua(),G=a(V),_e=a(G),Ve=v(G,2),ue=a(Ve);let ke;ue.__click=[Ra,n];var Oe=a(ue),P=v(ue,2);{var X=B=>{var Q=Va();let be;Q.__click=[Ma,n];var Me=a(Q);k(Le=>{be=xe(Q,1,"filter-btn critical svelte-5l87sd",null,be,Le),y(Me,`Critical (${o(u).critical??""})`)},[()=>({active:o(n)==="critical"})]),f(B,Q)};m(P,B=>{o(u).critical>0&&B(X)})}var L=v(P,2);{var E=B=>{var Q=Na();let be;Q.__click=[La,n];var Me=a(Q);k(Le=>{be=xe(Q,1,"filter-btn warning svelte-5l87sd",null,be,Le),y(Me,`Warning (${o(u).warning??""})`)},[()=>({active:o(n)==="warning"})]),f(B,Q)};m(L,B=>{o(u).warning>0&&B(E)})}var R=v(L,2);{var ve=B=>{var Q=Fa();let be;Q.__click=[za,n];var Me=a(Q);k(Le=>{be=xe(Q,1,"filter-btn info svelte-5l87sd",null,be,Le),y(Me,`Info (${o(u).info??""})`)},[()=>({active:o(n)==="info"})]),f(B,Q)};m(R,B=>{o(u).info>0&&B(ve)})}k(B=>{y(_e,`Validation Issues (${o(s).length??""})`),ke=xe(ue,1,"filter-btn svelte-5l87sd",null,ke,B),y(Oe,`All (${o(s).length??""})`)},[()=>({active:o(n)==="all"})]),f(Ae,V)};m(re,Ae=>{i()||Ae(ne)})}var Te=v(re,2);Ue(Te,21,()=>o(l),He,(Ae,V,G)=>{var _e=to();const Ve=me(()=>o(r).has(o(V).rule_id||G)),ue=me(()=>S(o(V).severity));let ke;var Oe=a(_e);Oe.__click=()=>d(o(V).rule_id||G);var P=a(Oe),X=a(P),L=v(P,2),E=a(L),R=a(E),ve=v(E,2);{var B=qe=>{var ae=Ga(),De=a(ae);k(()=>y(De,`Rule: ${o(V).rule_name??""}`)),f(qe,ae)};m(ve,qe=>{o(V).rule_name&&!i()&&qe(B)})}var Q=v(L,2),be=a(Q);{var Me=qe=>{var ae=Ba();ae.__click=[ja,b,V],f(qe,ae)};m(be,qe=>{o(V).suggestions?.length>0&&e.onFix&&qe(Me)})}var Le=v(be,2),ut=a(Le);let dt;var At=v(Oe,2);{var bt=qe=>{var ae=eo(),De=a(ae);{var O=U=>{var Y=Ha(),$=v(a(Y),2),oe=a($);k(()=>y(oe,o(V).details)),f(U,Y)};m(De,U=>{o(V).details&&U(O)})}var j=v(De,2);{var ce=U=>{var Y=Qa(),$=v(a(Y),2);Ue($,21,()=>o(V).affected_options,He,(oe,q)=>{var W=Ya(),de=a(W);k(()=>y(de,o(q).name||o(q).id)),f(oe,W)}),f(U,Y)};m(j,U=>{o(V).affected_options?.length>0&&U(ce)})}var ye=v(j,2);{var Pe=U=>{var Y=Xa(),$=v(a(Y),2);Ue($,21,()=>o(V).suggestions,He,(oe,q)=>{var W=Za(),de=a(W),Ee=a(de);{var ee=ie=>{var ge=Ka(),pe=Ke(ge),te=v(pe);{var fe=Ne=>{var st=kt();k(()=>y(st,`(×${o(q).quantity??""})`)),f(Ne,st)};m(te,Ne=>{o(q).quantity>1&&Ne(fe)})}k(()=>y(pe,`Add: ${(o(q).option_name||o(q).option_id)??""} `)),f(ie,ge)},le=(ie,ge)=>{{var pe=fe=>{var Ne=kt();k(()=>y(Ne,`Remove: ${(o(q).option_name||o(q).option_id)??""}`)),f(fe,Ne)},te=(fe,Ne)=>{{var st=ft=>{var Ct=kt();k(()=>y(Ct,`Change: ${o(q).description??""}`)),f(ft,Ct)},Zi=ft=>{var Ct=kt();k(()=>y(Ct,o(q).description)),f(ft,Ct)};m(fe,ft=>{o(q).action==="change"?ft(st):ft(Zi,!1)},Ne)}};m(ie,fe=>{o(q).action==="remove"?fe(pe):fe(te,!1)},ge)}};m(Ee,ie=>{o(q).action==="add"?ie(ee):ie(le,!1)})}var he=v(de,2);{var J=ie=>{var ge=Ja();ge.__click=[Wa,e,q],f(ie,ge)};m(he,ie=>{e.onFix&&ie(J)})}f(oe,W)}),f(U,Y)};m(ye,U=>{o(V).suggestions?.length>0&&U(Pe)})}var F=v(ye,2);{var K=U=>{var Y=$a(),$=v(a(Y),2),oe=a($);k(()=>y(oe,o(V).rule_expression)),f(U,Y)};m(F,U=>{o(V).rule_expression&&!i()&&U(K)})}f(qe,ae)};m(At,qe=>{o(Ve)&&qe(bt)})}k((qe,ae,De)=>{ke=xe(_e,1,`violation-item ${o(ue)??""}`,"svelte-5l87sd",ke,qe),y(X,ae),y(R,o(V).message),mt(Le,"aria-label",o(Ve)?"Collapse":"Expand"),dt=xe(ut,0,"chevron svelte-5l87sd",null,dt,De)},[()=>({expanded:o(Ve)}),()=>_(o(V).severity),()=>({rotated:o(Ve)})]),f(Ae,_e)}),f(C,se)},I=C=>{var se=ro();f(C,se)};m(A,C=>{o(s).length>0?C(T):C(I,!1)},x)}};m(w,A=>{e.validationResults?.is_valid?A(D):A(M,!1)})}k(A=>p=xe(c,1,"validation-display svelte-5l87sd",null,p,A),[()=>({compact:i()})]),f(t,c),et()}gt(["click"]);var so=h('<span class="status-badge valid svelte-onht75">✅ Valid</span>'),ao=h('<span class="status-badge invalid svelte-onht75">⚠️ Issues</span>'),oo=(t,e)=>e.onEdit(0),lo=h('<button class="edit-btn svelte-onht75">Edit Selections</button>'),vo=h('<span class="item-quantity svelte-onht75"> </span>'),co=h('<div class="selection-item svelte-onht75"><div class="item-info svelte-onht75"><span class="item-name svelte-onht75"> </span> <!></div> <span class="item-price svelte-onht75"> </span></div>'),uo=h('<div class="selection-group svelte-onht75"><h5 class="group-name svelte-onht75"> </h5> <div class="group-items svelte-onht75"></div></div>'),fo=h('<div class="selections-list svelte-onht75"></div>'),_o=h('<p class="empty-message svelte-onht75">No options selected</p>'),ho=(t,e)=>e.onEdit(1),go=h('<button class="edit-btn svelte-onht75">Review Issues</button>'),po=h('<div class="violation-summary svelte-onht75"><span class="violation-icon svelte-onht75"> </span> <span class="violation-text svelte-onht75"> </span></div>'),mo=h('<p class="more-violations svelte-onht75"> </p>'),bo=h('<div class="summary-section svelte-onht75"><div class="section-header svelte-onht75"><h4 class="section-title validation-title svelte-onht75"> </h4> <!></div> <div class="violations-summary svelte-onht75"><!> <!></div></div>'),yo=(t,e)=>e.onEdit(2),wo=h('<button class="edit-btn svelte-onht75">View Details</button>'),So=h('<div class="price-line discount svelte-onht75"><span class="label">Discounts Applied</span> <span class="value"> </span></div>'),xo=()=>window.print(),ko=h('<div class="configuration-summary svelte-onht75"><div class="summary-header svelte-onht75"><div class="header-info svelte-onht75"><h3 class="svelte-onht75">Configuration Summary</h3> <p class="config-id svelte-onht75"> </p></div> <div class="header-status"><!></div></div> <div class="summary-section svelte-onht75"><h4 class="section-title svelte-onht75">Product Model</h4> <div class="info-grid svelte-onht75"><div class="info-item svelte-onht75"><span class="label svelte-onht75">Model</span> <span class="value svelte-onht75"> </span></div> <div class="info-item svelte-onht75"><span class="label svelte-onht75">Created</span> <span class="value svelte-onht75"> </span></div> <div class="info-item svelte-onht75"><span class="label svelte-onht75">Last Updated</span> <span class="value svelte-onht75"> </span></div></div></div> <div class="summary-section svelte-onht75"><div class="section-header svelte-onht75"><h4 class="section-title svelte-onht75"> </h4> <!></div> <!></div> <!> <div class="summary-section svelte-onht75"><div class="section-header svelte-onht75"><h4 class="section-title svelte-onht75">Pricing Summary</h4> <!></div> <div class="pricing-summary svelte-onht75"><div class="price-line svelte-onht75"><span class="label">Base Price</span> <span class="value"> </span></div> <!> <div class="price-line total svelte-onht75"><span class="label">Total Price</span> <span class="value"> </span></div></div></div> <div class="summary-actions svelte-onht75"><button class="action-btn secondary svelte-onht75"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M5 3V1h6v2H5zM4 3H2.5A1.5 1.5 0 001 4.5V10h2V8h10v2h2V4.5A1.5 1.5 0 0013.5 3H12v2H4V3zm9 7h-2v4H5v-4H3v4.5A1.5 1.5 0 004.5 16h7a1.5 1.5 0 001.5-1.5V10z"></path></svg> Print Summary</button> <button class="action-btn secondary svelte-onht75"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M2 2a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V2zm10-1H4a1 1 0 00-1 1v12a1 1 0 001 1h8a1 1 0 001-1V2a1 1 0 00-1-1z"></path><path d="M8 3.5a.5.5 0 01.5.5v4.793l1.146-1.147a.5.5 0 01.708.708l-2 2a.5.5 0 01-.708 0l-2-2a.5.5 0 11.708-.708L7.5 8.793V4a.5.5 0 01.5-.5z"></path></svg> Export Configuration</button></div></div>');function Eo(t,e){$e(e,!0);function i(O){return O?new Date(O).toLocaleString():"N/A"}function r(O){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(O||0)}let n=me(()=>()=>{const O=new Map;return Array.isArray(e.configuration?.selections)&&e.configuration.selections.forEach(j=>{const ce=j.group_name||"Other Options";O.has(ce)||O.set(ce,[]),O.get(ce).push(j)}),Array.from(O.entries())});var s=ko(),l=a(s),u=a(l),d=v(a(u),2),_=a(d),S=v(u,2),b=a(S);{var c=O=>{var j=so();f(O,j)},p=O=>{var j=ao();f(O,j)};m(b,O=>{e.configuration?.validation?.is_valid?O(c):O(p,!1)})}var w=v(l,2),D=v(a(w),2),M=a(D),A=v(a(M),2),x=a(A),T=v(M,2),I=v(a(T),2),C=a(I),se=v(T,2),re=v(a(se),2),ne=a(re),Te=v(w,2),Ae=a(Te),V=a(Ae),G=a(V),_e=v(V,2);{var Ve=O=>{var j=lo();j.__click=[oo,e],f(O,j)};m(_e,O=>{e.onEdit&&O(Ve)})}var ue=v(Ae,2);{var ke=O=>{var j=fo();Ue(j,21,()=>o(n),He,(ce,ye)=>{var Pe=me(()=>qi(o(ye),2));let F=()=>o(Pe)[0],K=()=>o(Pe)[1];var U=uo(),Y=a(U),$=a(Y),oe=v(Y,2);Ue(oe,21,K,He,(q,W)=>{var de=co(),Ee=a(de),ee=a(Ee),le=a(ee),he=v(ee,2);{var J=pe=>{var te=vo(),fe=a(te);k(()=>y(fe,`×${o(W).quantity??""}`)),f(pe,te)};m(he,pe=>{o(W).quantity>1&&pe(J)})}var ie=v(Ee,2),ge=a(ie);k(pe=>{y(le,o(W).option_name),y(ge,pe)},[()=>r(o(W).total_price)]),f(q,de)}),k(()=>y($,F())),f(ce,U)}),f(O,j)},Oe=O=>{var j=_o();f(O,j)};m(ue,O=>{o(n).length>0?O(ke):O(Oe,!1)})}var P=v(Te,2);{var X=O=>{var j=bo(),ce=a(j),ye=a(ce),Pe=a(ye),F=v(ye,2);{var K=q=>{var W=go();W.__click=[ho,e],f(q,W)};m(F,q=>{e.onEdit&&q(K)})}var U=v(ce,2),Y=a(U);Ue(Y,17,()=>e.configuration.validation.violations.slice(0,3),He,(q,W)=>{var de=po(),Ee=a(de),ee=a(Ee),le=v(Ee,2),he=a(le);k(()=>{y(ee,o(W).severity==="critical"?"🚫":"⚠️"),y(he,o(W).message)}),f(q,de)});var $=v(Y,2);{var oe=q=>{var W=mo(),de=a(W);k(()=>y(de,`+${e.configuration.validation.violations.length-3} more issues`)),f(q,W)};m($,q=>{e.configuration.validation.violations.length>3&&q(oe)})}k(()=>y(Pe,`Validation Issues (${e.configuration.validation.violations.length??""})`)),f(O,j)};m(P,O=>{e.configuration?.validation?.violations?.length>0&&O(X)})}var L=v(P,2),E=a(L),R=v(a(E),2);{var ve=O=>{var j=wo();j.__click=[yo,e],f(O,j)};m(R,O=>{e.onEdit&&O(ve)})}var B=v(E,2),Q=a(B),be=v(a(Q),2),Me=a(be),Le=v(Q,2);{var ut=O=>{var j=So(),ce=v(a(j),2),ye=a(ce);k(Pe=>y(ye,`-${Pe??""}`),[()=>r(e.configuration.pricing.discounts.reduce((Pe,F)=>Pe+F.amount,0))]),f(O,j)};m(Le,O=>{e.configuration?.pricing?.discounts?.length>0&&O(ut)})}var dt=v(Le,2),At=v(a(dt),2),bt=a(At),qe=v(L,2),ae=a(qe);ae.__click=[xo];var De=v(ae,2);De.__click=()=>{const O=JSON.stringify(e.configuration,null,2),j=new Blob([O],{type:"application/json"}),ce=URL.createObjectURL(j),ye=document.createElement("a");ye.href=ce,ye.download=`configuration-${e.configuration?.id||"draft"}.json`,ye.click(),URL.revokeObjectURL(ce)},k((O,j,ce,ye)=>{y(_,`ID: ${e.configuration?.id||"Not saved"}`),y(x,e.configuration?.model_name||e.model?.name||"Unknown"),y(C,O),y(ne,j),y(G,`Selected Options (${(e.configuration?.selections?.length||0)??""})`),y(Me,ce),y(bt,ye)},[()=>i(e.configuration?.metadata?.created),()=>i(e.configuration?.metadata?.updated),()=>r(e.configuration?.pricing?.base_price),()=>r(e.configuration?.pricing?.total_price)]),f(t,s),et()}gt(["click"]);function Ao(t,e){z(e,!o(e))}var Co=h('<div class="loading-container svelte-7b7116"><!></div>'),Io=()=>location.reload(),To=h('<div class="error-container svelte-7b7116"><div class="error-content svelte-7b7116"><div class="error-icon svelte-7b7116">⚠️</div> <h2>Configuration Error</h2> <p> </p> <button class="btn btn-primary svelte-7b7116">Reload Page</button></div></div>'),Po=h('<p class="model-description svelte-7b7116"> </p>'),Oo=h('<button class="validation-indicator warning svelte-7b7116" title="View validation issues"> </button>'),Do=h('<span class="save-indicator svelte-7b7116"><!> Saving...</span>'),qo=h('<span class="save-indicator saved svelte-7b7116"> </span>'),Ro=h('<div class="groups-container svelte-7b7116"></div>'),Mo=h('<div class="loading-state svelte-7b7116"><!></div>'),Vo=h('<div class="empty-state svelte-7b7116"><p>No option groups available for this model.</p></div>'),Lo=h('<span class="progress-text svelte-7b7116"> </span>'),No=h('<div class="configuration-step"><div class="step-header svelte-7b7116"><h2 class="svelte-7b7116">Select Your Options</h2> <p class="svelte-7b7116">Choose from the available options below. Required selections are marked with *</p></div> <!> <div class="step-actions svelte-7b7116"><div class="selection-summary svelte-7b7116"><span> </span> <!></div> <button class="btn btn-primary svelte-7b7116">Continue to Validation</button></div></div>'),zo=h('<div class="validation-loading"><!></div>'),Fo=h('<div class="validation-step"><div class="step-header svelte-7b7116"><h2 class="svelte-7b7116">Configuration Validation</h2> <p class="svelte-7b7116">Review and resolve any configuration issues</p></div> <!> <!> <div class="step-actions svelte-7b7116"><button class="btn btn-secondary svelte-7b7116">Back</button> <button class="btn btn-primary svelte-7b7116"> </button></div></div>'),Uo=h('<div class="pricing-loading"><!></div>'),Go=h('<div class="pricing-step"><div class="step-header svelte-7b7116"><h2 class="svelte-7b7116">Pricing Details</h2> <p class="svelte-7b7116">Review your configuration pricing</p></div> <!> <!> <div class="step-actions svelte-7b7116"><button class="btn btn-secondary svelte-7b7116">Back</button> <button class="btn btn-primary svelte-7b7116">Continue to Summary</button></div></div>'),jo=h('<div class="summary-step"><div class="step-header svelte-7b7116"><h2 class="svelte-7b7116">Configuration Summary</h2> <p class="svelte-7b7116">Review your complete configuration</p></div> <!> <div class="step-actions svelte-7b7116"><button class="btn btn-secondary svelte-7b7116">Back</button> <button class="btn btn-success svelte-7b7116"> </button></div></div>'),Bo=(t,e)=>z(e,!1),Ho=h('<div><div class="panel-header svelte-7b7116"><h3 class="svelte-7b7116">Validation Issues</h3> <button class="close-btn svelte-7b7116">×</button></div> <!></div>'),Yo=h('<div class="summary-item discount svelte-7b7116"><span>Discounts Applied</span> <strong class="svelte-7b7116"> </strong></div>'),Qo=h('<div class="selected-item svelte-7b7116"><span class="item-name"> </span> <span class="item-quantity svelte-7b7116"> </span></div>'),Ko=h('<div class="sidebar-section svelte-7b7116"><h3 class="svelte-7b7116">Selected Items</h3> <div class="selected-items svelte-7b7116"></div></div>'),Wo=h('<aside class="configurator-sidebar svelte-7b7116"><div class="sidebar-section svelte-7b7116"><h3 class="svelte-7b7116">Quick Summary</h3> <div class="summary-item svelte-7b7116"><span>Selected Options</span> <strong class="svelte-7b7116"> </strong></div> <div class="summary-item svelte-7b7116"><span>Total Price</span> <strong class="price svelte-7b7116"> </strong></div> <!> <div class="summary-item status svelte-7b7116"><span>Status</span> <strong> </strong></div></div> <!></aside>'),Jo=h('<div class="configurator-container svelte-7b7116"><header class="configurator-header svelte-7b7116"><div class="header-content svelte-7b7116"><h1 class="svelte-7b7116"> </h1> <!></div> <div class="header-actions svelte-7b7116"><!> <!></div></header> <!> <div class="configurator-content svelte-7b7116"><!></div> <!> <!></div>'),Zo=h("<div><!></div>");function Xo(t,e){$e(e,!0);let i=Z(e,"theme",3,"light"),r=Z(e,"apiUrl",3,"/api/v1"),n=Z(e,"embedMode",3,!1),s=Z(e,"onComplete",3,null),l=Z(e,"onConfigurationChange",3,null),u=Z(e,"onError",3,null),d=Z(e,"configurationId",3,null);const _=hs();let S=H(!1),b=H(!1),c=null;const p=[{id:"configure",label:"Configure",icon:"⚙️"},{id:"validate",label:"Validate",icon:"✅"},{id:"price",label:"Price",icon:"💰"},{id:"summary",label:"Summary",icon:"📋"}];typeof window<"u"&&(window.__API_BASE_URL__=r()),Pi(async()=>{await g.initialize(),g.setModelId(e.modelId),d()&&await g.loadConfiguration(d()),z(S,!0),document.documentElement.setAttribute("data-theme",i()),c=setInterval(()=>{g.isDirty&&g.saveConfiguration()},3e4);const C=qn(()=>{St(()=>{l()&&g.selectedCount>0&&l()(g.exportConfiguration())}),St(()=>{u()&&g.error&&(u()(new Error(g.error)),_("error",{message:g.error}))})});return()=>{C(),c&&clearInterval(c)}}),fs(()=>{g.isDirty&&g.saveConfiguration()});async function w(){if(await g.validateConfiguration(),!g.isValid){g.error="Please resolve all validation issues before completing";return}await g.saveConfiguration();const C=g.exportConfiguration();_("complete",C),s()?.(C)}function D(){g.canProceedToStep(g.currentStep+1)?g.nextStep():g.currentStep===0&&g.selectedCount===0?g.error="Please select at least one option":g.currentStep===1&&!g.isValid&&(g.error="Please resolve validation issues")}function M(){g.previousStep()}function A(C){g.goToStep(C)}const x=g;var T=Zo(),I=a(T);return Ps(I,{children:(C,se)=>{var re=ct(),ne=Ke(re);{var Te=V=>{var G=Co(),_e=a(G);li(_e,{size:"large",message:"Loading configuration model..."}),f(V,G)},Ae=(V,G)=>{{var _e=ue=>{var ke=To(),Oe=a(ke),P=v(a(Oe),4),X=a(P),L=v(P,2);L.__click=[Io],k(()=>y(X,g.error)),f(ue,ke)},Ve=(ue,ke)=>{{var Oe=P=>{var X=Jo(),L=a(X),E=a(L),R=a(E),ve=a(R),B=v(R,2);{var Q=F=>{var K=Po(),U=a(K);k(()=>y(U,g.model.description)),f(F,K)};m(B,F=>{g.model.description&&F(Q)})}var be=v(E,2),Me=a(be);{var Le=F=>{var K=Oo();K.__click=[Ao,b];var U=a(K);k(()=>y(U,`⚠️ ${(g.validationResults?.violations?.length||0)??""} Issues`)),f(F,K)};m(Me,F=>{g.hasViolations&&F(Le)})}var ut=v(Me,2);{var dt=F=>{var K=Do(),U=a(K);li(U,{size:"small"}),f(F,K)},At=(F,K)=>{{var U=Y=>{var $=qo(),oe=a($);k(q=>y(oe,`✅ Saved ${q??""}`),[()=>new Date(g.lastSaved).toLocaleTimeString()]),f(Y,$)};m(F,Y=>{g.lastSaved&&Y(U)},K)}};m(ut,F=>{g.isSaving?F(dt):F(At,!1)})}var bt=v(L,2);xs(bt,{get steps(){return p},get currentStep(){return g.currentStep},onStepClick:A,canNavigate:!0});var qe=v(bt,2),ae=a(qe);{var De=F=>{var K=No(),U=v(a(K),2);{var Y=he=>{var J=Ro();Ue(J,21,()=>g.safeGroups,ie=>ie.id,(ie,ge)=>{const pe=me(()=>g.safeOptions.filter(fe=>fe.group_id===o(ge).id)),te=me(()=>g.isGroupExpanded(o(ge).id));ca(ie,{get group(){return o(ge)},get options(){return o(pe)},get selections(){return g.selections},get availableOptions(){return g.availableOptions},onSelectionChange:(fe,Ne)=>g.updateSelection(fe,Ne),get expanded(){return o(te)},onToggle:()=>g.toggleGroup(o(ge).id)})}),f(he,J)},$=(he,J)=>{{var ie=pe=>{var te=Mo(),fe=a(te);li(fe,{size:"medium",message:"Loading options..."}),f(pe,te)},ge=pe=>{var te=Vo();f(pe,te)};m(he,pe=>{g.isLoading?pe(ie):pe(ge,!1)},J)}};m(U,he=>{g.safeGroups.length>0?he(Y):he($,!1)})}var oe=v(U,2),q=a(oe),W=a(q),de=a(W),Ee=v(W,2);{var ee=he=>{var J=Lo(),ie=a(J);k(ge=>y(ie,`${ge??""}% complete`),[()=>Math.round(g.progress)]),f(he,J)};m(Ee,he=>{g.progress>0&&he(ee)})}var le=v(q,2);le.__click=D,k(()=>{y(de,`${g.selectedCount??""} options selected`),le.disabled=g.selectedCount===0}),f(F,K)},O=(F,K)=>{{var U=$=>{var oe=Fo(),q=v(a(oe),2);Fr(q,{get validationResults(){return g.validationResults},onFix:J=>{J.action==="add"?g.updateSelection(J.option_id,J.quantity||1):J.action==="remove"&&g.updateSelection(J.option_id,0)}});var W=v(q,2);{var de=J=>{var ie=zo(),ge=a(ie);li(ge,{size:"small",message:"Validating configuration..."}),f(J,ie)};m(W,J=>{g.isValidating&&J(de)})}var Ee=v(W,2),ee=a(Ee);ee.__click=M;var le=v(ee,2);le.__click=D;var he=a(le);k(()=>{le.disabled=!g.isValid,y(he,g.isValid?"Continue to Pricing":"Resolve Issues First")}),f($,oe)},Y=($,oe)=>{{var q=de=>{var Ee=Go(),ee=v(a(Ee),2);Da(ee,{get pricingData(){return g.pricingData},get selections(){return g.selections},get options(){return g.options},get volumeTiers(){return g.volumeTiers},detailed:!0});var le=v(ee,2);{var he=pe=>{var te=Uo(),fe=a(te);li(fe,{size:"small",message:"Calculating pricing..."}),f(pe,te)};m(le,pe=>{g.isPricing&&pe(he)})}var J=v(le,2),ie=a(J);ie.__click=M;var ge=v(ie,2);ge.__click=D,f(de,Ee)},W=(de,Ee)=>{{var ee=le=>{var he=jo(),J=v(a(he),2);const ie=me(()=>g.exportConfiguration());Eo(J,{get configuration(){return o(ie)},get model(){return g.model},onEdit:Ne=>A(Ne)});var ge=v(J,2),pe=a(ge);pe.__click=M;var te=v(pe,2);te.__click=w;var fe=a(te);k(()=>{te.disabled=g.isSaving,y(fe,g.isSaving?"Saving...":"Complete Configuration")}),f(le,he)};m(de,le=>{g.currentStep===3&&le(ee)},Ee)}};m($,de=>{g.currentStep===2?de(q):de(W,!1)},oe)}};m(F,$=>{g.currentStep===1?$(U):$(Y,!1)},K)}};m(ae,F=>{g.currentStep===0?F(De):F(O,!1)})}var j=v(qe,2);{var ce=F=>{var K=Ho();let U;var Y=a(K),$=v(a(Y),2);$.__click=[Bo,b];var oe=v(Y,2);Fr(oe,{get validationResults(){return g.validationResults},compact:!0,onFix:q=>{q.action==="add"?g.updateSelection(q.option_id,q.quantity||1):q.action==="remove"&&g.updateSelection(q.option_id,0),z(b,!1)}}),k(q=>U=xe(K,1,"validation-panel svelte-7b7116",null,U,q),[()=>({open:o(b)})]),f(F,K)};m(j,F=>{o(b)&&g.hasViolations&&F(ce)})}var ye=v(j,2);{var Pe=F=>{var K=Wo(),U=a(K),Y=v(a(U),2),$=v(a(Y),2),oe=a($),q=v(Y,2),W=v(a(q),2),de=a(W),Ee=v(q,2);{var ee=te=>{var fe=Yo(),Ne=v(a(fe),2),st=a(Ne);k(()=>y(st,g.discounts.length)),f(te,fe)};m(Ee,te=>{g.discounts.length>0&&te(ee)})}var le=v(Ee,2),he=v(a(le),2);let J;var ie=a(he),ge=v(U,2);{var pe=te=>{var fe=Ko(),Ne=v(a(fe),2);Ue(Ne,21,()=>Object.entries(g.selections),He,(st,Zi)=>{var ft=me(()=>qi(o(Zi),2));let Ct=()=>o(ft)[0],Br=()=>o(ft)[1];var Hr=ct();const Yr=me(()=>g.safeOptions.find(vi=>vi.id===Ct()));var tl=Ke(Hr);{var il=vi=>{var Qr=Qo(),Kr=a(Qr),rl=a(Kr),nl=v(Kr,2),sl=a(nl);k(()=>{y(rl,o(Yr).name),y(sl,`×${Br()??""}`)}),f(vi,Qr)};m(tl,vi=>{o(Yr)&&Br()>0&&vi(il)})}f(st,Hr)}),f(te,fe)};m(ge,te=>{g.selectedCount>0&&te(pe)})}k((te,fe)=>{y(oe,g.selectedCount),y(de,`$${te??""}`),J=xe(he,1,"svelte-7b7116",null,J,fe),y(ie,g.isValid?"✅ Valid":"⚠️ Issues")},[()=>g.totalPrice.toFixed(2),()=>({valid:g.isValid,invalid:!g.isValid})]),f(F,K)};m(ye,F=>{n()||F(Pe)})}k(()=>y(ve,g.model.name)),f(P,X)};m(ue,P=>{o(S)&&g.model&&P(Oe)},ke)}};m(V,ue=>{g.error&&!g.model?ue(_e):ue(Ve,!1)},G)}};m(ne,V=>{g.isLoading&&!o(S)?V(Te):V(Ae,!1)})}f(C,re)},$$slots:{default:!0}}),k(()=>{xe(T,1,`configurator-app ${n()?"embed-mode":"standalone-mode"}`,"svelte-7b7116"),mt(T,"data-theme",i())}),f(t,T),et({store:x})}gt(["click"]);const Oi=new URLSearchParams(window.location.search),Di=Oi.get("model")||window.location.pathname.split("/").pop(),Ur=Oi.get("theme")||"light",Gr=Oi.get("api")||window.__API_BASE_URL__||"/api/v1",$o=Oi.get("config");class el{constructor(){this.parentOrigin="*"}send(e,i){window.parent!==window&&window.parent.postMessage({type:`cpq:${e}`,...i},this.parentOrigin)}sendConfiguration(e){this.send("configuration",{configuration:e})}sendComplete(e){this.send("complete",{configuration:e})}sendError(e){this.send("error",{error:{message:e.message||String(e),stack:e.stack}})}sendReady(){this.send("ready",{modelId:Di,version:"1.0.0"})}sendResize(e){this.send("resize",{height:e})}}const nt=new el;Di?(Zn(Xo,{target:document.body,props:{modelId:Di,theme:Ur,apiUrl:Gr,configurationId:$o,embedMode:!0,onComplete:e=>{nt.sendComplete(e)},onConfigurationChange:e=>{nt.sendConfiguration(e)},onError:e=>{nt.sendError(e)}}}),new ResizeObserver(e=>{for(const i of e){const r=i.contentRect.height;nt.sendResize(r)}}).observe(document.body),window.addEventListener("message",e=>{const{data:i}=e;if(i.type==="cpq:command")switch(i.command){case"reset":g.reset();break;case"next":g.nextStep();break;case"previous":g.previousStep();break;case"goToStep":i.step!==void 0&&g.goToStep(i.step);break;case"updateSelection":i.optionId&&i.quantity!==void 0&&g.updateSelection(i.optionId,i.quantity);break;case"getConfiguration":nt.sendConfiguration(g.exportConfiguration());break;case"validate":g.validateSelections().then(()=>{nt.send("validation",{results:g.validationResults})});break;case"calculatePricing":g.calculatePricing(i.context||{}).then(()=>{nt.send("pricing",{data:g.pricingData})});break}}),g.initialize().then(()=>{nt.sendReady()})):(document.body.innerHTML=`
    <div style="padding: 2rem; text-align: center; font-family: system-ui, sans-serif;">
      <h2 style="color: #dc2626;">Configuration Error</h2>
      <p style="color: #6b7280;">No model ID provided. Please specify a model parameter.</p>
    </div>
  `,nt.sendError(new Error("No model ID provided"))),window.__CPQ_EMBED__={store:g,messenger:nt,modelId:Di,theme:Ur,apiUrl:Gr}})();
