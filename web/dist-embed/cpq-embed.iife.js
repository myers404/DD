var CPQEmbed=function(){"use strict";var uo=Object.defineProperty;var Ni=$=>{throw TypeError($)};var vo=($,X,ve)=>X in $?uo($,X,{enumerable:!0,configurable:!0,writable:!0,value:ve}):$[X]=ve;var qr=($,X,ve)=>vo($,typeof X!="symbol"?X+"":X,ve),Nr=($,X,ve)=>X.has($)||Ni("Cannot "+ve);var M=($,X,ve)=>(Nr($,X,"read from private field"),ve?ve.call($):X.get($)),le=($,X,ve)=>X.has($)?Ni("Cannot add the same private member more than once"):X instanceof WeakSet?X.add($):X.set($,ve),It=($,X,ve,pt)=>(Nr($,X,"write to private field"),pt?pt.call($,ve):X.set($,ve),ve),ht=($,X,ve)=>(Nr($,X,"access private method"),ve);var qi,jt,Pt,zt,Rt,qt,Nt,Vt,Ft,Ut,Bt,Ht,Yt,Qt,Gt,Jt,Wt,pe,Et,He,Se,Vi,Fi,Ui,Bi,Hi,Yi;var X=Array.isArray,ve=Array.prototype.indexOf,pt=Array.from,Qi=Object.defineProperty,kt=Object.getOwnPropertyDescriptor,Vr=Object.getOwnPropertyDescriptors,Gi=Object.prototype,Ji=Array.prototype,dr=Object.getPrototypeOf,Fr=Object.isExtensible;const Ur=()=>{};function Wi(t){return t()}function fr(t){for(var e=0;e<t.length;e++)t[e]()}function Ki(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const r=[];for(const i of t)if(r.push(i),r.length===e)break;return r}const Ve=2,Br=4,Kt=8,_r=16,et=32,ut=64,hr=128,De=256,Xt=512,Te=1024,tt=2048,vt=4096,rt=8192,pr=16384,Hr=32768,Zt=65536,Xi=1<<19,Yr=1<<20,gr=1<<21,gt=Symbol("$state"),Zi=Symbol("");function Qr(t){return t===this.v}function $i(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Gr(t){return!$i(t,this.v)}function en(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function tn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function rn(t){throw new Error("https://svelte.dev/e/effect_orphan")}function nn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function sn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function an(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function on(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ct=!1,co=!1;function ln(){Ct=!0}const mr=1,yr=2,Jr=4,un=8,vn=16,Wr=1,cn=2,we=Symbol(),dn="http://www.w3.org/1999/xhtml";function Kr(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ie=null;function Xr(t){ie=t}function Ge(t,e=!1,r){var i=ie={p:ie,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Ct&&!e&&(ie.l={s:null,u:null,r1:[],r2:Mt(!1)}),li(()=>{i.d=!0})}function Je(t){const e=ie;if(e!==null){const o=e.e;if(o!==null){var r=G,i=W;e.e=null;try{for(var s=0;s<o.length;s++){var n=o[s];st(n.effect),Xe(n.reaction),xr(n.fn)}}finally{st(r),Xe(i)}}ie=e.p,e.m=!0}return{}}function Dt(){return!Ct||ie!==null&&ie.l===null}function Fe(t){if(typeof t!="object"||t===null||gt in t)return t;const e=dr(t);if(e!==Gi&&e!==Ji)return t;var r=new Map,i=X(t),s=F(0),n=W,o=l=>{var v=W;Xe(n);var u=l();return Xe(v),u};return i&&r.set("length",F(t.length)),new Proxy(t,{defineProperty(l,v,u){return(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&sn(),o(()=>{var m=r.get(v);m===void 0?(m=F(u.value),r.set(v,m)):O(m,u.value,!0)}),!0},deleteProperty(l,v){var u=r.get(v);if(u===void 0){if(v in l){const d=o(()=>F(we));r.set(v,d),br(s)}}else{if(i&&typeof v=="string"){var m=r.get("length"),h=Number(v);Number.isInteger(h)&&h<m.v&&O(m,h)}O(u,we),br(s)}return!0},get(l,v,u){if(v===gt)return t;var m=r.get(v),h=v in l;if(m===void 0&&(!h||kt(l,v)?.writable)&&(m=o(()=>{var y=Fe(h?l[v]:we),x=F(y);return x}),r.set(v,m)),m!==void 0){var d=a(m);return d===we?void 0:d}return Reflect.get(l,v,u)},getOwnPropertyDescriptor(l,v){var u=Reflect.getOwnPropertyDescriptor(l,v);if(u&&"value"in u){var m=r.get(v);m&&(u.value=a(m))}else if(u===void 0){var h=r.get(v),d=h?.v;if(h!==void 0&&d!==we)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return u},has(l,v){if(v===gt)return!0;var u=r.get(v),m=u!==void 0&&u.v!==we||Reflect.has(l,v);if(u!==void 0||G!==null&&(!m||kt(l,v)?.writable)){u===void 0&&(u=o(()=>{var d=m?Fe(l[v]):we,y=F(d);return y}),r.set(v,u));var h=a(u);if(h===we)return!1}return m},set(l,v,u,m){var h=r.get(v),d=v in l;if(i&&v==="length")for(var y=u;y<h.v;y+=1){var x=r.get(y+"");x!==void 0?O(x,we):y in l&&(x=o(()=>F(we)),r.set(y+"",x))}if(h===void 0)(!d||kt(l,v)?.writable)&&(h=o(()=>{var E=F(void 0);return O(E,Fe(u)),E}),r.set(v,h));else{d=h.v!==we;var B=o(()=>Fe(u));O(h,B)}var A=Reflect.getOwnPropertyDescriptor(l,v);if(A?.set&&A.set.call(m,u),!d){if(i&&typeof v=="string"){var q=r.get("length"),I=Number(v);Number.isInteger(I)&&I>=q.v&&O(q,I+1)}br(s)}return!0},ownKeys(l){a(s);var v=Reflect.ownKeys(l).filter(h=>{var d=r.get(h);return d===void 0||d.v!==we});for(var[u,m]of r)m.v!==we&&!(u in l)&&v.push(u);return v},setPrototypeOf(){an()}})}function br(t,e=1){O(t,t.v+e)}function $t(t){var e=Ve|tt,r=W!==null&&(W.f&Ve)!==0?W:null;return G===null||r!==null&&(r.f&De)!==0?e|=De:G.f|=Yr,{ctx:ie,deps:null,effects:null,equals:Qr,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??G}}function Me(t){const e=$t(t);return gi(e),e}function Zr(t){const e=$t(t);return e.equals=Gr,e}function $r(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)We(e[r])}}function fn(t){for(var e=t.parent;e!==null;){if((e.f&Ve)===0)return e;e=e.parent}return null}function ei(t){var e,r=G;st(fn(t));try{$r(t),e=wi(t)}finally{st(r)}return e}function ti(t){var e=ei(t);if(t.equals(e)||(t.v=e,t.wv=yi()),!bt){var r=(at||(t.f&De)!==0)&&t.deps!==null?vt:Te;Ue(t,r)}}const Tt=new Map;function Mt(t,e){var r={f:0,v:t,reactions:null,equals:Qr,rv:0,wv:0};return r}function F(t,e){const r=Mt(t);return gi(r),r}function _n(t,e=!1,r=!0){var s;const i=Mt(t);return e||(i.equals=Gr),Ct&&r&&ie!==null&&ie.l!==null&&((s=ie.l).s??(s.s=[])).push(i),i}function O(t,e,r=!1){W!==null&&!Ke&&Dt()&&(W.f&(Ve|_r))!==0&&!it?.includes(t)&&on();let i=r?Fe(e):e;return wr(t,i)}function wr(t,e){if(!t.equals(e)){var r=t.v;bt?Tt.set(t,e):Tt.set(t,r),t.v=e,(t.f&Ve)!==0&&((t.f&tt)!==0&&ei(t),Ue(t,(t.f&De)===0?Te:vt)),t.wv=yi(),ri(t,tt),Dt()&&G!==null&&(G.f&Te)!==0&&(G.f&(et|ut))===0&&(Re===null?En([t]):Re.push(t))}return e}function ri(t,e){var r=t.reactions;if(r!==null)for(var i=Dt(),s=r.length,n=0;n<s;n++){var o=r[n],l=o.f;(l&tt)===0&&(!i&&o===G||(Ue(o,e),(l&(Te|De))!==0&&((l&Ve)!==0?ri(o,vt):cr(o))))}}let hn=!1;var ii,ni,si,ai;function pn(){if(ii===void 0){ii=window,ni=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;si=kt(e,"firstChild").get,ai=kt(e,"nextSibling").get,Fr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Fr(r)&&(r.__t=void 0)}}function er(t=""){return document.createTextNode(t)}function Le(t){return si.call(t)}function tr(t){return ai.call(t)}function c(t,e){return Le(t)}function ze(t,e){{var r=Le(t);return r instanceof Comment&&r.data===""?tr(r):r}}function g(t,e=1,r=!1){let i=t;for(;e--;)i=tr(i);return i}function gn(t){t.textContent=""}function oi(t){G===null&&W===null&&rn(),W!==null&&(W.f&De)!==0&&G===null&&tn(),bt&&en()}function mn(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function ct(t,e,r,i=!0){var s=G,n={ctx:ie,deps:null,nodes_start:null,nodes_end:null,f:t|tt,first:null,fn:e,last:null,next:null,parent:s,prev:null,teardown:null,transitions:null,wv:0};if(r)try{Cr(n),n.f|=Hr}catch(v){throw We(n),v}else e!==null&&cr(n);var o=r&&n.deps===null&&n.first===null&&n.nodes_start===null&&n.teardown===null&&(n.f&(Yr|hr))===0;if(!o&&i&&(s!==null&&mn(n,s),W!==null&&(W.f&Ve)!==0)){var l=W;(l.effects??(l.effects=[])).push(n)}return n}function li(t){const e=ct(Kt,null,!1);return Ue(e,Te),e.teardown=t,e}function xe(t){oi();var e=G!==null&&(G.f&et)!==0&&ie!==null&&!ie.m;if(e){var r=ie;(r.e??(r.e=[])).push({fn:t,effect:G,reaction:W})}else{var i=xr(t);return i}}function yn(t){return oi(),Sr(t)}function mt(t){const e=ct(ut,t,!0);return()=>{We(e)}}function bn(t){const e=ct(ut,t,!0);return(r={})=>new Promise(i=>{r.outro?ir(e,()=>{We(e),i(void 0)}):(We(e),i(void 0))})}function xr(t){return ct(Br,t,!1)}function Sr(t){return ct(Kt,t,!0)}function C(t,e=[],r=$t){const i=e.map(r);return rr(()=>t(...i.map(a)))}function rr(t,e=0){return ct(Kt|_r|e,t,!0)}function yt(t,e=!0){return ct(Kt|et,t,!0,e)}function ui(t){var e=t.teardown;if(e!==null){const r=bt,i=W;pi(!0),Xe(null);try{e.call(null)}finally{pi(r),Xe(i)}}}function vi(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var i=r.next;(r.f&ut)!==0?r.parent=null:We(r,e),r=i}}function wn(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&et)===0&&We(e),e=r}}function We(t,e=!0){var r=!1;(e||(t.f&Xi)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ci(t.nodes_start,t.nodes_end),r=!0),vi(t,e&&!r),vr(t,0),Ue(t,pr);var i=t.transitions;if(i!==null)for(const n of i)n.stop();ui(t);var s=t.parent;s!==null&&s.first!==null&&di(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function ci(t,e){for(;t!==null;){var r=t===e?null:tr(t);t.remove(),t=r}}function di(t){var e=t.parent,r=t.prev,i=t.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=r))}function ir(t,e){var r=[];Er(t,r,!0),fi(r,()=>{We(t),e&&e()})}function fi(t,e){var r=t.length;if(r>0){var i=()=>--r||e();for(var s of t)s.out(i)}else e()}function Er(t,e,r){if((t.f&rt)===0){if(t.f^=rt,t.transitions!==null)for(const o of t.transitions)(o.is_global||r)&&e.push(o);for(var i=t.first;i!==null;){var s=i.next,n=(i.f&Zt)!==0||(i.f&et)!==0;Er(i,e,n?r:!1),i=s}}}function nr(t){_i(t,!0)}function _i(t,e){if((t.f&rt)!==0){t.f^=rt,(t.f&Te)!==0&&(Ue(t,tt),cr(t));for(var r=t.first;r!==null;){var i=r.next,s=(r.f&Zt)!==0||(r.f&et)!==0;_i(r,s?e:!1),r=i}if(t.transitions!==null)for(const n of t.transitions)(n.is_global||e)&&n.in()}}let sr=[];function xn(){var t=sr;sr=[],fr(t)}function Ir(t){sr.length===0&&queueMicrotask(xn),sr.push(t)}function Sn(t){var e=G;if((e.f&Hr)===0){if((e.f&hr)===0)throw t;e.fn(t)}else hi(t,e)}function hi(t,e){for(;e!==null;){if((e.f&hr)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let kr=!1,ar=null,dt=!1,bt=!1;function pi(t){bt=t}let or=[],fo=[],W=null,Ke=!1;function Xe(t){W=t}let G=null;function st(t){G=t}let it=null;function gi(t){W!==null&&W.f&gr&&(it===null?it=[t]:it.push(t))}let me=null,Ae=0,Re=null;function En(t){Re=t}let mi=1,lr=0,at=!1;function yi(){return++mi}function ur(t){var e=t.f;if((e&tt)!==0)return!0;if((e&vt)!==0){var r=t.deps,i=(e&De)!==0;if(r!==null){var s,n,o=(e&Xt)!==0,l=i&&G!==null&&!at,v=r.length;if(o||l){var u=t,m=u.parent;for(s=0;s<v;s++)n=r[s],(o||!n?.reactions?.includes(u))&&(n.reactions??(n.reactions=[])).push(u);o&&(u.f^=Xt),l&&m!==null&&(m.f&De)===0&&(u.f^=De)}for(s=0;s<v;s++)if(n=r[s],ur(n)&&ti(n),n.wv>t.wv)return!0}(!i||G!==null&&!at)&&Ue(t,Te)}return!1}function bi(t,e,r=!0){var i=t.reactions;if(i!==null)for(var s=0;s<i.length;s++){var n=i[s];it?.includes(t)||((n.f&Ve)!==0?bi(n,e,!1):e===n&&(r?Ue(n,tt):(n.f&Te)!==0&&Ue(n,vt),cr(n)))}}function wi(t){var y;var e=me,r=Ae,i=Re,s=W,n=at,o=it,l=ie,v=Ke,u=t.f;me=null,Ae=0,Re=null,at=(u&De)!==0&&(Ke||!dt||W===null),W=(u&(et|ut))===0?t:null,it=null,Xr(t.ctx),Ke=!1,lr++,t.f|=gr;try{var m=(0,t.fn)(),h=t.deps;if(me!==null){var d;if(vr(t,Ae),h!==null&&Ae>0)for(h.length=Ae+me.length,d=0;d<me.length;d++)h[Ae+d]=me[d];else t.deps=h=me;if(!at)for(d=Ae;d<h.length;d++)((y=h[d]).reactions??(y.reactions=[])).push(t)}else h!==null&&Ae<h.length&&(vr(t,Ae),h.length=Ae);if(Dt()&&Re!==null&&!Ke&&h!==null&&(t.f&(Ve|vt|tt))===0)for(d=0;d<Re.length;d++)bi(Re[d],t);return s!==null&&s!==t&&(lr++,Re!==null&&(i===null?i=Re:i.push(...Re))),m}catch(x){Sn(x)}finally{me=e,Ae=r,Re=i,W=s,at=n,it=o,Xr(l),Ke=v,t.f^=gr}}function In(t,e){let r=e.reactions;if(r!==null){var i=ve.call(r,t);if(i!==-1){var s=r.length-1;s===0?r=e.reactions=null:(r[i]=r[s],r.pop())}}r===null&&(e.f&Ve)!==0&&(me===null||!me.includes(e))&&(Ue(e,vt),(e.f&(De|Xt))===0&&(e.f^=Xt),$r(e),vr(e,0))}function vr(t,e){var r=t.deps;if(r!==null)for(var i=e;i<r.length;i++)In(t,r[i])}function Cr(t){var e=t.f;if((e&pr)===0){Ue(t,Te);var r=G,i=dt;G=t,dt=!0;try{(e&_r)!==0?wn(t):vi(t),ui(t);var s=wi(t);t.teardown=typeof s=="function"?s:null,t.wv=mi;var n}finally{dt=i,G=r}}}function kn(){try{nn()}catch(t){if(ar!==null)hi(t,ar);else throw t}}function Cn(){var t=dt;try{var e=0;for(dt=!0;or.length>0;){e++>1e3&&kn();var r=or,i=r.length;or=[];for(var s=0;s<i;s++){var n=Tn(r[s]);Dn(n)}Tt.clear()}}finally{kr=!1,dt=t,ar=null}}function Dn(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var i=t[r];(i.f&(pr|rt))===0&&ur(i)&&(Cr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?di(i):i.fn=null))}}function cr(t){kr||(kr=!0,queueMicrotask(Cn));for(var e=ar=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(ut|et))!==0){if((r&Te)===0)return;e.f^=Te}}or.push(e)}function Tn(t){for(var e=[],r=t;r!==null;){var i=r.f,s=(i&(et|ut))!==0,n=s&&(i&Te)!==0;if(!n&&(i&rt)===0){(i&Br)!==0?e.push(r):s?r.f^=Te:ur(r)&&Cr(r);var o=r.first;if(o!==null){r=o;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)r=l.next,l=l.parent}return e}function a(t){var e=t.f,r=(e&Ve)!==0;if(W!==null&&!Ke){if(!it?.includes(t)){var i=W.deps;t.rv<lr&&(t.rv=lr,me===null&&i!==null&&i[Ae]===t?Ae++:me===null?me=[t]:(!at||!me.includes(t))&&me.push(t))}}else if(r&&t.deps===null&&t.effects===null){var s=t,n=s.parent;n!==null&&(n.f&De)===0&&(s.f^=De)}return r&&(s=t,ur(s)&&ti(s)),bt&&Tt.has(t)?Tt.get(t):t.v}function Lt(t){var e=Ke;try{return Ke=!0,t()}finally{Ke=e}}const Mn=-7169;function Ue(t,e){t.f=t.f&Mn|e}function Ln(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(gt in t)Dr(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&gt in r&&Dr(r)}}}function Dr(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{Dr(t[i],e)}catch{}const r=dr(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const i=Vr(r);for(let s in i){const n=i[s].get;if(n)try{n.call(t)}catch{}}}}}const An=["touchstart","touchmove"];function On(t){return An.includes(t)}let xi=!1;function jn(){xi||(xi=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Si(t){var e=W,r=G;Xe(null),st(null);try{return t()}finally{Xe(e),st(r)}}function Pn(t,e,r,i=r){t.addEventListener(e,()=>Si(r));const s=t.__on_r;s?t.__on_r=()=>{s(),i(!0)}:t.__on_r=()=>i(!0),jn()}const Ei=new Set,Tr=new Set;function zn(t,e,r,i={}){function s(n){if(i.capture||At.call(e,n),!n.cancelBubble)return Si(()=>r?.call(this,n))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Ir(()=>{e.addEventListener(t,s,i)}):e.addEventListener(t,s,i),s}function Rn(t,e,r,i,s){var n={capture:i,passive:s},o=zn(t,e,r,n);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&li(()=>{e.removeEventListener(t,o,n)})}function ot(t){for(var e=0;e<t.length;e++)Ei.add(t[e]);for(var r of Tr)r(t)}function At(t){var e=this,r=e.ownerDocument,i=t.type,s=t.composedPath?.()||[],n=s[0]||t.target,o=0,l=t.__root;if(l){var v=s.indexOf(l);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var u=s.indexOf(e);if(u===-1)return;v<=u&&(o=v)}if(n=s[o]||t.target,n!==e){Qi(t,"currentTarget",{configurable:!0,get(){return n||r}});var m=W,h=G;Xe(null),st(null);try{for(var d,y=[];n!==null;){var x=n.assignedSlot||n.parentNode||n.host||null;try{var B=n["__"+i];if(B!=null&&(!n.disabled||t.target===n))if(X(B)){var[A,...q]=B;A.apply(n,[t,...q])}else B.call(n,t)}catch(I){d?y.push(I):d=I}if(t.cancelBubble||x===e||x===null)break;n=x}if(d){for(let I of y)queueMicrotask(()=>{throw I});throw d}}finally{t.__root=e,delete t.currentTarget,Xe(m),st(h)}}}function Mr(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ft(t,e){var r=G;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function w(t,e){var r=(e&Wr)!==0,i=(e&cn)!==0,s,n=!t.startsWith("<!>");return()=>{s===void 0&&(s=Mr(n?t:"<!>"+t),r||(s=Le(s)));var o=i||ni?document.importNode(s,!0):s.cloneNode(!0);if(r){var l=Le(o),v=o.lastChild;ft(l,v)}else ft(o,o);return o}}function qn(t,e,r="svg"){var i=!t.startsWith("<!>"),s=(e&Wr)!==0,n=`<${r}>${i?t:"<!>"+t}</${r}>`,o;return()=>{if(!o){var l=Mr(n),v=Le(l);if(s)for(o=document.createDocumentFragment();Le(v);)o.appendChild(Le(v));else o=Le(v)}var u=o.cloneNode(!0);if(s){var m=Le(u),h=u.lastChild;ft(m,h)}else ft(u,u);return u}}function Lr(t,e){return qn(t,e,"svg")}function wt(t=""){{var e=er(t+"");return ft(e,e),e}}function xt(){var t=document.createDocumentFragment(),e=document.createComment(""),r=er();return t.append(e,r),ft(e,r),t}function f(t,e){t!==null&&t.before(e)}function T(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Nn(t,e){return Vn(t,e)}const St=new Map;function Vn(t,{target:e,anchor:r,props:i={},events:s,context:n,intro:o=!0}){pn();var l=new Set,v=h=>{for(var d=0;d<h.length;d++){var y=h[d];if(!l.has(y)){l.add(y);var x=On(y);e.addEventListener(y,At,{passive:x});var B=St.get(y);B===void 0?(document.addEventListener(y,At,{passive:x}),St.set(y,1)):St.set(y,B+1)}}};v(pt(Ei)),Tr.add(v);var u=void 0,m=bn(()=>{var h=r??e.appendChild(er());return yt(()=>{if(n){Ge({});var d=ie;d.c=n}s&&(i.$$events=s),u=t(h,i)||{},n&&Je()}),()=>{for(var d of l){e.removeEventListener(d,At);var y=St.get(d);--y===0?(document.removeEventListener(d,At),St.delete(d)):St.set(d,y)}Tr.delete(v),h!==r&&h.parentNode?.removeChild(h)}});return Fn.set(u,m),u}let Fn=new WeakMap;function S(t,e,[r,i]=[0,0]){var s=t,n=null,o=null,l=we,v=r>0?Zt:0,u=!1;const m=(d,y=!0)=>{u=!0,h(y,d)},h=(d,y)=>{l!==(l=d)&&(l?(n?nr(n):y&&(n=yt(()=>y(s))),o&&ir(o,()=>{o=null})):(o?nr(o):y&&(o=yt(()=>y(s,[r+1,i]))),n&&ir(n,()=>{n=null})))};rr(()=>{u=!1,e(m),u||h(null,null)},v)}function qe(t,e){return e}function Un(t,e,r,i){for(var s=[],n=e.length,o=0;o<n;o++)Er(e[o].e,s,!0);var l=n>0&&s.length===0&&r!==null;if(l){var v=r.parentNode;gn(v),v.append(r),i.clear(),lt(t,e[0].prev,e[n-1].next)}fi(s,()=>{for(var u=0;u<n;u++){var m=e[u];l||(i.delete(m.k),lt(t,m.prev,m.next)),We(m.e,!l)}})}function Ne(t,e,r,i,s,n=null){var o=t,l={flags:e,items:new Map,first:null},v=(e&Jr)!==0;if(v){var u=t;o=u.appendChild(er())}var m=null,h=!1,d=Zr(()=>{var y=r();return X(y)?y:y==null?[]:pt(y)});rr(()=>{var y=a(d),x=y.length;h&&x===0||(h=x===0,Bn(y,l,o,s,e,i,r),n!==null&&(x===0?m?nr(m):m=yt(()=>n(o)):m!==null&&ir(m,()=>{m=null})),a(d))})}function Bn(t,e,r,i,s,n,o){var l=(s&un)!==0,v=(s&(mr|yr))!==0,u=t.length,m=e.items,h=e.first,d=h,y,x=null,B,A=[],q=[],I,E,b,L;if(l)for(L=0;L<u;L+=1)I=t[L],E=n(I,L),b=m.get(E),b!==void 0&&(b.a?.measure(),(B??(B=new Set)).add(b));for(L=0;L<u;L+=1){if(I=t[L],E=n(I,L),b=m.get(E),b===void 0){var z=d?d.e.nodes_start:r;x=Yn(z,e,x,x===null?e.first:x.next,I,E,L,i,s,o),m.set(E,x),A=[],q=[],d=x.next;continue}if(v&&Hn(b,I,L,s),(b.e.f&rt)!==0&&(nr(b.e),l&&(b.a?.unfix(),(B??(B=new Set)).delete(b))),b!==d){if(y!==void 0&&y.has(b)){if(A.length<q.length){var H=q[0],K;x=H.prev;var ee=A[0],Z=A[A.length-1];for(K=0;K<A.length;K+=1)Ii(A[K],H,r);for(K=0;K<q.length;K+=1)y.delete(q[K]);lt(e,ee.prev,Z.next),lt(e,x,ee),lt(e,Z,H),d=H,x=Z,L-=1,A=[],q=[]}else y.delete(b),Ii(b,d,r),lt(e,b.prev,b.next),lt(e,b,x===null?e.first:x.next),lt(e,x,b),x=b;continue}for(A=[],q=[];d!==null&&d.k!==E;)(d.e.f&rt)===0&&(y??(y=new Set)).add(d),q.push(d),d=d.next;if(d===null)continue;b=d}A.push(b),x=b,d=b.next}if(d!==null||y!==void 0){for(var de=y===void 0?[]:pt(y);d!==null;)(d.e.f&rt)===0&&de.push(d),d=d.next;var Ee=de.length;if(Ee>0){var Ye=(s&Jr)!==0&&u===0?r:null;if(l){for(L=0;L<Ee;L+=1)de[L].a?.measure();for(L=0;L<Ee;L+=1)de[L].a?.fix()}Un(e,de,Ye,m)}}l&&Ir(()=>{if(B!==void 0)for(b of B)b.a?.apply()}),G.first=e.first&&e.first.e,G.last=x&&x.e}function Hn(t,e,r,i){(i&mr)!==0&&wr(t.v,e),(i&yr)!==0?wr(t.i,r):t.i=r}function Yn(t,e,r,i,s,n,o,l,v,u){var m=(v&mr)!==0,h=(v&vn)===0,d=m?h?_n(s,!1,!1):Mt(s):s,y=(v&yr)===0?o:Mt(o),x={i:y,v:d,k:n,a:null,e:null,prev:r,next:i};try{return x.e=yt(()=>l(t,d,y,u),hn),x.e.prev=r&&r.e,x.e.next=i&&i.e,r===null?e.first=x:(r.next=x,r.e.next=x.e),i!==null&&(i.prev=x,i.e.prev=x.e),x}finally{}}function Ii(t,e,r){for(var i=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,n=t.e.nodes_start;n!==i;){var o=tr(n);s.before(n),n=o}}function lt(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Qn(t,e,r=!1,i=!1,s=!1){var n=t,o="";C(()=>{var l=G;if(o!==(o=e()??"")&&(l.nodes_start!==null&&(ci(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),o!=="")){var v=o+"";r?v=`<svg>${v}</svg>`:i&&(v=`<math>${v}</math>`);var u=Mr(v);if((r||i)&&(u=Le(u)),ft(Le(u),u.lastChild),r||i)for(;Le(u);)n.before(Le(u));else n.before(u)}})}function ki(t,e,...r){var i=t,s=Ur,n;rr(()=>{s!==(s=e())&&(n&&(We(n),n=null),n=yt(()=>s(i,...r)))},Zt)}const Ci=[...` 	
\r\f \v\uFEFF`];function Gn(t,e,r){var i=t==null?"":""+t;if(e&&(i=i?i+" "+e:e),r){for(var s in r)if(r[s])i=i?i+" "+s:s;else if(i.length)for(var n=s.length,o=0;(o=i.indexOf(s,o))>=0;){var l=o+n;(o===0||Ci.includes(i[o-1]))&&(l===i.length||Ci.includes(i[l]))?i=(o===0?"":i.substring(0,o))+i.substring(l+1):o=l}}return i===""?null:i}function Jn(t,e){return t==null?null:String(t)}function he(t,e,r,i,s,n){var o=t.__className;if(o!==r||o===void 0){var l=Gn(r,i,n);l==null?t.removeAttribute("class"):e?t.className=l:t.setAttribute("class",l),t.__className=r}else if(n&&s!==n)for(var v in n){var u=!!n[v];(s==null||u!==!!s[v])&&t.classList.toggle(v,u)}return n}function Ar(t,e,r,i){var s=t.__style;if(s!==e){var n=Jn(e);n==null?t.removeAttribute("style"):t.style.cssText=n,t.__style=e}return i}const Wn=Symbol("is custom element"),Kn=Symbol("is html");function Xn(t,e){var r=Di(t);r.checked!==(r.checked=e??void 0)&&(t.checked=e)}function Ot(t,e,r,i){var s=Di(t);s[e]!==(s[e]=r)&&(e==="loading"&&(t[Zi]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Zn(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Di(t){return t.__attributes??(t.__attributes={[Wn]:t.nodeName.includes("-"),[Kn]:t.namespaceURI===dn})}var Ti=new Map;function Zn(t){var e=Ti.get(t.nodeName);if(e)return e;Ti.set(t.nodeName,e=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=Vr(i);for(var n in r)r[n].set&&e.push(n);i=dr(i)}return e}function Mi(t,e,r=e){var i=Dt();Pn(t,"input",s=>{var n=s?t.defaultValue:t.value;if(n=Or(t)?jr(n):n,r(n),i&&n!==(n=e())){var o=t.selectionStart,l=t.selectionEnd;t.value=n??"",l!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(l,t.value.length))}}),Lt(e)==null&&t.value&&r(Or(t)?jr(t.value):t.value),Sr(()=>{var s=e();Or(t)&&s===jr(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Or(t){var e=t.type;return e==="number"||e==="range"}function jr(t){return t===""?null:+t}function Li(t,e){return t===e||t?.[gt]===e}function Ai(t={},e,r,i){return xr(()=>{var s,n;return Sr(()=>{s=n,n=[],Lt(()=>{t!==r(...n)&&(e(t,...n),s&&Li(r(...s),t)&&e(null,...s))})}),()=>{Ir(()=>{n&&Li(r(...n),t)&&e(null,...n)})}}),t}function Oi(t=!1){const e=ie,r=e.l.u;if(!r)return;let i=()=>Ln(e.s);if(t){let s=0,n={};const o=$t(()=>{let l=!1;const v=e.s;for(const u in v)v[u]!==n[u]&&(n[u]=v[u],l=!0);return l&&s++,s});i=()=>a(o)}r.b.length&&yn(()=>{ji(e,i),fr(r.b)}),xe(()=>{const s=Lt(()=>r.m.map(Wi));return()=>{for(const n of s)typeof n=="function"&&n()}}),r.a.length&&xe(()=>{ji(e,i),fr(r.a)})}function ji(t,e){if(t.l.s)for(const r of t.l.s)a(r);e()}function ye(t,e,r,i){var s;s=t[e];var n=i,o=!0,l=()=>(o&&(o=!1,n=i),n);s===void 0&&i!==void 0&&(s=l());var v;return v=()=>{var u=t[e];return u===void 0?l():(o=!0,u)},v}function Pi(t){ie===null&&Kr(),Ct&&ie.l!==null?es(ie).m.push(t):xe(()=>{const e=Lt(t);if(typeof e=="function")return e})}function $n(t){ie===null&&Kr(),Pi(()=>()=>Lt(t))}function es(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const ts="5";typeof window<"u"&&((qi=window.__svelte??(window.__svelte={})).v??(qi.v=new Set)).add(ts);function Pr(t,e){let r;return function(...i){clearTimeout(r),r=setTimeout(()=>t.apply(this,i),e)}}function rs(t,e){let r;return function(...i){r||(t.apply(this,i),r=!0,setTimeout(()=>r=!1,e))}}class is{constructor(e,r={}){this.baseUrl=e||"http://localhost:8080/api/v1",this.modelId=r.modelId,this.authToken=r.authToken,this.timeout=r.timeout||3e4,this.retryAttempts=r.retryAttempts||2,this.retryDelay=r.retryDelay||1e3}async request(e,r={}){const i=`${this.baseUrl}${e}`,s={method:"GET",headers:{"Content-Type":"application/json","X-Request-ID":this.generateRequestId(),...this.authToken&&{Authorization:`Bearer ${this.authToken}`},...r.headers},...r};s.body&&typeof s.body=="object"&&(s.body=JSON.stringify(s.body));let n;for(let o=0;o<this.retryAttempts;o++)try{const l=new AbortController,v=setTimeout(()=>l.abort(),this.timeout),u=await fetch(i,{...s,signal:l.signal});if(clearTimeout(v),u.status===401)throw new Error("Authentication required");if(u.status===404){const h=new Error("Resource not found");throw h.code="NOT_FOUND",h}if(u.status===429){const h=u.headers.get("Retry-After");throw new Error(`Rate limited. Retry after ${h}s`)}if(!u.ok){const h=await u.json().catch(()=>({}));throw new Error(h.error?.message||`HTTP ${u.status}: ${u.statusText}`)}const m=await u.json();return m.data!==void 0?m:{data:m}}catch(l){if(n=l,l.message.includes("4")||l.name==="AbortError"||response?.status>=400&&response?.status<500)throw l;o<this.retryAttempts-1&&await this.delay(this.retryDelay*Math.pow(2,o))}throw n}generateRequestId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}delay(e){return new Promise(r=>setTimeout(r,e))}async getModel(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}`)}async getModelOptions(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/options`)}async getModelGroups(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/groups`)}async createConfiguration(e={}){const r={model_id:this.modelId,selections:this.formatSelections(e)};return this.request("/configurations",{method:"POST",body:r})}async updateConfiguration(e,r){const i={model_id:this.modelId,selections:this.formatSelections(r)};return this.request(`/configurations/${e}`,{method:"PUT",body:i})}async validateConfiguration(e){const r={model_id:this.modelId,selections:this.formatSelections(e)};return this.request("/configurations/validate-selection",{method:"POST",body:r})}async getConfiguration(e){return this.request(`/configurations/${e}`)}async deleteConfiguration(e){return this.request(`/configurations/${e}`,{method:"DELETE"})}async calculatePricing(e,r={}){const i={model_id:this.modelId,selections:this.formatSelections(e),context:r};return this.request("/pricing/calculate",{method:"POST",body:i})}async simulatePricing(e){const r={model_id:this.modelId,scenarios:e.map(i=>({...i,selections:this.formatSelections(i.selections)}))};return this.request("/pricing/simulate",{method:"POST",body:r})}async getVolumeTiers(){return this.request(`/pricing/volume-tiers/${this.modelId}`)}async getConfigurationAnalytics(e="30d"){return this.request(`/analytics/configurations?model_id=${this.modelId}&range=${e}`)}async getPricingAnalytics(e="30d"){return this.request(`/analytics/pricing?model_id=${this.modelId}&range=${e}`)}formatSelections(e){return Array.isArray(e)?e:Object.entries(e).filter(([r,i])=>i>0).map(([r,i])=>({option_id:r,quantity:i}))}setModelId(e){this.modelId=e}setAuthToken(e){this.authToken=e}}const zi="cpq_";function ns(t,e){try{localStorage.setItem(zi+t,JSON.stringify(e))}catch(r){console.warn("Failed to persist data:",r)}}function ss(t){try{const e=localStorage.getItem(zi+t);return e?JSON.parse(e):null}catch(e){return console.warn("Failed to recover data:",e),null}}class as{constructor(){le(this,Se);le(this,jt,F(""));le(this,Pt,F(null));le(this,zt,F(Fe({})));le(this,Rt,F(Fe({violations:[],isValid:!0})));le(this,qt,F(null));le(this,Nt,F(!1));le(this,Vt,F(!1));le(this,Ft,F(!1));le(this,Ut,F(null));le(this,Bt,F(0));le(this,Ht,F(null));le(this,Yt,F(null));le(this,Qt,F(!1));le(this,Gt,F(Fe([])));le(this,Jt,F(-1));qr(this,"maxHistorySize",50);le(this,Wt,F(Fe(navigator.onLine)));qr(this,"retryQueue",[]);le(this,pe,null);le(this,Et,!1);le(this,He,[])}get modelId(){return a(M(this,jt))}set modelId(e){O(M(this,jt),e,!0)}get model(){return a(M(this,Pt))}set model(e){O(M(this,Pt),e,!0)}get selections(){return a(M(this,zt))}set selections(e){O(M(this,zt),e,!0)}get validationResults(){return a(M(this,Rt))}set validationResults(e){O(M(this,Rt),e,!0)}get pricingData(){return a(M(this,qt))}set pricingData(e){O(M(this,qt),e,!0)}get isLoading(){return a(M(this,Nt))}set isLoading(e){O(M(this,Nt),e,!0)}get isValidating(){return a(M(this,Vt))}set isValidating(e){O(M(this,Vt),e,!0)}get isPricing(){return a(M(this,Ft))}set isPricing(e){O(M(this,Ft),e,!0)}get error(){return a(M(this,Ut))}set error(e){O(M(this,Ut),e,!0)}get currentStep(){return a(M(this,Bt))}set currentStep(e){O(M(this,Bt),e,!0)}get configurationId(){return a(M(this,Ht))}set configurationId(e){O(M(this,Ht),e,!0)}get lastSaved(){return a(M(this,Yt))}set lastSaved(e){O(M(this,Yt),e,!0)}get isDirty(){return a(M(this,Qt))}set isDirty(e){O(M(this,Qt),e,!0)}get history(){return a(M(this,Gt))}set history(e){O(M(this,Gt),e,!0)}get historyIndex(){return a(M(this,Jt))}set historyIndex(e){O(M(this,Jt),e,!0)}get isOnline(){return a(M(this,Wt))}set isOnline(e){O(M(this,Wt),e,!0)}get isValid(){return this.validationResults.isValid&&this.validationResults.violations.length===0}get totalPrice(){return this.pricingData?.total_price||0}get basePrice(){return this.pricingData?.base_price||0}get adjustments(){return this.pricingData?.adjustments||[]}get selectedOptions(){return this.model?.option_groups?this.model.option_groups.flatMap(e=>e.options.filter(r=>this.selections[r.id]>0).map(r=>({...r,quantity:this.selections[r.id],group_name:e.name}))):[]}get completionPercentage(){if(!this.model?.option_groups)return 0;const e=this.model.option_groups.filter(i=>i.required);if(!e.length)return 100;const r=e.filter(i=>i.options.some(s=>this.selections[s.id]>0));return Math.round(r.length/e.length*100)}get canProceedToNextStep(){return this.completionPercentage>=100&&this.isValid&&!this.isValidating}get canUndo(){return this.historyIndex>0}get canRedo(){return this.historyIndex<this.history.length-1}initialize(e=window.__API_BASE_URL__){M(this,Et)||(It(this,Et,!0),It(this,pe,new is(e)),ht(this,Se,Hi).call(this),ht(this,Se,Vi).call(this),ht(this,Se,Fi).call(this))}destroy(){M(this,He).forEach(e=>e()),It(this,He,[]),It(this,pe,null),It(this,Et,!1)}setModelId(e){this.modelId!==e&&(this.modelId=e,(this.model||this.error)&&this.reset())}async loadModel(){if(!M(this,pe)||this.isLoading||!this.modelId){console.log("Skipping loadModel:",{api:!!M(this,pe),isLoading:this.isLoading,modelId:this.modelId});return}console.log("Loading model:",this.modelId),this.isLoading=!0,this.error=null;try{const e=await M(this,pe).getModel();if(console.log("Model loaded successfully:",e),this.model=e.data||e,this.model?.option_groups)for(const r of this.model.option_groups)r.required&&r.selection_type==="single"&&r.min_selections>0&&!r.options.some(s=>this.selections[s.id]>0)&&r.options.length>0&&(this.selections[r.options[0].id]=1)}catch(e){console.error("Failed to load model:",e),this.error={type:"load",message:e.message||"Failed to load model",code:e.code},!this.isOnline&&!e.message.includes("404")&&this.retryQueue.push(()=>this.loadModel())}finally{this.isLoading=!1}}updateSelection(e,r){const i={...this.selections};if(r>0?this.selections[e]=r:delete this.selections[e],this.model?.option_groups){const s=this.model.option_groups.flatMap(n=>n.options).find(n=>n.id===e);if(s){const n=this.model.option_groups.find(o=>o.options.some(l=>l.id===s.id));if(n?.selection_type==="single"&&r>0)for(const o of n.options)o.id!==e&&delete this.selections[o.id]}}JSON.stringify(i)!==JSON.stringify(this.selections)&&(this.isDirty=!0,ht(this,Se,Yi).call(this))}async validateSelections(){if(!(!M(this,pe)||this.isValidating)){this.isValidating=!0;try{const e=await M(this,pe).validateConfiguration(this.selections);this.validationResults={violations:e.data?.violations||[],isValid:e.data?.is_valid??!0}}catch(e){this.isOnline?this.error={type:"validation",message:e.message}:this.validationResults={violations:[],isValid:!0}}finally{this.isValidating=!1}}}async calculatePricing(){if(!(!M(this,pe)||this.isPricing)){this.isPricing=!0;try{const e=await M(this,pe).calculatePricing(this.selections);this.pricingData=e.data||e}catch(e){this.isOnline?this.error={type:"pricing",message:e.message}:this.pricingData=this.pricingData||null}finally{this.isPricing=!1}}}async saveConfiguration(){if(!(!M(this,pe)||!this.isDirty))try{let e;return this.configurationId?e=await M(this,pe).updateConfiguration(this.configurationId,this.selections):(e=await M(this,pe).createConfiguration(this.selections),this.configurationId=e.data?.id||e.id),this.lastSaved=new Date,this.isDirty=!1,e}catch(e){throw this.isOnline?this.error={type:"save",message:e.message}:this.retryQueue.push(()=>this.saveConfiguration()),e}}undo(){this.canUndo&&(this.historyIndex--,this.selections={...this.history[this.historyIndex].selections},this.isDirty=!0)}redo(){this.canRedo&&(this.historyIndex++,this.selections={...this.history[this.historyIndex].selections},this.isDirty=!0)}nextStep(){this.canProceedToNextStep&&(this.currentStep=Math.min(this.currentStep+1,3))}previousStep(){this.currentStep=Math.max(this.currentStep-1,0)}reset(){this.model=null,this.selections={},this.validationResults={violations:[],isValid:!0},this.pricingData=null,this.currentStep=0,this.configurationId=null,this.lastSaved=null,this.isDirty=!1,this.error=null,this.isLoading=!1,this.isValidating=!1,this.isPricing=!1,this.history=[],this.historyIndex=-1,this.retryQueue=[]}clearError(){this.error=null}}jt=new WeakMap,Pt=new WeakMap,zt=new WeakMap,Rt=new WeakMap,qt=new WeakMap,Nt=new WeakMap,Vt=new WeakMap,Ft=new WeakMap,Ut=new WeakMap,Bt=new WeakMap,Ht=new WeakMap,Yt=new WeakMap,Qt=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,Wt=new WeakMap,pe=new WeakMap,Et=new WeakMap,He=new WeakMap,Se=new WeakSet,Vi=function(){const e=mt(()=>{xe(()=>{this.modelId&&M(this,pe)&&!this.model&&!this.error&&(M(this,pe).modelId=this.modelId,this.loadModel())})});M(this,He).push(e);const r=Pr(()=>{Object.keys(this.selections).length>0&&this.validateSelections()},300),i=mt(()=>{xe(()=>{JSON.stringify(this.selections),r()})});M(this,He).push(i);const s=Pr(()=>{this.isValid&&Object.keys(this.selections).length>0&&this.calculatePricing()},500),n=mt(()=>{xe(()=>{this.isValid+JSON.stringify(this.selections),s()})});M(this,He).push(n);const o=Pr(()=>{this.isDirty&&this.saveConfiguration()},2e3),l=mt(()=>{xe(()=>{this.isDirty&&o()})});M(this,He).push(l);const v=mt(()=>{xe(()=>{ht(this,Se,Bi).call(this)})});M(this,He).push(v)},Fi=function(){const e=()=>{this.isOnline=!0,ht(this,Se,Ui).call(this)},r=()=>{this.isOnline=!1};window.addEventListener("online",e),window.addEventListener("offline",r),M(this,He).push(()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)})},Ui=async function(){for(;this.retryQueue.length>0&&this.isOnline;){const e=this.retryQueue.shift();try{await e()}catch(r){console.error("Retry failed:",r)}}},Bi=function(){const e={modelId:this.modelId,selections:this.selections,configurationId:this.configurationId,currentStep:this.currentStep,lastSaved:this.lastSaved};ns("cpq_config_state",e)},Hi=function(){const e=ss("cpq_config_state");e&&(this.modelId=e.modelId||"",this.selections=e.selections||{},this.configurationId=e.configurationId||null,this.currentStep=e.currentStep||0,this.lastSaved=e.lastSaved||null)},Yi=function(){this.history=this.history.slice(0,this.historyIndex+1),this.history.push({selections:{...this.selections},timestamp:Date.now()}),this.history.length>this.maxHistorySize&&(this.history=this.history.slice(-this.maxHistorySize)),this.historyIndex=this.history.length-1};const _=new as;var os=Lr('<svg viewBox="0 0 20 20" fill="currentColor" class="svelte-fs3n5v"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),ls=w('<div><div class="step-icon svelte-fs3n5v"><!></div> <span class="step-name svelte-fs3n5v"> </span></div>'),us=w('<div class="progress-indicator svelte-fs3n5v"><div class="progress-bar svelte-fs3n5v"><div class="progress-fill svelte-fs3n5v"></div></div> <div class="progress-steps svelte-fs3n5v"></div> <div class="progress-text svelte-fs3n5v"> </div></div>');function vs(t,e){let r=ye(e,"currentStep",3,0),i=ye(e,"completionPercentage",3,0);const s=[{name:"Configure",icon:"1"},{name:"Validate",icon:"2"},{name:"Price",icon:"3"},{name:"Complete",icon:"4"}];var n=us(),o=c(n),l=c(o),v=g(o,2);Ne(v,21,()=>s,qe,(h,d,y)=>{var x=ls();let B;var A=c(x),q=c(A);{var I=z=>{var H=os();f(z,H)},E=z=>{var H=wt();C(()=>T(H,a(d).icon)),f(z,H)};S(q,z=>{y<r()?z(I):z(E,!1)})}var b=g(A,2),L=c(b);C(z=>{B=he(x,1,"step svelte-fs3n5v",null,B,z),T(L,a(d).name)},[()=>({active:y===r(),completed:y<r()})]),f(h,x)});var u=g(v,2),m=c(u);C(()=>{Ar(l,`width: ${i()??""}%`),T(m,`${i()??""}% Complete`)}),f(t,n)}var cs=w('<p class="loading-message svelte-c70bjm"> </p>'),ds=w('<div><div class="spinner-content svelte-c70bjm"><div></div> <!></div></div>');function fs(t,e){let r=ye(e,"size",3,"medium"),i=ye(e,"message",3,""),s=ye(e,"overlay",3,!1);const n={small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"};var o=ds();let l;var v=c(o),u=c(v),m=g(u,2);{var h=d=>{var y=cs(),x=c(y);C(()=>T(x,i())),f(d,y)};S(m,d=>{i()&&d(h)})}C(d=>{l=he(o,1,"loading-spinner svelte-c70bjm",null,l,d),he(u,1,`spinner ${n[r()]??""}`,"svelte-c70bjm")},[()=>({overlay:s()})]),f(t,o)}function _s(t,e,r,i){O(e,!1),O(r,""),i()&&i()()}var hs=w('<button class="retry-btn svelte-me7lub">Try Again</button>'),ps=w('<div class="error-boundary svelte-me7lub"><div class="error-content svelte-me7lub"><svg class="error-icon svelte-me7lub" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> <h3 class="svelte-me7lub">Something went wrong</h3> <p class="svelte-me7lub"> </p> <!></div></div>');function gs(t,e){Ge(e,!0);let r=ye(e,"error",3,null),i=ye(e,"onRetry",3,null),s=ye(e,"fallback",3,null),n=F(!1),o=F("");xe(()=>{r()&&(O(n,!0),O(o,r().message||"An unexpected error occurred",!0))});var l=xt(),v=ze(l);{var u=h=>{var d=xt(),y=ze(d);{var x=A=>{var q=xt(),I=ze(q);ki(I,s),f(A,q)},B=A=>{var q=ps(),I=c(q),E=g(c(I),4),b=c(E),L=g(E,2);{var z=H=>{var K=hs();K.__click=[_s,n,o,i],f(H,K)};S(L,H=>{i()&&H(z)})}C(()=>T(b,a(o))),f(A,q)};S(y,A=>{s()?A(x):A(B,!1)})}f(h,d)},m=h=>{var d=xt(),y=ze(d);ki(y,()=>e.children??Ur),f(h,d)};S(v,h=>{a(n)?h(u):h(m,!1)})}f(t,l),Je()}ot(["click"]);function ms(t){const{items:e,itemHeight:r,containerHeight:i,buffer:s=5}=t;let n=$state(0),o=$derived(Math.floor(n/r)),l=$derived(Math.ceil((n+i)/r)),v=$derived(Math.max(0,o-s)),u=$derived(Math.min(e.length,l+s)),m=$derived(v*r);return{visibleItems:$derived(e.slice(v,u)),totalHeight:e.length*r,offsetY:m,updateScroll(h){n=h}}}function Be(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}function ys(t,e,r,i,s){if(e.group.selection_type==="single"){const n=a(r)?0:1;O(i,n,!0),_.updateSelection(e.option.id,n)}else s(a(r)?-a(i):1)}var bs=w('<span class="option-sku svelte-cwem91"> </span>'),ws=w('<span class="price-unit svelte-cwem91"> </span>'),xs=w('<p class="option-description svelte-cwem91"> </p>'),Ss=w('<span class="attribute svelte-cwem91"><span class="attribute-key svelte-cwem91"> </span> <span class="attribute-value svelte-cwem91"> </span></span>'),Es=w('<div class="option-attributes svelte-cwem91"></div>'),Is=w('<div class="error-text svelte-cwem91"> </div>'),ks=w('<div class="option-errors svelte-cwem91"></div>'),Cs=w('<label class="radio-control svelte-cwem91"><input type="radio" class="radio-input svelte-cwem91"/> <span class="radio-label svelte-cwem91">Select</span></label>'),Ds=(t,e)=>e(-1),Ts=(t,e)=>e(parseInt(t.target.value)||0),Ms=(t,e)=>e(1),Ls=w('<div class="quantity-total svelte-cwem91"> </div>'),As=w('<div class="quantity-controls svelte-cwem91"><button type="button" class="quantity-btn svelte-cwem91" aria-label="Decrease quantity"><svg class="icon svelte-cwem91" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" class="svelte-cwem91"></path></svg></button> <input type="number" class="quantity-input svelte-cwem91" min="0"/> <button type="button" class="quantity-btn svelte-cwem91" aria-label="Increase quantity"><svg class="icon svelte-cwem91" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" class="svelte-cwem91"></path></svg></button></div> <!>',1),Os=w('<div class="availability-warning svelte-cwem91">Limited availability</div>'),js=w('<div class="availability-error svelte-cwem91">Out of stock</div>'),Ps=w('<div><div class="option-header svelte-cwem91"><div class="option-info svelte-cwem91"><h4 class="option-name svelte-cwem91"> </h4> <!></div> <div class="option-price svelte-cwem91"> <!></div></div> <!> <!> <!> <div class="option-controls svelte-cwem91"><!></div> <!></div>');function Ri(t,e){Ge(e,!0);let r=F(Fe(_.selections[e.option.id]||0)),i=Me(()=>a(r)>0),s=!1;const n=rs(p=>{_.updateSelection(e.option.id,p)},100);let o=Me(()=>_.validationResults.violations.filter(p=>p.option_id===e.option.id));function l(p){const k=Math.max(0,a(r)+p);if(e.group.max_selections&&p>0){const D=e.group.options.filter(P=>_.selections[P.id]>0).length;if(!a(i)&&D>=e.group.max_selections)return}O(r,k,!0),n(k)}xe(()=>{O(r,_.selections[e.option.id]||0,!0)});var v=Ps();let u;var m=c(v),h=c(m),d=c(h),y=c(d),x=g(d,2);{var B=p=>{var k=bs(),D=c(k);C(()=>T(D,`SKU: ${e.option.sku??""}`)),f(p,k)};S(x,p=>{e.option.sku&&p(B)})}var A=g(h,2),q=c(A),I=g(q);{var E=p=>{var k=ws(),D=c(k);C(()=>T(D,`/${e.option.price_unit??""}`)),f(p,k)};S(I,p=>{e.option.price_unit&&p(E)})}var b=g(m,2);{var L=p=>{var k=xs(),D=c(k);C(()=>T(D,e.option.description)),f(p,k)};S(b,p=>{e.option.description&&p(L)})}var z=g(b,2);{var H=p=>{var k=Es();Ne(k,21,()=>Object.entries(e.option.attributes),qe,(D,P)=>{var N=Me(()=>Ki(a(P),2));let te=()=>a(N)[0],V=()=>a(N)[1];var ce=Ss(),ae=c(ce),ne=c(ae),fe=g(ae,2),Oe=c(fe);C(()=>{T(ne,`${te()??""}:`),T(Oe,V())}),f(D,ce)}),f(p,k)};S(z,p=>{e.option.attributes&&Object.keys(e.option.attributes).length>0&&p(H)})}var K=g(z,2);{var ee=p=>{var k=ks();Ne(k,21,()=>a(o),qe,(D,P)=>{var N=Is(),te=c(N);C(()=>T(te,a(P).message)),f(D,N)}),f(p,k)};S(K,p=>{a(o).length>0&&p(ee)})}var Z=g(K,2),de=c(Z);{var Ee=p=>{var k=Cs(),D=c(k);D.__change=[ys,e,i,r,l],C(()=>{Ot(D,"name",`group-${e.group.id}`),Xn(D,a(i))}),f(p,k)},Ye=p=>{var k=As(),D=ze(k),P=c(D);P.__click=[Ds,l];var N=g(P,2);N.__change=[Ts,n];var te=g(N,2);te.__click=[Ms,l];var V=g(D,2);{var ce=ae=>{var ne=Ls(),fe=c(ne);C(Oe=>T(fe,`Total: ${Oe??""}`),[()=>Be(e.option.base_price*a(r))]),f(ae,ne)};S(V,ae=>{a(r)>0&&ae(ce)})}C(()=>{P.disabled=a(r)===0,Ot(N,"max",e.option.max_quantity||999),te.disabled=e.option.max_quantity&&a(r)>=e.option.max_quantity}),Mi(N,()=>a(r),ae=>O(r,ae)),f(p,k)};S(de,p=>{e.group.selection_type==="single"?p(Ee):p(Ye,!1)})}var Ie=g(Z,2);{var j=p=>{var k=Os();f(p,k)},R=(p,k)=>{{var D=P=>{var N=js();f(P,N)};S(p,P=>{e.option.availability==="out_of_stock"&&P(D)},k)}};S(Ie,p=>{e.option.availability==="limited"?p(j):p(R,!1)})}C((p,k)=>{u=he(v,1,"option-card svelte-cwem91",null,u,p),T(y,e.option.name),T(q,`${k??""} `)},[()=>({selected:a(i),"has-errors":a(o).length>0,loading:s}),()=>Be(e.option.base_price)]),f(t,v),Je()}ot(["change","click"]);var zs=(t,e)=>O(e,!a(e)),Rs=w('<span class="required-badge svelte-4o0mr">Required</span>'),qs=w('<span class="selection-type">Single selection</span>'),Ns=w('<span class="selection-type">Multiple selection <!></span>'),Vs=w('<span class="selection-count svelte-4o0mr"> </span>'),Fs=w('<p class="group-description svelte-4o0mr"> </p>'),Us=w('<div class="error-message svelte-4o0mr"><svg class="error-icon svelte-4o0mr" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> </div>'),Bs=w('<div class="group-errors svelte-4o0mr"></div>'),Hs=w('<div class="search-box svelte-4o0mr"><input type="search" placeholder="Search options..." class="search-input svelte-4o0mr"/></div>'),Ys=w('<div class="virtual-scroll-container svelte-4o0mr" style="height: 600px"><div><div></div></div></div>'),Qs=w('<div class="options-grid svelte-4o0mr"></div>'),Gs=w('<div class="no-results svelte-4o0mr"> </div>'),Js=w('<div class="group-content svelte-4o0mr"><!> <!> <!> <div><!></div> <!></div>'),Ws=w('<div><div class="group-header svelte-4o0mr"><div class="header-content svelte-4o0mr"><h3 class="group-title svelte-4o0mr"> <!></h3> <div class="group-meta svelte-4o0mr"><!> <!></div></div> <button class="expand-toggle svelte-4o0mr"><svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div> <!></div>');function Ks(t,e){Ge(e,!0);let r=F(!0),i=F(""),s=F(!1),n=F(null),o,l=Me(()=>e.group.options.filter(j=>j.name.toLowerCase().includes(a(i).toLowerCase())||j.description?.toLowerCase().includes(a(i).toLowerCase())));xe(()=>{a(l).length>20?(O(s,!0),O(n,ms({items:a(l),itemHeight:120,containerHeight:600,buffer:3}),!0)):(O(s,!1),O(n,null))});let v=Me(()=>e.group.options.some(j=>_.selections[j.id]>0)),u=Me(()=>_.validationResults.violations.some(j=>j.group_id===e.group.id||e.group.options.some(R=>j.option_id===R.id))),m=Me(()=>_.validationResults.violations.filter(j=>j.group_id===e.group.id||e.group.options.some(R=>j.option_id===R.id)));function h(j){a(n)&&a(n).updateScroll(j.target.scrollTop)}var d=Ws();let y;var x=c(d);x.__click=[zs,r];var B=c(x),A=c(B),q=c(A),I=g(q);{var E=j=>{var R=Rs();f(j,R)};S(I,j=>{e.group.required&&j(E)})}var b=g(A,2),L=c(b);{var z=j=>{var R=qs();f(j,R)},H=(j,R)=>{{var p=k=>{var D=Ns(),P=g(c(D));{var N=te=>{var V=wt();C(()=>T(V,`(${(e.group.min_selections||0)??""}-${e.group.max_selections||"∞"})`)),f(te,V)};S(P,te=>{(e.group.min_selections>0||e.group.max_selections)&&te(N)})}f(k,D)};S(j,k=>{e.group.selection_type==="multiple"&&k(p)},R)}};S(L,j=>{e.group.selection_type==="single"?j(z):j(H,!1)})}var K=g(L,2);{var ee=j=>{var R=Vs(),p=c(R);C(k=>T(p,`${k??""} selected`),[()=>e.group.options.filter(k=>_.selections[k.id]>0).length]),f(j,R)};S(K,j=>{a(v)&&j(ee)})}var Z=g(B,2),de=c(Z);let Ee;var Ye=g(x,2);{var Ie=j=>{var R=Js(),p=c(R);{var k=U=>{var Q=Fs(),oe=c(Q);C(()=>T(oe,e.group.description)),f(U,Q)};S(p,U=>{e.group.description&&U(k)})}var D=g(p,2);{var P=U=>{var Q=Bs();Ne(Q,21,()=>a(m),qe,(oe,ge)=>{var ke=Us(),Y=g(c(ke));C(()=>T(Y,` ${a(ge).message??""}`)),f(oe,ke)}),f(U,Q)};S(D,U=>{a(m).length>0&&U(P)})}var N=g(D,2);{var te=U=>{var Q=Hs(),oe=c(Q);Mi(oe,()=>a(i),ge=>O(i,ge)),f(U,Q)};S(N,U=>{a(l).length>10&&U(te)})}var V=g(N,2);let ce;var ae=c(V);{var ne=U=>{var Q=Ys(),oe=c(Q),ge=c(oe);Ne(ge,21,()=>a(n)?.visibleItems||[],qe,(ke,Y)=>{Ri(ke,{get option(){return a(Y)},get group(){return e.group}})}),Ai(Q,ke=>o=ke,()=>o),C(()=>{Ar(oe,`height: ${(a(n)?.totalHeight||0)??""}px; position: relative;`),Ar(ge,`transform: translateY(${(a(n)?.offsetY||0)??""}px);`)}),Rn("scroll",Q,h),f(U,Q)},fe=U=>{var Q=Qs();Ne(Q,21,()=>a(l),qe,(oe,ge)=>{Ri(oe,{get option(){return a(ge)},get group(){return e.group}})}),f(U,Q)};S(ae,U=>{a(s)&&a(n)?U(ne):U(fe,!1)})}var Oe=g(V,2);{var Qe=U=>{var Q=Gs(),oe=c(Q);C(()=>T(oe,`No options found matching "${a(i)??""}"`)),f(U,Q)};S(Oe,U=>{a(l).length===0&&U(Qe)})}C(U=>ce=he(V,1,"options-container",null,ce,U),[()=>({virtual:a(s)})]),f(j,R)};S(Ye,j=>{a(r)&&j(Ie)})}C((j,R)=>{y=he(d,1,"option-group svelte-4o0mr",null,y,j),T(q,`${e.group.name??""} `),Ot(Z,"aria-label",a(r)?"Collapse":"Expand"),Ee=he(de,0,"icon svelte-4o0mr",null,Ee,R)},[()=>({"has-errors":a(u)}),()=>({rotated:a(r)})]),f(t,d),Je()}ot(["click"]);var Xs=w('<span class="calculating svelte-jzost2"><span class="spinner svelte-jzost2"></span> Calculating...</span>'),Zs=(t,e)=>O(e,!a(e)),$s=w('<button class="toggle-btn svelte-jzost2"> </button>'),ea=w('<div class="price-row savings svelte-jzost2"><span>Total Savings</span> <span> </span></div>'),ta=w('<div class="price-per-unit svelte-jzost2"> </div>'),ra=w('<span class="item-quantity svelte-jzost2"> </span>'),ia=w('<div class="item-group svelte-jzost2"> </div>'),na=w('<div class="item-reason svelte-jzost2"> </div>'),sa=w('<span class="percentage svelte-jzost2"> </span>'),aa=w("<span> <!></span>"),oa=w('<div><div class="item-info svelte-jzost2"><div class="item-name svelte-jzost2"> <!></div> <!> <!></div> <div class="item-price svelte-jzost2"><!></div></div>'),la=w('<div class="pricing-breakdown svelte-jzost2"><h4 class="breakdown-title svelte-jzost2">Price Breakdown</h4> <div class="breakdown-items svelte-jzost2"></div></div>'),ua=(t,e)=>O(e,!a(e)),va=w('<div class="discount-item svelte-jzost2"><div><div class="discount-name svelte-jzost2"> </div> <div class="discount-tier svelte-jzost2"> </div></div> <div class="discount-save svelte-jzost2"> </div></div>'),ca=w('<div class="volume-details svelte-jzost2"></div>'),da=w('<div class="volume-discounts svelte-jzost2"><button class="volume-header svelte-jzost2"><span>Volume Discounts Applied</span> <span class="discount-amount svelte-jzost2"> </span></button> <!></div>'),fa=w('<div class="pricing-summary svelte-jzost2"><div class="price-row subtotal svelte-jzost2"><span>Subtotal</span> <span> </span></div> <!> <div class="price-row total svelte-jzost2"><span>Total Price</span> <span class="total-amount svelte-jzost2"> </span></div> <!></div> <!> <!>',1),_a=w('<div class="no-selections svelte-jzost2"><p>Select options to see pricing</p></div>'),ha=w('<div class="pricing-display svelte-jzost2"><div class="pricing-header svelte-jzost2"><h3 class="pricing-title svelte-jzost2">Pricing Summary <!></h3> <!></div> <!></div>');function pa(t,e){Ge(e,!0);let r=ye(e,"detailed",3,!0),i=F(Fe(r())),s=F(!1),n=Me(()=>()=>{if(!_.pricingData)return null;const I=_.pricingData,E=[];return _.selectedOptions.forEach(b=>{E.push({type:"option",name:b.name,quantity:b.quantity,unitPrice:b.base_price,total:b.base_price*b.quantity,group:b.group_name})}),I.adjustments&&I.adjustments.forEach(b=>{E.push({type:"adjustment",name:b.description||b.type,reason:b.reason,amount:b.amount,percentage:b.percentage})}),E}),o=Me(()=>()=>_.pricingData?.adjustments?_.pricingData.adjustments.filter(I=>I.type==="volume_discount").map(I=>({...I,saved:Math.abs(I.amount)})):[]),l=Me(()=>()=>_.pricingData?.adjustments?_.pricingData.adjustments.filter(I=>I.amount<0).reduce((I,E)=>I+Math.abs(E.amount),0):0);var v=ha(),u=c(v),m=c(u),h=g(c(m));{var d=I=>{var E=Xs();f(I,E)};S(h,I=>{_.isPricing&&I(d)})}var y=g(m,2);{var x=I=>{var E=$s();E.__click=[Zs,i];var b=c(E);C(()=>T(b,`${a(i)?"Hide":"Show"} Details`)),f(I,E)};S(y,I=>{r()&&a(n)&&a(n).length>0&&I(x)})}var B=g(u,2);{var A=I=>{var E=fa(),b=ze(E),L=c(b),z=g(c(L),2),H=c(z),K=g(L,2);{var ee=D=>{var P=ea(),N=g(c(P),2),te=c(N);C(V=>T(te,`-${V??""}`),[()=>Be(a(l))]),f(D,P)};S(K,D=>{a(l)>0&&D(ee)})}var Z=g(K,2),de=g(c(Z),2),Ee=c(de),Ye=g(Z,2);{var Ie=D=>{var P=ta(),N=c(P);C(te=>T(N,`${te??""} per unit`),[()=>Be(_.pricingData.price_per_unit)]),f(D,P)};S(Ye,D=>{_.pricingData.price_per_unit&&D(Ie)})}var j=g(b,2);{var R=D=>{var P=la(),N=g(c(P),2);Ne(N,21,()=>a(n),qe,(te,V)=>{var ce=oa(),ae=c(ce),ne=c(ae),fe=c(ne),Oe=g(fe);{var Qe=J=>{var ue=ra(),_e=c(ue);C(()=>T(_e,`×${a(V).quantity??""}`)),f(J,ue)};S(Oe,J=>{a(V).quantity>1&&J(Qe)})}var U=g(ne,2);{var Q=J=>{var ue=ia(),_e=c(ue);C(()=>T(_e,a(V).group)),f(J,ue)};S(U,J=>{a(V).group&&J(Q)})}var oe=g(U,2);{var ge=J=>{var ue=na(),_e=c(ue);C(()=>T(_e,a(V).reason)),f(J,ue)};S(oe,J=>{a(V).reason&&J(ge)})}var ke=g(ae,2),Y=c(ke);{var se=J=>{var ue=wt();C(_e=>T(ue,_e),[()=>Be(a(V).total)]),f(J,ue)},je=(J,ue)=>{{var _e=Ze=>{var re=aa();let Pe;var $e=c(re),_t=g($e);{var be=Ce=>{var nt=sa(),Rr=c(nt);C(()=>T(Rr,`(${a(V).percentage??""}%)`)),f(Ce,nt)};S(_t,Ce=>{a(V).percentage&&Ce(be)})}C((Ce,nt)=>{Pe=he(re,1,"svelte-jzost2",null,Pe,Ce),T($e,`${a(V).amount<0?"-":"+"}${nt??""} `)},[()=>({discount:a(V).amount<0}),()=>Be(Math.abs(a(V).amount))]),f(Ze,re)};S(J,Ze=>{a(V).type==="adjustment"&&Ze(_e)},ue)}};S(Y,J=>{a(V).type==="option"?J(se):J(je,!1)})}C(()=>{he(ce,1,`breakdown-item type-${a(V).type??""}`,"svelte-jzost2"),T(fe,`${a(V).name??""} `)}),f(te,ce)}),f(D,P)};S(j,D=>{a(i)&&a(n)&&D(R)})}var p=g(j,2);{var k=D=>{var P=da(),N=c(P);N.__click=[ua,s];var te=g(c(N),2),V=c(te),ce=g(N,2);{var ae=ne=>{var fe=ca();Ne(fe,21,()=>a(o),qe,(Oe,Qe)=>{var U=va(),Q=c(U),oe=c(Q),ge=c(oe),ke=g(oe,2),Y=c(ke),se=g(Q,2),je=c(se);C(J=>{T(ge,a(Qe).description),T(Y,`Tier: ${a(Qe).tier_name||"Volume"}`),T(je,`Save ${J??""}`)},[()=>Be(a(Qe).saved)]),f(Oe,U)}),f(ne,fe)};S(ce,ne=>{a(s)&&ne(ae)})}C(ne=>T(V,`Save ${ne??""}`),[()=>Be(a(o).reduce((ne,fe)=>ne+fe.saved,0))]),f(D,P)};S(p,D=>{a(o).length>0&&D(k)})}C((D,P)=>{T(H,D),T(Ee,P)},[()=>Be(_.basePrice),()=>Be(_.totalPrice)]),f(I,E)},q=(I,E)=>{{var b=L=>{var z=_a();f(L,z)};S(I,L=>{!_.isPricing&&_.selectedOptions.length===0&&L(b)},E)}};S(B,I=>{_.pricingData?I(A):I(q,!1)})}f(t,v),Je()}ot(["click"]);var ga=w('<span class="validating-indicator svelte-hbmmex"><span class="spinner svelte-hbmmex"></span> Checking...</span>'),ma=Lr('<svg class="status-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> Valid',1),ya=Lr('<svg class="status-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> ',1),ba=w("<div><!></div>"),wa=(t,e)=>O(e,"all"),xa=(t,e)=>O(e,"error"),Sa=w("<button> </button>"),Ea=(t,e)=>O(e,"warning"),Ia=w("<button> </button>"),ka=(t,e)=>O(e,"info"),Ca=w("<button> </button>"),Da=w('<div class="violation-details svelte-hbmmex"> </div>'),Ta=w('<span class="affected-option svelte-hbmmex"> </span> <!>',1),Ma=w('<div class="affected-options svelte-hbmmex">Affects: <!></div>'),La=w('<div class="rule-expression svelte-hbmmex">Rule: <code class="svelte-hbmmex"> </code></div>'),Aa=w("<li> </li>"),Oa=w('<div class="violation-suggestions svelte-hbmmex"><div class="suggestions-title svelte-hbmmex">Suggestions:</div> <ul class="suggestions-list svelte-hbmmex"></ul></div>'),ja=(t,e,r)=>e(a(r)),Pa=w('<button class="auto-fix-btn svelte-hbmmex"><svg class="fix-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path></svg> Auto-fix</button>'),za=w('<div><div class="violation-header svelte-hbmmex"><svg class="violation-icon svelte-hbmmex" viewBox="0 0 20 20"><!></svg> <div class="violation-content svelte-hbmmex"><div class="violation-message svelte-hbmmex"> </div> <!> <!> <!></div></div> <!> <!></div>'),Ra=w('<div class="validation-filters svelte-hbmmex"><button> </button> <!> <!> <!></div> <div class="violations-list svelte-hbmmex"></div>',1),qa=w('<div class="valid-message svelte-hbmmex"><svg class="valid-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <p class="svelte-hbmmex">Your configuration is valid and meets all requirements.</p></div>'),Na=w('<div class="validation-display svelte-hbmmex"><div class="validation-header svelte-hbmmex"><h3 class="validation-title svelte-hbmmex">Configuration Validation <!></h3> <!></div> <!></div>');function Va(t,e){Ge(e,!0);let r=!0,i=F("all"),s=Me(()=>()=>{const E=_.validationResults.violations||[],b={error:[],warning:[],info:[]};return E.forEach(L=>{const z=L.severity||"error";b[z]&&b[z].push(L)}),b}),n=Me(()=>()=>a(i)==="all"?_.validationResults.violations||[]:a(s)()[a(i)]||[]);function o(E){switch(E){case"warning":return'<path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />';case"info":return'<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />';default:return'<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />'}}function l(E){switch(E){case"warning":return"var(--warning)";case"info":return"var(--primary)";default:return"var(--error)"}}function v(E){if(E.auto_fix_action){const b=E.auto_fix_action;b.type==="add_selection"?_.updateSelection(b.option_id,b.quantity||1):b.type==="remove_selection"&&_.updateSelection(b.option_id,0)}}var u=Na(),m=c(u),h=c(m),d=g(c(h));{var y=E=>{var b=ga();f(E,b)};S(d,E=>{_.isValidating&&E(y)})}var x=g(h,2);{var B=E=>{var b=ba();let L;var z=c(b);{var H=ee=>{var Z=ma();f(ee,Z)},K=ee=>{var Z=ya(),de=g(ze(Z));C(()=>T(de,`${a(n).length??""} Issues`)),f(ee,Z)};S(z,ee=>{_.isValid?ee(H):ee(K,!1)})}C(ee=>L=he(b,1,"validation-status svelte-hbmmex",null,L,ee),[()=>({valid:_.isValid})]),f(E,b)};S(x,E=>{_.isValidating||E(B)})}var A=g(m,2);{var q=E=>{var b=Ra(),L=ze(b),z=c(L);let H;z.__click=[wa,i];var K=c(z),ee=g(z,2);{var Z=R=>{var p=Sa();let k;p.__click=[xa,i];var D=c(p);C((P,N)=>{k=he(p,1,"filter-btn error svelte-hbmmex",null,k,P),T(D,`Errors (${N??""})`)},[()=>({active:a(i)==="error"}),()=>a(s)().error.length]),f(R,p)};S(ee,R=>{a(s)().error.length>0&&R(Z)})}var de=g(ee,2);{var Ee=R=>{var p=Ia();let k;p.__click=[Ea,i];var D=c(p);C((P,N)=>{k=he(p,1,"filter-btn warning svelte-hbmmex",null,k,P),T(D,`Warnings (${N??""})`)},[()=>({active:a(i)==="warning"}),()=>a(s)().warning.length]),f(R,p)};S(de,R=>{a(s)().warning.length>0&&R(Ee)})}var Ye=g(de,2);{var Ie=R=>{var p=Ca();let k;p.__click=[ka,i];var D=c(p);C((P,N)=>{k=he(p,1,"filter-btn info svelte-hbmmex",null,k,P),T(D,`Info (${N??""})`)},[()=>({active:a(i)==="info"}),()=>a(s)().info.length]),f(R,p)};S(Ye,R=>{a(s)().info.length>0&&R(Ie)})}var j=g(L,2);Ne(j,21,()=>a(n),qe,(R,p)=>{var k=za(),D=c(k),P=c(D),N=c(P);Qn(N,()=>o(a(p).severity||"error"),!0);var te=g(P,2),V=c(te),ce=c(V),ae=g(V,2);{var ne=Y=>{var se=Da(),je=c(se);C(()=>T(je,a(p).details)),f(Y,se)};S(ae,Y=>{a(p).details&&Y(ne)})}var fe=g(ae,2);{var Oe=Y=>{var se=Ma(),je=g(c(se));Ne(je,17,()=>a(p).affected_options,qe,(J,ue,_e)=>{var Ze=Ta(),re=ze(Ze),Pe=c(re),$e=g(re,2);{var _t=be=>{var Ce=wt(",");f(be,Ce)};S($e,be=>{_e<a(p).affected_options.length-1&&be(_t)})}C(be=>T(Pe,be),[()=>_.model?.option_groups.flatMap(be=>be.options).find(be=>be.id===a(ue))?.name||a(ue)]),f(J,Ze)}),f(Y,se)};S(fe,Y=>{a(p).affected_options&&a(p).affected_options.length>0&&Y(Oe)})}var Qe=g(fe,2);{var U=Y=>{var se=La(),je=g(c(se)),J=c(je);C(()=>T(J,a(p).rule_expression)),f(Y,se)};S(Qe,Y=>{a(p).rule_expression&&r&&Y(U)})}var Q=g(D,2);{var oe=Y=>{var se=Oa(),je=g(c(se),2);Ne(je,21,()=>a(p).suggestions,qe,(J,ue)=>{var _e=Aa(),Ze=c(_e);C(()=>T(Ze,a(ue))),f(J,_e)}),f(Y,se)};S(Q,Y=>{a(p).suggestions&&a(p).suggestions.length>0&&Y(oe)})}var ge=g(Q,2);{var ke=Y=>{var se=Pa();se.__click=[ja,v,p],f(Y,se)};S(ge,Y=>{a(p).auto_fix_action&&Y(ke)})}C(Y=>{he(k,1,`violation-item severity-${a(p).severity||"error"}`,"svelte-hbmmex"),Ot(P,"fill",Y),T(ce,a(p).message)},[()=>l(a(p).severity||"error")]),f(R,k)}),C(R=>{H=he(z,1,"filter-btn svelte-hbmmex",null,H,R),T(K,`All (${_.validationResults.violations.length??""})`)},[()=>({active:a(i)==="all"})]),f(E,b)},I=(E,b)=>{{var L=z=>{var H=qa();f(z,H)};S(E,z=>{_.isValid&&!_.isValidating&&z(L)},b)}};S(A,E=>{!_.isValid&&a(n).length>0?E(q):E(I,!1)})}f(t,u),Je()}ot(["click"]),ln();async function Fa(){try{await _.saveConfiguration()}catch(t){console.error("Failed to save:",t)}}var Ua=w('<div class="configuration-summary svelte-31i1s8"><h3 class="svelte-31i1s8">Configuration Summary</h3> <div class="summary-stats svelte-31i1s8"><div class="stat svelte-31i1s8"><span class="stat-value svelte-31i1s8"> </span> <span class="stat-label svelte-31i1s8">Options Selected</span></div> <div class="stat svelte-31i1s8"><span class="stat-value svelte-31i1s8"> </span> <span class="stat-label svelte-31i1s8">Total Price</span></div></div> <div class="summary-actions svelte-31i1s8"><button class="action-btn primary svelte-31i1s8">Save Configuration</button> <button class="action-btn secondary svelte-31i1s8">Export</button></div></div>');function Ba(t,e){Ge(e,!1);function r(){const x={modelId:_.modelId,modelName:_.model?.name,selections:_.selections,pricing:_.pricingData,timestamp:new Date().toISOString()},B=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),A=URL.createObjectURL(B),q=document.createElement("a");q.href=A,q.download=`configuration-${Date.now()}.json`,q.click(),URL.revokeObjectURL(A)}Oi();var i=Ua(),s=g(c(i),2),n=c(s),o=c(n),l=c(o),v=g(n,2),u=c(v),m=c(u),h=g(s,2),d=c(h);d.__click=[Fa];var y=g(d,2);y.__click=r,C(x=>{T(l,_.selectedOptions.length),T(m,x)},[()=>Be(_.totalPrice)],Zr),f(t,i),Je()}ot(["click"]);var Ha=w(`<div class="network-banner offline svelte-id3e46"><svg class="icon svelte-id3e46" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd"></path><path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"></path></svg> <span>You're offline - changes will be saved when connection is restored</span></div>`);function Ya(t,e){Ge(e,!0);let r=F(!1);xe(()=>{O(r,!_.isOnline)});var i=xt(),s=ze(i);{var n=o=>{var l=Ha();f(o,l)};S(s,o=>{a(r)&&o(n)})}f(t,i),Je()}var Qa=()=>_.undo(),Ga=()=>_.redo(),Ja=w('<div class="undo-redo svelte-2vt889"><button class="action-btn svelte-2vt889" title="Undo"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-2vt889"><path d="M12.207 2.293a1 1 0 010 1.414L10.914 5H13a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5h-2.586l1.293 1.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z"></path></svg></button> <button class="action-btn svelte-2vt889" title="Redo"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-2vt889"><path d="M7.793 2.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L9.086 7H7a5 5 0 00-5 5v2a1 1 0 11-2 0v-2a7 7 0 017-7h2.586L7.793 3.707a1 1 0 010-1.414z"></path></svg></button></div>');function Wa(t,e){Ge(e,!1),Oi();var r=Ja(),i=c(r);i.__click=[Qa];var s=g(i,2);s.__click=[Ga],C(()=>{i.disabled=!_.canUndo,s.disabled=!_.canRedo}),f(t,r),Je()}ot(["click"]);var Ka=w('<div class="error-state svelte-1m2ujmu"><svg class="error-icon svelte-1m2ujmu" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <h2 class="svelte-1m2ujmu">Model Not Found</h2> <p class="svelte-1m2ujmu"> </p> <p class="error-details svelte-1m2ujmu">Please check the model ID and try again.</p></div>'),Xa=w('<p class="configurator-description svelte-1m2ujmu"> </p>'),Za=()=>_.previousStep(),$a=w('<span class="save-indicator svelte-1m2ujmu"><!></span>'),eo=(t,e)=>{_.currentStep===3?e():_.nextStep()},to=w('<div class="configurator-header svelte-1m2ujmu"><div class="header-content"><h1 class="configurator-title svelte-1m2ujmu"> </h1> <!></div> <!></div> <!> <div><div class="options-panel svelte-1m2ujmu"><!></div> <div class="sidebar-panel svelte-1m2ujmu"><!> <!> <!></div></div> <div class="configurator-actions svelte-1m2ujmu"><button type="button" class="btn btn-secondary svelte-1m2ujmu">Previous</button> <div class="action-group svelte-1m2ujmu"><!> <button type="button" class="btn btn-primary svelte-1m2ujmu"> </button></div></div>',1),ro=w('<div class="no-model svelte-1m2ujmu"><p>No model selected</p></div>'),io=w('<div class="configurator-content svelte-1m2ujmu"><!></div>'),no=w("<div><!> <!></div>");function so(t,e){Ge(e,!0);let r=ye(e,"theme",3,"light"),i=ye(e,"apiUrl",3,"http://localhost:8080/api/v1"),s=ye(e,"embedMode",3,!1),n=ye(e,"onComplete",3,null),o=ye(e,"onConfigurationChange",3,null),l=ye(e,"onError",3,null),v;typeof window<"u"&&(window.__API_BASE_URL__=i()),Pi(()=>{if(_.initialize(i()),e.modelId&&setTimeout(()=>{_.setModelId(e.modelId)},0),document.documentElement.setAttribute("data-theme",r()),o()){const A=mt(()=>{xe(()=>{_.isDirty&&_.selections&&o()({selections:_.selections,validation:_.validationResults,pricing:_.pricingData})})});return()=>A()}}),$n(()=>{_.destroy()});function u(){const A={modelId:_.modelId,selections:_.selections,pricing:_.pricingData,validation:_.validationResults};n()&&n()(A)}function m(A){console.error("Configuration error:",A),l()&&l()(A)}function h(){_.clearError(),_.loadModel()}xe(()=>{_.error&&m(_.error)});var d=no();let y;var x=c(d);Ya(x,{});var B=g(x,2);gs(B,{get error(){return _.error},onRetry:h,children:q=>{var I=io(),E=c(I);{var b=z=>{var H=Ka(),K=g(c(H),4),ee=c(K);C(()=>T(ee,`The model with ID "${e.modelId??""}" could not be found.`)),f(z,H)},L=(z,H)=>{{var K=Z=>{fs(Z,{size:"large",message:"Loading configuration..."})},ee=(Z,de)=>{{var Ee=Ie=>{var j=to(),R=ze(j),p=c(R),k=c(p),D=c(k),P=g(k,2);{var N=re=>{var Pe=Xa(),$e=c(Pe);C(()=>T($e,_.model.description)),f(re,Pe)};S(P,re=>{_.model.description&&re(N)})}var te=g(p,2);Wa(te,{});var V=g(R,2);vs(V,{get currentStep(){return _.currentStep},get completionPercentage(){return _.completionPercentage}});var ce=g(V,2);let ae;var ne=c(ce),fe=c(ne);{var Oe=re=>{var Pe=xt(),$e=ze(Pe);Ne($e,17,()=>_.model.option_groups,qe,(_t,be)=>{Ks(_t,{get group(){return a(be)}})}),f(re,Pe)};S(fe,re=>{_.model.option_groups&&re(Oe)})}var Qe=g(ne,2),U=c(Qe);Va(U,{});var Q=g(U,2);const oe=Me(()=>!s());pa(Q,{get detailed(){return a(oe)}});var ge=g(Q,2);{var ke=re=>{Ba(re,{})};S(ge,re=>{_.completionPercentage===100&&re(ke)})}var Y=g(ce,2),se=c(Y);se.__click=[Za];var je=g(se,2),J=c(je);{var ue=re=>{var Pe=$a(),$e=c(Pe);{var _t=Ce=>{var nt=wt();C(Rr=>T(nt,`Last saved ${Rr??""}`),[()=>new Date(_.lastSaved).toLocaleTimeString()]),f(Ce,nt)},be=Ce=>{var nt=wt("Unsaved changes");f(Ce,nt)};S($e,Ce=>{_.lastSaved?Ce(_t):Ce(be,!1)})}f(re,Pe)};S(J,re=>{_.isDirty&&re(ue)})}var _e=g(J,2);_e.__click=[eo,u];var Ze=c(_e);C(re=>{T(D,_.model.name),ae=he(ce,1,"configurator-body svelte-1m2ujmu",null,ae,re),se.disabled=_.currentStep===0,_e.disabled=!_.canProceedToNextStep&&_.currentStep<3,T(Ze,_.currentStep===3?"Complete":"Next")},[()=>({compact:s()})]),f(Ie,j)},Ye=Ie=>{var j=ro();f(Ie,j)};S(Z,Ie=>{_.model?Ie(Ee):Ie(Ye,!1)},de)}};S(z,Z=>{_.isLoading?Z(K):Z(ee,!1)},H)}};S(E,z=>{_.error&&_.error.code==="NOT_FOUND"?z(b):z(L,!1)})}f(q,I)},$$slots:{default:!0}}),Ai(d,A=>v=A,()=>v),C(A=>{y=he(d,1,"cpq-configurator svelte-1m2ujmu",null,y,A),Ot(d,"data-theme",r())},[()=>({"embed-mode":s()})]),f(t,d),Je()}ot(["click"]);const zr=new URLSearchParams(window.location.search),ao=zr.get("model")||window.location.pathname.split("/").pop(),oo=zr.get("theme")||"light",lo=zr.get("api")||"http://localhost:8080/api/v1";return Nn(so,{target:document.body,props:{modelId:ao,theme:oo,apiUrl:lo,embedMode:!0,onComplete:t=>{window.parent!==window&&window.parent.postMessage({type:"cpq-configuration-complete",configuration:t},"*")},onConfigurationChange:t=>{window.parent!==window&&window.parent.postMessage({type:"cpq-configuration-change",configuration:t},"*")},onError:t=>{window.parent!==window&&window.parent.postMessage({type:"cpq-error",error:t.message},"*")}}})}();
