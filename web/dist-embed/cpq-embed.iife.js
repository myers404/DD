var CPQEmbed=function(){"use strict";var ti=le=>{throw TypeError(le)};var ri=(le,ae,Ae)=>ae.has(le)||ti("Cannot "+Ae);var G=(le,ae,Ae)=>(ri(le,ae,"read from private field"),Ae?Ae.call(le):ae.get(le)),ve=(le,ae,Ae)=>ae.has(le)?ti("Cannot add the same private member more than once"):ae instanceof WeakSet?ae.add(le):ae.set(le,Ae),de=(le,ae,Ae,Xe)=>(ri(le,ae,"write to private field"),Xe?Xe.call(le,Ae):ae.set(le,Ae),Ae);var ei,it,st,nt,ot,at,lt,ut,ct,vt,dt,ft,_t,pt,ht,gt;var ae=Array.isArray,Ae=Array.prototype.indexOf,Xe=Array.from,ii=Object.defineProperty,$e=Object.getOwnPropertyDescriptor,si=Object.getOwnPropertyDescriptors,ni=Object.prototype,oi=Array.prototype,lr=Object.getPrototypeOf,ur=Object.isExtensible;function ai(t){for(var e=0;e<t.length;e++)t[e]()}function li(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const r=[];for(const s of t)if(r.push(s),r.length===e)break;return r}const Ee=2,cr=4,wt=8,Ut=16,Te=32,He=64,Vt=128,me=256,At=512,ye=1024,qe=2048,We=4096,De=8192,Bt=16384,vr=32768,Gt=65536,ui=1<<19,dr=1<<20,Yt=1<<21,et=Symbol("$state"),ci=Symbol("legacy props"),vi=Symbol("");function fr(t){return t===this.v}function di(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Ht(t){return!di(t,this.v)}function fi(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function _i(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function pi(t){throw new Error("https://svelte.dev/e/effect_orphan")}function hi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function gi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function mi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function yi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function bi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let lo=!1;const Wt=1,Jt=2,_r=4,wi=8,Ai=16,ki=1,Si=4,Ei=8,xi=16,Ii=1,Pi=2,_e=Symbol(),Ci="http://www.w3.org/1999/xhtml";function pr(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let pe=null;function hr(t){pe=t}function Me(t,e=!1,r){var s=pe={p:pe,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Pr(()=>{s.d=!0})}function Re(t){const e=pe;if(e!==null){const o=e.e;if(o!==null){var r=J,s=W;e.e=null;try{for(var i=0;i<o.length;i++){var n=o[i];Be(n.effect),Oe(n.reaction),Cr(n.fn)}}finally{Be(r),Oe(s)}}pe=e.p,e.m=!0}return{}}function gr(){return!0}function Ne(t){if(typeof t!="object"||t===null||et in t)return t;const e=lr(t);if(e!==ni&&e!==oi)return t;var r=new Map,s=ae(t),i=Y(0),n=W,o=u=>{var a=W;Oe(n);var c=u();return Oe(a),c};return s&&r.set("length",Y(t.length)),new Proxy(t,{defineProperty(u,a,c){return(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&mi(),o(()=>{var p=r.get(a);p===void 0?(p=Y(c.value),r.set(a,p)):T(p,c.value,!0)}),!0},deleteProperty(u,a){var c=r.get(a);if(c===void 0){if(a in u){const l=o(()=>Y(_e));r.set(a,l),Kt(i)}}else{if(s&&typeof a=="string"){var p=r.get("length"),f=Number(a);Number.isInteger(f)&&f<p.v&&T(p,f)}T(c,_e),Kt(i)}return!0},get(u,a,c){if(a===et)return t;var p=r.get(a),f=a in u;if(p===void 0&&(!f||$e(u,a)?.writable)&&(p=o(()=>{var _=Ne(f?u[a]:_e),g=Y(_);return g}),r.set(a,p)),p!==void 0){var l=d(p);return l===_e?void 0:l}return Reflect.get(u,a,c)},getOwnPropertyDescriptor(u,a){var c=Reflect.getOwnPropertyDescriptor(u,a);if(c&&"value"in c){var p=r.get(a);p&&(c.value=d(p))}else if(c===void 0){var f=r.get(a),l=f?.v;if(f!==void 0&&l!==_e)return{enumerable:!0,configurable:!0,value:l,writable:!0}}return c},has(u,a){if(a===et)return!0;var c=r.get(a),p=c!==void 0&&c.v!==_e||Reflect.has(u,a);if(c!==void 0||J!==null&&(!p||$e(u,a)?.writable)){c===void 0&&(c=o(()=>{var l=p?Ne(u[a]):_e,_=Y(l);return _}),r.set(a,c));var f=d(c);if(f===_e)return!1}return p},set(u,a,c,p){var f=r.get(a),l=a in u;if(s&&a==="length")for(var _=c;_<f.v;_+=1){var g=r.get(_+"");g!==void 0?T(g,_e):_ in u&&(g=o(()=>Y(_e)),r.set(_+"",g))}if(f===void 0)(!l||$e(u,a)?.writable)&&(f=o(()=>{var x=Y(void 0);return T(x,Ne(c)),x}),r.set(a,f));else{l=f.v!==_e;var C=o(()=>Ne(c));T(f,C)}var S=Reflect.getOwnPropertyDescriptor(u,a);if(S?.set&&S.set.call(p,c),!l){if(s&&typeof a=="string"){var F=r.get("length"),M=Number(a);Number.isInteger(M)&&M>=F.v&&T(F,M+1)}Kt(i)}return!0},ownKeys(u){d(i);var a=Reflect.ownKeys(u).filter(f=>{var l=r.get(f);return l===void 0||l.v!==_e});for(var[c,p]of r)p.v!==_e&&!(c in u)&&a.push(c);return a},setPrototypeOf(){yi()}})}function Kt(t,e=1){T(t,t.v+e)}function mr(t){try{if(t!==null&&typeof t=="object"&&et in t)return t[et]}catch{}return t}function Oi(t,e){return Object.is(mr(t),mr(e))}function kt(t){var e=Ee|qe,r=W!==null&&(W.f&Ee)!==0?W:null;return J===null||r!==null&&(r.f&me)!==0?e|=me:J.f|=dr,{ctx:pe,deps:null,effects:null,equals:fr,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??J}}function xe(t){const e=kt(t);return jr(e),e}function Ti(t){const e=kt(t);return e.equals=Ht,e}function yr(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)ze(e[r])}}function qi(t){for(var e=t.parent;e!==null;){if((e.f&Ee)===0)return e;e=e.parent}return null}function br(t){var e,r=J;Be(qi(t));try{yr(t),e=Ur(t)}finally{Be(r)}return e}function wr(t){var e=br(t);if(t.equals(e)||(t.v=e,t.wv=Lr()),!tt){var r=(Ge||(t.f&me)!==0)&&t.deps!==null?We:ye;Ie(t,r)}}const mt=new Map;function St(t,e){var r={f:0,v:t,reactions:null,equals:fr,rv:0,wv:0};return r}function Y(t,e){const r=St(t);return jr(r),r}function Ar(t,e=!1,r=!0){const s=St(t);return e||(s.equals=Ht),s}function T(t,e,r=!1){W!==null&&!Ce&&gr()&&(W.f&(Ee|Ut))!==0&&!Le?.includes(t)&&bi();let s=r?Ne(e):e;return Qt(t,s)}function Qt(t,e){if(!t.equals(e)){var r=t.v;tt?mt.set(t,e):mt.set(t,r),t.v=e,(t.f&Ee)!==0&&((t.f&qe)!==0&&br(t),Ie(t,(t.f&me)===0?ye:We)),t.wv=Lr(),kr(t,qe),J!==null&&(J.f&ye)!==0&&(J.f&(Te|He))===0&&(ke===null?Yi([t]):ke.push(t))}return e}function kr(t,e){var r=t.reactions;if(r!==null)for(var s=r.length,i=0;i<s;i++){var n=r[i],o=n.f;(o&qe)===0&&(Ie(n,e),(o&(ye|me))!==0&&((o&Ee)!==0?kr(n,We):Nt(n)))}}let Di=!1;var Sr,Er,xr,Ir;function Mi(){if(Sr===void 0){Sr=window,Er=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;xr=$e(e,"firstChild").get,Ir=$e(e,"nextSibling").get,ur(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),ur(r)&&(r.__t=void 0)}}function Et(t=""){return document.createTextNode(t)}function xt(t){return xr.call(t)}function It(t){return Ir.call(t)}function v(t,e){return xt(t)}function je(t,e){{var r=xt(t);return r instanceof Comment&&r.data===""?It(r):r}}function h(t,e=1,r=!1){let s=t;for(;e--;)s=It(s);return s}function Ri(t){t.textContent=""}function Ni(t){J===null&&W===null&&pi(),W!==null&&(W.f&me)!==0&&J===null&&_i(),tt&&fi()}function ji(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Je(t,e,r,s=!0){var i=J,n={ctx:pe,deps:null,nodes_start:null,nodes_end:null,f:t|qe,first:null,fn:e,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(r)try{tr(n),n.f|=vr}catch(a){throw ze(n),a}else e!==null&&Nt(n);var o=r&&n.deps===null&&n.first===null&&n.nodes_start===null&&n.teardown===null&&(n.f&(dr|Vt))===0;if(!o&&s&&(i!==null&&ji(n,i),W!==null&&(W.f&Ee)!==0)){var u=W;(u.effects??(u.effects=[])).push(n)}return n}function Pr(t){const e=Je(wt,null,!1);return Ie(e,ye),e.teardown=t,e}function Ve(t){Ni();var e=J!==null&&(J.f&Te)!==0&&pe!==null&&!pe.m;if(e){var r=pe;(r.e??(r.e=[])).push({fn:t,effect:J,reaction:W})}else{var s=Cr(t);return s}}function zi(t){const e=Je(He,t,!0);return()=>{ze(e)}}function Li(t){const e=Je(He,t,!0);return(r={})=>new Promise(s=>{r.outro?Pt(e,()=>{ze(e),s(void 0)}):(ze(e),s(void 0))})}function Cr(t){return Je(cr,t,!1)}function Fi(t){return Je(wt,t,!0)}function q(t,e=[],r=kt){const s=e.map(r);return Zt(()=>t(...s.map(d)))}function Zt(t,e=0){return Je(wt|Ut|e,t,!0)}function yt(t,e=!0){return Je(wt|Te,t,!0,e)}function Or(t){var e=t.teardown;if(e!==null){const r=tt,s=W;Nr(!0),Oe(null);try{e.call(null)}finally{Nr(r),Oe(s)}}}function Tr(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var s=r.next;(r.f&He)!==0?r.parent=null:ze(r,e),r=s}}function Ui(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Te)===0&&ze(e),e=r}}function ze(t,e=!0){var r=!1;(e||(t.f&ui)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Vi(t.nodes_start,t.nodes_end),r=!0),Tr(t,e&&!r),Rt(t,0),Ie(t,Bt);var s=t.transitions;if(s!==null)for(const n of s)n.stop();Or(t);var i=t.parent;i!==null&&i.first!==null&&qr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Vi(t,e){for(;t!==null;){var r=t===e?null:It(t);t.remove(),t=r}}function qr(t){var e=t.parent,r=t.prev,s=t.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=r))}function Pt(t,e){var r=[];Xt(t,r,!0),Dr(r,()=>{ze(t),e&&e()})}function Dr(t,e){var r=t.length;if(r>0){var s=()=>--r||e();for(var i of t)i.out(s)}else e()}function Xt(t,e,r){if((t.f&De)===0){if(t.f^=De,t.transitions!==null)for(const o of t.transitions)(o.is_global||r)&&e.push(o);for(var s=t.first;s!==null;){var i=s.next,n=(s.f&Gt)!==0||(s.f&Te)!==0;Xt(s,e,n?r:!1),s=i}}}function Ct(t){Mr(t,!0)}function Mr(t,e){if((t.f&De)!==0){t.f^=De,(t.f&ye)!==0&&(Ie(t,qe),Nt(t));for(var r=t.first;r!==null;){var s=r.next,i=(r.f&Gt)!==0||(r.f&Te)!==0;Mr(r,i?e:!1),r=s}if(t.transitions!==null)for(const n of t.transitions)(n.is_global||e)&&n.in()}}let Ot=[];function Bi(){var t=Ot;Ot=[],ai(t)}function $t(t){Ot.length===0&&queueMicrotask(Bi),Ot.push(t)}function Gi(t){var e=J;if((e.f&vr)===0){if((e.f&Vt)===0)throw t;e.fn(t)}else Rr(t,e)}function Rr(t,e){for(;e!==null;){if((e.f&Vt)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let er=!1,Tt=null,Ke=!1,tt=!1;function Nr(t){tt=t}let qt=[],uo=[],W=null,Ce=!1;function Oe(t){W=t}let J=null;function Be(t){J=t}let Le=null;function jr(t){W!==null&&W.f&Yt&&(Le===null?Le=[t]:Le.push(t))}let fe=null,be=0,ke=null;function Yi(t){ke=t}let zr=1,Dt=0,Ge=!1;function Lr(){return++zr}function Mt(t){var e=t.f;if((e&qe)!==0)return!0;if((e&We)!==0){var r=t.deps,s=(e&me)!==0;if(r!==null){var i,n,o=(e&At)!==0,u=s&&J!==null&&!Ge,a=r.length;if(o||u){var c=t,p=c.parent;for(i=0;i<a;i++)n=r[i],(o||!n?.reactions?.includes(c))&&(n.reactions??(n.reactions=[])).push(c);o&&(c.f^=At),u&&p!==null&&(p.f&me)===0&&(c.f^=me)}for(i=0;i<a;i++)if(n=r[i],Mt(n)&&wr(n),n.wv>t.wv)return!0}(!s||J!==null&&!Ge)&&Ie(t,ye)}return!1}function Fr(t,e,r=!0){var s=t.reactions;if(s!==null)for(var i=0;i<s.length;i++){var n=s[i];Le?.includes(t)||((n.f&Ee)!==0?Fr(n,e,!1):e===n&&(r?Ie(n,qe):(n.f&ye)!==0&&Ie(n,We),Nt(n)))}}function Ur(t){var _;var e=fe,r=be,s=ke,i=W,n=Ge,o=Le,u=pe,a=Ce,c=t.f;fe=null,be=0,ke=null,Ge=(c&me)!==0&&(Ce||!Ke||W===null),W=(c&(Te|He))===0?t:null,Le=null,hr(t.ctx),Ce=!1,Dt++,t.f|=Yt;try{var p=(0,t.fn)(),f=t.deps;if(fe!==null){var l;if(Rt(t,be),f!==null&&be>0)for(f.length=be+fe.length,l=0;l<fe.length;l++)f[be+l]=fe[l];else t.deps=f=fe;if(!Ge)for(l=be;l<f.length;l++)((_=f[l]).reactions??(_.reactions=[])).push(t)}else f!==null&&be<f.length&&(Rt(t,be),f.length=be);if(gr()&&ke!==null&&!Ce&&f!==null&&(t.f&(Ee|We|qe))===0)for(l=0;l<ke.length;l++)Fr(ke[l],t);return i!==null&&i!==t&&(Dt++,ke!==null&&(s===null?s=ke:s.push(...ke))),p}catch(g){Gi(g)}finally{fe=e,be=r,ke=s,W=i,Ge=n,Le=o,hr(u),Ce=a,t.f^=Yt}}function Hi(t,e){let r=e.reactions;if(r!==null){var s=Ae.call(r,t);if(s!==-1){var i=r.length-1;i===0?r=e.reactions=null:(r[s]=r[i],r.pop())}}r===null&&(e.f&Ee)!==0&&(fe===null||!fe.includes(e))&&(Ie(e,We),(e.f&(me|At))===0&&(e.f^=At),yr(e),Rt(e,0))}function Rt(t,e){var r=t.deps;if(r!==null)for(var s=e;s<r.length;s++)Hi(t,r[s])}function tr(t){var e=t.f;if((e&Bt)===0){Ie(t,ye);var r=J,s=Ke;J=t,Ke=!0;try{(e&Ut)!==0?Ui(t):Tr(t),Or(t);var i=Ur(t);t.teardown=typeof i=="function"?i:null,t.wv=zr;var n}finally{Ke=s,J=r}}}function Wi(){try{hi()}catch(t){if(Tt!==null)Rr(t,Tt);else throw t}}function Ji(){var t=Ke;try{var e=0;for(Ke=!0;qt.length>0;){e++>1e3&&Wi();var r=qt,s=r.length;qt=[];for(var i=0;i<s;i++){var n=Qi(r[i]);Ki(n)}mt.clear()}}finally{er=!1,Ke=t,Tt=null}}function Ki(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var s=t[r];(s.f&(Bt|De))===0&&Mt(s)&&(tr(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null?qr(s):s.fn=null))}}function Nt(t){er||(er=!0,queueMicrotask(Ji));for(var e=Tt=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(He|Te))!==0){if((r&ye)===0)return;e.f^=ye}}qt.push(e)}function Qi(t){for(var e=[],r=t;r!==null;){var s=r.f,i=(s&(Te|He))!==0,n=i&&(s&ye)!==0;if(!n&&(s&De)===0){(s&cr)!==0?e.push(r):i?r.f^=ye:Mt(r)&&tr(r);var o=r.first;if(o!==null){r=o;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)r=u.next,u=u.parent}return e}function d(t){var e=t.f,r=(e&Ee)!==0;if(W!==null&&!Ce){if(!Le?.includes(t)){var s=W.deps;t.rv<Dt&&(t.rv=Dt,fe===null&&s!==null&&s[be]===t?be++:fe===null?fe=[t]:(!Ge||!fe.includes(t))&&fe.push(t))}}else if(r&&t.deps===null&&t.effects===null){var i=t,n=i.parent;n!==null&&(n.f&me)===0&&(i.f^=me)}return r&&(i=t,Mt(i)&&wr(i)),tt&&mt.has(t)?mt.get(t):t.v}function rr(t){var e=Ce;try{return Ce=!0,t()}finally{Ce=e}}const Zi=-7169;function Ie(t,e){t.f=t.f&Zi|e}const Xi=["touchstart","touchmove"];function $i(t){return Xi.includes(t)}let Vr=!1;function es(){Vr||(Vr=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function ts(t){var e=W,r=J;Oe(null),Be(null);try{return t()}finally{Oe(e),Be(r)}}function rs(t,e,r,s=r){t.addEventListener(e,()=>ts(r));const i=t.__on_r;i?t.__on_r=()=>{i(),s(!0)}:t.__on_r=()=>s(!0),es()}const Br=new Set,ir=new Set;function bt(t){for(var e=0;e<t.length;e++)Br.add(t[e]);for(var r of ir)r(t)}function jt(t){var e=this,r=e.ownerDocument,s=t.type,i=t.composedPath?.()||[],n=i[0]||t.target,o=0,u=t.__root;if(u){var a=i.indexOf(u);if(a!==-1&&(e===document||e===window)){t.__root=e;return}var c=i.indexOf(e);if(c===-1)return;a<=c&&(o=a)}if(n=i[o]||t.target,n!==e){ii(t,"currentTarget",{configurable:!0,get(){return n||r}});var p=W,f=J;Oe(null),Be(null);try{for(var l,_=[];n!==null;){var g=n.assignedSlot||n.parentNode||n.host||null;try{var C=n["__"+s];if(C!=null&&(!n.disabled||t.target===n))if(ae(C)){var[S,...F]=C;S.apply(n,[t,...F])}else C.call(n,t)}catch(M){l?_.push(M):l=M}if(t.cancelBubble||g===e||g===null)break;n=g}if(l){for(let M of _)queueMicrotask(()=>{throw M});throw l}}finally{t.__root=e,delete t.currentTarget,Oe(p),Be(f)}}}function is(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function zt(t,e){var r=J;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function A(t,e){var r=(e&Ii)!==0,s=(e&Pi)!==0,i,n=!t.startsWith("<!>");return()=>{i===void 0&&(i=is(n?t:"<!>"+t),r||(i=xt(i)));var o=s||Er?document.importNode(i,!0):i.cloneNode(!0);if(r){var u=xt(o),a=o.lastChild;zt(u,a)}else zt(o,o);return o}}function Gr(t=""){{var e=Et(t+"");return zt(e,e),e}}function Qe(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Et();return t.append(e,r),zt(e,r),t}function m(t,e){t!==null&&t.before(e)}function P(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function ss(t,e){return ns(t,e)}const rt=new Map;function ns(t,{target:e,anchor:r,props:s={},events:i,context:n,intro:o=!0}){Mi();var u=new Set,a=f=>{for(var l=0;l<f.length;l++){var _=f[l];if(!u.has(_)){u.add(_);var g=$i(_);e.addEventListener(_,jt,{passive:g});var C=rt.get(_);C===void 0?(document.addEventListener(_,jt,{passive:g}),rt.set(_,1)):rt.set(_,C+1)}}};a(Xe(Br)),ir.add(a);var c=void 0,p=Li(()=>{var f=r??e.appendChild(Et());return yt(()=>{if(n){Me({});var l=pe;l.c=n}i&&(s.$$events=i),c=t(f,s)||{},n&&Re()}),()=>{for(var l of u){e.removeEventListener(l,jt);var _=rt.get(l);--_===0?(document.removeEventListener(l,jt),rt.delete(l)):rt.set(l,_)}ir.delete(a),f!==r&&f.parentNode?.removeChild(f)}});return os.set(c,p),c}let os=new WeakMap;function I(t,e,[r,s]=[0,0]){var i=t,n=null,o=null,u=_e,a=r>0?Gt:0,c=!1;const p=(l,_=!0)=>{c=!0,f(_,l)},f=(l,_)=>{u!==(u=l)&&(u?(n?Ct(n):_&&(n=yt(()=>_(i))),o&&Pt(o,()=>{o=null})):(o?Ct(o):_&&(o=yt(()=>_(i,[r+1,s]))),n&&Pt(n,()=>{n=null})))};Zt(()=>{c=!1,e(p),c||f(null,null)},a)}function Fe(t,e){return e}function as(t,e,r,s){for(var i=[],n=e.length,o=0;o<n;o++)Xt(e[o].e,i,!0);var u=n>0&&i.length===0&&r!==null;if(u){var a=r.parentNode;Ri(a),a.append(r),s.clear(),Ye(t,e[0].prev,e[n-1].next)}Dr(i,()=>{for(var c=0;c<n;c++){var p=e[c];u||(s.delete(p.k),Ye(t,p.prev,p.next)),ze(p.e,!u)}})}function Ue(t,e,r,s,i,n=null){var o=t,u={flags:e,items:new Map,first:null},a=(e&_r)!==0;if(a){var c=t;o=c.appendChild(Et())}var p=null,f=!1,l=Ti(()=>{var _=r();return ae(_)?_:_==null?[]:Xe(_)});Zt(()=>{var _=d(l),g=_.length;f&&g===0||(f=g===0,ls(_,u,o,i,e,s,r),n!==null&&(g===0?p?Ct(p):p=yt(()=>n(o)):p!==null&&Pt(p,()=>{p=null})),d(l))})}function ls(t,e,r,s,i,n,o){var u=(i&wi)!==0,a=(i&(Wt|Jt))!==0,c=t.length,p=e.items,f=e.first,l=f,_,g=null,C,S=[],F=[],M,x,b,y;if(u)for(y=0;y<c;y+=1)M=t[y],x=n(M,y),b=p.get(x),b!==void 0&&(b.a?.measure(),(C??(C=new Set)).add(b));for(y=0;y<c;y+=1){if(M=t[y],x=n(M,y),b=p.get(x),b===void 0){var N=l?l.e.nodes_start:r;g=cs(N,e,g,g===null?e.first:g.next,M,x,y,s,i,o),p.set(x,g),S=[],F=[],l=g.next;continue}if(a&&us(b,M,y,i),(b.e.f&De)!==0&&(Ct(b.e),u&&(b.a?.unfix(),(C??(C=new Set)).delete(b))),b!==l){if(_!==void 0&&_.has(b)){if(S.length<F.length){var E=F[0],j;g=E.prev;var te=S[0],X=S[S.length-1];for(j=0;j<S.length;j+=1)Yr(S[j],E,r);for(j=0;j<F.length;j+=1)_.delete(F[j]);Ye(e,te.prev,X.next),Ye(e,g,te),Ye(e,X,E),l=E,g=X,y-=1,S=[],F=[]}else _.delete(b),Yr(b,l,r),Ye(e,b.prev,b.next),Ye(e,b,g===null?e.first:g.next),Ye(e,g,b),g=b;continue}for(S=[],F=[];l!==null&&l.k!==x;)(l.e.f&De)===0&&(_??(_=new Set)).add(l),F.push(l),l=l.next;if(l===null)continue;b=l}S.push(b),g=b,l=b.next}if(l!==null||_!==void 0){for(var re=_===void 0?[]:Xe(_);l!==null;)(l.e.f&De)===0&&re.push(l),l=l.next;var ie=re.length;if(ie>0){var Z=(i&_r)!==0&&c===0?r:null;if(u){for(y=0;y<ie;y+=1)re[y].a?.measure();for(y=0;y<ie;y+=1)re[y].a?.fix()}as(e,re,Z,p)}}u&&$t(()=>{if(C!==void 0)for(b of C)b.a?.apply()}),J.first=e.first&&e.first.e,J.last=g&&g.e}function us(t,e,r,s){(s&Wt)!==0&&Qt(t.v,e),(s&Jt)!==0?Qt(t.i,r):t.i=r}function cs(t,e,r,s,i,n,o,u,a,c){var p=(a&Wt)!==0,f=(a&Ai)===0,l=p?f?Ar(i,!1,!1):St(i):i,_=(a&Jt)===0?o:St(o),g={i:_,v:l,k:n,a:null,e:null,prev:r,next:s};try{return g.e=yt(()=>u(t,l,_,c),Di),g.e.prev=r&&r.e,g.e.next=s&&s.e,r===null?e.first=g:(r.next=g,r.e.next=g.e),s!==null&&(s.prev=g,s.e.prev=g.e),g}finally{}}function Yr(t,e,r){for(var s=t.next?t.next.e.nodes_start:r,i=e?e.e.nodes_start:r,n=t.e.nodes_start;n!==s;){var o=It(n);i.before(n),n=o}}function Ye(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function vs(t,e,r,s,i){var n=e.$$slots?.[r],o=!1;n===!0&&(n=e.children,o=!0),n===void 0||n(t,o?()=>s:s)}const Hr=[...` 	
\r\f \v\uFEFF`];function ds(t,e,r){var s=t==null?"":""+t;if(e&&(s=s?s+" "+e:e),r){for(var i in r)if(r[i])s=s?s+" "+i:i;else if(s.length)for(var n=i.length,o=0;(o=s.indexOf(i,o))>=0;){var u=o+n;(o===0||Hr.includes(s[o-1]))&&(u===s.length||Hr.includes(s[u]))?s=(o===0?"":s.substring(0,o))+s.substring(u+1):o=u}}return s===""?null:s}function fs(t,e){return t==null?null:String(t)}function we(t,e,r,s,i,n){var o=t.__className;if(o!==r||o===void 0){var u=ds(r,s,n);u==null?t.removeAttribute("class"):e?t.className=u:t.setAttribute("class",u),t.__className=r}else if(n&&i!==n)for(var a in n){var c=!!n[a];(i==null||c!==!!i[a])&&t.classList.toggle(a,c)}return n}function Wr(t,e,r,s){var i=t.__style;if(i!==e){var n=fs(e);n==null?t.removeAttribute("style"):t.style.cssText=n,t.__style=e}return s}const _s=Symbol("is custom element"),ps=Symbol("is html");function hs(t,e){var r=Kr(t);r.value===(r.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Jr(t,e,r,s){var i=Kr(t);i[e]!==(i[e]=r)&&(e==="loading"&&(t[vi]=r),r==null?t.removeAttribute(e):typeof r!="string"&&gs(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Kr(t){return t.__attributes??(t.__attributes={[_s]:t.nodeName.includes("-"),[ps]:t.namespaceURI===Ci})}var Qr=new Map;function gs(t){var e=Qr.get(t.nodeName);if(e)return e;Qr.set(t.nodeName,e=[]);for(var r,s=t,i=Element.prototype;i!==s;){r=si(s);for(var n in r)r[n].set&&e.push(n);s=lr(s)}return e}const sr=new Set;function Zr(t,e,r,s,i=s){var n=r.getAttribute("type")==="checkbox",o=t;if(e!==null)for(var u of e)o=o[u]??(o[u]=[]);o.push(r),rs(r,"change",()=>{var a=r.__value;n&&(a=ms(o,a,r.checked)),i(a)},()=>i(n?[]:null)),Fi(()=>{var a=s();n?(a=a||[],r.checked=a.includes(r.__value)):r.checked=Oi(r.__value,a)}),Pr(()=>{var a=o.indexOf(r);a!==-1&&o.splice(a,1)}),sr.has(o)||(sr.add(o),$t(()=>{o.sort((a,c)=>a.compareDocumentPosition(c)===4?-1:1),sr.delete(o)})),$t(()=>{})}function ms(t,e,r){for(var s=new Set,i=0;i<t.length;i+=1)t[i].checked&&s.add(t[i].__value);return r||s.delete(e),Array.from(s)}let Lt=!1;function ys(t){var e=Lt;try{return Lt=!1,[t(),Lt]}finally{Lt=e}}function Xr(t){return t.ctx?.d??!1}function he(t,e,r,s){var i=(r&ki)!==0,n=!0,o=(r&Ei)!==0,u=(r&xi)!==0,a=!1,c;o?[c,a]=ys(()=>t[e]):c=t[e];var p=et in t||ci in t,f=o&&($e(t,e)?.set??(p&&e in t&&(y=>t[e]=y)))||void 0,l=s,_=!0,g=!1,C=()=>(g=!0,_&&(_=!1,u?l=rr(s):l=s),l);c===void 0&&s!==void 0&&(f&&n&&gi(),c=C(),f&&f(c));var S;if(S=()=>{var y=t[e];return y===void 0?C():(_=!0,g=!1,y)},(r&Si)===0&&n)return S;if(f){var F=t.$$legacy;return function(y,N){return arguments.length>0?((!N||F||a)&&f(N?S():y),y):S()}}var M=!1,x=Ar(c),b=kt(()=>{var y=S(),N=d(x);return M?(M=!1,N):x.v=y});return o&&d(b),i||(b.equals=Ht),function(y,N){if(arguments.length>0){const E=N?d(b):o?Ne(y):y;if(!b.equals(E)){if(M=!0,T(x,E),g&&l!==void 0&&(l=E),Xr(b))return y;rr(()=>d(b))}return y}return Xr(b)?b.v:d(b)}}function $r(t){pe===null&&pr(),Ve(()=>{const e=rr(t);if(typeof e=="function")return e})}function bs(t,e,{bubbles:r=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:s})}function ws(){const t=pe;return t===null&&pr(),(e,r,s)=>{const i=t.s.$$events?.[e];if(i){const n=ae(i)?i.slice():[i],o=bs(e,r,s);for(const u of n)u.call(t.x,o);return!o.defaultPrevented}return!0}}const As="5";typeof window<"u"&&((ei=window.__svelte??(window.__svelte={})).v??(ei.v=new Set)).add(As);class ks{constructor(e,r={}){this.baseUrl=e||window.__API_BASE_URL__||"http://localhost:8080/api/v1",this.modelId=r.modelId,this.authToken=r.authToken||localStorage.getItem("auth_token"),this.timeout=r.timeout||1e4,console.log("API Client initialized:",{baseUrl:this.baseUrl,modelId:this.modelId,hasAuth:!!this.authToken})}async request(e,r={}){e.startsWith("/")||(e="/"+e);const s=`${this.baseUrl}${e}`;console.log("API Request:",r.method||"GET",s);const i={method:"GET",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json",...this.authToken&&{Authorization:`Bearer ${this.authToken}`},...r.headers},...r};i.body&&typeof i.body=="object"&&(i.body=JSON.stringify(i.body));try{const n=new AbortController,o=setTimeout(()=>n.abort(),this.timeout),u=await fetch(s,{...i,signal:n.signal});if(clearTimeout(o),!u.ok){const c=await u.text();let p=`HTTP ${u.status}: ${u.statusText}`;try{const f=JSON.parse(c);p=f.message||f.error||p}catch{c.includes("<html")||(p=c||p)}throw console.error(`API Error from ${e}:`,p),u.status===404?new Error(`Endpoint not found: ${s}. Please check if the backend server is running and the API path is correct.`):new Error(p)}const a=await u.json();if(console.log(`API Response from ${e}:`,a),a.success!==void 0){if(a.success&&a.data!==void 0)return a.data;if(!a.success)throw new Error(a.error||a.message||"Request failed")}return(e.includes("/groups")||e.includes("/options"))&&console.log(`Note: ${e} returned unwrapped response, structure:`,Array.isArray(a)?"Array":typeof a,"Keys:",a?Object.keys(a).slice(0,5):"none"),a}catch(n){throw n.name==="AbortError"?new Error("Request timeout"):n}}setAuthToken(e){this.authToken=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}async login(e,r){const s=await this.request("/auth/login",{method:"POST",body:{username:e,password:r}});return s.token&&this.setAuthToken(s.token),s}async validateToken(){return this.request("/auth/validate",{method:"POST"})}async getModel(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}`);if(console.log("getModel response:",e),e&&e.id&&!e.option_groups&&!e.groups)try{const r=await this.getModelOptions();e.options=r}catch(r){console.warn("Failed to fetch model options separately:",r)}return e}async getModelOptions(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/options`);return console.log("getModelOptions response:",e),e}async getModelGroups(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/groups?include=options`);return console.log("getModelGroups response:",e),e}async getModelStatistics(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/statistics`)}async createConfiguration(e={}){return this.request("/configurations",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e)}})}async getConfiguration(e){return this.request(`/configurations/${e}?model_id=${this.modelId}`)}async updateConfiguration(e,r){return this.request(`/configurations/${e}`,{method:"PUT",body:{model_id:this.modelId,selections:this.formatSelections(r)}})}async validateSelections(e){return this.request("/configurations/validate-selection",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e)}})}async getAvailableOptions(e){return this.request(`/configurations/${e}/available-options?model_id=${this.modelId}`)}async calculatePricing(e,r={}){return this.request("/pricing/calculate",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e),context:r}})}async getVolumeTiers(){return this.request(`/pricing/volume-tiers/${this.modelId}`)}async simulatePricing(e){return this.request("/pricing/simulate",{method:"POST",body:{model_id:this.modelId,scenarios:e}})}formatSelections(e){return Object.entries(e).filter(([r,s])=>s>0).map(([r,s])=>({option_id:r,quantity:s}))}}class Ss{constructor(){ve(this,it);ve(this,st);ve(this,nt);ve(this,ot);ve(this,at);ve(this,lt);ve(this,ut);ve(this,ct);ve(this,vt);ve(this,dt);ve(this,ft);ve(this,_t);ve(this,pt);ve(this,ht);ve(this,gt);de(this,it,Y("")),de(this,st,Y(null)),de(this,nt,Y(Ne({}))),de(this,ot,Y(Ne([]))),de(this,at,Y(null)),de(this,lt,Y(Ne([]))),de(this,ut,Y(!1)),de(this,ct,Y(!1)),de(this,vt,Y(!1)),de(this,dt,Y(null)),de(this,ft,Y(0)),de(this,_t,Y(null)),de(this,pt,Y(null)),de(this,ht,Y(!1)),de(this,gt,Y(0)),this.api=null,this._initialized=!1,this._debounceTimers=new Map,this._loadingPromise=null}get modelId(){return d(G(this,it))}set modelId(e){T(G(this,it),e,!0)}get model(){return d(G(this,st))}set model(e){T(G(this,st),e,!0)}get selections(){return d(G(this,nt))}set selections(e){T(G(this,nt),e,!0)}get validationResults(){return d(G(this,ot))}set validationResults(e){T(G(this,ot),e,!0)}get pricingData(){return d(G(this,at))}set pricingData(e){T(G(this,at),e,!0)}get availableOptions(){return d(G(this,lt))}set availableOptions(e){T(G(this,lt),e,!0)}get isLoading(){return d(G(this,ut))}set isLoading(e){T(G(this,ut),e,!0)}get isValidating(){return d(G(this,ct))}set isValidating(e){T(G(this,ct),e,!0)}get isPricing(){return d(G(this,vt))}set isPricing(e){T(G(this,vt),e,!0)}get error(){return d(G(this,dt))}set error(e){T(G(this,dt),e,!0)}get retryCount(){return d(G(this,ft))}set retryCount(e){T(G(this,ft),e,!0)}get configurationId(){return d(G(this,_t))}set configurationId(e){T(G(this,_t),e,!0)}get lastSaved(){return d(G(this,pt))}set lastSaved(e){T(G(this,pt),e,!0)}get isDirty(){return d(G(this,ht))}set isDirty(e){T(G(this,ht),e,!0)}get currentStep(){return d(G(this,gt))}set currentStep(e){T(G(this,gt),e,!0)}initialize(){this._initialized||(this._initialized=!0,console.log("🔧 ConfigurationStore initialized"),this._testConnection(),Ve(()=>{this.modelId&&!this._loadingPromise&&(this.api=new ks(window.__API_BASE_URL__,{modelId:this.modelId}),this.loadModel())}),Ve(()=>{this.api&&Object.keys(this.selections).length>0&&this.model&&this._debounce("validate",()=>this.validateSelections(),300)}),Ve(()=>{this.api&&this.isValid&&Object.keys(this.selections).length>0&&this.model&&this._debounce("pricing",()=>this.calculatePricing(),500)}),Ve(()=>{this.isDirty&&this.configurationId&&this._debounce("save",()=>this.saveConfiguration(),3e4)}))}get isValid(){return this.validationResults.length===0}get totalPrice(){return this.pricingData?.total_price||0}get basePrice(){return this.pricingData?.base_price||0}get adjustments(){return this.pricingData?.adjustments||[]}get selectedOptions(){if(!this.model?.option_groups||!Array.isArray(this.model.option_groups))return[];const e=[];for(const r of this.model.option_groups)if(!(!r.options||!Array.isArray(r.options)))for(const s of r.options)this.selections[s.id]>0&&e.push({...s,quantity:this.selections[s.id],group_name:r.name,group_id:r.id});return e}get completionPercentage(){if(!this.model?.option_groups||!Array.isArray(this.model.option_groups))return 0;const e=this.model.option_groups.filter(s=>s.required);if(e.length===0)return 100;const r=e.filter(s=>s.options&&Array.isArray(s.options)&&s.options.some(i=>this.selections[i.id]>0));return Math.round(r.length/e.length*100)}get canProceedToNextStep(){return this.completionPercentage>=100&&this.isValid}setModelId(e){console.log("setModelId called with:",e),this.modelId!==e&&(this.modelId=e,this.reset())}async loadModel(){if(!(!this.api||this._loadingPromise))return this._loadingPromise=this._executeWithRetry(async()=>{this.isLoading=!0,this.error=null;try{let e;try{e=await this.api.getModel(),console.log("Raw model response:",e)}catch(i){throw i.message.includes("404")?new Error(`Model "${this.modelId}" not found. Use the debug test page to list available models, or check /api/v1/models endpoint.`):i}if(!e||typeof e!="object")throw new Error("Invalid model data received");if(this.model={id:e.id||e.ID||e.model_id,name:e.name||e.Name||"Configuration",description:e.description||e.Description,option_groups:[]},e.option_groups&&Array.isArray(e.option_groups))this.model.option_groups=e.option_groups,console.log("Using option_groups from model");else if(e.groups&&Array.isArray(e.groups))this.model.option_groups=e.groups,console.log("Using groups from model");else if(e.data?.groups&&Array.isArray(e.data.groups))this.model.option_groups=e.data.groups,console.log("Using groups from model.data");else{console.log("Fetching groups separately...");try{const i=await this.api.getModelGroups();console.log("Groups API response:",i),Array.isArray(i)?this.model.option_groups=i:i.groups?this.model.option_groups=i.groups:i.option_groups?this.model.option_groups=i.option_groups:i.data&&Array.isArray(i.data)?this.model.option_groups=i.data:i.data?.groups&&(this.model.option_groups=i.data.groups)}catch(i){console.error("Failed to load groups:",i)}}if((!this.model.option_groups||this.model.option_groups.length===0)&&(e.options||e.Options)){console.log("No groups found, but model has flat options array");const i=e.options||e.Options,n=new Map;i.forEach(o=>{const u=o.group_id||o.groupId||o.group||"default";n.has(u)||n.set(u,{id:u,name:o.group_name||o.groupName||u,options:[]}),n.get(u).options.push(o)}),this.model.option_groups=Array.from(n.values()),console.log("Created groups from flat options:",this.model.option_groups)}if(console.log("Groups loaded:",this.model.option_groups?.length||0,"groups"),this.model.option_groups?.length>0&&(console.log("First group structure:",this.model.option_groups[0]),console.log("Group properties:",Object.keys(this.model.option_groups[0]))),!this.model.option_groups.some(i=>i.options&&Array.isArray(i.options)&&i.options.length>0||i.Options&&Array.isArray(i.Options)&&i.Options.length>0||i.items&&Array.isArray(i.items)&&i.items.length>0||i.choices&&Array.isArray(i.choices)&&i.choices.length>0)&&this.model.option_groups.length>0){console.log("No options found in groups, fetching options separately...");try{const i=await this.api.getModelOptions();console.log("Options API response:",i);let n=[];Array.isArray(i)?n=i:i.options?n=i.options:i.data&&Array.isArray(i.data)?n=i.data:i.data?.options&&(n=i.data.options),console.log("Total options found:",n.length),n.length>0&&(console.log("First option structure:",n[0]),console.log("Option properties:",Object.keys(n[0]))),n.length>0&&(this.model.option_groups=this.model.option_groups.map(o=>{const u=n.filter(a=>a.group_id===o.id||a.groupId===o.id||a.group===o.id||a.group_name===o.name||a.groupName===o.name||a.group_id===o.name||o.group_id&&(a.group_id===o.group_id||a.group===o.group_id));return console.log(`Group "${o.name}" matched ${u.length} options`),u.length===0&&this.model.option_groups.length===1?(console.warn("No options matched group criteria, showing all options in single group"),{...o,options:n}):{...o,options:u}}))}catch(i){console.error("Failed to load options:",i)}}this.model.option_groups=this.model.option_groups.map(i=>{let n=[];return Array.isArray(i.options)?n=i.options:Array.isArray(i.Options)?n=i.Options:Array.isArray(i.items)?n=i.items:Array.isArray(i.choices)?n=i.choices:i.data?.options&&Array.isArray(i.data.options)&&(n=i.data.options),{...i,options:n}}),this.model.option_groups.reduce((i,n)=>i+(n.options?.length||0),0)===0&&this.model.option_groups.length>0?(console.warn("No options found in any group. Creating demo options for testing..."),this.usingDemoData=!0,this.model.option_groups=this.model.option_groups.map((i,n)=>({...i,options:this._createDemoOptions(i,n)}))):this.usingDemoData=!1,console.log("=== Final Model Structure ==="),console.log("Model:",this.model),console.log("Groups summary:",this.model.option_groups.map(i=>({id:i.id,name:i.name,optionsCount:i.options?.length||0,options:i.options?.slice(0,2)}))),this._initializeSelections()}finally{this.isLoading=!1,this._loadingPromise=null}}),this._loadingPromise}updateSelection(e,r){r=Math.max(0,r);const s=this._getGroupForOption(e);if(s){if(s.selection_type==="single"&&r>0&&s.options&&Array.isArray(s.options))for(const i of s.options)i.id!==e&&(this.selections[i.id]=0);s.max_selections&&r>s.max_selections&&(r=s.max_selections)}r===0?delete this.selections[e]:this.selections[e]=r,this.isDirty=!0}async validateSelections(){if(!(!this.api||this.isValidating)){if(Object.keys(this.selections).length===0){this.validationResults=[];return}await this._executeWithRetry(async()=>{this.isValidating=!0;try{const e=await this.api.validateSelections(this.selections);this.validationResults=e.validation_errors||[],this.availableOptions=e.available_options||[]}finally{this.isValidating=!1}})}}async calculatePricing(e={}){!this.api||this.isPricing||!this.isValid||await this._executeWithRetry(async()=>{this.isPricing=!0;try{const r=await this.api.calculatePricing(this.selections,e);this.pricingData=r}finally{this.isPricing=!1}})}async createConfiguration(){if(!this.api)return;const e=await this.api.createConfiguration(this.selections);return this.configurationId=e.id,this.isDirty=!1,this.lastSaved=new Date,e}async saveConfiguration(){if(!(!this.api||!this.configurationId||!this.isDirty))try{await this.api.updateConfiguration(this.configurationId,this.selections),this.isDirty=!1,this.lastSaved=new Date}catch(e){console.error("Failed to save configuration:",e)}}async loadConfiguration(e){this.api&&await this._executeWithRetry(async()=>{this.isLoading=!0;try{const r=await this.api.getConfiguration(e);this.configurationId=r.id,this.selections=this._parseSelections(r.selections),this.isDirty=!1,await Promise.all([this.validateSelections(),this.calculatePricing()])}finally{this.isLoading=!1}})}async loadAvailableOptions(){if(!(!this.api||!this.configurationId))try{const e=await this.api.getAvailableOptions(this.configurationId);this.availableOptions=e.available_options||[]}catch(e){console.error("Failed to load available options:",e)}}exportConfiguration(){return{model_id:this.modelId,selections:this.selections,timestamp:new Date().toISOString(),total_price:this.totalPrice,is_valid:this.isValid}}importConfiguration(e){if(e.model_id!==this.modelId)throw new Error("Configuration is for a different model");this.selections=e.selections||{},this.isDirty=!0}reset(){this.selections={},this.validationResults=[],this.pricingData=null,this.availableOptions=[],this.error=null,this.configurationId=null,this.isDirty=!1,this.currentStep=0,this._clearAllTimers()}async _testConnection(){if(window.__API_BASE_URL__)try{const e=await fetch(`${window.__API_BASE_URL__}/health`);e.ok?console.log("✅ API connection successful"):console.warn("⚠️ API health check returned:",e.status)}catch(e){console.error("❌ API connection failed:",e.message)}}_debounce(e,r,s){this._clearTimer(e);const i=setTimeout(r,s);this._debounceTimers.set(e,i)}_clearTimer(e){const r=this._debounceTimers.get(e);r&&(clearTimeout(r),this._debounceTimers.delete(e))}_clearAllTimers(){for(const e of this._debounceTimers.values())clearTimeout(e);this._debounceTimers.clear()}_getGroupForOption(e){if(!this.model?.option_groups||!Array.isArray(this.model.option_groups))return null;for(const r of this.model.option_groups)if(r.options&&Array.isArray(r.options)&&r.options.some(s=>s.id===e))return r;return null}_initializeSelections(){if(!(!this.model?.option_groups||!Array.isArray(this.model.option_groups))){for(const e of this.model.option_groups)if(!(!e.options||!Array.isArray(e.options)))for(const r of e.options)r.preselected&&!this.selections[r.id]&&(this.selections[r.id]=1)}}_parseSelections(e){const r={};for(const s of e)s.quantity>0&&(r[s.option_id]=s.quantity);return r}async _executeWithRetry(e,r=3){for(let s=0;s<=r;s++)try{return await e()}catch(i){if(this.error=i.message,this.retryCount=s,s===r||i.message.includes("401")||i.message.includes("404"))throw console.error("API call failed after retries:",i.message),i;await new Promise(n=>setTimeout(n,Math.pow(2,s)*1e3))}}}it=new WeakMap,st=new WeakMap,nt=new WeakMap,ot=new WeakMap,at=new WeakMap,lt=new WeakMap,ut=new WeakMap,ct=new WeakMap,vt=new WeakMap,dt=new WeakMap,ft=new WeakMap,_t=new WeakMap,pt=new WeakMap,ht=new WeakMap,gt=new WeakMap;const w=new Ss;var Es=A("<div></div>"),xs=A('<div><div class="step-icon svelte-19jrra3"><!></div> <div class="step-label svelte-19jrra3"> </div></div> <!>',1),Is=A('<div class="progress-indicator svelte-19jrra3"><div class="steps svelte-19jrra3"></div> <div class="progress-bar svelte-19jrra3"><div class="progress-fill svelte-19jrra3"></div></div></div>');function Ps(t,e){Me(e,!0);let r=he(e,"steps",19,()=>[]),s=he(e,"currentStep",3,0),i=he(e,"completionPercentage",3,0);var n=Is(),o=v(n);Ue(o,21,r,Fe,(c,p,f)=>{var l=xs(),_=je(l);let g;var C=v(_),S=v(C);{var F=E=>{var j=Gr("✓");m(E,j)},M=E=>{var j=Gr();q(()=>P(j,d(p).icon||f+1)),m(E,j)};I(S,E=>{f<s()?E(F):E(M,!1)})}var x=h(C,2),b=v(x),y=h(_,2);{var N=E=>{var j=Es();let te;q(X=>te=we(j,1,"step-connector svelte-19jrra3",null,te,X),[()=>({completed:f<s()})]),m(E,j)};I(y,E=>{f<r().length-1&&E(N)})}q(E=>{g=we(_,1,"step svelte-19jrra3",null,g,E),P(b,d(p).label)},[()=>({active:f===s(),completed:f<s()})]),m(c,l)});var u=h(o,2),a=v(u);q(()=>Wr(a,`width: ${i()??""}%`)),m(t,n),Re()}var Cs=A('<div><div class="spinner svelte-kq7kpf"></div> <p class="message svelte-kq7kpf"> </p></div>');function Os(t,e){let r=he(e,"message",3,"Loading..."),s=he(e,"size",3,"medium");var i=Cs(),n=h(v(i),2),o=v(n);q(()=>{we(i,1,`loading-spinner ${s()??""}`,"svelte-kq7kpf"),P(o,r())}),m(t,i)}function Ts(t,e,r){T(e,null),T(r,null)}function qs(){location.reload()}var Ds=A('<div class="error-boundary svelte-1dzw8vs"><div class="error-content svelte-1dzw8vs"><h2 class="svelte-1dzw8vs">Something went wrong</h2> <p class="error-message svelte-1dzw8vs"> </p> <!> <div class="error-actions svelte-1dzw8vs"><button class="btn btn-secondary svelte-1dzw8vs">Try Again</button> <button class="btn btn-primary svelte-1dzw8vs">Reload Page</button></div></div></div>');function Ms(t,e){Me(e,!0);let r=Y(null),s=Y(null);$r(()=>{const a=c=>{T(r,c.error||new Error("Unknown error"),!0),T(s,{componentStack:c.filename||"Unknown",lineNumber:c.lineno,columnNumber:c.colno},!0),console.error("Error caught by boundary:",d(r)),c.preventDefault()};return window.addEventListener("error",a),window.addEventListener("unhandledrejection",c=>{T(r,new Error(c.reason),!0),T(s,{componentStack:"Promise rejection"},!0),c.preventDefault()}),()=>{window.removeEventListener("error",a)}});var i=Qe(),n=je(i);{var o=a=>{var c=Ds(),p=v(c),f=h(v(p),2),l=v(f),_=h(f,2);I(_,F=>{});var g=h(_,2),C=v(g);C.__click=[Ts,r,s];var S=h(C,2);S.__click=[qs],q(()=>P(l,d(r).message)),m(a,c)},u=a=>{var c=Qe(),p=je(c);vs(p,e,"default",{}),m(a,c)};I(n,a=>{d(r)?a(o):a(u,!1)})}m(t,i),Re()}bt(["click"]);function Rs(t,e,r,s){d(e)<r()&&s(d(e)+1)}function Ns(t,e,r){d(e)>0&&r(d(e)-1)}function js(t,e,r){e(d(r)?0:1)}var zs=A('<span class="sku svelte-14bz86j"> </span>'),Ls=A('<p class="description svelte-14bz86j"> </p>'),Fs=A('<span class="price-each svelte-14bz86j">each</span>'),Us=A('<span class="total-price svelte-14bz86j"> </span>'),Vs=A("<button> </button>"),Bs=(t,e)=>e(parseInt(t.target.value)||0),Gs=A('<div class="quantity-controls svelte-14bz86j"><button class="qty-button svelte-14bz86j" aria-label="Decrease quantity">−</button> <input type="number" min="0" aria-label="Quantity" class="svelte-14bz86j"/> <button class="qty-button svelte-14bz86j" aria-label="Increase quantity">+</button></div>'),Ys=A('<div class="unavailable-overlay svelte-14bz86j"><span class="svelte-14bz86j">Not available with current selection</span></div>'),Hs=A('<div><div class="option-header svelte-14bz86j"><h4 class="svelte-14bz86j"> </h4> <!></div> <!> <div class="price-section svelte-14bz86j"><span class="base-price svelte-14bz86j"> <!></span> <!></div> <div class="actions svelte-14bz86j"><!></div> <!></div>');function Ws(t,e){Me(e,!0);let r=xe(()=>w.selections[e.option.id]||0),s=xe(()=>d(r)>0),i=xe(()=>!w.availableOptions.length||w.availableOptions.some(k=>k.option_id===e.option.id)),n=xe(()=>d(r)*(e.option.base_price||0));function o(){return e.group.selection_type==="single"?1:e.group.max_selections||10}function u(k){!d(i)&&k>0||w.updateSelection(e.option.id,k)}var a=Hs();let c;var p=v(a),f=v(p),l=v(f),_=h(f,2);{var g=k=>{var D=zs(),O=v(D);q(()=>P(O,`SKU: ${e.option.sku??""}`)),m(k,D)};I(_,k=>{e.option.sku&&k(g)})}var C=h(p,2);{var S=k=>{var D=Ls(),O=v(D);q(()=>P(O,e.option.description)),m(k,D)};I(C,k=>{e.option.description&&k(S)})}var F=h(C,2),M=v(F),x=v(M),b=h(x);{var y=k=>{var D=Fs();m(k,D)};I(b,k=>{d(r)>1&&k(y)})}var N=h(M,2);{var E=k=>{var D=Us(),O=v(D);q(z=>P(O,`Total: $${z??""}`),[()=>d(n).toFixed(2)]),m(k,D)};I(N,k=>{d(r)>1&&k(E)})}var j=h(F,2),te=v(j);{var X=k=>{var D=Vs();let O;D.__click=[js,u,s];var z=v(D);q(H=>{O=we(D,1,"select-button svelte-14bz86j",null,O,H),D.disabled=!d(i),P(z,d(s)?"✓ Selected":"Select")},[()=>({selected:d(s)})]),m(k,D)},re=k=>{var D=Gs(),O=v(D);O.__click=[Ns,r,u];var z=h(O,2);z.__change=[Bs,u];var H=h(z,2);H.__click=[Rs,r,o,u],q((U,K)=>{O.disabled=d(r)===0,hs(z,d(r)),Jr(z,"max",U),z.disabled=!d(i),H.disabled=K},[o,()=>d(r)>=o()||!d(i)]),m(k,D)};I(te,k=>{e.group.selection_type==="single"?k(X):k(re,!1)})}var ie=h(j,2);{var Z=k=>{var D=Ys();m(k,D)};I(ie,k=>{!d(i)&&!d(s)&&k(Z)})}q((k,D)=>{c=we(a,1,"option-card svelte-14bz86j",null,c,k),P(l,e.option.name),P(x,`$${D??""} `)},[()=>({selected:d(s),unavailable:!d(i)}),()=>(e.option.base_price||0).toFixed(2)]),m(t,a),Re()}bt(["click","change"]);var Js=(t,e)=>T(e,!d(e)),Ks=A('<span class="required svelte-6zoark">*</span>'),Qs=A('<p class="group-description svelte-6zoark"> </p>'),Zs=A('<span class="selection-constraint svelte-6zoark"> </span>'),Xs=A('<span class="selection-constraint svelte-6zoark"> </span>'),$s=A('<div class="no-options svelte-6zoark"><p class="svelte-6zoark">No options available</p> <p class="help-text svelte-6zoark">Check API response</p></div>'),en=A('<div class="group-content svelte-6zoark"><div class="selection-info svelte-6zoark"><span class="selection-type svelte-6zoark"> </span> <!> <!></div> <div class="options-grid svelte-6zoark"><!></div></div>'),tn=A('<div><div class="group-header svelte-6zoark"><div class="group-info svelte-6zoark"><h3 class="svelte-6zoark"> <!></h3> <!></div> <button class="expand-toggle svelte-6zoark" aria-label="Toggle group"><svg width="20" height="20" viewBox="0 0 20 20"><path fill="currentColor" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path></svg></button></div> <!></div>');function rn(t,e){Me(e,!0);let r=Y(!0),s=xe(()=>e.group.options&&Array.isArray(e.group.options)&&e.group.options.some(x=>w.selections[x.id]>0));Ve(()=>{e.group.options?.length===0&&console.warn(`⚠️ Group "${e.group.name}" has no options!`,{groupId:e.group.id,groupData:e.group})});var i=tn();let n;var o=v(i);o.__click=[Js,r];var u=v(o),a=v(u),c=v(a),p=h(c);{var f=x=>{var b=Ks();m(x,b)};I(p,x=>{e.group.required&&x(f)})}var l=h(a,2);{var _=x=>{var b=Qs(),y=v(b);q(()=>P(y,e.group.description)),m(x,b)};I(l,x=>{e.group.description&&x(_)})}var g=h(u,2),C=v(g);let S;var F=h(o,2);{var M=x=>{var b=en(),y=v(b),N=v(y),E=v(N),j=h(N,2);{var te=O=>{var z=Zs(),H=v(z);q(()=>P(H,`Min: ${e.group.min_selections??""}`)),m(O,z)};I(j,O=>{e.group.min_selections&&O(te)})}var X=h(j,2);{var re=O=>{var z=Xs(),H=v(z);q(()=>P(H,`Max: ${e.group.max_selections??""}`)),m(O,z)};I(X,O=>{e.group.max_selections&&O(re)})}var ie=h(y,2),Z=v(ie);{var k=O=>{var z=Qe(),H=je(z);Ue(H,17,()=>e.group.options,Fe,(U,K)=>{Ws(U,{get option(){return d(K)},get group(){return e.group}})}),m(O,z)},D=O=>{var z=$s();m(O,z)};I(Z,O=>{e.group.options&&Array.isArray(e.group.options)?O(k):O(D,!1)})}q(()=>P(E,e.group.selection_type==="single"?"Choose one":"Choose multiple")),m(x,b)};I(F,x=>{d(r)&&x(M)})}q((x,b)=>{n=we(i,1,"option-group svelte-6zoark",null,n,x),P(c,`${e.group.name??""} `),S=we(C,0,"icon svelte-6zoark",null,S,b)},[()=>({"has-selection":d(s)}),()=>({rotated:!d(r)})]),m(t,i),Re()}bt(["click"]);var sn=A('<div class="loading svelte-13kqu2s"><span class="spinner svelte-13kqu2s"></span> Calculating price...</div>'),nn=A('<div class="price-line adjustment svelte-13kqu2s"><span class="label svelte-13kqu2s"> </span> <span> </span></div>'),on=A('<div class="adjustments svelte-13kqu2s"></div>'),an=A('<div class="price-line svelte-13kqu2s"><span class="label svelte-13kqu2s">Savings</span> <span class="amount discount svelte-13kqu2s"> </span></div>'),ln=A('<div class="price-line svelte-13kqu2s"><span class="label svelte-13kqu2s">Additional Charges</span> <span class="amount svelte-13kqu2s"> </span></div>'),un=A("<!> <!>",1),cn=A('<div class="price-breakdown svelte-13kqu2s"><div class="price-line svelte-13kqu2s"><span class="label svelte-13kqu2s">Base Price</span> <span class="amount svelte-13kqu2s"> </span></div> <!></div>'),vn=A('<div class="savings-badge svelte-13kqu2s"> </div>'),dn=A('<div class="price-summary svelte-13kqu2s"><div class="price-line total svelte-13kqu2s"><span class="label svelte-13kqu2s">Total Price</span> <span class="amount svelte-13kqu2s"> </span></div> <!> <!></div>'),fn=A("<div><!></div>");function nr(t,e){Me(e,!0);let r=he(e,"detailed",3,!1),s=he(e,"showBreakdown",3,!0),i=xe(()=>w.adjustments.filter(l=>l.amount<0).reduce((l,_)=>l+Math.abs(_.amount),0)),n=xe(()=>w.adjustments.filter(l=>l.amount>0).reduce((l,_)=>l+_.amount,0)),o=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(l);var u=fn();let a;var c=v(u);{var p=l=>{var _=sn();m(l,_)},f=l=>{var _=dn(),g=v(_),C=h(v(g),2),S=v(C),F=h(g,2);{var M=y=>{var N=cn(),E=v(N),j=h(v(E),2),te=v(j),X=h(E,2);{var re=Z=>{var k=on();Ue(k,21,()=>w.adjustments,Fe,(D,O)=>{var z=nn(),H=v(z),U=v(H),K=h(H,2);let ne;var ue=v(K);q((ee,ge)=>{P(U,`${d(O).type==="discount"?"−":"+"}
                    ${d(O).description??""}`),ne=we(K,1,"amount svelte-13kqu2s",null,ne,ee),P(ue,ge)},[()=>({discount:d(O).amount<0}),()=>o(Math.abs(d(O).amount))]),m(D,z)}),m(Z,k)},ie=Z=>{var k=un(),D=je(k);{var O=U=>{var K=an(),ne=h(v(K),2),ue=v(ne);q(ee=>P(ue,`−${ee??""}`),[()=>o(d(i))]),m(U,K)};I(D,U=>{d(i)>0&&U(O)})}var z=h(D,2);{var H=U=>{var K=ln(),ne=h(v(K),2),ue=v(ne);q(ee=>P(ue,`+${ee??""}`),[()=>o(d(n))]),m(U,K)};I(z,U=>{d(n)>0&&U(H)})}m(Z,k)};I(X,Z=>{r()&&w.adjustments.length>0?Z(re):Z(ie,!1)})}q(Z=>P(te,Z),[()=>o(w.basePrice)]),m(y,N)};I(F,y=>{s()&&(w.basePrice!==w.totalPrice||r())&&y(M)})}var x=h(F,2);{var b=y=>{var N=vn(),E=v(N);q(j=>P(E,`You save ${j??""}!`),[()=>o(d(i))]),m(y,N)};I(x,y=>{d(i)>0&&y(b)})}q(y=>P(S,y),[()=>o(w.totalPrice)]),m(l,_)};I(c,l=>{w.isPricing?l(p):l(f,!1)})}q(l=>a=we(u,1,"pricing-display svelte-13kqu2s",null,a,l),[()=>({detailed:r()})]),m(t,u),Re()}var _n=A('<div class="validating svelte-bayq38"><span class="spinner svelte-bayq38"></span> Validating configuration...</div>'),pn=A('<p class="svelte-bayq38">Your current selection meets all requirements.</p>'),hn=A('<div class="valid-state svelte-bayq38"><span class="icon svelte-bayq38">✅</span> <div class="message"><h4 class="svelte-bayq38">Configuration Valid</h4> <!></div></div>'),gn=A('<h4 class="severity-header svelte-bayq38"> </h4>'),mn=A('<span class="compact-icon svelte-bayq38"> </span>'),yn=A('<span class="error-field svelte-bayq38"> </span>'),bn=A('<li><!> <span class="error-message svelte-bayq38"> </span> <!></li>'),wn=A('<div class="severity-group svelte-bayq38"><!> <ul class="error-list svelte-bayq38"></ul></div>'),An=A('<li class="svelte-bayq38"> </li>'),kn=A('<div class="suggestions svelte-bayq38"><h4 class="svelte-bayq38">Suggestions</h4> <ul class="svelte-bayq38"></ul></div>'),Sn=A('<div class="validation-results svelte-bayq38"><!> <!></div>'),En=A("<div><!></div>");function or(t,e){Me(e,!0);let r=he(e,"compact",3,!1),s=xe(()=>()=>{const f={error:[],warning:[],info:[]};for(const l of w.validationResults){const _=l.severity||"error";f[_].push(l)}return f});const i={error:"❌",warning:"⚠️",info:"ℹ️"},n={error:"#dc2626",warning:"#f59e0b",info:"#3b82f6"};var o=En();let u;var a=v(o);{var c=f=>{var l=_n();m(f,l)},p=(f,l)=>{{var _=C=>{var S=hn(),F=h(v(S),2),M=h(v(F),2);{var x=b=>{var y=pn();m(b,y)};I(M,b=>{r()||b(x)})}m(C,S)},g=C=>{var S=Sn(),F=v(S);Ue(F,17,()=>Object.entries(d(s)()),Fe,(b,y)=>{var N=xe(()=>li(d(y),2));let E=()=>d(N)[0],j=()=>d(N)[1];var te=Qe(),X=je(te);{var re=ie=>{var Z=wn(),k=v(Z);{var D=z=>{var H=gn(),U=v(H);q(K=>{Wr(H,`color: ${n[E()]??""}`),P(U,`${i[E()]??""} ${K??""}s`)},[()=>E().charAt(0).toUpperCase()+E().slice(1)]),m(z,H)};I(k,z=>{r()||z(D)})}var O=h(k,2);Ue(O,21,j,Fe,(z,H)=>{var U=bn(),K=v(U);{var ne=V=>{var R=mn(),L=v(R);q(()=>P(L,i[E()])),m(V,R)};I(K,V=>{r()&&V(ne)})}var ue=h(K,2),ee=v(ue),ge=h(ue,2);{var B=V=>{var R=yn(),L=v(R);q(()=>P(L,`(${d(H).field??""})`)),m(V,R)};I(ge,V=>{d(H).field&&!r()&&V(B)})}q(()=>{we(U,1,`error-item ${E()??""}`,"svelte-bayq38"),P(ee,d(H).message)}),m(z,U)}),m(ie,Z)};I(X,ie=>{j().length>0&&ie(re)})}m(b,te)});var M=h(F,2);{var x=b=>{var y=kn(),N=h(v(y),2);Ue(N,21,()=>w.validationResults.filter(E=>E.suggestion),Fe,(E,j)=>{var te=An(),X=v(te);q(()=>P(X,d(j).suggestion)),m(E,te)}),m(b,y)};I(M,b=>{!r()&&w.validationResults.some(y=>y.suggestion)&&b(x)})}m(C,S)};I(f,C=>{w.validationResults.length===0?C(_):C(g,!1)},l)}};I(a,f=>{w.isValidating?f(c):f(p,!1)})}q(f=>u=we(o,1,"validation-display svelte-bayq38",null,u,f),[()=>({compact:r()})]),m(t,o),Re()}async function xn(t,e){try{const r=w.exportConfiguration();await navigator.clipboard.writeText(JSON.stringify(r,null,2)),T(e,!0),setTimeout(()=>T(e,!1),2e3)}catch(r){console.error("Failed to copy:",r)}}async function In(){w.configurationId?await w.saveConfiguration():await w.createConfiguration()}var Pn=(t,e)=>T(e,!0),Cn=A('<tr><td class="svelte-10y69ed"> </td><td class="muted svelte-10y69ed"> </td><td class="center svelte-10y69ed"> </td><td class="right svelte-10y69ed"> </td><td class="right bold svelte-10y69ed"> </td></tr>'),On=A('<tr><td colspan="5" class="no-data svelte-10y69ed">No options selected</td></tr>'),Tn=A('<section class="section svelte-10y69ed"><h3 class="svelte-10y69ed">Validation Results</h3> <!></section>'),qn=A('<span class="save-status svelte-10y69ed"> </span>'),Dn=(t,e)=>T(e,!1),Mn=t=>t.stopPropagation(),Rn=(t,e)=>T(e,!1),Nn=A('<div class="dialog-overlay svelte-10y69ed"><div class="dialog svelte-10y69ed"><h3 class="svelte-10y69ed">Export Configuration</h3> <div class="export-options svelte-10y69ed"><label class="svelte-10y69ed"><input type="radio"/> JSON (Complete configuration data)</label> <label class="svelte-10y69ed"><input type="radio"/> CSV (Selected options only)</label></div> <div class="dialog-actions svelte-10y69ed"><button class="btn btn-secondary svelte-10y69ed">Cancel</button> <button class="btn btn-primary svelte-10y69ed">Export</button></div></div></div>'),jn=A('<div class="configuration-summary svelte-10y69ed"><div class="summary-header svelte-10y69ed"><h2 class="svelte-10y69ed">Configuration Summary</h2> <div class="actions svelte-10y69ed"><button class="btn btn-secondary svelte-10y69ed">Export</button> <button class="btn btn-primary svelte-10y69ed">Save Configuration</button></div></div> <div class="metrics-grid svelte-10y69ed"><div class="metric svelte-10y69ed"><div class="metric-value svelte-10y69ed"> </div> <div class="metric-label svelte-10y69ed">Options Selected</div></div> <div class="metric svelte-10y69ed"><div class="metric-value svelte-10y69ed"> </div> <div class="metric-label svelte-10y69ed">Complete</div></div> <div class="metric svelte-10y69ed"><div> </div> <div class="metric-label svelte-10y69ed">Status</div></div></div> <section class="section svelte-10y69ed"><h3 class="svelte-10y69ed">Selected Options</h3> <div class="options-table svelte-10y69ed"><table class="svelte-10y69ed"><thead><tr><th class="svelte-10y69ed">Option</th><th class="svelte-10y69ed">Group</th><th class="svelte-10y69ed">Quantity</th><th class="svelte-10y69ed">Unit Price</th><th class="svelte-10y69ed">Total</th></tr></thead><tbody><!></tbody></table></div></section> <section class="section svelte-10y69ed"><h3 class="svelte-10y69ed">Pricing Details</h3> <!></section> <!> <div class="summary-actions svelte-10y69ed"><button class="btn btn-secondary svelte-10y69ed"> </button> <!></div> <!></div>');function zn(t,e){Me(e,!0);const r=[];let s=Y(!1),i=Y(!1),n=Y("json");function o(){const B=w.exportConfiguration();let V,R,L;if(d(n)==="json")V=JSON.stringify(B,null,2),R="application/json",L="json";else{const ce=["Option","Quantity","Unit Price","Total Price"],Se=w.selectedOptions.map($=>[$.name,$.quantity,$.base_price.toFixed(2),($.quantity*$.base_price).toFixed(2)]);V=[ce.join(","),...Se.map($=>$.join(","))].join(`
`),R="text/csv",L="csv"}const Q=new Blob([V],{type:R}),se=URL.createObjectURL(Q),oe=document.createElement("a");oe.href=se,oe.download=`configuration-${Date.now()}.${L}`,oe.click(),URL.revokeObjectURL(se),T(s,!1)}var u=jn(),a=v(u),c=h(v(a),2),p=v(c);p.__click=[Pn,s];var f=h(p,2);f.__click=[In];var l=h(a,2),_=v(l),g=v(_),C=v(g),S=h(_,2),F=v(S),M=v(F),x=h(S,2),b=v(x);let y;var N=v(b),E=h(l,2),j=h(v(E),2),te=v(j),X=h(v(te)),re=v(X);{var ie=B=>{var V=Qe(),R=je(V);Ue(R,17,()=>w.selectedOptions,Fe,(L,Q)=>{var se=Cn(),oe=v(se),ce=v(oe),Se=h(oe),$=v(Se),Pe=h(Se),Ze=v(Pe),Ft=h(Pe),io=v(Ft),so=h(Ft),no=v(so);q((oo,ao)=>{P(ce,d(Q).name),P($,d(Q).group_name),P(Ze,d(Q).quantity),P(io,`$${oo??""}`),P(no,`$${ao??""}`)},[()=>(d(Q).base_price||0).toFixed(2),()=>((d(Q).quantity||0)*(d(Q).base_price||0)).toFixed(2)]),m(L,se)}),m(B,V)},Z=B=>{var V=On();m(B,V)};I(re,B=>{w.selectedOptions.length>0?B(ie):B(Z,!1)})}var k=h(E,2),D=h(v(k),2);nr(D,{detailed:!0});var O=h(k,2);{var z=B=>{var V=Tn(),R=h(v(V),2);or(R,{}),m(B,V)};I(O,B=>{w.validationResults.length>0&&B(z)})}var H=h(O,2),U=v(H);U.__click=[xn,i];var K=v(U),ne=h(U,2);{var ue=B=>{var V=qn(),R=v(V);q(L=>P(R,`Last saved: ${L??""}`),[()=>w.lastSaved.toLocaleTimeString()]),m(B,V)};I(ne,B=>{w.lastSaved&&B(ue)})}var ee=h(H,2);{var ge=B=>{var V=Nn();V.__click=[Dn,s];var R=v(V);R.__click=[Mn];var L=h(v(R),2),Q=v(L),se=v(Q);se.value=se.__value="json";var oe=h(Q,2),ce=v(oe);ce.value=ce.__value="csv";var Se=h(L,2),$=v(Se);$.__click=[Rn,s];var Pe=h($,2);Pe.__click=o,Zr(r,[],se,()=>d(n),Ze=>T(n,Ze)),Zr(r,[],ce,()=>d(n),Ze=>T(n,Ze)),m(B,V)};I(ee,B=>{d(s)&&B(ge)})}q(B=>{P(C,w.selectedOptions.length),P(M,`${w.completionPercentage??""}%`),y=we(b,1,"metric-value status svelte-10y69ed",null,y,B),P(N,w.isValid?"✓ Valid":"✗ Invalid"),P(K,d(i)?"✓ Copied!":"Copy Configuration")},[()=>({valid:w.isValid})]),m(t,u),Re()}bt(["click"]);var Ln=()=>location.reload(),Fn=A('<div class="error-container svelte-fpbtyb"><div class="error-message svelte-fpbtyb"><h3 class="svelte-fpbtyb">Configuration Error</h3> <p> </p> <button class="btn btn-primary svelte-fpbtyb">Reload Page</button></div></div>'),Un=A('<div class="option-groups svelte-fpbtyb"></div>'),Vn=A('<div class="no-options svelte-fpbtyb"><h3 class="svelte-fpbtyb">⚠️ No Options Found</h3> <p class="svelte-fpbtyb">Groups exist but contain no options.</p> <p class="help svelte-fpbtyb">Check console for API details or use the debug test page.</p></div>'),Bn=A('<div class="no-options svelte-fpbtyb"><h3 class="svelte-fpbtyb">⚠️ No Configuration Options Available</h3> <p class="svelte-fpbtyb">The model has no option groups configured.</p> <p class="help svelte-fpbtyb">Check the browser console for API response details.</p></div>'),Gn=A('<div class="configuration-step"><h2> </h2> <!> <div class="step-actions svelte-fpbtyb"><button class="btn btn-primary svelte-fpbtyb">Continue to Validation</button></div></div>'),Yn=A('<div class="validation-step"><h2>Configuration Validation</h2> <!> <div class="step-actions svelte-fpbtyb"><button class="btn btn-secondary svelte-fpbtyb">Back</button> <button class="btn btn-primary svelte-fpbtyb">Continue to Pricing</button></div></div>'),Hn=A('<div class="pricing-step"><h2>Pricing Details</h2> <!> <div class="step-actions svelte-fpbtyb"><button class="btn btn-secondary svelte-fpbtyb">Back</button> <button class="btn btn-primary svelte-fpbtyb">Continue to Summary</button></div></div>'),Wn=A('<div class="summary-step"><h2>Configuration Summary</h2> <!> <div class="step-actions svelte-fpbtyb"><button class="btn btn-secondary svelte-fpbtyb">Back</button> <button class="btn btn-success svelte-fpbtyb">Complete Configuration</button></div></div>'),Jn=A('<div class="selected-item svelte-fpbtyb"><span> </span> <span class="quantity svelte-fpbtyb"> </span></div>'),Kn=A('<div class="sidebar-section svelte-fpbtyb"><h3 class="svelte-fpbtyb">Issues</h3> <!></div>'),Qn=A('<aside class="configurator-sidebar svelte-fpbtyb"><div class="sidebar-section svelte-fpbtyb"><h3 class="svelte-fpbtyb">Current Selection</h3> <div class="selected-items svelte-fpbtyb"></div></div> <div class="sidebar-section svelte-fpbtyb"><h3 class="svelte-fpbtyb">Pricing Summary</h3> <!></div> <!></aside>'),Zn=A('<div class="configurator-container svelte-fpbtyb"><!> <div class="configurator-content svelte-fpbtyb"><!></div> <!></div>'),Xn=A("<div><!></div>");function $n(t,e){Me(e,!0);let r=he(e,"theme",3,"light"),s=he(e,"apiUrl",3,"/api/v1"),i=he(e,"embedMode",3,!1),n=he(e,"onComplete",3,null),o=he(e,"onConfigurationChange",3,null),u=he(e,"onError",3,null);const a=ws();let c=Y(!1),p=xe(()=>[{id:"configure",label:"Configure",icon:"⚙️"},{id:"validate",label:"Validate",icon:"✓"},{id:"price",label:"Price",icon:"💰"},{id:"summary",label:"Summary",icon:"📋"}]);typeof window<"u"&&(window.__API_BASE_URL__=s(),console.log("Configurator initialized with API URL:",s())),$r(()=>{w.initialize(),w.setModelId(e.modelId),T(c,!0),document.documentElement.setAttribute("data-theme",r());const S=zi(()=>{Ve(()=>{o()&&Object.keys(w.selections).length>0&&o()(w.exportConfiguration())}),Ve(()=>{u()&&w.error&&u()(w.error)})});return()=>{S(),w.reset()}});function f(){const S=w.exportConfiguration();a("complete",S),n()?.(S)}function l(){w.currentStep<d(p).length-1&&w.currentStep++}function _(){w.currentStep>0&&w.currentStep--}var g=Xn(),C=v(g);Ms(C,{children:(S,F)=>{var M=Qe(),x=je(M);{var b=N=>{Os(N,{message:"Loading configuration..."})},y=(N,E)=>{{var j=X=>{var re=Fn(),ie=v(re),Z=h(v(ie),2),k=v(Z),D=h(Z,2);D.__click=[Ln],q(()=>P(k,w.error)),m(X,re)},te=X=>{var re=Zn(),ie=v(re);Ps(ie,{get steps(){return d(p)},get currentStep(){return w.currentStep},get completionPercentage(){return w.completionPercentage}});var Z=h(ie,2),k=v(Z);{var D=U=>{var K=Gn(),ne=v(K),ue=v(ne),ee=h(ne,2);{var ge=L=>{var Q=Qe();const se=xe(()=>w.model.option_groups.some($=>$.options?.length>0));var oe=je(Q);{var ce=$=>{var Pe=Un();Ue(Pe,21,()=>w.model.option_groups,Fe,(Ze,Ft)=>{rn(Ze,{get group(){return d(Ft)}})}),m($,Pe)},Se=$=>{var Pe=Vn();m($,Pe)};I(oe,$=>{d(se)?$(ce):$(Se,!1)})}m(L,Q)},B=L=>{var Q=Bn();m(L,Q)};I(ee,L=>{w.model?.option_groups&&Array.isArray(w.model.option_groups)?L(ge):L(B,!1)})}var V=h(ee,2),R=v(V);R.__click=l,q(()=>{P(ue,`Configure Your ${w.model?.name||"Product"}`),R.disabled=!w.canProceedToNextStep}),m(U,K)},O=(U,K)=>{{var ne=ee=>{var ge=Yn(),B=h(v(ge),2);or(B,{});var V=h(B,2),R=v(V);R.__click=_;var L=h(R,2);L.__click=l,q(()=>L.disabled=!w.isValid),m(ee,ge)},ue=(ee,ge)=>{{var B=R=>{var L=Hn(),Q=h(v(L),2);nr(Q,{detailed:!0});var se=h(Q,2),oe=v(se);oe.__click=_;var ce=h(oe,2);ce.__click=l,m(R,L)},V=(R,L)=>{{var Q=se=>{var oe=Wn(),ce=h(v(oe),2);zn(ce,{});var Se=h(ce,2),$=v(Se);$.__click=_;var Pe=h($,2);Pe.__click=f,m(se,oe)};I(R,se=>{w.currentStep===3&&se(Q)},L)}};I(ee,R=>{w.currentStep===2?R(B):R(V,!1)},ge)}};I(U,ee=>{w.currentStep===1?ee(ne):ee(ue,!1)},K)}};I(k,U=>{w.currentStep===0?U(D):U(O,!1)})}var z=h(Z,2);{var H=U=>{var K=Qn(),ne=v(K),ue=h(v(ne),2);Ue(ue,21,()=>w.selectedOptions,Fe,(R,L)=>{var Q=Jn(),se=v(Q),oe=v(se),ce=h(se,2),Se=v(ce);q(()=>{P(oe,d(L).name),P(Se,`×${d(L).quantity??""}`)}),m(R,Q)});var ee=h(ne,2),ge=h(v(ee),2);nr(ge,{});var B=h(ee,2);{var V=R=>{var L=Kn(),Q=h(v(L),2);or(Q,{compact:!0}),m(R,L)};I(B,R=>{w.validationResults.length>0&&R(V)})}m(U,K)};I(z,U=>{i()||U(H)})}m(X,re)};I(N,X=>{w.error&&w.retryCount>=3?X(j):X(te,!1)},E)}};I(x,N=>{!d(c)||w.isLoading?N(b):N(y,!1)})}m(S,M)},$$slots:{default:!0}}),q(()=>{we(g,1,`configurator-app ${i()?"embed-mode":""}`,"svelte-fpbtyb"),Jr(g,"data-theme",r())}),m(t,g),Re()}bt(["click"]);const ar=new URLSearchParams(window.location.search),eo=ar.get("model")||window.location.pathname.split("/").pop(),to=ar.get("theme")||"light",ro=ar.get("api")||"http://localhost:8080/api/v1";return ss($n,{target:document.body,props:{modelId:eo,theme:to,apiUrl:ro,embedMode:!0,onComplete:t=>{window.parent!==window&&window.parent.postMessage({type:"cpq-configuration-complete",configuration:t},"*")},onConfigurationChange:t=>{window.parent!==window&&window.parent.postMessage({type:"cpq-configuration-change",configuration:t},"*")},onError:t=>{window.parent!==window&&window.parent.postMessage({type:"cpq-error",error:t.message},"*")}}})}();
