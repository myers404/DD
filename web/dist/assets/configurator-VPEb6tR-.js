var e,t,i,s,a,n,o,r,l,c,d,v,u,p,h,g,m,f,b,y,_,w,k,S,A,$=e=>{throw TypeError(e)},I=(e,t,i)=>t.has(e)||$("Cannot "+i),q=(e,t,i)=>(I(e,t,"read from private field"),i?i.call(e):t.get(e)),C=(e,t,i)=>t.has(e)?$("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),x=(e,t,i,s)=>(I(e,t,"write to private field"),s?s.call(e,i):t.set(e,i),i);import{g as M,s as P,a as E,p as D,u as T,d as O,b as R,c as z,f as V,e as L,t as j,h as G,i as U,j as W,k as B,l as F,m as H,n as N,o as Q,q as J,r as Y,v as K,w as X,x as Z,y as ee,z as te,A as ie,B as se,C as ae,D as ne,E as oe,F as re,G as le,H as ce,I as de}from"./vendor-DNQlz6Lr.js";"undefined"!=typeof window&&((e=window.__svelte??(window.__svelte={})).v??(e.v=new Set)).add("5");class ve{constructor(e,t={}){this.baseUrl=e||window.__API_BASE_URL__||"http://localhost:8080/api/v1",this.modelId=t.modelId,this.authToken=t.authToken||localStorage.getItem("auth_token"),this.timeout=t.timeout||3e4,console.log("API Client initialized:",{baseUrl:this.baseUrl,modelId:this.modelId,hasAuth:!!this.authToken})}async request(e,t={}){const i=`${this.baseUrl}${e}`;console.log(`API Request: ${t.method||"GET"} ${i}`);const s={method:"GET",headers:{"Content-Type":"application/json",...this.authToken&&{Authorization:`Bearer ${this.authToken}`},...t.headers},...t};s.body&&"object"==typeof s.body&&(s.body=JSON.stringify(s.body));try{const t=new AbortController,a=setTimeout((()=>t.abort()),this.timeout),n=await fetch(i,{...s,signal:t.signal});if(clearTimeout(a),!n.ok){const e=await n.json().catch((()=>({message:n.statusText})));throw new Error(e.message||e.error||`HTTP ${n.status}`)}const o=await n.json();return"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname||console.log(`API Response from ${e}:`,o),o&&"object"==typeof o&&void 0!==o.success&&void 0!==o.data?o.data:o??(e.includes("/groups")||e.includes("/options")||e.includes("/rules")?[]:{})}catch(a){if("AbortError"===a.name)throw new Error("Request timeout");throw console.error(`API Error for ${e}:`,a),a}}async getModel(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}`);return!e.option_groups&&e.groups&&(e.option_groups=e.groups),console.log("Model structure:",{hasGroups:!!e.groups,hasOptionGroups:!!e.option_groups,hasOptions:!!e.options,groupsCount:e.groups?.length||e.option_groups?.length||0,optionsCount:e.options?.length||0}),e}async getModelGroups(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/groups`);return Array.isArray(e)?e:[]}async getModelOptions(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/options`);return Array.isArray(e)?e:[]}async getModelRules(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/rules`);return Array.isArray(e)?e:[]}async getModelPricingRules(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/pricing-rules`);return Array.isArray(e)?e:[]}async getModelStatistics(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/statistics`)}async createConfiguration(e=[]){return this.request("/configurations",{method:"POST",body:{model_id:"sample-laptop",name:`Configuration ${(new Date).toISOString()}`,selections:this.formatSelections(e)}})}async getConfiguration(e){return this.request(`/configurations/${e}`)}async updateConfiguration(e,t){return this.request(`/configurations/${e}`,{method:"PUT",body:{model_id:this.modelId,...t,selections:t.selections?this.formatSelections(t.selections):void 0}})}async deleteConfiguration(e){return this.request(`/configurations/${e}`,{method:"DELETE"})}async addSelections(e,t){return this.request(`/configurations/${e}/selections`,{method:"POST",body:{selections:this.formatSelections(t)}})}async removeSelection(e,t){return this.request(`/configurations/${e}/selections/${t}`,{method:"DELETE"})}async validateConfiguration(e){return this.request(`/configurations/${e}/validate`,{method:"POST"})}async validateSelections(e){return this.request("/configurations/validate-selection",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e)}})}async getAvailableOptions(e){return this.request(`/configurations/${e}/available-options`)}async getConstraints(e){return this.request(`/configurations/${e}/constraints`)}async getConfigurationSummary(e){return this.request(`/configurations/${e}/summary`)}async cloneConfiguration(e){return this.request(`/configurations/${e}/clone`,{method:"POST"})}async calculatePrice(e,t={}){return this.request("/pricing/calculate",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e),context:t}})}async simulatePricing(e){return this.request("/pricing/simulate",{method:"POST",body:{model_id:this.modelId,scenarios:e}})}async validatePricing(e,t){return this.request("/pricing/validate",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e),expected_price:t}})}async getPricingRules(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/pricing/rules/${this.modelId}`)}async getVolumeTiers(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/pricing/volume-tiers/${this.modelId}`)}async validateModel(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/validate`,{method:"POST"})}async detectConflicts(e=[]){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/conflicts`,{method:"POST",body:{rule_ids:e}})}async analyzeImpact(e){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/impact`,{method:"POST",body:e})}async getModelQuality(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/quality`,{method:"POST"})}async getOptimizationRecommendations(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/optimize`,{method:"POST"})}formatSelections(e){return Array.isArray(e)?e:Object.entries(e).filter((([e,t])=>t>0)).map((([e,t])=>({option_id:e,quantity:parseInt(t)||1})))}async batchValidate(e){return this.request("/configurations/validate",{method:"POST",body:{configurations:e}})}async bulkCalculatePricing(e){return this.request("/pricing/bulk-calculate",{method:"POST",body:{configurations:e}})}async checkHealth(){return this.request("/health")}async getStatus(){return this.request("/status")}}function ue(e){if("string"!=typeof e)return!1;return["=>","function","$props","$","$.strict_equals","return ","${","() =>","} else","if (",".selection_type","strict_equals","min_selections","max_selections"].some((t=>e.includes(t)))}function pe(e,t=""){if(null==e)return t;const i=String(e);return("string"!=typeof e||ue(i))&&ue(i)?(console.warn("[Sanitizer] Code pattern detected and removed:",{original:i.substring(0,100)+(i.length>100?"...":""),fallback:t}),t):i}t=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,n=new WeakMap,o=new WeakMap,r=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,v=new WeakMap,u=new WeakMap,p=new WeakMap,h=new WeakMap,g=new WeakMap,m=new WeakMap,f=new WeakMap,b=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap,k=new WeakMap,S=new WeakMap,A=new WeakMap;const he=new class{constructor(){C(this,t),C(this,i),C(this,s),C(this,a),C(this,n),C(this,o),C(this,r),C(this,l),C(this,c),C(this,d),C(this,v),C(this,u),C(this,p),C(this,h),C(this,g),C(this,m),C(this,f),C(this,b),C(this,y),C(this,_),C(this,w),C(this,k),C(this,S),C(this,A),x(this,t,E("")),x(this,i,E(null)),x(this,s,E(null)),x(this,a,E(D({}))),x(this,n,E(null)),x(this,o,E(null)),x(this,r,E(D([]))),x(this,l,E(D([]))),x(this,c,E(D([]))),x(this,d,E(D([]))),x(this,v,E(D([]))),x(this,u,E(D([]))),x(this,p,E(D([]))),x(this,h,E(!1)),x(this,g,E(!1)),x(this,m,E(!1)),x(this,f,E(!1)),x(this,b,E(null)),x(this,y,E(D([]))),x(this,_,E(null)),x(this,w,E(null)),x(this,k,E(!1)),x(this,S,E(0)),x(this,A,E(D(new Set))),this.api=null,this._initialized=!1,this._debounceTimers=new Map,this._modelLoaded=!1}get modelId(){return M(q(this,t))}set modelId(e){P(q(this,t),e,!0)}get model(){return M(q(this,i))}set model(e){P(q(this,i),e,!0)}get configuration(){return M(q(this,s))}set configuration(e){P(q(this,s),e,!0)}get selections(){return M(q(this,a))}set selections(e){P(q(this,a),e,!0)}get validationResults(){return M(q(this,n))}set validationResults(e){P(q(this,n),e,!0)}get pricingData(){return M(q(this,o))}set pricingData(e){P(q(this,o),e,!0)}get availableOptions(){return M(q(this,r))}set availableOptions(e){P(q(this,r),e,!0)}get constraints(){return M(q(this,l))}set constraints(e){P(q(this,l),e,!0)}get groups(){return M(q(this,c))}set groups(e){P(q(this,c),e,!0)}get options(){return M(q(this,d))}set options(e){P(q(this,d),e,!0)}get rules(){return M(q(this,v))}set rules(e){P(q(this,v),e,!0)}get pricingRules(){return M(q(this,u))}set pricingRules(e){P(q(this,u),e,!0)}get volumeTiers(){return M(q(this,p))}set volumeTiers(e){P(q(this,p),e,!0)}get isLoading(){return M(q(this,h))}set isLoading(e){P(q(this,h),e,!0)}get isValidating(){return M(q(this,g))}set isValidating(e){P(q(this,g),e,!0)}get isPricing(){return M(q(this,m))}set isPricing(e){P(q(this,m),e,!0)}get isSaving(){return M(q(this,f))}set isSaving(e){P(q(this,f),e,!0)}get error(){return M(q(this,b))}set error(e){P(q(this,b),e,!0)}get validationErrors(){return M(q(this,y))}set validationErrors(e){P(q(this,y),e,!0)}get configurationId(){return M(q(this,_))}set configurationId(e){P(q(this,_),e,!0)}get lastSaved(){return M(q(this,w))}set lastSaved(e){P(q(this,w),e,!0)}get isDirty(){return M(q(this,k))}set isDirty(e){P(q(this,k),e,!0)}get currentStep(){return M(q(this,S))}set currentStep(e){P(q(this,S),e,!0)}get expandedGroups(){return M(q(this,A))}set expandedGroups(e){P(q(this,A),e,!0)}async initialize(){this._initialized||(this._initialized=!0,console.log("üöÄ ConfigurationStore initialized"),Array.isArray(this.groups)||(this.groups=[]),Array.isArray(this.options)||(this.options=[]),Array.isArray(this.rules)||(this.rules=[]),Array.isArray(this.pricingRules)||(this.pricingRules=[]),Array.isArray(this.volumeTiers)||(this.volumeTiers=[]),Array.isArray(this.availableOptions)||(this.availableOptions=[]),Array.isArray(this.validationErrors)||(this.validationErrors=[]),T((()=>{this.modelId&&!this.api&&(this.api=new ve(window.__API_BASE_URL__,{modelId:this.modelId}),this.loadModel())})),T((()=>{this.api&&Object.keys(this.selections).length>0&&this._debounce("validate",(()=>this.validateSelections()),500)})),T((()=>{this.api&&this.isValid&&Object.keys(this.selections).length>0&&this._debounce("pricing",(()=>this.calculatePricing()),300)})),T((()=>{this.configuration&&Object.keys(this.selections).length>0&&(this.isDirty=!0)})))}get isValid(){return!this.validationResults||this.validationResults.is_valid}get hasViolations(){return this.validationResults?.violations?.length>0}get totalPrice(){return this.pricingData?.total_price||0}get basePrice(){return this.pricingData?.base_price||0}get discounts(){return this.pricingData?.discounts||[]}get selectedCount(){return Object.values(this.selections).reduce(((e,t)=>e+t),0)}get safeGroups(){return Array.isArray(this.groups)?this.groups:[]}get safeOptions(){return Array.isArray(this.options)?this.options:[]}get safeRules(){return Array.isArray(this.rules)?this.rules:[]}get safePricingRules(){return Array.isArray(this.pricingRules)?this.pricingRules:[]}get safeVolumeTiers(){return Array.isArray(this.volumeTiers)?this.volumeTiers:[]}get progress(){if(!this.model||!this._modelLoaded)return 0;const e=this.safeGroups;if(0===e.length)return 0;const t=e.filter((e=>e&&e.required)).length;if(0===t)return 100;const i=e.filter((e=>e&&e.id&&this.hasGroupSelection(e.id))).length;return Math.round(i/t*100)}async loadModel(){if(this.api){this.isLoading=!0,this.error=null;try{const[t,i,s,a,n]=await Promise.all([this.api.getModel(),this.api.getModelGroups(),this.api.getModelOptions(),this.api.getModelRules().catch((()=>({data:[]}))),this.api.getModelPricingRules().catch((()=>({data:[]})))]);if(this.model=t,this.groups=Array.isArray(i)?i:i&&"object"==typeof i&&i.data?i.data:i&&"object"==typeof i&&i.groups?i.groups:t&&t.option_groups&&Array.isArray(t.option_groups)?t.option_groups:t&&t.groups&&Array.isArray(t.groups)?t.groups:[],this.options=Array.isArray(s)?s:s&&"object"==typeof s&&s.data?s.data:s&&"object"==typeof s&&s.options?s.options:t&&t.options&&Array.isArray(t.options)?t.options:[],this.rules=Array.isArray(a)?a:a&&"object"==typeof a&&a.data?a.data:a&&"object"==typeof a&&a.rules?a.rules:[],this.pricingRules=Array.isArray(n)?n:n&&"object"==typeof n&&n.data?n.data:n&&"object"==typeof n&&n.pricing_rules?n.pricing_rules:[],this.groups=this.groups.map((e=>({...e,description:"string"==typeof e.description&&(e.description.includes("=>")||e.description.includes("function")||e.description.includes("$props"))?"":e.description}))),this.options=this.options.map((e=>({...e,description:"string"==typeof e.description&&(e.description.includes("=>")||e.description.includes("function")||e.description.includes("$props"))?"":e.description}))),Array.isArray(this.groups)||(this.groups=[]),Array.isArray(this.options)||(this.options=[]),Array.isArray(this.rules)||(this.rules=[]),Array.isArray(this.pricingRules)||(this.pricingRules=[]),0===this.groups.length&&t.option_groups&&(console.log("Using groups from model.option_groups"),this.groups=Array.isArray(t.option_groups)?t.option_groups:[]),0===this.groups.length&&t.groups&&(console.log("Using groups from model.groups"),this.groups=Array.isArray(t.groups)?t.groups:[]),0===this.options.length&&t.options&&(console.log("Using options from model.options"),this.options=Array.isArray(t.options)?t.options:[]),0===this.options.length&&this.groups.length>0){const e=[];this.groups.forEach((t=>{Array.isArray(t.options)&&t.options.forEach((i=>{e.push({...i,group_id:t.id})}))})),e.length>0&&(console.log("Extracted options from groups:",e.length),this.options=e)}console.log("Model loaded:",{model:t,groups:this.groups,options:this.options,groupsCount:this.groups.length,optionsCount:this.options.length}),this.groups.forEach(((e,t)=>{e.description&&"string"==typeof e.description&&(e.description.includes("=>")||e.description.includes("function"))&&console.warn(`Group ${t} (${e.name}) has function code in description:`,e.description),e.name&&"string"==typeof e.name&&(e.name.includes("=>")||e.name.includes("function"))&&console.warn(`Group ${t} has function code in name:`,e.name)})),this.options.forEach(((e,t)=>{e.description&&"string"==typeof e.description&&(e.description.includes("=>")||e.description.includes("function"))&&console.warn(`Option ${t} (${e.name}) has function code in description:`,e.description),e.name&&"string"==typeof e.name&&(e.name.includes("=>")||e.name.includes("function"))&&console.warn(`Option ${t} has function code in name:`,e.name)}));try{const e=await this.api.getVolumeTiers();this.volumeTiers=Array.isArray(e)?e:e&&"object"==typeof e&&e.data?e.data:e&&"object"==typeof e&&e.tiers?e.tiers:[]}catch(e){console.warn("Volume tiers not available"),this.volumeTiers=[]}Array.isArray(this.volumeTiers)||(this.volumeTiers=[]),this.groups.length>0||this.options.length>0?(this._modelLoaded=!0,await this.createConfiguration()):console.warn("No groups or options loaded - skipping configuration creation")}catch(t){this.error=t.message,console.error("Failed to load model:",t)}finally{this.isLoading=!1}}}async createConfiguration(){if(this.api&&!this.configuration)try{const e=await this.api.createConfiguration([]);this.configuration=e,this.configurationId=e.id,console.log("Configuration created:",e.id)}catch(e){this.error=e.message,console.error("Failed to create configuration:",e)}}async loadConfiguration(e){if(this.api){this.isLoading=!0;try{const t=await this.api.getConfiguration(e);this.configuration=t,this.configurationId=t.id;const i={};t.selections?.forEach((e=>{i[e.option_id]=e.quantity})),this.selections=i,await Promise.all([this.validateConfiguration(),this.calculatePricing()])}catch(t){this.error=t.message}finally{this.isLoading=!1}}}async saveConfiguration(){if(this.api&&this.configurationId&&this.isDirty){this.isSaving=!0;try{await this.api.updateConfiguration(this.configurationId,{selections:this.selections,name:`Configuration ${(new Date).toLocaleDateString()}`}),this.lastSaved=new Date,this.isDirty=!1}catch(e){console.error("Failed to save configuration:",e)}finally{this.isSaving=!1}}}async updateSelection(e,t){const i=this.safeOptions,s=this.safeGroups;if(0===i.length)return void console.warn("Cannot update selection - options not loaded");const a={...this.selections};t>0?a[e]=t:delete a[e];const n=i.find((t=>t.id===e));if(n){const t=s.find((e=>e.id===n.group_id));if("single"===t?.selection_type&&i.filter((i=>i.group_id===t.id&&i.id!==e)).forEach((e=>delete a[e.id])),t?.max_selections){if(i.filter((e=>e.group_id===t.id&&a[e.id])).length>t.max_selections)return void(this.error=`Maximum ${t.max_selections} selections allowed in ${t.name}`)}}if(this.selections=a,this.configurationId)try{t>0?await this.api.addSelections(this.configurationId,a):await this.api.removeSelection(this.configurationId,e)}catch(o){this.error=o.message}}toggleOption(e){const t=this.selections[e]||0;return this.updateSelection(e,t>0?0:1)}async validateSelections(){if(this.api&&!this.isValidating){this.isValidating=!0,this.validationErrors=[];try{const e=await this.api.validateSelections(this.selections);this.validationResults=e,e.available_options&&(this.availableOptions=e.available_options),e.violations&&(this.validationErrors=e.violations)}catch(e){console.error("Validation failed:",e)}finally{this.isValidating=!1}}}async validateConfiguration(){if(this.api&&this.configurationId){this.isValidating=!0;try{const e=await this.api.validateConfiguration(this.configurationId);this.validationResults=e,e.available_options&&(this.availableOptions=e.available_options)}catch(e){console.error("Configuration validation failed:",e)}finally{this.isValidating=!1}}}async calculatePricing(e={}){if(this.api&&!this.isPricing){this.isPricing=!0;try{const t=await this.api.calculatePrice(this.selections,e);this.pricingData=t}catch(t){console.error("Pricing calculation failed:",t)}finally{this.isPricing=!1}}}hasGroupSelection(e){return this.safeOptions.filter((t=>t.group_id===e)).some((e=>this.selections[e.id]>0))}getGroupSelections(e){return this.safeOptions.filter((t=>t.group_id===e&&this.selections[t.id]>0)).map((e=>({...e,quantity:this.selections[e.id]})))}isOptionAvailable(e){return!this.availableOptions.length||this.availableOptions.includes(e)}isOptionSelected(e){return this.selections[e]>0}getOptionQuantity(e){return this.selections[e]||0}toggleGroup(e){const t=new Set(this.expandedGroups);t.has(e)?t.delete(e):t.add(e),this.expandedGroups=t}isGroupExpanded(e){return this.expandedGroups.has(e)}exportConfiguration(){const e=this.safeOptions,t=Object.entries(this.selections).filter((([e,t])=>t>0)).map((([t,i])=>{const s=e.find((e=>e.id===t));return{option_id:t,option_name:s?.name,quantity:i,unit_price:s?.price||0,total_price:(s?.price||0)*i}}));return{id:this.configurationId,model_id:this.modelId,model_name:this.model?.name,selections:t,validation:{is_valid:this.isValid,violations:this.validationResults?.violations||[]},pricing:{base_price:this.basePrice,total_price:this.totalPrice,discounts:this.discounts,breakdown:this.pricingData?.breakdown||[]},metadata:{created:this.configuration?.created_at,updated:this.configuration?.updated_at,saved:this.lastSaved}}}reset(){this.selections={},this.validationResults=null,this.pricingData=null,this.configuration=null,this.configurationId=null,this.currentStep=0,this.isDirty=!1,this.error=null,this.validationErrors=[]}_debounce(e,t,i){clearTimeout(this._debounceTimers.get(e)),this._debounceTimers.set(e,setTimeout(t,i))}canProceedToStep(e){switch(e){case 1:return this.selectedCount>0;case 2:return this.isValid;case 3:return this.isValid&&this.pricingData;default:return!0}}nextStep(){this.currentStep<3&&this.canProceedToStep(this.currentStep+1)&&this.currentStep++}previousStep(){this.currentStep>0&&this.currentStep--}goToStep(e){e>=0&&e<=3&&this.canProceedToStep(e)&&(this.currentStep=e)}setModelId(e){this.modelId!==e&&(this.reset(),this.modelId=e)}};var ge=K('<svg class="checkmark svelte-19ib3n" width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M13.854 3.646a.5.5 0 010 .708l-7 7a.5.5 0 01-.708 0l-3.5-3.5a.5.5 0 11.708-.708L6.5 10.293l6.646-6.647a.5.5 0 01.708 0z"></path></svg>'),me=V('<span class="step-number svelte-19ib3n"></span>'),fe=V('<div><div class="step-marker svelte-19ib3n"><!></div> <div class="step-content svelte-19ib3n"><span class="step-icon svelte-19ib3n"> </span> <span class="step-label svelte-19ib3n"> </span></div></div>'),be=V('<div class="progress-indicator svelte-19ib3n"><div class="progress-bar svelte-19ib3n"><div class="progress-fill svelte-19ib3n"></div></div> <div class="steps svelte-19ib3n"></div></div>');function ye(e,t){R(t,!0);let i=z(t,"steps",19,(()=>[])),s=z(t,"currentStep",3,0),a=z(t,"onStepClick",3,null),n=z(t,"canNavigate",3,!1);function o(e){n()&&a()&&e<=s()&&a()(e)}var r=be(),l=B(r),c=B(l),d=W(l,2);L(d,21,i,X,((e,t,i)=>{var a=fe();const r=H((()=>function(e){return e<s()?"completed":e===s()?"active":"pending"}(i))),l=H((()=>n()&&i<=s()));let c;a.__click=()=>o(i),a.__keydown=e=>{!M(l)||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o(i))};var d=B(a),v=B(d),u=e=>{var t=ge();G(e,t)},p=e=>{var t=me();t.textContent=i+1,G(e,t)};N(v,(e=>{"completed"===M(r)?e(u):e(p,!1)}));var h=W(d,2),g=B(h),m=B(g),f=W(g,2),b=B(f);j((e=>{c=Q(a,1,`step ${M(r)??""}`,"svelte-19ib3n",c,e),J(a,"role",M(l)?"button":"presentation"),J(a,"tabindex",M(l)?0:-1),Y(m,M(t).icon),Y(b,M(t).label)}),[()=>({clickable:M(l)})]),G(e,a)})),j((()=>F(c,`width: ${0===s()?0:s()/(i().length-1)*100}%`))),G(e,r),U()}O(["click","keydown"]);var _e=V('<p class="loading-message svelte-121gmln"> </p>'),we=V('<div class="loading-overlay svelte-121gmln"><div class="loading-content svelte-121gmln"><div></div> <!></div></div>'),ke=V('<p class="loading-message svelte-121gmln"> </p>'),Se=V('<div class="loading-container svelte-121gmln"><div></div> <!></div>');function Ae(e,t){R(t,!0);let i=z(t,"size",3,"medium"),s=z(t,"message",3,""),a=z(t,"overlay",3,!1),n=z(t,"color",3,"primary"),o=H((()=>({small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"}[i()]||"w-8 h-8 border-3"))),r=H((()=>({primary:"border-blue-600 border-t-transparent",white:"border-white border-t-transparent",gray:"border-gray-600 border-t-transparent"}[n()]||"border-blue-600 border-t-transparent")));var l=Z(),c=ee(l),d=e=>{var t=we(),i=B(t),a=B(i),n=W(a,2),l=e=>{var t=_e(),i=B(t);j((()=>Y(i,s()))),G(e,t)};N(n,(e=>{s()&&e(l)})),j((()=>Q(a,1,`spinner ${M(o)??""} ${M(r)??""}`,"svelte-121gmln"))),G(e,t)},v=e=>{var t=Se(),i=B(t),a=W(i,2),n=e=>{var t=ke(),i=B(t);j((()=>Y(i,s()))),G(e,t)};N(a,(e=>{s()&&e(n)})),j((()=>Q(i,1,`spinner ${M(o)??""} ${M(r)??""}`,"svelte-121gmln"))),G(e,t)};N(c,(e=>{a()?e(d):e(v,!1)})),G(e,l),U()}var $e=()=>location.reload(),Ie=V('<div class="error-boundary svelte-szpq5s"><div class="error-content svelte-szpq5s"><div class="error-icon svelte-szpq5s">‚ö†Ô∏è</div> <h2 class="error-title svelte-szpq5s">Something went wrong</h2> <p class="error-message svelte-szpq5s"> </p> <!> <div class="error-actions svelte-szpq5s"><button class="btn btn-primary svelte-szpq5s">Try Again</button> <button class="btn btn-secondary svelte-szpq5s">Reload Page</button></div></div></div>');O(["click"]);var qe=V("<p> </p>"),Ce=V("<h1> </h1>"),xe=V("<h2> </h2>"),Me=V("<h3> </h3>"),Pe=V("<h4> </h4>"),Ee=V("<div> </div>"),De=V("<span> </span>");function Te(e,t){R(t,!0);let i=z(t,"text",3,""),s=z(t,"fallback",3,""),a=z(t,"tag",3,"span"),n=z(t,"class",3,""),o=H((()=>pe(i(),s())));var r=Z(),l=ee(r),c=e=>{var t=qe(),i=B(t);j((()=>{Q(t,1,se(n())),Y(i,M(o))})),G(e,t)},d=(e,t)=>{var i=e=>{var t=Ce(),i=B(t);j((()=>{Q(t,1,se(n())),Y(i,M(o))})),G(e,t)},s=(e,t)=>{var i=e=>{var t=xe(),i=B(t);j((()=>{Q(t,1,se(n())),Y(i,M(o))})),G(e,t)},s=(e,t)=>{var i=e=>{var t=Me(),i=B(t);j((()=>{Q(t,1,se(n())),Y(i,M(o))})),G(e,t)},s=(e,t)=>{var i=e=>{var t=Pe(),i=B(t);j((()=>{Q(t,1,se(n())),Y(i,M(o))})),G(e,t)},s=(e,t)=>{var i=e=>{var t=Ee(),i=B(t);j((()=>{Q(t,1,se(n())),Y(i,M(o))})),G(e,t)},s=e=>{var t=De(),i=B(t);j((()=>{Q(t,1,se(n())),Y(i,M(o))})),G(e,t)};N(e,(e=>{"div"===a()?e(i):e(s,!1)}),t)};N(e,(e=>{"h4"===a()?e(i):e(s,!1)}),t)};N(e,(e=>{"h3"===a()?e(i):e(s,!1)}),t)};N(e,(e=>{"h2"===a()?e(i):e(s,!1)}),t)};N(e,(e=>{"h1"===a()?e(i):e(s,!1)}),t)};N(l,(e=>{"p"===a()?e(c):e(d,!1)})),G(e,r),U()}function Oe(e,t,i){t(i()+1)}function Re(e,t,i){t(i()-1)}var ze=(e,t)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())},Ve=e=>e.stopPropagation(),Le=V('<input type="radio" class="radio-input svelte-1ll8uv2"/>'),je=e=>e.stopPropagation(),Ge=V('<input type="checkbox" class="checkbox-input svelte-1ll8uv2"/>'),Ue=V('<span class="option-sku svelte-1ll8uv2"> </span>'),We=V('<span class="total-price svelte-1ll8uv2"> </span>'),Be=V('<li class="svelte-1ll8uv2"><!></li>'),Fe=V('<ul class="option-features svelte-1ll8uv2"></ul>'),He=e=>e.stopPropagation(),Ne=(e,t)=>t(parseInt(e.target.value)||0),Qe=e=>e.stopPropagation(),Je=V('<div class="quantity-controls svelte-1ll8uv2"><label class="quantity-label svelte-1ll8uv2">Quantity:</label> <div class="quantity-input svelte-1ll8uv2"><button class="qty-btn svelte-1ll8uv2" aria-label="Decrease quantity">‚àí</button> <input type="number" min="1" class="qty-value svelte-1ll8uv2"/> <button class="qty-btn svelte-1ll8uv2" aria-label="Increase quantity">+</button></div></div>'),Ye=V('<div class="unavailable-message svelte-1ll8uv2">Not available with current selections</div>'),Ke=V('<div class="disabled-message svelte-1ll8uv2">Maximum selections reached for this group</div>'),Xe=V('<div role="button"><div class="option-header svelte-1ll8uv2"><!> <div class="option-info svelte-1ll8uv2"><!> <!></div> <div class="option-price svelte-1ll8uv2"><span class="price svelte-1ll8uv2"> </span> <!></div></div> <!> <!> <!> <!> <!></div>');O(["click","keydown","change"]);var Ze=V('<span class="required svelte-99mz6y">*</span>'),et=V('<p class="group-description svelte-99mz6y"> </p>'),tt=V('<span class="selection-count svelte-99mz6y"> <!></span>'),it=V('<div class="options-grid svelte-99mz6y"></div>'),st=V('<div class="no-options svelte-99mz6y"><p>No options available in this group.</p></div>'),at=V('<div class="group-content svelte-99mz6y"><!></div>'),nt=V('<div><div class="group-header svelte-99mz6y"><div class="group-info svelte-99mz6y"><h3 class="group-name svelte-99mz6y"> <!></h3> <!></div> <div class="group-meta svelte-99mz6y"><div class="selection-info svelte-99mz6y"><span class="selection-type svelte-99mz6y"> </span> <!></div> <button class="expand-toggle svelte-99mz6y"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div></div> <!></div>');function ot(e,t){R(t,!0);let i=z(t,"options",19,(()=>[])),s=z(t,"selections",19,(()=>({}))),a=z(t,"availableOptions",19,(()=>[])),n=z(t,"expanded",3,!0),o=H((()=>Array.isArray(i())?i().filter((e=>s()[e.id]>0)).length:0)),r=H((()=>Array.isArray(i())?i().reduce(((e,t)=>e+(s()[t.id]||0)),0):0));function l(){return"single"===t.group.selection_type?"Select one":"multiple"===t.group.selection_type?t.group.min_selections&&t.group.max_selections?t.group.min_selections===t.group.max_selections?`Select exactly ${t.group.min_selections}`:`Select ${t.group.min_selections}-${t.group.max_selections}`:t.group.min_selections?`Select at least ${t.group.min_selections}`:t.group.max_selections?`Select up to ${t.group.max_selections}`:"Select multiple":""}let c=D(l());function d(e){const n=s()[e.id]>0,o=0===a().length||a().includes(e.id),r=function(e){if(a().length>0&&!a().includes(e.id))return!0;if(t.group.max_selections&&!s()[e.id]&&i().filter((e=>s()[e.id]>0)).length>=t.group.max_selections)return!0;return!1}(e);return{selected:n,available:o,disabled:r,quantity:s()[e.id]||0}}te((()=>{const e=l();(e.includes("=>")||e.includes("function"))&&console.error("[OptionGroup] Selection text contains code!",{text:e,group:t.group})}));var v=nt();let u;var p=B(v);p.__click=function(...e){t.onToggle?.apply(this,e)};var h=B(p),g=B(h),m=B(g),f=W(m),b=e=>{var t=Ze();G(e,t)};N(f,(e=>{t.group.required&&e(b)}));var y=W(g,2),_=e=>{var i=et(),s=B(i);j((()=>Y(s,t.group.description))),G(e,i)};N(y,(e=>{!t.group.description||"string"!=typeof t.group.description||t.group.description.includes("=>")||t.group.description.includes("function")||t.group.description.includes("$props")||e(_)}));var w=W(h,2),k=B(w),S=B(k),A=B(S),$=W(S,2),I=e=>{var t=tt(),i=B(t),s=W(i),a=e=>{var t=oe();j((()=>Y(t,`(${M(r)??""} total)`))),G(e,t)};N(s,(e=>{M(r)>M(o)&&e(a)})),j((()=>Y(i,`${M(o)??""} selected `))),G(e,t)};N($,(e=>{M(o)>0&&e(I)}));var q=W(k,2),C=B(q);let x;var P=W(p,2),E=e=>{var a=at(),n=B(a),o=e=>{var a=it();L(a,21,i,(e=>e.id),((e,a)=>{const n=H((()=>d(M(a)))),o=H((()=>M(a).max_quantity||10));!function(e,t){R(t,!0);let i=z(t,"selected",3,!1),s=z(t,"quantity",3,0),a=z(t,"disabled",3,!1),n=z(t,"available",3,!0),o=z(t,"selectionType",3,"multiple"),r=z(t,"maxQuantity",3,10);function l(){a()||(o(),t.onChange(i()?0:1))}function c(e){if(a())return;const i=Math.max(0,Math.min(e,r()));t.onChange(i)}let d=H((()=>t.option.price?`$${t.option.price.toFixed(2)}`:"Included")),v=H((()=>s()>1&&t.option.price?`$${(t.option.price*s()).toFixed(2)} total`:""));var u=Xe();let p;u.__click=function(...e){("single"===o()?l:void 0)?.apply(this,e)},u.__keydown=[ze,l];var h=B(u),g=B(h),m=e=>{var t=Le();t.__change=l,t.__click=[Ve],j((()=>{ae(t,i()),t.disabled=a()})),G(e,t)},f=e=>{var t=Ge();t.__change=l,t.__click=[je],j((()=>{ae(t,i()),t.disabled=a()})),G(e,t)};N(g,(e=>{"single"===o()?e(m):e(f,!1)}));var b=W(g,2),y=B(b);Te(y,{get text(){return t.option.name},fallback:"Unnamed Option",tag:"h4",class:"option-name"});var _=W(y,2),w=e=>{var i=Ue(),s=B(i);j((()=>Y(s,`SKU: ${t.option.sku??""}`))),G(e,i)};N(_,(e=>{t.option.sku&&e(w)}));var k=W(b,2),S=B(k),A=B(S),$=W(S,2),I=e=>{var t=We(),i=B(t);j((()=>Y(i,M(v)))),G(e,t)};N($,(e=>{M(v)&&e(I)}));var q=W(h,2),C=e=>{Te(e,{get text(){return t.option.description},tag:"p",class:"option-description"})};N(q,(e=>{t.option.description&&e(C)}));var x=W(q,2),P=e=>{var i=Fe();L(i,21,(()=>t.option.features),X,((e,t)=>{var i=Be();Te(B(i),{get text(){return M(t)},tag:"span"}),G(e,i)})),G(e,i)};N(x,(e=>{t.option.features&&t.option.features.length>0&&e(P)}));var E=W(x,2),D=e=>{var t=Je();t.__click=[He];var i=W(B(t),2),n=B(i);n.__click=[Re,c,s];var o=W(n,2);o.__change=[Ne,c],o.__click=[Qe];var l=W(o,2);l.__click=[Oe,c,s],j((()=>{n.disabled=a()||s()<=1,ne(o,s()),J(o,"max",r()),o.disabled=a(),l.disabled=a()||s()>=r()})),G(e,t)};N(E,(e=>{"multiple"===o()&&i()&&e(D)}));var T=W(E,2),O=e=>{var t=Ye();G(e,t)};N(T,(e=>{n()||a()||e(O)}));var V=W(T,2),F=e=>{var t=Ke();G(e,t)};N(V,(e=>{a()&&n()&&e(F)})),j((e=>{p=Q(u,1,"option-card svelte-1ll8uv2",null,p,e),J(u,"tabindex",a()?-1:0),Y(A,M(d))}),[()=>({selected:i(),disabled:a(),unavailable:!n()})]),G(e,u),U()}(e,{get option(){return M(a)},get selected(){return M(n).selected},get quantity(){return M(n).quantity},get disabled(){return M(n).disabled},get available(){return M(n).available},get selectionType(){return t.group.selection_type},get maxQuantity(){return M(o)},onChange:e=>function(e,a){if("single"===t.group.selection_type&&a>0&&Array.isArray(i())&&i().forEach((i=>{i.id!==e&&s()[i.id]>0&&t.onSelectionChange(i.id,0)})),t.group.max_selections&&a>0&&Array.isArray(i())&&i().filter((t=>t.id!==e&&s()[t.id]>0)).length>=t.group.max_selections)return;t.onSelectionChange(e,a)}(M(a).id,e)})})),j((()=>J(a,"data-selection-type",t.group.selection_type))),G(e,a)},r=e=>{var t=st();G(e,t)};N(n,(e=>{Array.isArray(i())&&i().length>0?e(o):e(r,!1)})),G(e,a)};N(P,(e=>{n()&&e(E)})),j(((e,i,s)=>{u=Q(v,1,"option-group svelte-99mz6y",null,u,e),Y(m,`${t.group.name||"Unnamed Group"} `),Y(A,i),J(q,"aria-label",n()?"Collapse":"Expand"),x=Q(C,0,"icon svelte-99mz6y",null,x,s)}),[()=>({expanded:n(),required:t.group.required}),()=>pe(c,"single"===t.group.selection_type?"Select one":"Select multiple"),()=>({rotated:!n()})]),G(e,v),U()}O(["click"]);var rt=V('<div class="pricing-empty svelte-hgfbko"><p>Add options to see pricing</p></div>'),lt=V('<div class="summary-row savings svelte-hgfbko"><span class="label">Total Savings</span> <span class="amount"> </span></div>'),ct=(e,t)=>P(t,!M(t)),dt=V('<button class="toggle-btn svelte-hgfbko"> <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.646 6.646a.5.5 0 01.708 0L8 9.293l2.646-2.647a.5.5 0 01.708.708l-3 3a.5.5 0 01-.708 0l-3-3a.5.5 0 010-.708z"></path></svg></button>'),vt=V('<span class="item-quantity svelte-hgfbko"> </span>'),ut=V('<div class="line-item svelte-hgfbko"><div class="item-details svelte-hgfbko"><span class="item-name svelte-hgfbko"> </span> <!></div> <span class="item-price svelte-hgfbko"> </span></div>'),pt=V('<div class="option-group svelte-hgfbko"></div>'),ht=V('<div class="pricing-section svelte-hgfbko"><h4 class="section-title svelte-hgfbko">Selected Options</h4> <!> <div class="line-item subtotal svelte-hgfbko"><span class="item-name svelte-hgfbko">Options Subtotal</span> <span class="item-price svelte-hgfbko"> </span></div></div>'),gt=(e,t)=>P(t,!M(t)),mt=V('<span class="item-description svelte-hgfbko"> </span>'),ft=V('<div class="line-item discount svelte-hgfbko"><div class="item-details svelte-hgfbko"><span class="item-name svelte-hgfbko"> </span> <!></div> <span class="item-price discount-amount svelte-hgfbko"> </span></div>'),bt=V('<div class="pricing-section svelte-hgfbko"><h4 class="section-title svelte-hgfbko">Discounts Applied <button class="toggle-discounts svelte-hgfbko"> </button></h4> <!></div>'),yt=V('<span class="active-badge svelte-hgfbko">Active</span>'),_t=V('<div><div class="tier-range svelte-hgfbko"> <!> units</div> <div class="tier-discount svelte-hgfbko"> <!></div></div>'),wt=V('<div class="pricing-section svelte-hgfbko"><h4 class="section-title svelte-hgfbko">Volume Pricing Tiers</h4> <div class="volume-tiers svelte-hgfbko"></div></div>'),kt=V('<div class="line-item small svelte-hgfbko"><span class="item-name svelte-hgfbko"> </span> <span class="item-price svelte-hgfbko"> </span></div>'),St=V('<div class="pricing-section svelte-hgfbko"><h4 class="section-title svelte-hgfbko">Detailed Breakdown</h4> <div class="breakdown-items svelte-hgfbko"></div></div>'),At=V('<div class="pricing-section svelte-hgfbko"><h4 class="section-title svelte-hgfbko">Base Configuration</h4> <div class="line-item svelte-hgfbko"><span class="item-name svelte-hgfbko">Base Model Price</span> <span class="item-price svelte-hgfbko"> </span></div></div> <!> <!> <!> <!>',1),$t=V('<div class="currency-note svelte-hgfbko"> </div>'),It=V('<div class="pricing-summary svelte-hgfbko"><div class="summary-row total svelte-hgfbko"><span class="label">Total Price</span> <span class="amount"> </span></div> <!> <!></div> <!> <div class="pricing-footer svelte-hgfbko"><div class="final-total svelte-hgfbko"><span class="label">Total</span> <span class="amount"> </span></div> <!></div>',1),qt=V("<div><!></div>");function Ct(e,t){R(t,!0);let i=z(t,"selections",19,(()=>({}))),s=z(t,"options",19,(()=>[])),a=z(t,"volumeTiers",19,(()=>[])),n=z(t,"detailed",3,!1),o=E(D(n())),r=E(!0);function l(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e||0)}let c=H((()=>()=>t.pricingData?.discounts?t.pricingData.discounts.reduce(((e,t)=>e+(t.amount||0)),0):0)),d=H((()=>()=>{if(!t.pricingData||!M(c))return 0;const e=t.pricingData.base_price+(t.pricingData.options_total||0);return 0===e?0:Math.round(M(c)/e*100)})),v=H((()=>()=>{const e=new Map;return Object.entries(i()).forEach((([t,i])=>{if(i<=0)return;const a=function(e){return Array.isArray(s())?s().find((t=>t.id===e)):null}(t);if(!a)return;const n=a.group_id||"other";e.has(n)||e.set(n,[]),e.get(n).push({option:a,quantity:i,lineTotal:(a.price||0)*i})})),Array.from(e.entries())}));var u=qt();let p;var h=B(u),g=e=>{var t=rt();G(e,t)},m=e=>{var i=It(),s=ee(i),u=B(s),p=W(B(u),2),h=B(p),g=W(u,2),m=e=>{var t=lt(),i=W(B(t),2),s=B(i);j((e=>Y(s,`-${e??""} (${M(d)??""}%)`)),[()=>l(M(c))]),G(e,t)};N(g,(e=>{M(c)>0&&e(m)}));var f=W(g,2),b=e=>{var t=dt();t.__click=[ct,o];var i=B(t),s=W(i);let a;j((e=>{Y(i,(M(o)?"Hide":"Show")+" Breakdown "),a=Q(s,0,"chevron svelte-hgfbko",null,a,e)}),[()=>({rotated:M(o)})]),G(e,t)};N(f,(e=>{n()&&e(b)}));var y=W(s,2),_=e=>{var i=At(),s=ee(i),o=W(B(s),2),c=W(B(o),2),d=B(c),u=W(s,2),p=e=>{var i=ht(),s=W(B(i),2);L(s,17,(()=>M(v)),X,((e,t)=>{var i=H((()=>re(M(t),2)));var s=pt();L(s,21,(()=>M(i)[1]),X,((e,t)=>{let i=()=>M(t).option,s=()=>M(t).quantity;var a=ut(),n=B(a),o=B(n),r=B(o),c=W(o,2),d=e=>{var t=vt(),a=B(t);j((e=>Y(a,`√ó${s()??""} @ ${e??""} each`)),[()=>l(i().price)]),G(e,t)};N(c,(e=>{s()>1&&e(d)}));var v=W(n,2),u=B(v);j((e=>{Y(r,i().name),Y(u,e)}),[()=>l(M(t).lineTotal)]),G(e,a)})),G(e,s)}));var a=W(s,2),n=W(B(a),2),o=B(n);j((e=>Y(o,e)),[()=>l(t.pricingData.options_total||0)]),G(e,i)};N(u,(e=>{M(v).length>0&&e(p)}));var h=W(u,2),g=e=>{var i=bt(),s=B(i),a=W(B(s));a.__click=[gt,r];var n=B(a),o=W(s,2),c=e=>{var i=Z(),s=ee(i);L(s,17,(()=>t.pricingData.discounts),X,((e,t)=>{var i=ft(),s=B(i),a=B(s),n=B(a),o=W(a,2),r=e=>{var i=mt(),s=B(i);j((()=>Y(s,M(t).description))),G(e,i)};N(o,(e=>{M(t).description&&e(r)}));var c=W(s,2),d=B(c);j((e=>{Y(n,M(t).name),Y(d,`-${e??""}`)}),[()=>l(M(t).amount)]),G(e,i)})),G(e,i)};N(o,(e=>{M(r)&&e(c)})),j((()=>Y(n,M(r)?"Hide":"Show"))),G(e,i)};N(h,(e=>{t.pricingData.discounts?.length>0&&e(g)}));var m=W(h,2),f=e=>{var i=wt(),s=W(B(i),2);L(s,21,a,X,((e,i)=>{var s=_t();const a=H((()=>t.pricingData.active_tier?.id===M(i).id));let n;var o=B(s),r=B(o),l=W(r),c=e=>{var t=oe();j((()=>Y(t,`- ${M(i).max_quantity??""}`))),G(e,t)},d=e=>{var t=oe("+");G(e,t)};N(l,(e=>{M(i).max_quantity?e(c):e(d,!1)}));var v=W(o,2),u=B(v),p=W(u),h=e=>{var t=yt();G(e,t)};N(p,(e=>{M(a)&&e(h)})),j((e=>{n=Q(s,1,"tier-item svelte-hgfbko",null,n,e),Y(r,`${M(i).min_quantity??""} `),Y(u,`${M(i).discount_percent??""}% off `)}),[()=>({active:M(a)})]),G(e,s)})),G(e,i)};N(m,(e=>{a().length>0&&n()&&e(f)}));var b=W(m,2),y=e=>{var i=St(),s=W(B(i),2);L(s,21,(()=>t.pricingData.breakdown),X,((e,t)=>{var i=kt(),s=B(i),a=B(s),n=W(s,2),o=B(n);j((e=>{Y(a,M(t).name),Y(o,e)}),[()=>l(M(t).amount)]),G(e,i)})),G(e,i)};N(b,(e=>{t.pricingData.breakdown&&n()&&e(y)})),j((e=>Y(d,e)),[()=>l(t.pricingData.base_price)]),G(e,i)};N(y,(e=>{M(o)&&e(_)}));var w=W(y,2),k=B(w),S=W(B(k),2),A=B(S),$=W(k,2),I=e=>{var i=$t(),s=B(i);j((()=>Y(s,`Prices shown in ${t.pricingData.currency??""}`))),G(e,i)};N($,(e=>{t.pricingData.currency&&"USD"!==t.pricingData.currency&&e(I)})),j(((e,t)=>{Y(h,e),Y(A,t)}),[()=>l(t.pricingData.total_price),()=>l(t.pricingData.total_price)]),G(e,i)};N(h,(e=>{t.pricingData?e(m,!1):e(g)})),j((e=>p=Q(u,1,"pricing-display svelte-hgfbko",null,p,e)),[()=>({detailed:n()})]),G(e,u),U()}O(["click"]);var xt=V('<div class="validation-success svelte-5l87sd"><div class="success-icon svelte-5l87sd">‚úÖ</div> <div class="success-content svelte-5l87sd"><h3 class="svelte-5l87sd">Configuration Valid</h3> <p class="svelte-5l87sd">All constraints are satisfied. Your configuration is ready.</p></div></div>'),Mt=(e,t)=>P(t,"all"),Pt=(e,t)=>P(t,"critical"),Et=V("<button> </button>"),Dt=(e,t)=>P(t,"warning"),Tt=V("<button> </button>"),Ot=(e,t)=>P(t,"info"),Rt=V("<button> </button>"),zt=V('<div class="validation-header svelte-5l87sd"><h3 class="svelte-5l87sd"> </h3> <div class="severity-filters svelte-5l87sd"><button> </button> <!> <!> <!></div></div>'),Vt=V('<div class="violation-rule svelte-5l87sd"> </div>'),Lt=(e,t,i)=>{e.stopPropagation(),t(M(i))},jt=V('<button class="fix-btn svelte-5l87sd" title="Apply suggested fix">Fix</button>'),Gt=V('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Details</h4> <p class="svelte-5l87sd"> </p></div>'),Ut=V("<li> </li>"),Wt=V('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Affected Options</h4> <ul class="affected-list svelte-5l87sd"></ul></div>'),Bt=V(" <!>",1),Ft=(e,t,i)=>t.onFix(M(i)),Ht=V('<button class="apply-btn svelte-5l87sd">Apply</button>'),Nt=V('<div class="suggestion svelte-5l87sd"><span class="suggestion-text"><!></span> <!></div>'),Qt=V('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Suggested Actions</h4> <div class="suggestions svelte-5l87sd"></div></div>'),Jt=V('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Rule Expression</h4> <code class="expression svelte-5l87sd"> </code></div>'),Yt=V('<div class="violation-details svelte-5l87sd"><!> <!> <!> <!></div>'),Kt=V('<div><div class="violation-header svelte-5l87sd"><div class="violation-icon svelte-5l87sd"> </div> <div class="violation-content svelte-5l87sd"><div class="violation-message svelte-5l87sd"> </div> <!></div> <div class="violation-actions svelte-5l87sd"><!> <button class="expand-btn svelte-5l87sd"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.646 6.646a.5.5 0 01.708 0L8 9.293l2.646-2.647a.5.5 0 01.708.708l-3 3a.5.5 0 01-.708 0l-3-3a.5.5 0 010-.708z"></path></svg></button></div></div> <!></div>'),Xt=V('<!> <div class="violations-list svelte-5l87sd"></div>',1),Zt=V('<div class="validation-empty svelte-5l87sd"><p>Validating configuration...</p></div>'),ei=V("<div><!></div>");function ti(e,t){R(t,!0);let i=z(t,"compact",3,!1),s=E(D(new Set)),a=E("all"),n=H((()=>t.validationResults?.violations||[])),o=H((()=>()=>"all"===M(a)?M(n):M(n).filter((e=>e.severity===M(a))))),r=H((()=>()=>{const e={critical:0,warning:0,info:0};return M(n).forEach((t=>{e[t.severity||"warning"]++})),e}));function l(e){t.onFix&&e.suggestions?.length>0&&t.onFix(e.suggestions[0])}var c=ei();let d;var v=B(c),u=e=>{var t=xt();G(e,t)},p=(e,c)=>{var d=e=>{var c=Xt(),d=ee(c),v=e=>{var t=zt(),i=B(t),s=B(i),o=W(i,2),l=B(o);let c;l.__click=[Mt,a];var d=B(l),v=W(l,2),u=e=>{var t=Et();let i;t.__click=[Pt,a];var s=B(t);j((e=>{i=Q(t,1,"filter-btn critical svelte-5l87sd",null,i,e),Y(s,`Critical (${M(r).critical??""})`)}),[()=>({active:"critical"===M(a)})]),G(e,t)};N(v,(e=>{M(r).critical>0&&e(u)}));var p=W(v,2),h=e=>{var t=Tt();let i;t.__click=[Dt,a];var s=B(t);j((e=>{i=Q(t,1,"filter-btn warning svelte-5l87sd",null,i,e),Y(s,`Warning (${M(r).warning??""})`)}),[()=>({active:"warning"===M(a)})]),G(e,t)};N(p,(e=>{M(r).warning>0&&e(h)}));var g=W(p,2),m=e=>{var t=Rt();let i;t.__click=[Ot,a];var s=B(t);j((e=>{i=Q(t,1,"filter-btn info svelte-5l87sd",null,i,e),Y(s,`Info (${M(r).info??""})`)}),[()=>({active:"info"===M(a)})]),G(e,t)};N(g,(e=>{M(r).info>0&&e(m)})),j((e=>{Y(s,`Validation Issues (${M(n).length??""})`),c=Q(l,1,"filter-btn svelte-5l87sd",null,c,e),Y(d,`All (${M(n).length??""})`)}),[()=>({active:"all"===M(a)})]),G(e,t)};N(d,(e=>{i()||e(v)}));var u=W(d,2);L(u,21,(()=>M(o)),X,((e,a,n)=>{var o=Kt();const r=H((()=>M(s).has(M(a).rule_id||n))),c=H((()=>function(e){switch(e){case"critical":return"error";case"warning":default:return"warning";case"info":return"info"}}(M(a).severity)));let d;var v=B(o);v.__click=()=>function(e){const t=new Set(M(s));t.has(e)?t.delete(e):t.add(e),P(s,t,!0)}(M(a).rule_id||n);var u=B(v),p=B(u),h=W(u,2),g=B(h),m=B(g),f=W(g,2),b=e=>{var t=Vt(),i=B(t);j((()=>Y(i,`Rule: ${M(a).rule_name??""}`))),G(e,t)};N(f,(e=>{M(a).rule_name&&!i()&&e(b)}));var y=W(h,2),_=B(y),w=e=>{var t=jt();t.__click=[Lt,l,a],G(e,t)};N(_,(e=>{M(a).suggestions?.length>0&&t.onFix&&e(w)}));var k=W(_,2),S=B(k);let A;var $=W(v,2),I=e=>{var s=Yt(),n=B(s),o=e=>{var t=Gt(),i=W(B(t),2),s=B(i);j((()=>Y(s,M(a).details))),G(e,t)};N(n,(e=>{M(a).details&&e(o)}));var r=W(n,2),l=e=>{var t=Wt(),i=W(B(t),2);L(i,21,(()=>M(a).affected_options),X,((e,t)=>{var i=Ut(),s=B(i);j((()=>Y(s,M(t).name||M(t).id))),G(e,i)})),G(e,t)};N(r,(e=>{M(a).affected_options?.length>0&&e(l)}));var c=W(r,2),d=e=>{var i=Qt(),s=W(B(i),2);L(s,21,(()=>M(a).suggestions),X,((e,i)=>{var s=Nt(),a=B(s),n=B(a),o=e=>{var t=Bt(),s=ee(t),a=W(s),n=e=>{var t=oe();j((()=>Y(t,`(√ó${M(i).quantity??""})`))),G(e,t)};N(a,(e=>{M(i).quantity>1&&e(n)})),j((()=>Y(s,`Add: ${(M(i).option_name||M(i).option_id)??""} `))),G(e,t)},r=(e,t)=>{var s=e=>{var t=oe();j((()=>Y(t,`Remove: ${(M(i).option_name||M(i).option_id)??""}`))),G(e,t)},a=(e,t)=>{var s=e=>{var t=oe();j((()=>Y(t,`Change: ${M(i).description??""}`))),G(e,t)},a=e=>{var t=oe();j((()=>Y(t,M(i).description))),G(e,t)};N(e,(e=>{"change"===M(i).action?e(s):e(a,!1)}),t)};N(e,(e=>{"remove"===M(i).action?e(s):e(a,!1)}),t)};N(n,(e=>{"add"===M(i).action?e(o):e(r,!1)}));var l=W(a,2),c=e=>{var s=Ht();s.__click=[Ft,t,i],G(e,s)};N(l,(e=>{t.onFix&&e(c)})),G(e,s)})),G(e,i)};N(c,(e=>{M(a).suggestions?.length>0&&e(d)}));var v=W(c,2),u=e=>{var t=Jt(),i=W(B(t),2),s=B(i);j((()=>Y(s,M(a).rule_expression))),G(e,t)};N(v,(e=>{M(a).rule_expression&&!i()&&e(u)})),G(e,s)};N($,(e=>{M(r)&&e(I)})),j(((e,t,i)=>{d=Q(o,1,`violation-item ${M(c)??""}`,"svelte-5l87sd",d,e),Y(p,t),Y(m,M(a).message),J(k,"aria-label",M(r)?"Collapse":"Expand"),A=Q(S,0,"chevron svelte-5l87sd",null,A,i)}),[()=>({expanded:M(r)}),()=>function(e){switch(e){case"critical":return"üö´";case"warning":default:return"‚ö†Ô∏è";case"info":return"‚ÑπÔ∏è"}}(M(a).severity),()=>({rotated:M(r)})]),G(e,o)})),G(e,c)},v=e=>{var t=Zt();G(e,t)};N(e,(e=>{M(n).length>0?e(d):e(v,!1)}),c)};N(v,(e=>{t.validationResults?.is_valid?e(u):e(p,!1)})),j((e=>d=Q(c,1,"validation-display svelte-5l87sd",null,d,e)),[()=>({compact:i()})]),G(e,c),U()}O(["click"]);var ii=V('<span class="status-badge valid svelte-onht75">‚úÖ Valid</span>'),si=V('<span class="status-badge invalid svelte-onht75">‚ö†Ô∏è Issues</span>'),ai=(e,t)=>t.onEdit(0),ni=V('<button class="edit-btn svelte-onht75">Edit Selections</button>'),oi=V('<span class="item-quantity svelte-onht75"> </span>'),ri=V('<div class="selection-item svelte-onht75"><div class="item-info svelte-onht75"><span class="item-name svelte-onht75"> </span> <!></div> <span class="item-price svelte-onht75"> </span></div>'),li=V('<div class="selection-group svelte-onht75"><h5 class="group-name svelte-onht75"> </h5> <div class="group-items svelte-onht75"></div></div>'),ci=V('<div class="selections-list svelte-onht75"></div>'),di=V('<p class="empty-message svelte-onht75">No options selected</p>'),vi=(e,t)=>t.onEdit(1),ui=V('<button class="edit-btn svelte-onht75">Review Issues</button>'),pi=V('<div class="violation-summary svelte-onht75"><span class="violation-icon svelte-onht75"> </span> <span class="violation-text svelte-onht75"> </span></div>'),hi=V('<p class="more-violations svelte-onht75"> </p>'),gi=V('<div class="summary-section svelte-onht75"><div class="section-header svelte-onht75"><h4 class="section-title validation-title svelte-onht75"> </h4> <!></div> <div class="violations-summary svelte-onht75"><!> <!></div></div>'),mi=(e,t)=>t.onEdit(2),fi=V('<button class="edit-btn svelte-onht75">View Details</button>'),bi=V('<div class="price-line discount svelte-onht75"><span class="label">Discounts Applied</span> <span class="value"> </span></div>'),yi=()=>window.print(),_i=V('<div class="configuration-summary svelte-onht75"><div class="summary-header svelte-onht75"><div class="header-info svelte-onht75"><h3 class="svelte-onht75">Configuration Summary</h3> <p class="config-id svelte-onht75"> </p></div> <div class="header-status"><!></div></div> <div class="summary-section svelte-onht75"><h4 class="section-title svelte-onht75">Product Model</h4> <div class="info-grid svelte-onht75"><div class="info-item svelte-onht75"><span class="label svelte-onht75">Model</span> <span class="value svelte-onht75"> </span></div> <div class="info-item svelte-onht75"><span class="label svelte-onht75">Created</span> <span class="value svelte-onht75"> </span></div> <div class="info-item svelte-onht75"><span class="label svelte-onht75">Last Updated</span> <span class="value svelte-onht75"> </span></div></div></div> <div class="summary-section svelte-onht75"><div class="section-header svelte-onht75"><h4 class="section-title svelte-onht75"> </h4> <!></div> <!></div> <!> <div class="summary-section svelte-onht75"><div class="section-header svelte-onht75"><h4 class="section-title svelte-onht75">Pricing Summary</h4> <!></div> <div class="pricing-summary svelte-onht75"><div class="price-line svelte-onht75"><span class="label">Base Price</span> <span class="value"> </span></div> <!> <div class="price-line total svelte-onht75"><span class="label">Total Price</span> <span class="value"> </span></div></div></div> <div class="summary-actions svelte-onht75"><button class="action-btn secondary svelte-onht75"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M5 3V1h6v2H5zM4 3H2.5A1.5 1.5 0 001 4.5V10h2V8h10v2h2V4.5A1.5 1.5 0 0013.5 3H12v2H4V3zm9 7h-2v4H5v-4H3v4.5A1.5 1.5 0 004.5 16h7a1.5 1.5 0 001.5-1.5V10z"></path></svg> Print Summary</button> <button class="action-btn secondary svelte-onht75"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M2 2a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V2zm10-1H4a1 1 0 00-1 1v12a1 1 0 001 1h8a1 1 0 001-1V2a1 1 0 00-1-1z"></path><path d="M8 3.5a.5.5 0 01.5.5v4.793l1.146-1.147a.5.5 0 01.708.708l-2 2a.5.5 0 01-.708 0l-2-2a.5.5 0 11.708-.708L7.5 8.793V4a.5.5 0 01.5-.5z"></path></svg> Export Configuration</button></div></div>');function wi(e,t){function i(e){return e?new Date(e).toLocaleString():"N/A"}function s(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e||0)}R(t,!0);let a=H((()=>()=>{const e=new Map;return Array.isArray(t.configuration?.selections)&&t.configuration.selections.forEach((t=>{const i=t.group_name||"Other Options";e.has(i)||e.set(i,[]),e.get(i).push(t)})),Array.from(e.entries())}));var n=_i(),o=B(n),r=B(o),l=W(B(r),2),c=B(l),d=W(r,2),v=B(d),u=e=>{var t=ii();G(e,t)},p=e=>{var t=si();G(e,t)};N(v,(e=>{t.configuration?.validation?.is_valid?e(u):e(p,!1)}));var h=W(o,2),g=W(B(h),2),m=B(g),f=W(B(m),2),b=B(f),y=W(m,2),_=W(B(y),2),w=B(_),k=W(y,2),S=W(B(k),2),A=B(S),$=W(h,2),I=B($),q=B(I),C=B(q),x=W(q,2),P=e=>{var i=ni();i.__click=[ai,t],G(e,i)};N(x,(e=>{t.onEdit&&e(P)}));var E=W(I,2),D=e=>{var t=ci();L(t,21,(()=>M(a)),X,((e,t)=>{var i=H((()=>re(M(t),2)));var a=li(),n=B(a),o=B(n),r=W(n,2);L(r,21,(()=>M(i)[1]),X,((e,t)=>{var i=ri(),a=B(i),n=B(a),o=B(n),r=W(n,2),l=e=>{var i=oi(),s=B(i);j((()=>Y(s,`√ó${M(t).quantity??""}`))),G(e,i)};N(r,(e=>{M(t).quantity>1&&e(l)}));var c=W(a,2),d=B(c);j((e=>{Y(o,M(t).option_name),Y(d,e)}),[()=>s(M(t).total_price)]),G(e,i)})),j((()=>Y(o,M(i)[0]))),G(e,a)})),G(e,t)},T=e=>{var t=di();G(e,t)};N(E,(e=>{M(a).length>0?e(D):e(T,!1)}));var O=W($,2),z=e=>{var i=gi(),s=B(i),a=B(s),n=B(a),o=W(a,2),r=e=>{var i=ui();i.__click=[vi,t],G(e,i)};N(o,(e=>{t.onEdit&&e(r)}));var l=W(s,2),c=B(l);L(c,17,(()=>t.configuration.validation.violations.slice(0,3)),X,((e,t)=>{var i=pi(),s=B(i),a=B(s),n=W(s,2),o=B(n);j((()=>{Y(a,"critical"===M(t).severity?"üö´":"‚ö†Ô∏è"),Y(o,M(t).message)})),G(e,i)}));var d=W(c,2),v=e=>{var i=hi(),s=B(i);j((()=>Y(s,`+${t.configuration.validation.violations.length-3} more issues`))),G(e,i)};N(d,(e=>{t.configuration.validation.violations.length>3&&e(v)})),j((()=>Y(n,`Validation Issues (${t.configuration.validation.violations.length??""})`))),G(e,i)};N(O,(e=>{t.configuration?.validation?.violations?.length>0&&e(z)}));var V=W(O,2),F=B(V),Q=W(B(F),2),J=e=>{var i=fi();i.__click=[mi,t],G(e,i)};N(Q,(e=>{t.onEdit&&e(J)}));var K=W(F,2),Z=B(K),ee=W(B(Z),2),te=B(ee),ie=W(Z,2),se=e=>{var i=bi(),a=W(B(i),2),n=B(a);j((e=>Y(n,`-${e??""}`)),[()=>s(t.configuration.pricing.discounts.reduce(((e,t)=>e+t.amount),0))]),G(e,i)};N(ie,(e=>{t.configuration?.pricing?.discounts?.length>0&&e(se)}));var ae=W(ie,2),ne=W(B(ae),2),oe=B(ne),le=W(V,2),ce=B(le);ce.__click=[yi],W(ce,2).__click=()=>{const e=JSON.stringify(t.configuration,null,2),i=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`configuration-${t.configuration?.id||"draft"}.json`,a.click(),URL.revokeObjectURL(s)},j(((e,i,s,a)=>{Y(c,`ID: ${t.configuration?.id||"Not saved"}`),Y(b,t.configuration?.model_name||t.model?.name||"Unknown"),Y(w,e),Y(A,i),Y(C,`Selected Options (${(t.configuration?.selections?.length||0)??""})`),Y(te,s),Y(oe,a)}),[()=>i(t.configuration?.metadata?.created),()=>i(t.configuration?.metadata?.updated),()=>s(t.configuration?.pricing?.base_price),()=>s(t.configuration?.pricing?.total_price)]),G(e,n),U()}function ki(e,t){P(t,!M(t))}O(["click"]);var Si=V('<div class="loading-container svelte-7b7116"><!></div>'),Ai=()=>location.reload(),$i=V('<div class="error-container svelte-7b7116"><div class="error-content svelte-7b7116"><div class="error-icon svelte-7b7116">‚ö†Ô∏è</div> <h2>Configuration Error</h2> <p> </p> <button class="btn btn-primary svelte-7b7116">Reload Page</button></div></div>'),Ii=V('<p class="model-description svelte-7b7116"> </p>'),qi=V('<button class="validation-indicator warning svelte-7b7116" title="View validation issues"> </button>'),Ci=V('<span class="save-indicator svelte-7b7116"><!> Saving...</span>'),xi=V('<span class="save-indicator saved svelte-7b7116"> </span>'),Mi=V('<div class="groups-container svelte-7b7116"></div>'),Pi=V('<div class="loading-state svelte-7b7116"><!></div>'),Ei=V('<div class="empty-state svelte-7b7116"><p>No option groups available for this model.</p></div>'),Di=V('<span class="progress-text svelte-7b7116"> </span>'),Ti=V('<div class="configuration-step"><div class="step-header svelte-7b7116"><h2 class="svelte-7b7116">Select Your Options</h2> <p class="svelte-7b7116">Choose from the available options below. Required selections are marked with *</p></div> <!> <div class="step-actions svelte-7b7116"><div class="selection-summary svelte-7b7116"><span> </span> <!></div> <button class="btn btn-primary svelte-7b7116">Continue to Validation</button></div></div>'),Oi=V('<div class="validation-loading"><!></div>'),Ri=V('<div class="validation-step"><div class="step-header svelte-7b7116"><h2 class="svelte-7b7116">Configuration Validation</h2> <p class="svelte-7b7116">Review and resolve any configuration issues</p></div> <!> <!> <div class="step-actions svelte-7b7116"><button class="btn btn-secondary svelte-7b7116">Back</button> <button class="btn btn-primary svelte-7b7116"> </button></div></div>'),zi=V('<div class="pricing-loading"><!></div>'),Vi=V('<div class="pricing-step"><div class="step-header svelte-7b7116"><h2 class="svelte-7b7116">Pricing Details</h2> <p class="svelte-7b7116">Review your configuration pricing</p></div> <!> <!> <div class="step-actions svelte-7b7116"><button class="btn btn-secondary svelte-7b7116">Back</button> <button class="btn btn-primary svelte-7b7116">Continue to Summary</button></div></div>'),Li=V('<div class="summary-step"><div class="step-header svelte-7b7116"><h2 class="svelte-7b7116">Configuration Summary</h2> <p class="svelte-7b7116">Review your complete configuration</p></div> <!> <div class="step-actions svelte-7b7116"><button class="btn btn-secondary svelte-7b7116">Back</button> <button class="btn btn-success svelte-7b7116"> </button></div></div>'),ji=(e,t)=>P(t,!1),Gi=V('<div><div class="panel-header svelte-7b7116"><h3 class="svelte-7b7116">Validation Issues</h3> <button class="close-btn svelte-7b7116">√ó</button></div> <!></div>'),Ui=V('<div class="summary-item discount svelte-7b7116"><span>Discounts Applied</span> <strong class="svelte-7b7116"> </strong></div>'),Wi=V('<div class="selected-item svelte-7b7116"><span class="item-name"> </span> <span class="item-quantity svelte-7b7116"> </span></div>'),Bi=V('<div class="sidebar-section svelte-7b7116"><h3 class="svelte-7b7116">Selected Items</h3> <div class="selected-items svelte-7b7116"></div></div>'),Fi=V('<aside class="configurator-sidebar svelte-7b7116"><div class="sidebar-section svelte-7b7116"><h3 class="svelte-7b7116">Quick Summary</h3> <div class="summary-item svelte-7b7116"><span>Selected Options</span> <strong class="svelte-7b7116"> </strong></div> <div class="summary-item svelte-7b7116"><span>Total Price</span> <strong class="price svelte-7b7116"> </strong></div> <!> <div class="summary-item status svelte-7b7116"><span>Status</span> <strong> </strong></div></div> <!></aside>'),Hi=V('<div class="configurator-container svelte-7b7116"><header class="configurator-header svelte-7b7116"><div class="header-content svelte-7b7116"><h1 class="svelte-7b7116"> </h1> <!></div> <div class="header-actions svelte-7b7116"><!> <!></div></header> <!> <div class="configurator-content svelte-7b7116"><!></div> <!> <!></div>'),Ni=V("<div><!></div>");function Qi(e,t){R(t,!0);let i=z(t,"theme",3,"light"),s=z(t,"apiUrl",3,"/api/v1"),a=z(t,"embedMode",3,!1),n=z(t,"onComplete",3,null),o=z(t,"onConfigurationChange",3,null),r=z(t,"onError",3,null),l=z(t,"configurationId",3,null);const c=le();let d=E(!1),v=E(!1),u=null;const p=[{id:"configure",label:"Configure",icon:"‚öôÔ∏è"},{id:"validate",label:"Validate",icon:"‚úÖ"},{id:"price",label:"Price",icon:"üí∞"},{id:"summary",label:"Summary",icon:"üìã"}];async function h(){if(await he.validateConfiguration(),!he.isValid)return void(he.error="Please resolve all validation issues before completing");await he.saveConfiguration();const e=he.exportConfiguration();c("complete",e),n()?.(e)}function g(){he.canProceedToStep(he.currentStep+1)?he.nextStep():0===he.currentStep&&0===he.selectedCount?he.error="Please select at least one option":1!==he.currentStep||he.isValid||(he.error="Please resolve validation issues")}function m(){he.previousStep()}function f(e){he.goToStep(e)}"undefined"!=typeof window&&(window.__API_BASE_URL__=s()),te((async()=>{await he.initialize(),he.setModelId(t.modelId),l()&&await he.loadConfiguration(l()),P(d,!0),document.documentElement.setAttribute("data-theme",i()),u=setInterval((()=>{he.isDirty&&he.saveConfiguration()}),3e4);const e=ce((()=>{T((()=>{o()&&he.selectedCount>0&&o()(he.exportConfiguration())})),T((()=>{r()&&he.error&&(r()(new Error(he.error)),c("error",{message:he.error}))}))}));return()=>{e(),u&&clearInterval(u)}})),de((()=>{he.isDirty&&he.saveConfiguration()}));const b=he;var y=Ni();return function(e,t){R(t,!0);let i=z(t,"fallback",3,null),s=z(t,"onError",3,null),a=E(null),n=E(!1);function o(e){console.error("ErrorBoundary caught:",e.error),P(a,e.error,!0),P(n,!0),s()&&s()(e.error),e.preventDefault(),e.stopPropagation()}function r(){P(a,null),P(n,!1)}te((()=>(window.addEventListener("error",o),window.addEventListener("unhandledrejection",(e=>{o({error:e.reason})})),()=>{window.removeEventListener("error",o),window.removeEventListener("unhandledrejection",o)})));var l=Z(),c=ee(l),d=e=>{var t=Z(),s=ee(t),n=e=>{var t=Z(),s=ee(t);ie(s,i,(()=>M(a)),(()=>r)),G(e,t)},o=e=>{var t=Ie(),i=B(t),s=W(B(i),4),n=B(s),o=W(s,2);N(o,(e=>{}));var l=W(o,2),c=B(l);c.__click=r,W(c,2).__click=[$e],j((()=>Y(n,M(a)?.message||"An unexpected error occurred"))),G(e,t)};N(s,(e=>{i()?e(n):e(o,!1)})),G(e,t)},v=e=>{var i=Z(),s=ee(i);ie(s,(()=>t.children)),G(e,i)};N(c,(e=>{M(n)?e(d):e(v,!1)})),G(e,l),U()}(B(y),{children:(e,t)=>{var i=Z(),s=ee(i),n=e=>{var t=Si();Ae(B(t),{size:"large",message:"Loading configuration model..."}),G(e,t)},o=(e,t)=>{var i=e=>{var t=$i(),i=B(t),s=W(B(i),4),a=B(s);W(s,2).__click=[Ai],j((()=>Y(a,he.error))),G(e,t)},s=(e,t)=>{var i=e=>{var t=Hi(),i=B(t),s=B(i),n=B(s),o=B(n),r=W(n,2),l=e=>{var t=Ii(),i=B(t);j((()=>Y(i,he.model.description))),G(e,t)};N(r,(e=>{he.model.description&&e(l)}));var c=W(s,2),d=B(c),u=e=>{var t=qi();t.__click=[ki,v];var i=B(t);j((()=>Y(i,`‚ö†Ô∏è ${(he.validationResults?.violations?.length||0)??""} Issues`))),G(e,t)};N(d,(e=>{he.hasViolations&&e(u)}));var b=W(d,2),y=e=>{var t=Ci();Ae(B(t),{size:"small"}),G(e,t)},_=(e,t)=>{var i=e=>{var t=xi(),i=B(t);j((e=>Y(i,`‚úÖ Saved ${e??""}`)),[()=>new Date(he.lastSaved).toLocaleTimeString()]),G(e,t)};N(e,(e=>{he.lastSaved&&e(i)}),t)};N(b,(e=>{he.isSaving?e(y):e(_,!1)}));var w=W(i,2);ye(w,{get steps(){return p},get currentStep(){return he.currentStep},onStepClick:f,canNavigate:!0});var k=W(w,2),S=B(k),A=e=>{var t=Ti(),i=W(B(t),2),s=e=>{var t=Mi();L(t,21,(()=>he.safeGroups),(e=>e.id),((e,t)=>{const i=H((()=>he.safeOptions.filter((e=>e.group_id===M(t).id)))),s=H((()=>he.isGroupExpanded(M(t).id)));ot(e,{get group(){return M(t)},get options(){return M(i)},get selections(){return he.selections},get availableOptions(){return he.availableOptions},onSelectionChange:(e,t)=>he.updateSelection(e,t),get expanded(){return M(s)},onToggle:()=>he.toggleGroup(M(t).id)})})),G(e,t)},a=(e,t)=>{var i=e=>{var t=Pi();Ae(B(t),{size:"medium",message:"Loading options..."}),G(e,t)},s=e=>{var t=Ei();G(e,t)};N(e,(e=>{he.isLoading?e(i):e(s,!1)}),t)};N(i,(e=>{he.safeGroups.length>0?e(s):e(a,!1)}));var n=W(i,2),o=B(n),r=B(o),l=B(r),c=W(r,2),d=e=>{var t=Di(),i=B(t);j((e=>Y(i,`${e??""}% complete`)),[()=>Math.round(he.progress)]),G(e,t)};N(c,(e=>{he.progress>0&&e(d)}));var v=W(o,2);v.__click=g,j((()=>{Y(l,`${he.selectedCount??""} options selected`),v.disabled=0===he.selectedCount})),G(e,t)},$=(e,t)=>{var i=e=>{var t=Ri(),i=W(B(t),2);ti(i,{get validationResults(){return he.validationResults},onFix:e=>{"add"===e.action?he.updateSelection(e.option_id,e.quantity||1):"remove"===e.action&&he.updateSelection(e.option_id,0)}});var s=W(i,2),a=e=>{var t=Oi();Ae(B(t),{size:"small",message:"Validating configuration..."}),G(e,t)};N(s,(e=>{he.isValidating&&e(a)}));var n=W(s,2),o=B(n);o.__click=m;var r=W(o,2);r.__click=g;var l=B(r);j((()=>{r.disabled=!he.isValid,Y(l,he.isValid?"Continue to Pricing":"Resolve Issues First")})),G(e,t)},s=(e,t)=>{var i=e=>{var t=Vi(),i=W(B(t),2);Ct(i,{get pricingData(){return he.pricingData},get selections(){return he.selections},get options(){return he.options},get volumeTiers(){return he.volumeTiers},detailed:!0});var s=W(i,2),a=e=>{var t=zi();Ae(B(t),{size:"small",message:"Calculating pricing..."}),G(e,t)};N(s,(e=>{he.isPricing&&e(a)}));var n=W(s,2),o=B(n);o.__click=m,W(o,2).__click=g,G(e,t)},s=(e,t)=>{var i=e=>{var t=Li(),i=W(B(t),2);const s=H((()=>he.exportConfiguration()));wi(i,{get configuration(){return M(s)},get model(){return he.model},onEdit:e=>f(e)});var a=W(i,2),n=B(a);n.__click=m;var o=W(n,2);o.__click=h;var r=B(o);j((()=>{o.disabled=he.isSaving,Y(r,he.isSaving?"Saving...":"Complete Configuration")})),G(e,t)};N(e,(e=>{3===he.currentStep&&e(i)}),t)};N(e,(e=>{2===he.currentStep?e(i):e(s,!1)}),t)};N(e,(e=>{1===he.currentStep?e(i):e(s,!1)}),t)};N(S,(e=>{0===he.currentStep?e(A):e($,!1)}));var I=W(k,2),q=e=>{var t=Gi();let i;var s=B(t);W(B(s),2).__click=[ji,v],ti(W(s,2),{get validationResults(){return he.validationResults},compact:!0,onFix:e=>{"add"===e.action?he.updateSelection(e.option_id,e.quantity||1):"remove"===e.action&&he.updateSelection(e.option_id,0),P(v,!1)}}),j((e=>i=Q(t,1,"validation-panel svelte-7b7116",null,i,e)),[()=>({open:M(v)})]),G(e,t)};N(I,(e=>{M(v)&&he.hasViolations&&e(q)}));var C=W(I,2),x=e=>{var t=Fi(),i=B(t),s=W(B(i),2),a=W(B(s),2),n=B(a),o=W(s,2),r=W(B(o),2),l=B(r),c=W(o,2),d=e=>{var t=Ui(),i=W(B(t),2),s=B(i);j((()=>Y(s,he.discounts.length))),G(e,t)};N(c,(e=>{he.discounts.length>0&&e(d)}));var v=W(c,2),u=W(B(v),2);let p;var h=B(u),g=W(i,2),m=e=>{var t=Bi(),i=W(B(t),2);L(i,21,(()=>Object.entries(he.selections)),X,((e,t)=>{var i=H((()=>re(M(t),2)));let s=()=>M(i)[1];var a=Z();const n=H((()=>he.safeOptions.find((e=>e.id===M(i)[0]))));var o=ee(a),r=e=>{var t=Wi(),i=B(t),a=B(i),o=W(i,2),r=B(o);j((()=>{Y(a,M(n).name),Y(r,`√ó${s()??""}`)})),G(e,t)};N(o,(e=>{M(n)&&s()>0&&e(r)})),G(e,a)})),G(e,t)};N(g,(e=>{he.selectedCount>0&&e(m)})),j(((e,t)=>{Y(n,he.selectedCount),Y(l,`$${e??""}`),p=Q(u,1,"svelte-7b7116",null,p,t),Y(h,he.isValid?"‚úÖ Valid":"‚ö†Ô∏è Issues")}),[()=>he.totalPrice.toFixed(2),()=>({valid:he.isValid,invalid:!he.isValid})]),G(e,t)};N(C,(e=>{a()||e(x)})),j((()=>Y(o,he.model.name))),G(e,t)};N(e,(e=>{M(d)&&he.model&&e(i)}),t)};N(e,(e=>{he.error&&!he.model?e(i):e(s,!1)}),t)};N(s,(e=>{he.isLoading&&!M(d)?e(n):e(o,!1)})),G(e,i)},$$slots:{default:!0}}),j((()=>{Q(y,1,"configurator-app "+(a()?"embed-mode":"standalone-mode"),"svelte-7b7116"),J(y,"data-theme",i())})),G(e,y),U({store:b})}O(["click"]);export{Qi as C,he as c};
//# sourceMappingURL=configurator-VPEb6tR-.js.map
