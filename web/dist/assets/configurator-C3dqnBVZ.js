var e,t,i,s,a,n,o,r,l,d,c,u,v,h,p,g,f,m,b,y,w,_,I,q,S,k,$=e=>{throw TypeError(e)},O=(e,t,i)=>t.has(e)||$("Cannot "+i),C=(e,t,i)=>(O(e,t,"read from private field"),i?i.call(e):t.get(e)),x=(e,t,i)=>t.has(e)?$("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),A=(e,t,i,s)=>(O(e,t,"write to private field"),s?s.call(e,i):t.set(e,i),i);import{g as E,s as M,a as T,p as P,u as R,b as D,f as z,i as j,c as W,t as L,d as F,e as G,h as V,j as B,k as U,l as N,o as H,m as J,n as Q,q as Y,r as K,v as X,w as Z,x as ee,y as te,z as ie,A as se,B as ae,C as ne}from"./vendor-7dlotZNW.js";"undefined"!=typeof window&&((e=window.__svelte??(window.__svelte={})).v??(e.v=new Set)).add("5");class oe{constructor(e,t={}){this.baseUrl=e||window.__API_BASE_URL__||"http://localhost:8080/api/v1",this.modelId=t.modelId,this.authToken=t.authToken||localStorage.getItem("auth_token"),this.timeout=t.timeout||3e4,console.log("API Client initialized:",{baseUrl:this.baseUrl,modelId:this.modelId,hasAuth:!!this.authToken})}async request(e,t={}){const i=`${this.baseUrl}${e}`;console.log(`API Request: ${t.method||"GET"} ${i}`);const s={method:"GET",headers:{"Content-Type":"application/json",...this.authToken&&{Authorization:`Bearer ${this.authToken}`},...t.headers},...t};s.body&&"object"==typeof s.body&&(s.body=JSON.stringify(s.body));try{const t=new AbortController,n=setTimeout((()=>t.abort()),this.timeout),o=await fetch(i,{...s,signal:t.signal});if(clearTimeout(n),!o.ok){let t;try{t=await o.json()}catch(a){t={message:o.statusText}}const s=t.message||t.error||`HTTP ${o.status}`;console.error(`API Error Response from ${e}:`,{status:o.status,statusText:o.statusText,errorData:t,url:i});const n=new Error(s);throw n.status=o.status,n.data=t,n}const r=await o.json();return"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname||console.log(`API Response from ${e}:`,r),r&&"object"==typeof r&&void 0!==r.success&&void 0!==r.data?r.data:r??(e.includes("/groups")||e.includes("/options")||e.includes("/rules")?[]:{})}catch(n){if("AbortError"===n.name)throw new Error("Request timeout");throw console.error(`API Error for ${e}:`,n),n}}async getModel(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}`);return!e.option_groups&&e.groups&&(e.option_groups=e.groups),console.log("Model structure:",{hasGroups:!!e.groups,hasOptionGroups:!!e.option_groups,hasOptions:!!e.options,groupsCount:e.groups?.length||e.option_groups?.length||0,optionsCount:e.options?.length||0}),e}async getModelGroups(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/groups`);return Array.isArray(e)?e:[]}async getModelOptions(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/options`);return Array.isArray(e)?e:[]}async getModelRules(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/rules`);return Array.isArray(e)?e:[]}async getModelPricingRules(){if(!this.modelId)throw new Error("Model ID required");const e=await this.request(`/models/${this.modelId}/pricing-rules`);return Array.isArray(e)?e:[]}async getModelStatistics(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/statistics`)}async createConfiguration(e=[]){return this.request("/configurations",{method:"POST",body:{model_id:this.modelId,name:`Configuration ${(new Date).toISOString()}`}})}async getConfiguration(e){return this.request(`/configurations/${e}?model_id=${this.modelId}`)}async updateConfiguration(e,t){return this.request(`/configurations/${e}`,{method:"PUT",body:{model_id:this.modelId,...t,selections:t.selections?this.formatSelections(t.selections):void 0}})}async deleteConfiguration(e){return this.request(`/configurations/${e}`,{method:"DELETE"})}async addSelections(e,t){return this.request(`/configurations/${e}/selections`,{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(t)}})}async removeSelection(e,t){return this.request(`/configurations/${e}/selections/${t}`,{method:"DELETE"})}async validateConfiguration(e){return this.request(`/configurations/${e}/validate?model_id=${this.modelId}`,{method:"POST",body:{model_id:this.modelId}})}async validateSelections(e){return this.request("/configurations/validate-selection",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e)}})}async getAvailableOptions(e){return this.request(`/configurations/${e}/available-options`)}async getConstraints(e){return this.request(`/configurations/${e}/constraints`)}async getConfigurationSummary(e){return this.request(`/configurations/${e}/summary`)}async cloneConfiguration(e){return this.request(`/configurations/${e}/clone`,{method:"POST"})}async calculatePrice(e,t={}){try{return await this.request("/pricing/calculate",{method:"POST",body:{model_id:this.modelId,selections:t.selections||[],customer_id:t.customer_id||null,context:t.context||{}}})}catch(i){throw console.error("Failed to calculate price:",i),i}}async simulatePricing(e){return this.request("/pricing/simulate",{method:"POST",body:{model_id:this.modelId,scenarios:e}})}async validatePricing(e,t){return this.request("/pricing/validate",{method:"POST",body:{model_id:this.modelId,selections:this.formatSelections(e),expected_price:t}})}async getPricingRules(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/pricing/rules/${this.modelId}`)}async getVolumeTiers(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/pricing/volume-tiers/${this.modelId}`)}async validateModel(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/validate`,{method:"POST"})}async detectConflicts(e=[]){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/conflicts`,{method:"POST",body:{rule_ids:e}})}async analyzeImpact(e){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/impact`,{method:"POST",body:e})}async getModelQuality(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/quality`,{method:"POST"})}async getOptimizationRecommendations(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/optimize`,{method:"POST"})}formatSelections(e){return Array.isArray(e)?e:Object.entries(e).filter((([e,t])=>t>0)).map((([e,t])=>({option_id:e,quantity:parseInt(t)||1})))}async batchValidate(e){return this.request("/configurations/validate",{method:"POST",body:{configurations:e}})}async bulkCalculatePricing(e){return this.request("/pricing/bulk-calculate",{method:"POST",body:{configurations:e}})}async checkHealth(){return this.request("/health")}async getStatus(){return this.request("/status")}}function re(e){if("string"!=typeof e)return!1;return["=>","function","$props","$","$.strict_equals","return ","${","() =>","} else","if (",".selection_type","strict_equals","min_selections","max_selections"].some((t=>e.includes(t)))}function le(e,t=""){if(null==e)return t;const i=String(e);return("string"!=typeof e||re(i))&&re(i)?(console.warn("[Sanitizer] Code pattern detected and removed:",{original:i.substring(0,100)+(i.length>100?"...":""),fallback:t}),t):i}function de(e,t=["name","description","label","title","text","value"]){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map((e=>de(e,t)));const i={...e};return Object.keys(i).forEach((e=>{if("string"==typeof i[e]){const t=i[e],s=le(t,"");t!==s&&(console.warn(`[Sanitizer] Cleaned field '${e}' in object`),i[e]=s)}else i[e]&&"object"==typeof i[e]&&(i[e]=de(i[e],t))})),i}t=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,n=new WeakMap,o=new WeakMap,r=new WeakMap,l=new WeakMap,d=new WeakMap,c=new WeakMap,u=new WeakMap,v=new WeakMap,h=new WeakMap,p=new WeakMap,g=new WeakMap,f=new WeakMap,m=new WeakMap,b=new WeakMap,y=new WeakMap,w=new WeakMap,_=new WeakMap,I=new WeakMap,q=new WeakMap,S=new WeakMap,k=new WeakMap;const ce=new class{constructor(){x(this,t),x(this,i),x(this,s),x(this,a),x(this,n),x(this,o),x(this,r),x(this,l),x(this,d),x(this,c),x(this,u),x(this,v),x(this,h),x(this,p),x(this,g),x(this,f),x(this,m),x(this,b),x(this,y),x(this,w),x(this,_),x(this,I),x(this,q),x(this,S),x(this,k),A(this,t,T("")),A(this,i,T(null)),A(this,s,T(null)),A(this,a,T(P({}))),A(this,n,T(null)),A(this,o,T(null)),A(this,r,T(P([]))),A(this,l,T(P([]))),A(this,d,T(P([]))),A(this,c,T(P([]))),A(this,u,T(P([]))),A(this,v,T(P([]))),A(this,h,T(P([]))),A(this,p,T(!1)),A(this,g,T(!1)),A(this,f,T(!1)),A(this,m,T(!1)),A(this,b,T(null)),A(this,y,T(P([]))),A(this,w,T(null)),A(this,_,T(null)),A(this,I,T(!1)),A(this,q,T(0)),A(this,S,T(P(new Set))),A(this,k,T(P(new Set))),this.api=null,this._initialized=!1,this._debounceTimers=new Map,this._modelLoaded=!1}get modelId(){return E(C(this,t))}set modelId(e){M(C(this,t),e,!0)}get model(){return E(C(this,i))}set model(e){M(C(this,i),e,!0)}get configuration(){return E(C(this,s))}set configuration(e){M(C(this,s),e,!0)}get selections(){return E(C(this,a))}set selections(e){M(C(this,a),e,!0)}get validationResults(){return E(C(this,n))}set validationResults(e){M(C(this,n),e,!0)}get pricingData(){return E(C(this,o))}set pricingData(e){M(C(this,o),e,!0)}get availableOptions(){return E(C(this,r))}set availableOptions(e){M(C(this,r),e,!0)}get constraints(){return E(C(this,l))}set constraints(e){M(C(this,l),e,!0)}get groups(){return E(C(this,d))}set groups(e){M(C(this,d),e,!0)}get options(){return E(C(this,c))}set options(e){M(C(this,c),e,!0)}get rules(){return E(C(this,u))}set rules(e){M(C(this,u),e,!0)}get pricingRules(){return E(C(this,v))}set pricingRules(e){M(C(this,v),e,!0)}get volumeTiers(){return E(C(this,h))}set volumeTiers(e){M(C(this,h),e,!0)}get isLoading(){return E(C(this,p))}set isLoading(e){M(C(this,p),e,!0)}get isValidating(){return E(C(this,g))}set isValidating(e){M(C(this,g),e,!0)}get isPricing(){return E(C(this,f))}set isPricing(e){M(C(this,f),e,!0)}get isSaving(){return E(C(this,m))}set isSaving(e){M(C(this,m),e,!0)}get error(){return E(C(this,b))}set error(e){M(C(this,b),e,!0)}get validationErrors(){return E(C(this,y))}set validationErrors(e){M(C(this,y),e,!0)}get configurationId(){return E(C(this,w))}set configurationId(e){M(C(this,w),e,!0)}get lastSaved(){return E(C(this,_))}set lastSaved(e){M(C(this,_),e,!0)}get isDirty(){return E(C(this,I))}set isDirty(e){M(C(this,I),e,!0)}get currentStep(){return E(C(this,q))}set currentStep(e){M(C(this,q),e,!0)}get expandedGroups(){return E(C(this,S))}set expandedGroups(e){M(C(this,S),e,!0)}get hiddenOptions(){return E(C(this,k))}set hiddenOptions(e){M(C(this,k),e,!0)}async initialize(){this._initialized||(this._initialized=!0,console.log("üöÄ ConfigurationStore initialized"),R((()=>{this.modelId&&!this.api&&(this.api=new oe(window.__API_BASE_URL__,{modelId:this.modelId}),this.loadModel())})),R((()=>{this.configurationId&&this.selections&&Object.keys(this.selections).length>=0&&this._debounce("update",(()=>{this.updateSelectionsOnBackend()}),300)})))}get isValid(){return!this.validationResults||!this.validationResults.violations||0===this.validationResults.violations.length}get selectedCount(){return Object.values(this.selections).filter((e=>e>0)).length}get progress(){if(!this.model||!this.options)return 0;const e=this.groups.filter((e=>e.required)).length;if(0===e)return this.selectedCount>0?100:0;const t=this.groups.filter((e=>e.required)).filter((e=>this.hasGroupSelection(e.id))).length;return Math.round(t/e*100)}get totalPrice(){return this.pricingData?.total||this.pricingData?.breakdown?.total_price||0}get adjustments(){return this.pricingData?.breakdown?.adjustments||[]}get safeGroups(){return Array.isArray(this.groups)?this.groups:[]}get safeOptions(){return Array.isArray(this.options)?this.options:[]}async loadModel(){if(this.api&&this.modelId&&!this._modelLoaded){this.isLoading=!0,this.error=null;try{const e=await this.api.getModel(this.modelId);this.model=de(e),this.groups=e.groups||[],this.options=(e.options||[]).filter((e=>!1!==e.is_active)),this.rules=e.rules||[],this.pricingRules=e.pricing_rules||[],this.volumeTiers=e.volume_tiers||[],this.availableOptions=this.options.map((e=>({option:e,is_selectable:!0,reason:null}))),this._modelLoaded=!0,this.groups.slice(0,3).forEach((e=>this.expandedGroups.add(e.id)))}catch(e){console.error("Failed to load model:",e),this.error={message:e.message||"Failed to load model",code:e.code||"MODEL_LOAD_ERROR",details:e}}finally{this.isLoading=!1}}}async createConfiguration(){if(this.api&&!this.configurationId)try{const e=await this.api.createConfiguration({model_id:this.modelId,name:`Configuration ${(new Date).toISOString()}`});this.configuration=e,this.configurationId=e.id,this.selectedCount>0&&await this.updateSelectionsOnBackend()}catch(e){console.error("Failed to create configuration:",e),this.error={message:e.message||"Failed to create configuration",code:e.code||"CONFIG_CREATE_ERROR",details:e}}}async loadConfiguration(e){if(this.api){this.isLoading=!0;try{const t=await this.api.getConfiguration(e);this.configuration=t,this.configurationId=t.id,this.selections=t.selections||{},t.model_id&&t.model_id!==this.modelId&&(this.modelId=t.model_id,await this.loadModel()),await this.validateConfiguration(),await this.calculatePricing()}catch(t){console.error("Failed to load configuration:",t),this.error=t}finally{this.isLoading=!1}}}async saveConfiguration(){if(!this.api||!this.configurationId)return!1;this.isSaving=!0;try{return await this.api.updateConfiguration(this.configurationId,{selections:this.selections,status:"in_progress"}),this.lastSaved=new Date,this.isDirty=!1,!0}catch(e){return console.error("Failed to save configuration:",e),this.error=e,!1}finally{this.isSaving=!1}}updateSelection(e,t){if(!e)return;const i=t>0?1:0,s=this.options.find((t=>t.id===e));if(!s)return;const a=this.groups.find((e=>e.id===s.group_id));if(a){if("single"===a.selection_type&&i>0){this.options.filter((e=>e.group_id===a.id)).forEach((t=>{t.id!==e&&this.selections[t.id]&&delete this.selections[t.id]}))}0===i?delete this.selections[e]:this.selections[e]=i,this.isDirty=!0,!this.configurationId&&this.selectedCount>0&&this.createConfiguration()}}async updateSelectionsOnBackend(){if(this.api&&this.configurationId)try{const e=await this.api.addSelections(this.configurationId,{selections:Object.entries(this.selections).map((([e,t])=>({option_id:e,quantity:t})))});if(e.configuration&&(this.configuration=e.configuration),e.validation){const t=e.validation.result||e.validation;this.validationResults=t,this.validationErrors=t.violations||[]}e.available_options&&(this.availableOptions=e.available_options,this.checkAndApplyRequiredOptions(e.available_options),this.updateVisibleOptions()),this.isValid&&this.selectedCount>0&&this.configurationId?await this.calculatePricing():this.pricingData=null}catch(e){console.error("Failed to update selections:",e)}}async validateConfiguration(){if(this.api&&this.configurationId){this.isValidating=!0;try{const e=await this.api.validateConfiguration(this.configurationId),t=e.result||e;this.validationResults=t,this.validationErrors=t.violations||[],e.available_options&&(this.availableOptions=e.available_options)}catch(e){console.error("Configuration validation failed:",e)}finally{this.isValidating=!1}}}async calculatePricing(e={}){if(this.api&&this.configurationId&&!this.isPricing){this.isPricing=!0;try{const t=Object.entries(this.selections).filter((([e,t])=>t>0)).map((([e,t])=>({option_id:e,quantity:1}))),i=await this.api.calculatePrice(this.configurationId,{selections:t,...e});this.pricingData=i,console.log("Pricing data updated:",this.pricingData)}catch(t){console.error("Pricing calculation failed:",t),this.pricingData=null}finally{this.isPricing=!1}}}isGroupExpanded(e){return this.expandedGroups.has(e)}toggleGroup(e){this.expandedGroups.has(e)?this.expandedGroups.delete(e):this.expandedGroups.add(e),this.expandedGroups=new Set(this.expandedGroups)}hasGroupSelection(e){return this.safeOptions.filter((t=>t.group_id===e)).some((e=>this.selections[e.id]>0))}getGroupSelectionCount(e){return this.safeOptions.filter((t=>t.group_id===e)).filter((e=>this.selections[e.id]>0)).length}isOptionAvailable(e){if(!this.availableOptions||0===this.availableOptions.length)return!0;const t=this.availableOptions.find((t=>t.option&&t.option.id===e||t.id===e));return!t||!1!==t.is_selectable}getOptionUnavailableReason(e){if(!this.availableOptions||0===this.availableOptions.length)return null;const t=this.availableOptions.find((t=>t.option&&t.option.id===e||t.id===e));return t&&!t.is_selectable?t.reason:null}checkAndApplyRequiredOptions(e){let t=!1;if(Array.isArray(e))for(const i of e){const e=i.option||i,s=e.id;if(i.is_required&&!this.selections[s]){const i=this.groups.find((t=>t.id===e.group_id));if(i&&"single"===i.selection_type){this.options.filter((e=>e.group_id===i.id)).forEach((e=>{e.id!==s&&this.selections[e.id]&&delete this.selections[e.id]}))}this.selections[s]=1,t=!0,console.log(`Auto-selected required option: ${e.name} (${s})`)}}t&&(this.isDirty=!0)}evaluateRuleCondition(e){if(!e.expression)return!1;return(e.expression.match(/\b(opt_\w+|cpu_\w+|ram_\w+|storage_\w+)\b/g)||[]).some((e=>this.selections[e]>0))}extractRequiredOptions(e){if(!e.expression)return[];const t=e.expression.indexOf("THEN");if(-1===t)return[];return e.expression.substring(t+4).match(/\b(opt_\w+|cpu_\w+|ram_\w+|storage_\w+)\b/g)||[]}exportConfiguration(){return{id:this.configurationId,model_id:this.modelId,selections:this.selections,validation:{is_valid:this.isValid,violations:this.validationErrors},pricing:{total_price:this.totalPrice,adjustments:this.adjustments,breakdown:this.pricingData?.breakdown||null,currency:this.pricingData?.currency||"USD"},metadata:{created:this.configuration?.created_at,updated:this.configuration?.updated_at,saved:this.lastSaved}}}updateVisibleOptions(){if(this.availableOptions&&0!==this.availableOptions.length){this.hiddenOptions=new Set;for(const e of this.options){const t=this.availableOptions.find((t=>t.option&&t.option.id===e.id||t.id===e.id));t&&!1===t.is_selectable&&(this.selections[e.id]||this.hiddenOptions.add(e.id))}}}isOptionVisible(e){return!this.hiddenOptions||!this.hiddenOptions.has(e)}reset(){this.selections={},this.validationResults=null,this.pricingData=null,this.configuration=null,this.configurationId=null,this.currentStep=0,this.isDirty=!1,this.error=null,this.validationErrors=[],this.hiddenOptions=new Set}_debounce(e,t,i){clearTimeout(this._debounceTimers.get(e)),this._debounceTimers.set(e,setTimeout(t,i))}setModelId(e){this.modelId!==e&&(this.reset(),this.modelId=e,this._modelLoaded=!1)}};var ue=z('<p class="loading-message svelte-cmfdh2"> </p>'),ve=z('<div><div class="spinner svelte-cmfdh2"></div> <!></div>');function he(e,t){let i=D(t,"size",3,"medium"),s=D(t,"message",3,"");var a=ve();let n;var o=W(G(a),2),r=e=>{var t=ue(),i=G(t);L((()=>V(i,s()))),F(e,t)};j(o,(e=>{s()&&e(r)})),L((e=>n=B(a,1,"loading-spinner svelte-cmfdh2",null,n,e)),[()=>({small:"small"===i(),large:"large"===i()})]),F(e,a)}var pe=()=>location.reload(),ge=z('<div class="error-boundary svelte-szpq5s"><div class="error-content svelte-szpq5s"><div class="error-icon svelte-szpq5s">‚ö†Ô∏è</div> <h2 class="error-title svelte-szpq5s">Something went wrong</h2> <p class="error-message svelte-szpq5s"> </p> <!> <div class="error-actions svelte-szpq5s"><button class="btn btn-primary svelte-szpq5s">Try Again</button> <button class="btn btn-secondary svelte-szpq5s">Reload Page</button></div></div></div>');U(["click"]);var fe=(e,t)=>"Enter"===e.key&&t(),me=e=>e.stopPropagation(),be=z('<span class="required-badge svelte-sfawh7">Required</span>'),ye=z('<p class="option-description svelte-sfawh7"> </p>'),we=z('<span class="price-amount svelte-sfawh7"> </span>'),_e=z('<span class="price-included svelte-sfawh7">Included</span>'),Ie=z('<div class="unavailable-reason svelte-sfawh7"> </div>'),qe=z('<div role="button"><div class="option-header svelte-sfawh7"><input tabindex="-1" class="svelte-sfawh7"/> <div class="option-info svelte-sfawh7"><h4 class="option-name svelte-sfawh7"> <!></h4> <!></div> <div class="option-price svelte-sfawh7"><!></div></div> <!></div>');U(["click","keydown"]);var Se=(e,t)=>"Enter"===e.key&&t.onToggle(),ke=z('<span class="required-indicator svelte-v7nf41">*</span>'),$e=z('<span class="selection-count svelte-v7nf41"> </span>'),Oe=z('<div class="options-list"></div>'),Ce=z('<div class="no-available-options svelte-v7nf41"><p>No options currently available in this group based on your selections.</p> <p class="constraint-hint svelte-v7nf41">Try changing other selections to unlock more options.</p></div>'),xe=z('<div class="no-options svelte-v7nf41"><p>No options available in this group.</p></div>'),Ae=z('<div class="group-content svelte-v7nf41"><!></div>'),Ee=z('<div><div class="group-header svelte-v7nf41" role="button" tabindex="0"><div class="group-info svelte-v7nf41"><h3 class="group-name svelte-v7nf41"> <!></h3> <div class="group-meta svelte-v7nf41"><span class="selection-type svelte-v7nf41"><!></span> <!></div></div> <button class="expand-toggle svelte-v7nf41"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div> <!></div>');function Me(e,t){N(t,!0);let i=D(t,"options",19,(()=>[])),s=D(t,"selections",19,(()=>({}))),a=D(t,"availableOptions",19,(()=>[])),n=D(t,"expanded",3,!0),o=ee((()=>Array.isArray(i())?i().filter((e=>(s()[e.id]||0)>0)).length:0)),r=ee((()=>!t.group.required||(t.group.min_selections?E(o)>=t.group.min_selections:E(o)>0)));function l(e){const t=(s()[e.id]||0)>0;let i=!0,n=null,o=!1,r=!1;if(Array.isArray(a())&&a().length>0){const s=a()[0];if(s&&"object"==typeof s&&"is_selectable"in s){const s=a().find((t=>t.option&&t.option.id===e.id||t.id===e.id));s&&(i=!1!==s.is_selectable,n=s.reason||null,o=!0===s.is_required,r=!i&&!t)}else{i=a().map((e=>"string"==typeof e?e:e.id)).includes(e.id),r=!i&&!t}}return{selected:t,available:i,disabled:!i&&!t,reason:n,isRequired:o,shouldHide:r}}let d=ee((()=>Array.isArray(i())?i().filter((e=>!l(e).shouldHide)):[]));var c=Ee();let u;var v=G(c);v.__click=function(...e){t.onToggle?.apply(this,e)},v.__keydown=[Se,t];var h=G(v),p=G(h),g=G(p),f=W(g),m=e=>{var t=ke();F(e,t)};j(f,(e=>{t.group.required&&e(m)}));var b=W(p,2),y=G(b),w=G(y),_=e=>{var t=te("Select one");F(e,t)},I=(e,i)=>{var s=e=>{var i=J(),s=Q(i),a=e=>{var i=te();L((()=>V(i,`Select exactly ${t.group.min_selections??""}`))),F(e,i)},n=e=>{var i=te();L((()=>V(i,`Select ${t.group.min_selections??""}-${t.group.max_selections??""}`))),F(e,i)};j(s,(e=>{t.group.min_selections===t.group.max_selections?e(a):e(n,!1)})),F(e,i)},a=(e,i)=>{var s=e=>{var i=te();L((()=>V(i,`Select at least ${t.group.min_selections??""}`))),F(e,i)},a=(e,i)=>{var s=e=>{var i=te();L((()=>V(i,`Select up to ${t.group.max_selections??""}`))),F(e,i)},a=e=>{var t=te("Select multiple");F(e,t)};j(e,(e=>{t.group.max_selections?e(s):e(a,!1)}),i)};j(e,(e=>{t.group.min_selections?e(s):e(a,!1)}),i)};j(e,(e=>{t.group.min_selections&&t.group.max_selections?e(s):e(a,!1)}),i)};j(w,(e=>{"single"===t.group.selection_type?e(_):e(I,!1)}));var q=W(y,2),S=e=>{var t=$e(),i=G(t);L((()=>V(i,`${E(o)??""} selected`))),F(e,t)};j(q,(e=>{E(o)>0&&e(S)}));var k=W(h,2),$=G(k);let O;var C=W(v,2),x=e=>{var s=Ae(),a=G(s),n=e=>{var i=Oe();ie(i,21,(()=>E(d)),(e=>e.id),((e,i)=>{const s=ee((()=>l(E(i))));!function(e,t){N(t,!0);let i=D(t,"selected",3,!1),s=D(t,"disabled",3,!1),a=D(t,"available",3,!0),n=D(t,"unavailableReason",3,null),o=D(t,"isRequired",3,!1),r=D(t,"selectionType",3,"single");function l(){if(!s()&&a()){if(i()&&o())return;t.onChange(i()?0:1)}}var d=qe();let c;d.__click=l,d.__keydown=[fe,l];var u=G(d),v=G(u);v.__click=[me];var h=W(v,2),p=G(h),g=G(p),f=W(g),m=e=>{var t=be();F(e,t)};j(f,(e=>{o()&&e(m)}));var b=W(p,2),y=e=>{var i=ye(),s=G(i);L((()=>V(s,t.option.description))),F(e,i)};j(b,(e=>{t.option.description&&e(y)}));var w=W(h,2),_=G(w),I=e=>{var i=we(),s=G(i);L((e=>V(s,`$${e??""}`)),[()=>t.option.price.toFixed(2)]),F(e,i)},q=e=>{var t=_e();F(e,t)};j(_,(e=>{t.option.price&&t.option.price>0?e(I):e(q,!1)}));var S=W(u,2),k=e=>{var i=Ie(),s=G(i);L((()=>V(s,n()||t.option.unavailable_reason))),F(e,i)};j(S,(e=>{a()||!n()&&!t.option.unavailable_reason||e(k)})),L((e=>{c=B(d,1,"option-card svelte-sfawh7",null,c,e),X(d,"tabindex",s()||!a()?-1:0),X(v,"type","single"===r()?"radio":"checkbox"),Z(v,i()),v.disabled=s()||!a(),V(g,`${t.option.name??""} `)}),[()=>({selected:i(),disabled:s(),unavailable:!a(),required:o()})]),F(e,d),Y()}(e,{get option(){return E(i)},get selected(){return E(s).selected},get disabled(){return E(s).disabled},get available(){return E(s).available},get unavailableReason(){return E(s).reason},get isRequired(){return E(s).isRequired},get selectionType(){return t.group.selection_type},onChange:e=>function(e,i){const s=i>0?1:0;t.onSelectionChange&&t.onSelectionChange(e,s)}(E(i).id,e)})})),F(e,i)},o=(e,t)=>{var s=e=>{var t=Ce();F(e,t)},a=e=>{var t=xe();F(e,t)};j(e,(e=>{Array.isArray(i())&&i().length>0?e(s):e(a,!1)}),t)};j(a,(e=>{Array.isArray(E(d))&&E(d).length>0?e(n):e(o,!1)})),F(e,s)};j(C,(e=>{n()&&e(x)})),L(((e,t,i)=>{u=B(c,1,"option-group svelte-v7nf41",null,u,e),V(g,`${t??""} `),X(k,"aria-label",n()?"Collapse":"Expand"),O=B($,0,"icon svelte-v7nf41",null,O,i)}),[()=>({complete:E(r),required:t.group.required}),()=>le(t.group.name),()=>({rotated:!n()})]),F(e,c),Y()}U(["click","keydown"]);var Te=z('<div class="calculating svelte-ou3qub"><!> <span>Calculating price...</span></div>'),Pe=z('<div class="empty-pricing svelte-ou3qub"><p>Select options to see pricing</p></div>'),Re=z('<div class="line-item svelte-ou3qub"><span class="item-name svelte-ou3qub"> </span> <span class="item-price svelte-ou3qub"> </span></div>'),De=z('<div><span class="item-name svelte-ou3qub"> </span> <span class="item-price svelte-ou3qub"> </span></div>'),ze=z('<div class="pricing-section svelte-ou3qub"><h4 class="svelte-ou3qub">Adjustments</h4> <div class="line-items svelte-ou3qub"></div></div>'),je=z('<div class="savings svelte-ou3qub"> </div>'),We=z('<div class="pricing-section svelte-ou3qub"><h4 class="svelte-ou3qub">Selected Options</h4> <div class="line-items svelte-ou3qub"></div> <div class="subtotal svelte-ou3qub"><span>Subtotal</span> <span> </span></div></div> <!> <div class="total-section svelte-ou3qub"><div class="total-line svelte-ou3qub"><span class="total-label svelte-ou3qub">Total</span> <span class="total-amount svelte-ou3qub"> </span></div> <!></div>',1),Le=z('<div class="pricing-display svelte-ou3qub"><h3 class="pricing-title svelte-ou3qub">Pricing Summary</h3> <!></div>');var Fe=z('<div class="validation-success svelte-5l87sd"><div class="success-icon svelte-5l87sd">‚úÖ</div> <div class="success-content svelte-5l87sd"><h3 class="svelte-5l87sd">Configuration Valid</h3> <p class="svelte-5l87sd">All constraints are satisfied. Your configuration is ready.</p></div></div>'),Ge=(e,t)=>M(t,"all"),Ve=(e,t)=>M(t,"critical"),Be=z("<button> </button>"),Ue=(e,t)=>M(t,"warning"),Ne=z("<button> </button>"),He=(e,t)=>M(t,"info"),Je=z("<button> </button>"),Qe=z('<div class="validation-header svelte-5l87sd"><h3 class="svelte-5l87sd"> </h3> <div class="severity-filters svelte-5l87sd"><button> </button> <!> <!> <!></div></div>'),Ye=z('<div class="violation-rule svelte-5l87sd"> </div>'),Ke=(e,t,i)=>{e.stopPropagation(),t(E(i))},Xe=z('<button class="fix-btn svelte-5l87sd" title="Apply suggested fix">Fix</button>'),Ze=z('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Details</h4> <p class="svelte-5l87sd"> </p></div>'),et=z("<li> </li>"),tt=z('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Affected Options</h4> <ul class="affected-list svelte-5l87sd"></ul></div>'),it=z(" <!>",1),st=(e,t,i)=>t.onFix(E(i)),at=z('<button class="apply-btn svelte-5l87sd">Apply</button>'),nt=z('<div class="suggestion svelte-5l87sd"><span class="suggestion-text"><!></span> <!></div>'),ot=z('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Suggested Actions</h4> <div class="suggestions svelte-5l87sd"></div></div>'),rt=z('<div class="detail-section svelte-5l87sd"><h4 class="svelte-5l87sd">Rule Expression</h4> <code class="expression svelte-5l87sd"> </code></div>'),lt=z('<div class="violation-details svelte-5l87sd"><!> <!> <!> <!></div>'),dt=z('<div><div class="violation-header svelte-5l87sd"><div class="violation-icon svelte-5l87sd"> </div> <div class="violation-content svelte-5l87sd"><div class="violation-message svelte-5l87sd"> </div> <!></div> <div class="violation-actions svelte-5l87sd"><!> <button class="expand-btn svelte-5l87sd"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M4.646 6.646a.5.5 0 01.708 0L8 9.293l2.646-2.647a.5.5 0 01.708.708l-3 3a.5.5 0 01-.708 0l-3-3a.5.5 0 010-.708z"></path></svg></button></div></div> <!></div>'),ct=z('<!> <div class="violations-list svelte-5l87sd"></div>',1),ut=z('<div class="validation-empty svelte-5l87sd"><p>Validating configuration...</p></div>'),vt=z("<div><!></div>");function ht(e,t){N(t,!0);let i=D(t,"compact",3,!1),s=T(P(new Set)),a=T("all"),n=ee((()=>t.validationResults?.violations||[])),o=ee((()=>()=>"all"===E(a)?E(n):E(n).filter((e=>e.severity===E(a))))),r=ee((()=>()=>{const e={critical:0,warning:0,info:0};return E(n).forEach((t=>{e[t.severity||"warning"]++})),e}));function l(e){t.onFix&&e.suggestions?.length>0&&t.onFix(e.suggestions[0])}var d=vt();let c;var u=G(d),v=e=>{var t=Fe();F(e,t)},h=(e,d)=>{var c=e=>{var d=ct(),c=Q(d),u=e=>{var t=Qe(),i=G(t),s=G(i),o=W(i,2),l=G(o);let d;l.__click=[Ge,a];var c=G(l),u=W(l,2),v=e=>{var t=Be();let i;t.__click=[Ve,a];var s=G(t);L((e=>{i=B(t,1,"filter-btn critical svelte-5l87sd",null,i,e),V(s,`Critical (${E(r).critical??""})`)}),[()=>({active:"critical"===E(a)})]),F(e,t)};j(u,(e=>{E(r).critical>0&&e(v)}));var h=W(u,2),p=e=>{var t=Ne();let i;t.__click=[Ue,a];var s=G(t);L((e=>{i=B(t,1,"filter-btn warning svelte-5l87sd",null,i,e),V(s,`Warning (${E(r).warning??""})`)}),[()=>({active:"warning"===E(a)})]),F(e,t)};j(h,(e=>{E(r).warning>0&&e(p)}));var g=W(h,2),f=e=>{var t=Je();let i;t.__click=[He,a];var s=G(t);L((e=>{i=B(t,1,"filter-btn info svelte-5l87sd",null,i,e),V(s,`Info (${E(r).info??""})`)}),[()=>({active:"info"===E(a)})]),F(e,t)};j(g,(e=>{E(r).info>0&&e(f)})),L((e=>{V(s,`Validation Issues (${E(n).length??""})`),d=B(l,1,"filter-btn svelte-5l87sd",null,d,e),V(c,`All (${E(n).length??""})`)}),[()=>({active:"all"===E(a)})]),F(e,t)};j(c,(e=>{i()||e(u)}));var v=W(c,2);ie(v,21,(()=>E(o)),se,((e,a,n)=>{var o=dt();const r=ee((()=>E(s).has(E(a).rule_id||n))),d=ee((()=>function(e){switch(e){case"critical":return"error";case"warning":default:return"warning";case"info":return"info"}}(E(a).severity)));let c;var u=G(o);u.__click=()=>function(e){const t=new Set(E(s));t.has(e)?t.delete(e):t.add(e),M(s,t,!0)}(E(a).rule_id||n);var v=G(u),h=G(v),p=W(v,2),g=G(p),f=G(g),m=W(g,2),b=e=>{var t=Ye(),i=G(t);L((()=>V(i,`Rule: ${E(a).rule_name??""}`))),F(e,t)};j(m,(e=>{E(a).rule_name&&!i()&&e(b)}));var y=W(p,2),w=G(y),_=e=>{var t=Xe();t.__click=[Ke,l,a],F(e,t)};j(w,(e=>{E(a).suggestions?.length>0&&t.onFix&&e(_)}));var I=W(w,2),q=G(I);let S;var k=W(u,2),$=e=>{var s=lt(),n=G(s),o=e=>{var t=Ze(),i=W(G(t),2),s=G(i);L((()=>V(s,E(a).details))),F(e,t)};j(n,(e=>{E(a).details&&e(o)}));var r=W(n,2),l=e=>{var t=tt(),i=W(G(t),2);ie(i,21,(()=>E(a).affected_options),se,((e,t)=>{var i=et(),s=G(i);L((()=>V(s,E(t).name||E(t).id))),F(e,i)})),F(e,t)};j(r,(e=>{E(a).affected_options?.length>0&&e(l)}));var d=W(r,2),c=e=>{var i=ot(),s=W(G(i),2);ie(s,21,(()=>E(a).suggestions),se,((e,i)=>{var s=nt(),a=G(s),n=G(a),o=e=>{var t=it(),s=Q(t),a=W(s),n=e=>{var t=te();L((()=>V(t,`(√ó${E(i).quantity??""})`))),F(e,t)};j(a,(e=>{E(i).quantity>1&&e(n)})),L((()=>V(s,`Add: ${(E(i).option_name||E(i).option_id)??""} `))),F(e,t)},r=(e,t)=>{var s=e=>{var t=te();L((()=>V(t,`Remove: ${(E(i).option_name||E(i).option_id)??""}`))),F(e,t)},a=(e,t)=>{var s=e=>{var t=te();L((()=>V(t,`Change: ${E(i).description??""}`))),F(e,t)},a=e=>{var t=te();L((()=>V(t,E(i).description))),F(e,t)};j(e,(e=>{"change"===E(i).action?e(s):e(a,!1)}),t)};j(e,(e=>{"remove"===E(i).action?e(s):e(a,!1)}),t)};j(n,(e=>{"add"===E(i).action?e(o):e(r,!1)}));var l=W(a,2),d=e=>{var s=at();s.__click=[st,t,i],F(e,s)};j(l,(e=>{t.onFix&&e(d)})),F(e,s)})),F(e,i)};j(d,(e=>{E(a).suggestions?.length>0&&e(c)}));var u=W(d,2),v=e=>{var t=rt(),i=W(G(t),2),s=G(i);L((()=>V(s,E(a).rule_expression))),F(e,t)};j(u,(e=>{E(a).rule_expression&&!i()&&e(v)})),F(e,s)};j(k,(e=>{E(r)&&e($)})),L(((e,t,i)=>{c=B(o,1,`violation-item ${E(d)??""}`,"svelte-5l87sd",c,e),V(h,t),V(f,E(a).message),X(I,"aria-label",E(r)?"Collapse":"Expand"),S=B(q,0,"chevron svelte-5l87sd",null,S,i)}),[()=>({expanded:E(r)}),()=>function(e){switch(e){case"critical":return"üö´";case"warning":default:return"‚ö†Ô∏è";case"info":return"‚ÑπÔ∏è"}}(E(a).severity),()=>({rotated:E(r)})]),F(e,o)})),F(e,d)},u=e=>{var t=ut();F(e,t)};j(e,(e=>{E(n).length>0?e(c):e(u,!1)}),d)};j(u,(e=>{t.validationResults?.is_valid?e(v):e(h,!1)})),L((e=>c=B(d,1,"validation-display svelte-5l87sd",null,c,e)),[()=>({compact:i()})]),F(e,d),Y()}U(["click"]);var pt=z('<div class="loading-container svelte-1g59r7t"><!></div>'),gt=z('<div class="error-container svelte-1g59r7t"><div class="error-content svelte-1g59r7t"><div class="error-icon svelte-1g59r7t">‚ö†Ô∏è</div> <h2 class="svelte-1g59r7t">Configuration Error</h2> <p class="svelte-1g59r7t"> </p> <button class="retry-button svelte-1g59r7t">Try Again</button></div></div>'),ft=z('<div class="loading-container svelte-1g59r7t"><!></div>'),mt=z('<div class="error-container svelte-1g59r7t"><div class="error-content svelte-1g59r7t"><h2 class="svelte-1g59r7t">Model Not Found</h2> <p class="svelte-1g59r7t">The requested model could not be loaded.</p></div></div>'),bt=z('<p class="svelte-1g59r7t"> </p>'),yt=z('<span class="config-id svelte-1g59r7t"> </span>'),wt=z('<span class="last-saved svelte-1g59r7t"> </span>'),_t=z('<div class="validating-indicator svelte-1g59r7t"><!> Checking availability...</div>'),It=z('<div class="groups-container svelte-1g59r7t"></div>'),qt=z('<div class="empty-state svelte-1g59r7t"><p class="svelte-1g59r7t">No option groups available for this model.</p></div>'),St=z('<div class="sidebar-section validation-section svelte-1g59r7t"><!></div>'),kt=z("<!> Saving...",1),$t=z('<div class="unsaved-indicator svelte-1g59r7t"><span class="unsaved-dot svelte-1g59r7t"></span> Unsaved changes</div>'),Ot=z('<div class="configurator-layout svelte-1g59r7t"><div class="configurator-header svelte-1g59r7t"><div class="svelte-1g59r7t"><h1 class="svelte-1g59r7t"> </h1> <!></div> <div class="header-actions svelte-1g59r7t"><!> <!></div></div> <div class="configurator-content svelte-1g59r7t"><div class="options-panel svelte-1g59r7t"><!> <!></div> <div class="sidebar svelte-1g59r7t"><!> <div class="sidebar-section svelte-1g59r7t"><!></div> <div class="sidebar-actions svelte-1g59r7t"><button class="save-button svelte-1g59r7t"><!></button> <!></div></div></div></div>'),Ct=z("<div><!></div>");function xt(e,t){N(t,!0);let i=D(t,"theme",3,"light"),s=D(t,"apiUrl",3,"/api/v1"),a=D(t,"embedMode",3,!1),n=D(t,"onComplete",3,null),o=D(t,"onConfigurationChange",3,null),r=D(t,"onError",3,null),l=D(t,"configurationId",3,null);const d=ae();let c=T(!1);async function u(){if(ce.isSaving)return;await ce.saveConfiguration()&&(n()&&n()(ce.exportConfiguration()),d("complete",ce.exportConfiguration()))}function v(){ce.error=null,ce.loadModel()}"undefined"!=typeof window&&(window.__API_BASE_URL__=s()),H((async()=>{await ce.initialize(),ce.setModelId(t.modelId),l()&&await ce.loadConfiguration(l()),M(c,!0),document.documentElement.setAttribute("data-theme",i())})),ne((()=>{})),R((()=>{ce.pricingData&&console.log("Pricing updated:",ce.pricingData)})),R((()=>{E(c)&&ce.configuration&&o()&&o()(ce.exportConfiguration())})),R((()=>{ce.error&&r()&&r()(ce.error)}));var h=Ct();let p;!function(e,t){N(t,!0);let i=D(t,"fallback",3,null),s=D(t,"onError",3,null),a=T(null),n=T(!1);function o(e){console.error("ErrorBoundary caught:",e.error),M(a,e.error,!0),M(n,!0),s()&&s()(e.error),e.preventDefault(),e.stopPropagation()}function r(){M(a,null),M(n,!1)}H((()=>(window.addEventListener("error",o),window.addEventListener("unhandledrejection",(e=>{o({error:e.reason})})),()=>{window.removeEventListener("error",o),window.removeEventListener("unhandledrejection",o)})));var l=J(),d=Q(l),c=e=>{var t=J(),s=Q(t),n=e=>{var t=J(),s=Q(t);K(s,i,(()=>E(a)),(()=>r)),F(e,t)},o=e=>{var t=ge(),i=G(t),s=W(G(i),4),n=G(s),o=W(s,2);j(o,(e=>{}));var l=W(o,2),d=G(l);d.__click=r,W(d,2).__click=[pe],L((()=>V(n,E(a)?.message||"An unexpected error occurred"))),F(e,t)};j(s,(e=>{i()?e(n):e(o,!1)})),F(e,t)},u=e=>{var i=J(),s=Q(i);K(s,(()=>t.children)),F(e,i)};j(d,(e=>{E(n)?e(c):e(u,!1)})),F(e,l),Y()}(G(h),{children:(e,t)=>{var i=J(),s=Q(i),a=e=>{var t=pt();he(G(t),{size:"large",message:"Initializing configurator..."}),F(e,t)},n=(e,t)=>{var i=e=>{var t=gt(),i=G(t),s=W(G(i),4),a=G(s);W(s,2).__click=v,L((()=>V(a,ce.error.message||"Failed to load configuration"))),F(e,t)},s=(e,t)=>{var i=e=>{var t=ft();he(G(t),{size:"large",message:"Loading model..."}),F(e,t)},s=(e,t)=>{var i=e=>{var t=mt();F(e,t)},s=e=>{var t=Ot(),i=G(t),s=G(i),a=G(s),n=G(a),o=W(a,2),r=e=>{var t=bt(),i=G(t);L((()=>V(i,ce.model.description))),F(e,t)};j(o,(e=>{ce.model.description&&e(r)}));var l=W(s,2),d=G(l),c=e=>{var t=yt(),i=G(t);L((()=>V(i,`ID: ${ce.configurationId??""}`))),F(e,t)};j(d,(e=>{ce.configurationId&&e(c)}));var v=W(d,2),h=e=>{var t=wt(),i=G(t);L((e=>V(i,`Saved ${e??""}`)),[()=>new Date(ce.lastSaved).toLocaleTimeString()]),F(e,t)};j(v,(e=>{ce.lastSaved&&e(h)}));var p=W(i,2),g=G(p),f=G(g),m=e=>{var t=_t();he(G(t),{size:"small"}),F(e,t)};j(f,(e=>{ce.isValidating&&e(m)}));var b=W(f,2),y=e=>{var t=It();ie(t,21,(()=>ce.groups),(e=>e.id),((e,t)=>{const i=ee((()=>Array.isArray(ce.options)?ce.options.filter((e=>e.group_id===E(t).id)):[])),s=ee((()=>ce.selections||{})),a=ee((()=>ce.availableOptions||[])),n=ee((()=>ce.isGroupExpanded(E(t).id)));Me(e,{get group(){return E(t)},get options(){return E(i)},get selections(){return E(s)},get availableOptions(){return E(a)},onSelectionChange:(e,t)=>ce.updateSelection(e,t),get expanded(){return E(n)},onToggle:()=>ce.toggleGroup(E(t).id)})})),F(e,t)},w=e=>{var t=qt();F(e,t)};j(b,(e=>{Array.isArray(ce.groups)&&ce.groups.length>0?e(y):e(w,!1)}));var _=W(g,2),I=G(_),q=e=>{var t=St();ht(G(t),{get validationResults(){return ce.validationResults},compact:!0}),F(e,t)};j(I,(e=>{ce.validationResults&&!ce.isValid&&e(q)}));var S=W(I,2),k=G(S);const $=ee((()=>ce.selections||{})),O=ee((()=>ce.options||[]));!function(e,t){N(t,!0);let i=D(t,"pricing",3,null),s=D(t,"isCalculating",3,!1),a=D(t,"selections",19,(()=>({}))),n=D(t,"options",19,(()=>[])),o=ee((()=>Array.isArray(n())?Object.entries(a()||{}).filter((([e,t])=>t>0)).map((([e])=>n().find((t=>t.id===e)))).filter(Boolean):[])),r=ee((()=>E(o)?.reduce(((e,t)=>e+(t.price||t.base_price||0)),0)||0)),l=ee((()=>i()?.breakdown?.adjustments?.reduce(((e,t)=>e+Math.abs(t.amount||0)),0)||0)),d=ee((()=>i()?.total||i()?.breakdown?.total_price||0));var c=Le(),u=W(G(c),2),v=e=>{var t=Te();he(G(t),{size:"small"}),F(e,t)},h=(e,t)=>{var s=e=>{var t=Pe();F(e,t)},a=e=>{var t=We(),s=Q(t),a=W(G(s),2);ie(a,21,(()=>E(o)),(e=>e.id),((e,t)=>{var i=Re(),s=G(i),a=G(s),n=W(s,2),o=G(n);L((e=>{V(a,E(t).name),V(o,`$${e??""}`)}),[()=>(E(t).price||E(t).base_price||0).toFixed(2)]),F(e,i)}));var n=W(a,2),c=W(G(n),2),u=G(c),v=W(s,2),h=e=>{var t=ze(),s=W(G(t),2);ie(s,21,(()=>i().breakdown.adjustments),se,((e,t)=>{var i=De();let s;var a=G(i),n=G(a),o=W(a,2),r=G(o);L(((e,a)=>{s=B(i,1,"line-item svelte-ou3qub",null,s,e),V(n,E(t).description||E(t).rule_name),V(r,`${E(t).amount<0?"-":"+"}$${a??""}`)}),[()=>({discount:E(t).amount<0}),()=>Math.abs(E(t).amount).toFixed(2)]),F(e,i)})),F(e,t)};j(v,(e=>{i()?.breakdown?.adjustments&&i().breakdown.adjustments.length>0&&e(h)}));var p=W(v,2),g=G(p),f=W(G(g),2),m=G(f),b=W(g,2),y=e=>{var t=je(),i=G(t);L((e=>V(i,`Total adjustments: $${e??""}`)),[()=>E(l).toFixed(2)]),F(e,t)};j(b,(e=>{E(l)>0&&e(y)})),L(((e,t)=>{V(u,`$${e??""}`),V(m,`$${t??""}`)}),[()=>E(r).toFixed(2),()=>E(d).toFixed(2)]),F(e,t)};j(e,(e=>{0===E(o).length?e(s):e(a,!1)}),t)};j(u,(e=>{s()?e(v):e(h,!1)})),F(e,c),Y()}(k,{get pricing(){return ce.pricingData},get isCalculating(){return ce.isPricing},get selections(){return E($)},get options(){return E(O)}});var C=W(S,2),x=G(C);x.__click=u;var A=G(x),M=e=>{var t=kt();he(Q(t),{size:"small"}),F(e,t)},T=e=>{var t=te("Save Configuration");F(e,t)};j(A,(e=>{ce.isSaving?e(M):e(T,!1)}));var P=W(x,2),R=e=>{var t=$t();F(e,t)};j(P,(e=>{ce.isDirty&&e(R)})),L((()=>{V(n,ce.model.name),x.disabled=ce.isSaving||!ce.isValid||0===ce.selectedCount})),F(e,t)};j(e,(e=>{ce.model?e(s,!1):e(i)}),t)};j(e,(e=>{ce.isLoading?e(i):e(s,!1)}),t)};j(e,(e=>{ce.error?e(i):e(s,!1)}),t)};j(s,(e=>{E(c)?e(n,!1):e(a)})),F(e,i)},$$slots:{default:!0}}),L((e=>p=B(h,1,"configurator-app svelte-1g59r7t",null,p,e)),[()=>({"embed-mode":a()})]),F(e,h),Y()}U(["click"]);export{xt as C,ce as c};
//# sourceMappingURL=configurator-C3dqnBVZ.js.map
