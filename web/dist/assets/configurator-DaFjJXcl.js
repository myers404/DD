var e,t,s,i,a,o,n,l,r,c,d,v,u,h,p,m,g,f,y,b,w,_,x,S,I,j,M,k=Object.defineProperty,z=e=>{throw TypeError(e)},$=(e,t,s)=>((e,t,s)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s)(e,"symbol"!=typeof t?t+"":t,s),D=(e,t,s)=>t.has(e)||z("Cannot "+s),L=(e,t,s)=>(D(e,t,"read from private field"),s?s.call(e):t.get(e)),C=(e,t,s)=>t.has(e)?z("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),q=(e,t,s,i)=>(D(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),P=(e,t,s)=>(D(e,t,"access private method"),s);import{s as O,g as T,a as R,p as E,e as V,u as A,b as W,f as B,c as N,d as U,h as H,t as F,i as J,j as Q,k as Y,l as G,m as K,n as X,o as Z,q as ee,r as te,v as se,w as ie,x as ae,y as oe,z as ne,A as le,B as re,C as ce,D as de,E as ve,F as ue,G as he,H as pe,I as me,J as ge,K as fe}from"./vendor-BGRWlAiM.js";function ye(e,t){let s;return function(...i){clearTimeout(s),s=setTimeout((()=>e.apply(this,i)),t)}}"undefined"!=typeof window&&((e=window.__svelte??(window.__svelte={})).v??(e.v=new Set)).add("5");class be{constructor(e,t={}){this.baseUrl=e||"http://localhost:8080/api/v1",this.modelId=t.modelId,this.authToken=t.authToken,this.timeout=t.timeout||3e4,this.retryAttempts=t.retryAttempts||2,this.retryDelay=t.retryDelay||1e3}async request(e,t={}){const s=`${this.baseUrl}${e}`,i={method:"GET",headers:{"Content-Type":"application/json","X-Request-ID":this.generateRequestId(),...this.authToken&&{Authorization:`Bearer ${this.authToken}`},...t.headers},...t};let a;i.body&&"object"==typeof i.body&&(i.body=JSON.stringify(i.body));for(let n=0;n<this.retryAttempts;n++)try{const e=new AbortController,t=setTimeout((()=>e.abort()),this.timeout),a=await fetch(s,{...i,signal:e.signal});if(clearTimeout(t),401===a.status)throw new Error("Authentication required");if(404===a.status){const e=new Error("Resource not found");throw e.code="NOT_FOUND",e}if(429===a.status){const e=a.headers.get("Retry-After");throw new Error(`Rate limited. Retry after ${e}s`)}if(!a.ok){const e=await a.json().catch((()=>({})));throw new Error(e.error?.message||`HTTP ${a.status}: ${a.statusText}`)}const o=await a.json();return void 0!==o.data?o:{data:o}}catch(o){if(a=o,o.message.includes("4")||"AbortError"===o.name||response?.status>=400&&response?.status<500)throw o;n<this.retryAttempts-1&&await this.delay(this.retryDelay*Math.pow(2,n))}throw a}generateRequestId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}delay(e){return new Promise((t=>setTimeout(t,e)))}async getModel(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}`)}async getModelOptions(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/options`)}async getModelGroups(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/groups`)}async createConfiguration(e={}){const t={model_id:this.modelId,selections:this.formatSelections(e)};return this.request("/configurations",{method:"POST",body:t})}async updateConfiguration(e,t){const s={model_id:this.modelId,selections:this.formatSelections(t)};return this.request(`/configurations/${e}`,{method:"PUT",body:s})}async validateConfiguration(e){const t={model_id:this.modelId,selections:this.formatSelections(e)};return this.request("/configurations/validate-selection",{method:"POST",body:t})}async getConfiguration(e){return this.request(`/configurations/${e}`)}async deleteConfiguration(e){return this.request(`/configurations/${e}`,{method:"DELETE"})}async calculatePricing(e,t={}){const s={model_id:this.modelId,selections:this.formatSelections(e),context:t};return this.request("/pricing/calculate",{method:"POST",body:s})}async simulatePricing(e){const t={model_id:this.modelId,scenarios:e.map((e=>({...e,selections:this.formatSelections(e.selections)})))};return this.request("/pricing/simulate",{method:"POST",body:t})}async getVolumeTiers(){return this.request(`/pricing/volume-tiers/${this.modelId}`)}async getConfigurationAnalytics(e="30d"){return this.request(`/analytics/configurations?model_id=${this.modelId}&range=${e}`)}async getPricingAnalytics(e="30d"){return this.request(`/analytics/pricing?model_id=${this.modelId}&range=${e}`)}formatSelections(e){return Array.isArray(e)?e:Object.entries(e).filter((([e,t])=>t>0)).map((([e,t])=>({option_id:e,quantity:t})))}setModelId(e){this.modelId=e}setAuthToken(e){this.authToken=e}}const we="cpq_";t=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakMap,l=new WeakMap,r=new WeakMap,c=new WeakMap,d=new WeakMap,v=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,f=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakSet,_=function(){const e=V((()=>{A((()=>{this.modelId&&L(this,f)&&!this.model&&!this.error&&(L(this,f).modelId=this.modelId,this.loadModel())}))}));L(this,b).push(e);const t=ye((()=>{Object.keys(this.selections).length>0&&this.validateSelections()}),300),s=V((()=>{A((()=>{JSON.stringify(this.selections),t()}))}));L(this,b).push(s);const i=ye((()=>{this.isValid&&Object.keys(this.selections).length>0&&this.calculatePricing()}),500),a=V((()=>{A((()=>{this.isValid,JSON.stringify(this.selections),i()}))}));L(this,b).push(a);const o=ye((()=>{this.isDirty&&this.saveConfiguration()}),2e3),n=V((()=>{A((()=>{this.isDirty&&o()}))}));L(this,b).push(n);const l=V((()=>{A((()=>{P(this,w,I).call(this)}))}));L(this,b).push(l)},x=function(){const e=()=>{this.isOnline=!0,P(this,w,S).call(this)},t=()=>{this.isOnline=!1};window.addEventListener("online",e),window.addEventListener("offline",t),L(this,b).push((()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}))},S=async function(){for(;this.retryQueue.length>0&&this.isOnline;){const t=this.retryQueue.shift();try{await t()}catch(e){console.error("Retry failed:",e)}}},I=function(){!function(e,t){try{localStorage.setItem(we+e,JSON.stringify(t))}catch(s){console.warn("Failed to persist data:",s)}}("cpq_config_state",{modelId:this.modelId,selections:this.selections,configurationId:this.configurationId,currentStep:this.currentStep,lastSaved:this.lastSaved})},j=function(){const e=function(e){try{const t=localStorage.getItem(we+e);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to recover data:",t),null}}("cpq_config_state");e&&(this.modelId=e.modelId||"",this.selections=e.selections||{},this.configurationId=e.configurationId||null,this.currentStep=e.currentStep||0,this.lastSaved=e.lastSaved||null)},M=function(){this.history=this.history.slice(0,this.historyIndex+1),this.history.push({selections:{...this.selections},timestamp:Date.now()}),this.history.length>this.maxHistorySize&&(this.history=this.history.slice(-this.maxHistorySize)),this.historyIndex=this.history.length-1};const _e=new class{constructor(){C(this,w),C(this,t,O("")),C(this,s,O(null)),C(this,i,O(E({}))),C(this,a,O(E({violations:[],isValid:!0}))),C(this,o,O(null)),C(this,n,O(!1)),C(this,l,O(!1)),C(this,r,O(!1)),C(this,c,O(null)),C(this,d,O(0)),C(this,v,O(null)),C(this,u,O(null)),C(this,h,O(!1)),C(this,p,O(E([]))),C(this,m,O(-1)),$(this,"maxHistorySize",50),C(this,g,O(E(navigator.onLine))),$(this,"retryQueue",[]),C(this,f,null),C(this,y,!1),C(this,b,[])}get modelId(){return T(L(this,t))}set modelId(e){R(L(this,t),e,!0)}get model(){return T(L(this,s))}set model(e){R(L(this,s),e,!0)}get selections(){return T(L(this,i))}set selections(e){R(L(this,i),e,!0)}get validationResults(){return T(L(this,a))}set validationResults(e){R(L(this,a),e,!0)}get pricingData(){return T(L(this,o))}set pricingData(e){R(L(this,o),e,!0)}get isLoading(){return T(L(this,n))}set isLoading(e){R(L(this,n),e,!0)}get isValidating(){return T(L(this,l))}set isValidating(e){R(L(this,l),e,!0)}get isPricing(){return T(L(this,r))}set isPricing(e){R(L(this,r),e,!0)}get error(){return T(L(this,c))}set error(e){R(L(this,c),e,!0)}get currentStep(){return T(L(this,d))}set currentStep(e){R(L(this,d),e,!0)}get configurationId(){return T(L(this,v))}set configurationId(e){R(L(this,v),e,!0)}get lastSaved(){return T(L(this,u))}set lastSaved(e){R(L(this,u),e,!0)}get isDirty(){return T(L(this,h))}set isDirty(e){R(L(this,h),e,!0)}get history(){return T(L(this,p))}set history(e){R(L(this,p),e,!0)}get historyIndex(){return T(L(this,m))}set historyIndex(e){R(L(this,m),e,!0)}get isOnline(){return T(L(this,g))}set isOnline(e){R(L(this,g),e,!0)}get isValid(){return this.validationResults.isValid&&0===this.validationResults.violations.length}get totalPrice(){return this.pricingData?.total_price||0}get basePrice(){return this.pricingData?.base_price||0}get adjustments(){return this.pricingData?.adjustments||[]}get selectedOptions(){return this.model?.option_groups?this.model.option_groups.flatMap((e=>e.options.filter((e=>this.selections[e.id]>0)).map((t=>({...t,quantity:this.selections[t.id],group_name:e.name}))))):[]}get completionPercentage(){if(!this.model?.option_groups)return 0;const e=this.model.option_groups.filter((e=>e.required));if(!e.length)return 100;const t=e.filter((e=>e.options.some((e=>this.selections[e.id]>0))));return Math.round(t.length/e.length*100)}get canProceedToNextStep(){return this.completionPercentage>=100&&this.isValid&&!this.isValidating}get canUndo(){return this.historyIndex>0}get canRedo(){return this.historyIndex<this.history.length-1}initialize(e=window.__API_BASE_URL__){L(this,y)||(q(this,y,!0),q(this,f,new be(e)),P(this,w,j).call(this),P(this,w,_).call(this),P(this,w,x).call(this))}destroy(){L(this,b).forEach((e=>e())),q(this,b,[]),q(this,f,null),q(this,y,!1)}setModelId(e){this.modelId!==e&&(this.modelId=e,(this.model||this.error)&&this.reset())}async loadModel(){if(L(this,f)&&!this.isLoading&&this.modelId){console.log("Loading model:",this.modelId),this.isLoading=!0,this.error=null;try{const e=await L(this,f).getModel();if(console.log("Model loaded successfully:",e),this.model=e.data||e,this.model?.option_groups)for(const t of this.model.option_groups)if(t.required&&"single"===t.selection_type&&t.min_selections>0){!t.options.some((e=>this.selections[e.id]>0))&&t.options.length>0&&(this.selections[t.options[0].id]=1)}}catch(e){console.error("Failed to load model:",e),this.error={type:"load",message:e.message||"Failed to load model",code:e.code},this.isOnline||e.message.includes("404")||this.retryQueue.push((()=>this.loadModel()))}finally{this.isLoading=!1}}else console.log("Skipping loadModel:",{api:!!L(this,f),isLoading:this.isLoading,modelId:this.modelId})}updateSelection(e,t){const s={...this.selections};if(t>0?this.selections[e]=t:delete this.selections[e],this.model?.option_groups){const s=this.model.option_groups.flatMap((e=>e.options)).find((t=>t.id===e));if(s){const i=this.model.option_groups.find((e=>e.options.some((e=>e.id===s.id))));if("single"===i?.selection_type&&t>0)for(const t of i.options)t.id!==e&&delete this.selections[t.id]}}JSON.stringify(s)!==JSON.stringify(this.selections)&&(this.isDirty=!0,P(this,w,M).call(this))}async validateSelections(){if(L(this,f)&&!this.isValidating){this.isValidating=!0;try{const e=await L(this,f).validateConfiguration(this.selections);this.validationResults={violations:e.data?.violations||[],isValid:e.data?.is_valid??!0}}catch(e){this.isOnline?this.error={type:"validation",message:e.message}:this.validationResults={violations:[],isValid:!0}}finally{this.isValidating=!1}}}async calculatePricing(){if(L(this,f)&&!this.isPricing){this.isPricing=!0;try{const e=await L(this,f).calculatePricing(this.selections);this.pricingData=e.data||e}catch(e){this.isOnline?this.error={type:"pricing",message:e.message}:this.pricingData=this.pricingData||null}finally{this.isPricing=!1}}}async saveConfiguration(){if(L(this,f)&&this.isDirty)try{let e;return this.configurationId?e=await L(this,f).updateConfiguration(this.configurationId,this.selections):(e=await L(this,f).createConfiguration(this.selections),this.configurationId=e.data?.id||e.id),this.lastSaved=new Date,this.isDirty=!1,e}catch(e){throw this.isOnline?this.error={type:"save",message:e.message}:this.retryQueue.push((()=>this.saveConfiguration())),e}}undo(){this.canUndo&&(this.historyIndex--,this.selections={...this.history[this.historyIndex].selections},this.isDirty=!0)}redo(){this.canRedo&&(this.historyIndex++,this.selections={...this.history[this.historyIndex].selections},this.isDirty=!0)}nextStep(){this.canProceedToNextStep&&(this.currentStep=Math.min(this.currentStep+1,3))}previousStep(){this.currentStep=Math.max(this.currentStep-1,0)}reset(){this.model=null,this.selections={},this.validationResults={violations:[],isValid:!0},this.pricingData=null,this.currentStep=0,this.configurationId=null,this.lastSaved=null,this.isDirty=!1,this.error=null,this.isLoading=!1,this.isValidating=!1,this.isPricing=!1,this.history=[],this.historyIndex=-1,this.retryQueue=[]}clearError(){this.error=null}};var xe=X('<svg viewBox="0 0 20 20" fill="currentColor" class="svelte-fs3n5v"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Se=B('<div><div class="step-icon svelte-fs3n5v"><!></div> <span class="step-name svelte-fs3n5v"> </span></div>'),Ie=B('<div class="progress-indicator svelte-fs3n5v"><div class="progress-bar svelte-fs3n5v"><div class="progress-fill svelte-fs3n5v"></div></div> <div class="progress-steps svelte-fs3n5v"></div> <div class="progress-text svelte-fs3n5v"> </div></div>');var je=B('<p class="loading-message svelte-c70bjm"> </p>'),Me=B('<div><div class="spinner-content svelte-c70bjm"><div></div> <!></div></div>');function ke(e,t,s,i){R(t,!1),R(s,""),i()&&i()()}var ze=B('<button class="retry-btn svelte-me7lub">Try Again</button>'),$e=B('<div class="error-boundary svelte-me7lub"><div class="error-content svelte-me7lub"><svg class="error-icon svelte-me7lub" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> <h3 class="svelte-me7lub">Something went wrong</h3> <p class="svelte-me7lub"> </p> <!></div></div>');function De(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function Le(e,t,s,i,a){if("single"===t.group.selection_type){const e=T(s)?0:1;R(i,e,!0),_e.updateSelection(t.option.id,e)}else a(T(s)?-T(i):1)}te(["click"]);var Ce=B('<span class="option-sku svelte-cwem91"> </span>'),qe=B('<span class="price-unit svelte-cwem91"> </span>'),Pe=B('<p class="option-description svelte-cwem91"> </p>'),Oe=B('<span class="attribute svelte-cwem91"><span class="attribute-key svelte-cwem91"> </span> <span class="attribute-value svelte-cwem91"> </span></span>'),Te=B('<div class="option-attributes svelte-cwem91"></div>'),Re=B('<div class="error-text svelte-cwem91"> </div>'),Ee=B('<div class="option-errors svelte-cwem91"></div>'),Ve=B('<label class="radio-control svelte-cwem91"><input type="radio" class="radio-input svelte-cwem91"/> <span class="radio-label svelte-cwem91">Select</span></label>'),Ae=(e,t)=>t(-1),We=(e,t)=>t(parseInt(e.target.value)||0),Be=(e,t)=>t(1),Ne=B('<div class="quantity-total svelte-cwem91"> </div>'),Ue=B('<div class="quantity-controls svelte-cwem91"><button type="button" class="quantity-btn svelte-cwem91" aria-label="Decrease quantity"><svg class="icon svelte-cwem91" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" class="svelte-cwem91"></path></svg></button> <input type="number" class="quantity-input svelte-cwem91" min="0"/> <button type="button" class="quantity-btn svelte-cwem91" aria-label="Increase quantity"><svg class="icon svelte-cwem91" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" class="svelte-cwem91"></path></svg></button></div> <!>',1),He=B('<div class="availability-warning svelte-cwem91">Limited availability</div>'),Fe=B('<div class="availability-error svelte-cwem91">Out of stock</div>'),Je=B('<div><div class="option-header svelte-cwem91"><div class="option-info svelte-cwem91"><h4 class="option-name svelte-cwem91"> </h4> <!></div> <div class="option-price svelte-cwem91"> <!></div></div> <!> <!> <!> <div class="option-controls svelte-cwem91"><!></div> <!></div>');function Qe(e,t){se(t,!0);let s=O(E(_e.selections[t.option.id]||0)),i=re((()=>T(s)>0));const a=function(e,t){let s;return function(...i){s||(e.apply(this,i),s=!0,setTimeout((()=>s=!1),t))}}((e=>{_e.updateSelection(t.option.id,e)}),100);let o=re((()=>_e.validationResults.violations.filter((e=>e.option_id===t.option.id))));function n(e){const o=Math.max(0,T(s)+e);if(t.group.max_selections&&e>0){const e=t.group.options.filter((e=>_e.selections[e.id]>0)).length;if(!T(i)&&e>=t.group.max_selections)return}R(s,o,!0),a(o)}A((()=>{R(s,_e.selections[t.option.id]||0,!0)}));var l=Je();let r;var c=U(l),d=U(c),v=U(d),u=U(v),h=N(v,2),p=e=>{var s=Ce(),i=U(s);F((()=>Q(i,`SKU: ${t.option.sku??""}`))),Y(e,s)};G(h,(e=>{t.option.sku&&e(p)}));var m=N(d,2),g=U(m),f=N(g),y=e=>{var s=qe(),i=U(s);F((()=>Q(i,`/${t.option.price_unit??""}`))),Y(e,s)};G(f,(e=>{t.option.price_unit&&e(y)}));var b=N(c,2),w=e=>{var s=Pe(),i=U(s);F((()=>Q(i,t.option.description))),Y(e,s)};G(b,(e=>{t.option.description&&e(w)}));var _=N(b,2),x=e=>{var s=Te();H(s,21,(()=>Object.entries(t.option.attributes)),ee,((e,t)=>{var s=re((()=>ue(T(t),2)));var i=Oe(),a=U(i),o=U(a),n=N(a,2),l=U(n);F((()=>{Q(o,`${T(s)[0]??""}:`),Q(l,T(s)[1])})),Y(e,i)})),Y(e,s)};G(_,(e=>{t.option.attributes&&Object.keys(t.option.attributes).length>0&&e(x)}));var S=N(_,2),I=e=>{var t=Ee();H(t,21,(()=>T(o)),ee,((e,t)=>{var s=Re(),i=U(s);F((()=>Q(i,T(t).message))),Y(e,s)})),Y(e,t)};G(S,(e=>{T(o).length>0&&e(I)}));var j=N(S,2),M=U(j),k=e=>{var a=Ve(),o=U(a);o.__change=[Le,t,i,s,n],F((()=>{ce(o,"name",`group-${t.group.id}`),de(o,T(i))})),Y(e,a)},z=e=>{var i=Ue(),o=ae(i),l=U(o);l.__click=[Ae,n];var r=N(l,2);r.__change=[We,a];var c=N(r,2);c.__click=[Be,n];var d=N(o,2),v=e=>{var i=Ne(),a=U(i);F((e=>Q(a,`Total: ${e??""}`)),[()=>De(t.option.base_price*T(s))]),Y(e,i)};G(d,(e=>{T(s)>0&&e(v)})),F((()=>{l.disabled=0===T(s),ce(r,"max",t.option.max_quantity||999),c.disabled=t.option.max_quantity&&T(s)>=t.option.max_quantity})),ve(r,(()=>T(s)),(e=>R(s,e))),Y(e,i)};G(M,(e=>{"single"===t.group.selection_type?e(k):e(z,!1)}));var $=N(j,2),D=e=>{var t=He();Y(e,t)},L=(e,s)=>{var i=e=>{var t=Fe();Y(e,t)};G(e,(e=>{"out_of_stock"===t.option.availability&&e(i)}),s)};G($,(e=>{"limited"===t.option.availability?e(D):e(L,!1)})),F(((e,s)=>{r=K(l,1,"option-card svelte-cwem91",null,r,e),Q(u,t.option.name),Q(g,`${s??""} `)}),[()=>({selected:T(i),"has-errors":T(o).length>0,loading:false}),()=>De(t.option.base_price)]),Y(e,l),oe()}te(["change","click"]);var Ye=(e,t)=>R(t,!T(t)),Ge=B('<span class="required-badge svelte-4o0mr">Required</span>'),Ke=B('<span class="selection-type">Single selection</span>'),Xe=B('<span class="selection-type">Multiple selection <!></span>'),Ze=B('<span class="selection-count svelte-4o0mr"> </span>'),et=B('<p class="group-description svelte-4o0mr"> </p>'),tt=B('<div class="error-message svelte-4o0mr"><svg class="error-icon svelte-4o0mr" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> </div>'),st=B('<div class="group-errors svelte-4o0mr"></div>'),it=B('<div class="search-box svelte-4o0mr"><input type="search" placeholder="Search options..." class="search-input svelte-4o0mr"/></div>'),at=B('<div class="virtual-scroll-container svelte-4o0mr" style="height: 600px"><div><div></div></div></div>'),ot=B('<div class="options-grid svelte-4o0mr"></div>'),nt=B('<div class="no-results svelte-4o0mr"> </div>'),lt=B('<div class="group-content svelte-4o0mr"><!> <!> <!> <div><!></div> <!></div>'),rt=B('<div><div class="group-header svelte-4o0mr"><div class="header-content svelte-4o0mr"><h3 class="group-title svelte-4o0mr"> <!></h3> <div class="group-meta svelte-4o0mr"><!> <!></div></div> <button class="expand-toggle svelte-4o0mr"><svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div> <!></div>');function ct(e,t){se(t,!0);let s,i=O(!0),a=O(""),o=O(!1),n=O(null),l=re((()=>t.group.options.filter((e=>e.name.toLowerCase().includes(T(a).toLowerCase())||e.description?.toLowerCase().includes(T(a).toLowerCase())))));A((()=>{T(l).length>20?(R(o,!0),R(n,function(e){const{items:t,itemHeight:s,containerHeight:i,buffer:a=5}=e;let o=$state(0),n=$derived(Math.floor(o/s)),l=$derived(Math.ceil((o+i)/s)),r=$derived(Math.max(0,n-a)),c=$derived(Math.min(t.length,l+a)),d=$derived(r*s);return{visibleItems:$derived(t.slice(r,c)),totalHeight:t.length*s,offsetY:d,updateScroll(e){o=e}}}({items:T(l),itemHeight:120,containerHeight:600,buffer:3}),!0)):(R(o,!1),R(n,null))}));let r=re((()=>t.group.options.some((e=>_e.selections[e.id]>0)))),c=re((()=>_e.validationResults.violations.some((e=>e.group_id===t.group.id||t.group.options.some((t=>e.option_id===t.id)))))),d=re((()=>_e.validationResults.violations.filter((e=>e.group_id===t.group.id||t.group.options.some((t=>e.option_id===t.id))))));function v(e){T(n)&&T(n).updateScroll(e.target.scrollTop)}var u=rt();let h;var p=U(u);p.__click=[Ye,i];var m=U(p),g=U(m),f=U(g),y=N(f),b=e=>{var t=Ge();Y(e,t)};G(y,(e=>{t.group.required&&e(b)}));var w=N(g,2),_=U(w),x=e=>{var t=Ke();Y(e,t)},S=(e,s)=>{var i=e=>{var s=Xe(),i=N(U(s)),a=e=>{var s=Z();F((()=>Q(s,`(${(t.group.min_selections||0)??""}-${t.group.max_selections||"∞"})`))),Y(e,s)};G(i,(e=>{(t.group.min_selections>0||t.group.max_selections)&&e(a)})),Y(e,s)};G(e,(e=>{"multiple"===t.group.selection_type&&e(i)}),s)};G(_,(e=>{"single"===t.group.selection_type?e(x):e(S,!1)}));var I=N(_,2),j=e=>{var s=Ze(),i=U(s);F((e=>Q(i,`${e??""} selected`)),[()=>t.group.options.filter((e=>_e.selections[e.id]>0)).length]),Y(e,s)};G(I,(e=>{T(r)&&e(j)}));var M=N(m,2),k=U(M);let z;var $=N(p,2),D=e=>{var i=lt(),r=U(i),c=e=>{var s=et(),i=U(s);F((()=>Q(i,t.group.description))),Y(e,s)};G(r,(e=>{t.group.description&&e(c)}));var u=N(r,2),h=e=>{var t=st();H(t,21,(()=>T(d)),ee,((e,t)=>{var s=tt(),i=N(U(s));F((()=>Q(i,` ${T(t).message??""}`))),Y(e,s)})),Y(e,t)};G(u,(e=>{T(d).length>0&&e(h)}));var p=N(u,2),m=e=>{var t=it(),s=U(t);ve(s,(()=>T(a)),(e=>R(a,e))),Y(e,t)};G(p,(e=>{T(l).length>10&&e(m)}));var g=N(p,2);let f;var y=U(g),b=e=>{var i=at(),a=U(i),o=U(a);H(o,21,(()=>T(n)?.visibleItems||[]),ee,((e,s)=>{Qe(e,{get option(){return T(s)},get group(){return t.group}})})),he(i,(e=>s=e),(()=>s)),F((()=>{J(a,`height: ${(T(n)?.totalHeight||0)??""}px; position: relative;`),J(o,`transform: translateY(${(T(n)?.offsetY||0)??""}px);`)})),pe("scroll",i,v),Y(e,i)},w=e=>{var s=ot();H(s,21,(()=>T(l)),ee,((e,s)=>{Qe(e,{get option(){return T(s)},get group(){return t.group}})})),Y(e,s)};G(y,(e=>{T(o)&&T(n)?e(b):e(w,!1)}));var _=N(g,2),x=e=>{var t=nt(),s=U(t);F((()=>Q(s,`No options found matching "${T(a)??""}"`))),Y(e,t)};G(_,(e=>{0===T(l).length&&e(x)})),F((e=>f=K(g,1,"options-container",null,f,e)),[()=>({virtual:T(o)})]),Y(e,i)};G($,(e=>{T(i)&&e(D)})),F(((e,s)=>{h=K(u,1,"option-group svelte-4o0mr",null,h,e),Q(f,`${t.group.name??""} `),ce(M,"aria-label",T(i)?"Collapse":"Expand"),z=K(k,0,"icon svelte-4o0mr",null,z,s)}),[()=>({"has-errors":T(c)}),()=>({rotated:T(i)})]),Y(e,u),oe()}te(["click"]);var dt=B('<span class="calculating svelte-jzost2"><span class="spinner svelte-jzost2"></span> Calculating...</span>'),vt=(e,t)=>R(t,!T(t)),ut=B('<button class="toggle-btn svelte-jzost2"> </button>'),ht=B('<div class="price-row savings svelte-jzost2"><span>Total Savings</span> <span> </span></div>'),pt=B('<div class="price-per-unit svelte-jzost2"> </div>'),mt=B('<span class="item-quantity svelte-jzost2"> </span>'),gt=B('<div class="item-group svelte-jzost2"> </div>'),ft=B('<div class="item-reason svelte-jzost2"> </div>'),yt=B('<span class="percentage svelte-jzost2"> </span>'),bt=B("<span> <!></span>"),wt=B('<div><div class="item-info svelte-jzost2"><div class="item-name svelte-jzost2"> <!></div> <!> <!></div> <div class="item-price svelte-jzost2"><!></div></div>'),_t=B('<div class="pricing-breakdown svelte-jzost2"><h4 class="breakdown-title svelte-jzost2">Price Breakdown</h4> <div class="breakdown-items svelte-jzost2"></div></div>'),xt=(e,t)=>R(t,!T(t)),St=B('<div class="discount-item svelte-jzost2"><div><div class="discount-name svelte-jzost2"> </div> <div class="discount-tier svelte-jzost2"> </div></div> <div class="discount-save svelte-jzost2"> </div></div>'),It=B('<div class="volume-details svelte-jzost2"></div>'),jt=B('<div class="volume-discounts svelte-jzost2"><button class="volume-header svelte-jzost2"><span>Volume Discounts Applied</span> <span class="discount-amount svelte-jzost2"> </span></button> <!></div>'),Mt=B('<div class="pricing-summary svelte-jzost2"><div class="price-row subtotal svelte-jzost2"><span>Subtotal</span> <span> </span></div> <!> <div class="price-row total svelte-jzost2"><span>Total Price</span> <span class="total-amount svelte-jzost2"> </span></div> <!></div> <!> <!>',1),kt=B('<div class="no-selections svelte-jzost2"><p>Select options to see pricing</p></div>'),zt=B('<div class="pricing-display svelte-jzost2"><div class="pricing-header svelte-jzost2"><h3 class="pricing-title svelte-jzost2">Pricing Summary <!></h3> <!></div> <!></div>');te(["click"]);var $t=B('<span class="validating-indicator svelte-hbmmex"><span class="spinner svelte-hbmmex"></span> Checking...</span>'),Dt=X('<svg class="status-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> Valid',1),Lt=X('<svg class="status-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg> ',1),Ct=B("<div><!></div>"),qt=(e,t)=>R(t,"all"),Pt=(e,t)=>R(t,"error"),Ot=B("<button> </button>"),Tt=(e,t)=>R(t,"warning"),Rt=B("<button> </button>"),Et=(e,t)=>R(t,"info"),Vt=B("<button> </button>"),At=B('<div class="violation-details svelte-hbmmex"> </div>'),Wt=B('<span class="affected-option svelte-hbmmex"> </span> <!>',1),Bt=B('<div class="affected-options svelte-hbmmex">Affects: <!></div>'),Nt=B('<div class="rule-expression svelte-hbmmex">Rule: <code class="svelte-hbmmex"> </code></div>'),Ut=B("<li> </li>"),Ht=B('<div class="violation-suggestions svelte-hbmmex"><div class="suggestions-title svelte-hbmmex">Suggestions:</div> <ul class="suggestions-list svelte-hbmmex"></ul></div>'),Ft=(e,t,s)=>t(T(s)),Jt=B('<button class="auto-fix-btn svelte-hbmmex"><svg class="fix-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path></svg> Auto-fix</button>'),Qt=B('<div><div class="violation-header svelte-hbmmex"><svg class="violation-icon svelte-hbmmex" viewBox="0 0 20 20"><!></svg> <div class="violation-content svelte-hbmmex"><div class="violation-message svelte-hbmmex"> </div> <!> <!> <!></div></div> <!> <!></div>'),Yt=B('<div class="validation-filters svelte-hbmmex"><button> </button> <!> <!> <!></div> <div class="violations-list svelte-hbmmex"></div>',1),Gt=B('<div class="valid-message svelte-hbmmex"><svg class="valid-icon svelte-hbmmex" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <p class="svelte-hbmmex">Your configuration is valid and meets all requirements.</p></div>'),Kt=B('<div class="validation-display svelte-hbmmex"><div class="validation-header svelte-hbmmex"><h3 class="validation-title svelte-hbmmex">Configuration Validation <!></h3> <!></div> <!></div>');async function Xt(){try{await _e.saveConfiguration()}catch(e){console.error("Failed to save:",e)}}te(["click"]);var Zt=B('<div class="configuration-summary svelte-31i1s8"><h3 class="svelte-31i1s8">Configuration Summary</h3> <div class="summary-stats svelte-31i1s8"><div class="stat svelte-31i1s8"><span class="stat-value svelte-31i1s8"> </span> <span class="stat-label svelte-31i1s8">Options Selected</span></div> <div class="stat svelte-31i1s8"><span class="stat-value svelte-31i1s8"> </span> <span class="stat-label svelte-31i1s8">Total Price</span></div></div> <div class="summary-actions svelte-31i1s8"><button class="action-btn primary svelte-31i1s8">Save Configuration</button> <button class="action-btn secondary svelte-31i1s8">Export</button></div></div>');te(["click"]);var es=B('<div class="network-banner offline svelte-id3e46"><svg class="icon svelte-id3e46" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd"></path><path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"></path></svg> <span>You\'re offline - changes will be saved when connection is restored</span></div>');var ts=()=>_e.undo(),ss=()=>_e.redo(),is=B('<div class="undo-redo svelte-2vt889"><button class="action-btn svelte-2vt889" title="Undo"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-2vt889"><path d="M12.207 2.293a1 1 0 010 1.414L10.914 5H13a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5h-2.586l1.293 1.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z"></path></svg></button> <button class="action-btn svelte-2vt889" title="Redo"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-2vt889"><path d="M7.793 2.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L9.086 7H7a5 5 0 00-5 5v2a1 1 0 11-2 0v-2a7 7 0 017-7h2.586L7.793 3.707a1 1 0 010-1.414z"></path></svg></button></div>');te(["click"]);var as=B('<div class="error-state svelte-1m2ujmu"><svg class="error-icon svelte-1m2ujmu" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <h2 class="svelte-1m2ujmu">Model Not Found</h2> <p class="svelte-1m2ujmu"> </p> <p class="error-details svelte-1m2ujmu">Please check the model ID and try again.</p></div>'),os=B('<p class="configurator-description svelte-1m2ujmu"> </p>'),ns=()=>_e.previousStep(),ls=B('<span class="save-indicator svelte-1m2ujmu"><!></span>'),rs=(e,t)=>{3===_e.currentStep?t():_e.nextStep()},cs=B('<div class="configurator-header svelte-1m2ujmu"><div class="header-content"><h1 class="configurator-title svelte-1m2ujmu"> </h1> <!></div> <!></div> <!> <div><div class="options-panel svelte-1m2ujmu"><!></div> <div class="sidebar-panel svelte-1m2ujmu"><!> <!> <!></div></div> <div class="configurator-actions svelte-1m2ujmu"><button type="button" class="btn btn-secondary svelte-1m2ujmu">Previous</button> <div class="action-group svelte-1m2ujmu"><!> <button type="button" class="btn btn-primary svelte-1m2ujmu"> </button></div></div>',1),ds=B('<div class="no-model svelte-1m2ujmu"><p>No model selected</p></div>'),vs=B('<div class="configurator-content svelte-1m2ujmu"><!></div>'),us=B("<div><!> <!></div>");function hs(e,t){se(t,!0);let s,i=W(t,"theme",3,"light"),a=W(t,"apiUrl",3,"http://localhost:8080/api/v1"),o=W(t,"embedMode",3,!1),n=W(t,"onComplete",3,null),l=W(t,"onConfigurationChange",3,null),r=W(t,"onError",3,null);function c(){const e={modelId:_e.modelId,selections:_e.selections,pricing:_e.pricingData,validation:_e.validationResults};n()&&n()(e)}"undefined"!=typeof window&&(window.__API_BASE_URL__=a()),ge((()=>{if(_e.initialize(a()),t.modelId&&setTimeout((()=>{_e.setModelId(t.modelId)}),0),document.documentElement.setAttribute("data-theme",i()),l()){const e=V((()=>{A((()=>{_e.isDirty&&_e.selections&&l()({selections:_e.selections,validation:_e.validationResults,pricing:_e.pricingData})}))}));return()=>e()}})),fe((()=>{_e.destroy()})),A((()=>{var e;_e.error&&(e=_e.error,console.error("Configuration error:",e),r()&&r()(e))}));var d=us();let v;var u=U(d);!function(e,t){se(t,!0);let s=O(!1);A((()=>{R(s,!_e.isOnline)}));var i=ie(),a=ae(i),o=e=>{var t=es();Y(e,t)};G(a,(e=>{T(s)&&e(o)})),Y(e,i),oe()}(u,{});{const e=e=>{var s=vs(),i=U(s),a=e=>{var s=as(),i=N(U(s),4),a=U(i);F((()=>Q(a,`The model with ID "${t.modelId??""}" could not be found.`))),Y(e,s)},n=(e,t)=>{var s=e=>{!function(e,t){let s=W(t,"size",3,"medium"),i=W(t,"message",3,""),a=W(t,"overlay",3,!1);const o={small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"};var n=Me();let l;var r=U(n),c=U(r),d=N(c,2),v=e=>{var t=je(),s=U(t);F((()=>Q(s,i()))),Y(e,t)};G(d,(e=>{i()&&e(v)})),F((e=>{l=K(n,1,"loading-spinner svelte-c70bjm",null,l,e),K(c,1,`spinner ${o[s()]??""}`,"svelte-c70bjm")}),[()=>({overlay:a()})]),Y(e,n)}(e,{size:"large",message:"Loading configuration..."})},i=(e,t)=>{var s=e=>{var t=cs(),s=ae(t),i=U(s),a=U(i),n=U(a),l=N(a,2),r=e=>{var t=os(),s=U(t);F((()=>Q(s,_e.model.description))),Y(e,t)};G(l,(e=>{_e.model.description&&e(r)})),function(e,t){se(t,!0);var s=is(),i=U(s);i.__click=[ts];var a=N(i,2);a.__click=[ss],F((()=>{i.disabled=!_e.canUndo,a.disabled=!_e.canRedo})),Y(e,s),oe()}(N(i,2),{});var d=N(s,2);!function(e,t){let s=W(t,"currentStep",3,0),i=W(t,"completionPercentage",3,0);const a=[{name:"Configure",icon:"1"},{name:"Validate",icon:"2"},{name:"Price",icon:"3"},{name:"Complete",icon:"4"}];var o=Ie(),n=U(o),l=U(n),r=N(n,2);H(r,21,(()=>a),ee,((e,t,i)=>{var a=Se();let o;var n=U(a),l=U(n),r=e=>{var t=xe();Y(e,t)},c=e=>{var s=Z();F((()=>Q(s,T(t).icon))),Y(e,s)};G(l,(e=>{i<s()?e(r):e(c,!1)}));var d=N(n,2),v=U(d);F((e=>{o=K(a,1,"step svelte-fs3n5v",null,o,e),Q(v,T(t).name)}),[()=>({active:i===s(),completed:i<s()})]),Y(e,a)}));var c=N(r,2),d=U(c);F((()=>{J(l,`width: ${i()??""}%`),Q(d,`${i()??""}% Complete`)})),Y(e,o)}(d,{get currentStep(){return _e.currentStep},get completionPercentage(){return _e.completionPercentage}});var v=N(d,2);let u;var h=U(v),p=U(h),m=e=>{var t=ie(),s=ae(t);H(s,17,(()=>_e.model.option_groups),ee,((e,t)=>{ct(e,{get group(){return T(t)}})})),Y(e,t)};G(p,(e=>{_e.model.option_groups&&e(m)}));var g=N(h,2),f=U(g);!function(e,t){se(t,!0);let s=O("all"),i=re((()=>()=>{const e=_e.validationResults.violations||[],t={error:[],warning:[],info:[]};return e.forEach((e=>{const s=e.severity||"error";t[s]&&t[s].push(e)})),t})),a=re((()=>()=>"all"===T(s)?_e.validationResults.violations||[]:T(i)()[T(s)]||[]));function o(e){if(e.auto_fix_action){const t=e.auto_fix_action;"add_selection"===t.type?_e.updateSelection(t.option_id,t.quantity||1):"remove_selection"===t.type&&_e.updateSelection(t.option_id,0)}}var n=Kt(),l=U(n),r=U(l),c=N(U(r)),d=e=>{var t=$t();Y(e,t)};G(c,(e=>{_e.isValidating&&e(d)}));var v=N(r,2),u=e=>{var t=Ct();let s;var i=U(t),o=e=>{var t=Dt();Y(e,t)},n=e=>{var t=Lt(),s=N(ae(t));F((()=>Q(s,`${T(a).length??""} Issues`))),Y(e,t)};G(i,(e=>{_e.isValid?e(o):e(n,!1)})),F((e=>s=K(t,1,"validation-status svelte-hbmmex",null,s,e)),[()=>({valid:_e.isValid})]),Y(e,t)};G(v,(e=>{_e.isValidating||e(u)}));var h=N(l,2),p=e=>{var t=Yt(),n=ae(t),l=U(n);let r;l.__click=[qt,s];var c=U(l),d=N(l,2),v=e=>{var t=Ot();let a;t.__click=[Pt,s];var o=U(t);F(((e,s)=>{a=K(t,1,"filter-btn error svelte-hbmmex",null,a,e),Q(o,`Errors (${s??""})`)}),[()=>({active:"error"===T(s)}),()=>T(i)().error.length]),Y(e,t)};G(d,(e=>{T(i)().error.length>0&&e(v)}));var u=N(d,2),h=e=>{var t=Rt();let a;t.__click=[Tt,s];var o=U(t);F(((e,s)=>{a=K(t,1,"filter-btn warning svelte-hbmmex",null,a,e),Q(o,`Warnings (${s??""})`)}),[()=>({active:"warning"===T(s)}),()=>T(i)().warning.length]),Y(e,t)};G(u,(e=>{T(i)().warning.length>0&&e(h)}));var p=N(u,2),m=e=>{var t=Vt();let a;t.__click=[Et,s];var o=U(t);F(((e,s)=>{a=K(t,1,"filter-btn info svelte-hbmmex",null,a,e),Q(o,`Info (${s??""})`)}),[()=>({active:"info"===T(s)}),()=>T(i)().info.length]),Y(e,t)};G(p,(e=>{T(i)().info.length>0&&e(m)}));var g=N(n,2);H(g,21,(()=>T(a)),ee,((e,t)=>{var s=Qt(),i=U(s),a=U(i),n=U(a);me(n,(()=>function(e){switch(e){case"warning":return'<path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />';case"info":return'<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />';default:return'<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />'}}(T(t).severity||"error")),!0);var l=N(a,2),r=U(l),c=U(r),d=N(r,2),v=e=>{var s=At(),i=U(s);F((()=>Q(i,T(t).details))),Y(e,s)};G(d,(e=>{T(t).details&&e(v)}));var u=N(d,2),h=e=>{var s=Bt(),i=N(U(s));H(i,17,(()=>T(t).affected_options),ee,((e,s,i)=>{var a=Wt(),o=ae(a),n=U(o),l=N(o,2),r=e=>{var t=Z(",");Y(e,t)};G(l,(e=>{i<T(t).affected_options.length-1&&e(r)})),F((e=>Q(n,e)),[()=>_e.model?.option_groups.flatMap((e=>e.options)).find((e=>e.id===T(s)))?.name||T(s)]),Y(e,a)})),Y(e,s)};G(u,(e=>{T(t).affected_options&&T(t).affected_options.length>0&&e(h)}));var p=N(u,2),m=e=>{var s=Nt(),i=N(U(s)),a=U(i);F((()=>Q(a,T(t).rule_expression))),Y(e,s)};G(p,(e=>{T(t).rule_expression&&e(m)}));var g=N(i,2),f=e=>{var s=Ht(),i=N(U(s),2);H(i,21,(()=>T(t).suggestions),ee,((e,t)=>{var s=Ut(),i=U(s);F((()=>Q(i,T(t)))),Y(e,s)})),Y(e,s)};G(g,(e=>{T(t).suggestions&&T(t).suggestions.length>0&&e(f)}));var y=N(g,2),b=e=>{var s=Jt();s.__click=[Ft,o,t],Y(e,s)};G(y,(e=>{T(t).auto_fix_action&&e(b)})),F((e=>{K(s,1,`violation-item severity-${T(t).severity||"error"}`,"svelte-hbmmex"),ce(a,"fill",e),Q(c,T(t).message)}),[()=>function(e){switch(e){case"warning":return"var(--warning)";case"info":return"var(--primary)";default:return"var(--error)"}}(T(t).severity||"error")]),Y(e,s)})),F((e=>{r=K(l,1,"filter-btn svelte-hbmmex",null,r,e),Q(c,`All (${_e.validationResults.violations.length??""})`)}),[()=>({active:"all"===T(s)})]),Y(e,t)},m=(e,t)=>{var s=e=>{var t=Gt();Y(e,t)};G(e,(e=>{_e.isValid&&!_e.isValidating&&e(s)}),t)};G(h,(e=>{!_e.isValid&&T(a).length>0?e(p):e(m,!1)})),Y(e,n),oe()}(f,{});var y=N(f,2);const b=re((()=>!o()));!function(e,t){se(t,!0);let s=W(t,"detailed",3,!0),i=O(E(s())),a=O(!1),o=re((()=>()=>{if(!_e.pricingData)return null;const e=_e.pricingData,t=[];return _e.selectedOptions.forEach((e=>{t.push({type:"option",name:e.name,quantity:e.quantity,unitPrice:e.base_price,total:e.base_price*e.quantity,group:e.group_name})})),e.adjustments&&e.adjustments.forEach((e=>{t.push({type:"adjustment",name:e.description||e.type,reason:e.reason,amount:e.amount,percentage:e.percentage})})),t})),n=re((()=>()=>_e.pricingData?.adjustments?_e.pricingData.adjustments.filter((e=>"volume_discount"===e.type)).map((e=>({...e,saved:Math.abs(e.amount)}))):[])),l=re((()=>()=>_e.pricingData?.adjustments?_e.pricingData.adjustments.filter((e=>e.amount<0)).reduce(((e,t)=>e+Math.abs(t.amount)),0):0));var r=zt(),c=U(r),d=U(c),v=N(U(d)),u=e=>{var t=dt();Y(e,t)};G(v,(e=>{_e.isPricing&&e(u)}));var h=N(d,2),p=e=>{var t=ut();t.__click=[vt,i];var s=U(t);F((()=>Q(s,(T(i)?"Hide":"Show")+" Details"))),Y(e,t)};G(h,(e=>{s()&&T(o)&&T(o).length>0&&e(p)}));var m=N(c,2),g=e=>{var t=Mt(),s=ae(t),r=U(s),c=N(U(r),2),d=U(c),v=N(r,2),u=e=>{var t=ht(),s=N(U(t),2),i=U(s);F((e=>Q(i,`-${e??""}`)),[()=>De(T(l))]),Y(e,t)};G(v,(e=>{T(l)>0&&e(u)}));var h=N(v,2),p=N(U(h),2),m=U(p),g=N(h,2),f=e=>{var t=pt(),s=U(t);F((e=>Q(s,`${e??""} per unit`)),[()=>De(_e.pricingData.price_per_unit)]),Y(e,t)};G(g,(e=>{_e.pricingData.price_per_unit&&e(f)}));var y=N(s,2),b=e=>{var t=_t(),s=N(U(t),2);H(s,21,(()=>T(o)),ee,((e,t)=>{var s=wt(),i=U(s),a=U(i),o=U(a),n=N(o),l=e=>{var s=mt(),i=U(s);F((()=>Q(i,`×${T(t).quantity??""}`))),Y(e,s)};G(n,(e=>{T(t).quantity>1&&e(l)}));var r=N(a,2),c=e=>{var s=gt(),i=U(s);F((()=>Q(i,T(t).group))),Y(e,s)};G(r,(e=>{T(t).group&&e(c)}));var d=N(r,2),v=e=>{var s=ft(),i=U(s);F((()=>Q(i,T(t).reason))),Y(e,s)};G(d,(e=>{T(t).reason&&e(v)}));var u=N(i,2),h=U(u),p=e=>{var s=Z();F((e=>Q(s,e)),[()=>De(T(t).total)]),Y(e,s)},m=(e,s)=>{var i=e=>{var s=bt();let i;var a=U(s),o=N(a),n=e=>{var s=yt(),i=U(s);F((()=>Q(i,`(${T(t).percentage??""}%)`))),Y(e,s)};G(o,(e=>{T(t).percentage&&e(n)})),F(((e,o)=>{i=K(s,1,"svelte-jzost2",null,i,e),Q(a,`${T(t).amount<0?"-":"+"}${o??""} `)}),[()=>({discount:T(t).amount<0}),()=>De(Math.abs(T(t).amount))]),Y(e,s)};G(e,(e=>{"adjustment"===T(t).type&&e(i)}),s)};G(h,(e=>{"option"===T(t).type?e(p):e(m,!1)})),F((()=>{K(s,1,`breakdown-item type-${T(t).type??""}`,"svelte-jzost2"),Q(o,`${T(t).name??""} `)})),Y(e,s)})),Y(e,t)};G(y,(e=>{T(i)&&T(o)&&e(b)}));var w=N(y,2),_=e=>{var t=jt(),s=U(t);s.__click=[xt,a];var i=N(U(s),2),o=U(i),l=N(s,2),r=e=>{var t=It();H(t,21,(()=>T(n)),ee,((e,t)=>{var s=St(),i=U(s),a=U(i),o=U(a),n=N(a,2),l=U(n),r=N(i,2),c=U(r);F((e=>{Q(o,T(t).description),Q(l,`Tier: ${T(t).tier_name||"Volume"}`),Q(c,`Save ${e??""}`)}),[()=>De(T(t).saved)]),Y(e,s)})),Y(e,t)};G(l,(e=>{T(a)&&e(r)})),F((e=>Q(o,`Save ${e??""}`)),[()=>De(T(n).reduce(((e,t)=>e+t.saved),0))]),Y(e,t)};G(w,(e=>{T(n).length>0&&e(_)})),F(((e,t)=>{Q(d,e),Q(m,t)}),[()=>De(_e.basePrice),()=>De(_e.totalPrice)]),Y(e,t)},f=(e,t)=>{var s=e=>{var t=kt();Y(e,t)};G(e,(e=>{_e.isPricing||0!==_e.selectedOptions.length||e(s)}),t)};G(m,(e=>{_e.pricingData?e(g):e(f,!1)})),Y(e,r),oe()}(y,{get detailed(){return T(b)}});var w=N(y,2),_=e=>{!function(e,t){se(t,!0);var s=Zt(),i=N(U(s),2),a=U(i),o=U(a),n=U(o),l=N(a,2),r=U(l),c=U(r),d=N(i,2),v=U(d);v.__click=[Xt],N(v,2).__click=function(){const e={modelId:_e.modelId,modelName:_e.model?.name,selections:_e.selections,pricing:_e.pricingData,timestamp:(new Date).toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=`configuration-${Date.now()}.json`,i.click(),URL.revokeObjectURL(s)},F((e=>{Q(n,_e.selectedOptions.length),Q(c,e)}),[()=>De(_e.totalPrice)]),Y(e,s),oe()}(e,{})};G(w,(e=>{100===_e.completionPercentage&&e(_)}));var x=N(v,2),S=U(x);S.__click=[ns];var I=N(S,2),j=U(I),M=e=>{var t=ls(),s=U(t),i=e=>{var t=Z();F((e=>Q(t,`Last saved ${e??""}`)),[()=>new Date(_e.lastSaved).toLocaleTimeString()]),Y(e,t)},a=e=>{var t=Z("Unsaved changes");Y(e,t)};G(s,(e=>{_e.lastSaved?e(i):e(a,!1)})),Y(e,t)};G(j,(e=>{_e.isDirty&&e(M)}));var k=N(j,2);k.__click=[rs,c];var z=U(k);F((e=>{Q(n,_e.model.name),u=K(v,1,"configurator-body svelte-1m2ujmu",null,u,e),S.disabled=0===_e.currentStep,k.disabled=!_e.canProceedToNextStep&&_e.currentStep<3,Q(z,3===_e.currentStep?"Complete":"Next")}),[()=>({compact:o()})]),Y(e,t)},i=e=>{var t=ds();Y(e,t)};G(e,(e=>{_e.model?e(s):e(i,!1)}),t)};G(e,(e=>{_e.isLoading?e(s):e(i,!1)}),t)};G(i,(e=>{_e.error&&"NOT_FOUND"===_e.error.code?e(a):e(n,!1)})),Y(e,s)};!function(e,t){se(t,!0);let s=W(t,"error",3,null),i=W(t,"onRetry",3,null),a=W(t,"fallback",3,null),o=O(!1),n=O("");A((()=>{s()&&(R(o,!0),R(n,s().message||"An unexpected error occurred",!0))}));var l=ie(),r=ae(l),c=e=>{var t=ie(),s=ae(t),l=e=>{var t=ie(),s=ae(t);ne(s,a),Y(e,t)},r=e=>{var t=$e(),s=U(t),a=N(U(s),4),l=U(a),r=N(a,2),c=e=>{var t=ze();t.__click=[ke,o,n,i],Y(e,t)};G(r,(e=>{i()&&e(c)})),F((()=>Q(l,T(n)))),Y(e,t)};G(s,(e=>{a()?e(l):e(r,!1)})),Y(e,t)},d=e=>{var s=ie(),i=ae(s);ne(i,(()=>t.children??le)),Y(e,s)};G(r,(e=>{T(o)?e(c):e(d,!1)})),Y(e,l),oe()}(N(u,2),{get error(){return _e.error},onRetry:function(){_e.clearError(),_e.loadModel()},children:e,$$slots:{default:!0}})}he(d,(e=>s=e),(()=>s)),F((e=>{v=K(d,1,"cpq-configurator svelte-1m2ujmu",null,v,e),ce(d,"data-theme",i())}),[()=>({"embed-mode":o()})]),Y(e,d),oe()}te(["click"]);export{hs as C,_e as c};
//# sourceMappingURL=configurator-DaFjJXcl.js.map
