var Yt=u=>{throw TypeError(u)};var Nt=(u,t,i)=>t.has(u)||Yt("Cannot "+i);var C=(u,t,i)=>(Nt(u,t,"read from private field"),i?i.call(u):t.get(u)),it=(u,t,i)=>t.has(u)?Yt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(u):t.set(u,i),ft=(u,t,i,d)=>(Nt(u,t,"write to private field"),d?d.call(u,i):t.set(u,i),i),Ht=(u,t,i)=>(Nt(u,t,"access private method"),i);import{s as et,g as r,a as L,p as At,u as _t,e as de,d as bt,b as gt,i as le,f as c,c as dt,h as s,j as mt,k as m,l as e,m as a,t as p,n as at,o as $t,q as h,r as te,v as lt,w as rt,x as kt,y as xt,z as ee,A as nt,B as Kt,C as Ut,D as ce,E as ie,F as ve,$ as ue,G as ge,H as me}from"./vendor-C-hCcvj3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))d(l);new MutationObserver(l=>{for(const b of l)if(b.type==="childList")for(const y of b.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&d(y)}).observe(document,{childList:!0,subtree:!0});function i(l){const b={};return l.integrity&&(b.integrity=l.integrity),l.referrerPolicy&&(b.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?b.credentials="include":l.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function d(l){if(l.ep)return;l.ep=!0;const b=i(l);fetch(l.href,b)}})();const he="5";var Zt;typeof window<"u"&&((Zt=window.__svelte??(window.__svelte={})).v??(Zt.v=new Set)).add(he);class fe{constructor(t,i={}){this.baseUrl=t||"http://localhost:8080/api/v1",this.modelId=i.modelId,this.authToken=i.authToken,this.timeout=i.timeout||1e4}async request(t,i={}){const d=`${this.baseUrl}${t}`,l={method:"GET",headers:{"Content-Type":"application/json",...this.authToken&&{Authorization:`Bearer ${this.authToken}`},...i.headers},...i};l.body&&typeof l.body=="object"&&(l.body=JSON.stringify(l.body));try{const b=new AbortController,y=setTimeout(()=>b.abort(),this.timeout),T=await fetch(d,{...l,signal:b.signal});if(clearTimeout(y),!T.ok)throw new Error(`HTTP ${T.status}: ${T.statusText}`);return await T.json()}catch(b){throw b.name==="AbortError"?new Error("Request timeout"):b}}async getModel(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}`)}async getModelOptions(){if(!this.modelId)throw new Error("Model ID required");return this.request(`/models/${this.modelId}/options`)}async createConfiguration(t={}){return this.request("/configurations",{method:"POST",body:{model_id:this.modelId,selections:Object.entries(t).map(([i,d])=>({option_id:i,quantity:d}))}})}async updateConfiguration(t,i){return this.request(`/configurations/${t}`,{method:"PUT",body:{model_id:this.modelId,selections:Object.entries(i).map(([d,l])=>({option_id:d,quantity:l}))}})}async validateConfiguration(t){return this.request("/configurations/validate-selection",{method:"POST",body:{model_id:this.modelId,selections:Object.entries(t).map(([i,d])=>({option_id:i,quantity:d}))}})}async calculatePricing(t,i={}){return this.request("/pricing/calculate",{method:"POST",body:{model_id:this.modelId,selections:Object.entries(t).map(([d,l])=>({option_id:d,quantity:l})),context:i}})}async getVolumeTiers(){return this.request(`/pricing/volume-tiers/${this.modelId}`)}}var Ct,It,Mt,Pt,jt,zt,Ot,Dt,Lt,Rt,Tt,Vt,Et,Bt,yt,wt,ut,pt,qt,Qt;class pe{constructor(){it(this,qt);it(this,Ct,et(""));it(this,It,et(null));it(this,Mt,et(At({})));it(this,Pt,et(At([])));it(this,jt,et(null));it(this,zt,et(!1));it(this,Ot,et(!1));it(this,Dt,et(!1));it(this,Lt,et(null));it(this,Rt,et(0));it(this,Tt,et(null));it(this,Vt,et(null));it(this,Et,et(!1));it(this,Bt,et(null));it(this,yt,"");it(this,wt,"");it(this,ut,new Map);it(this,pt,!1);this.initialized=!1}get modelId(){return r(C(this,Ct))}set modelId(t){L(C(this,Ct),t,!0)}get model(){return r(C(this,It))}set model(t){L(C(this,It),t,!0)}get selections(){return r(C(this,Mt))}set selections(t){L(C(this,Mt),t,!0)}get validationResults(){return r(C(this,Pt))}set validationResults(t){L(C(this,Pt),t,!0)}get pricingData(){return r(C(this,jt))}set pricingData(t){L(C(this,jt),t,!0)}get isLoading(){return r(C(this,zt))}set isLoading(t){L(C(this,zt),t,!0)}get isValidating(){return r(C(this,Ot))}set isValidating(t){L(C(this,Ot),t,!0)}get isPricing(){return r(C(this,Dt))}set isPricing(t){L(C(this,Dt),t,!0)}get error(){return r(C(this,Lt))}set error(t){L(C(this,Lt),t,!0)}get currentStep(){return r(C(this,Rt))}set currentStep(t){L(C(this,Rt),t,!0)}get configurationId(){return r(C(this,Tt))}set configurationId(t){L(C(this,Tt),t,!0)}get lastSaved(){return r(C(this,Vt))}set lastSaved(t){L(C(this,Vt),t,!0)}get isDirty(){return r(C(this,Et))}set isDirty(t){L(C(this,Et),t,!0)}get api(){return r(C(this,Bt))}set api(t){L(C(this,Bt),t,!0)}initialize(){this.initialized||(this.initialized=!0,console.log("🔧 ConfigurationStore initialized"),_t(()=>{this.modelId&&!C(this,pt)&&(console.log("🔄 ModelId changed, initializing API client:",this.modelId),this.api=new fe("http://localhost:8080/api/v1",{modelId:this.modelId}),this.loadModel())}),_t(()=>{const t=JSON.stringify(this.selections);if(this.api&&Object.keys(this.selections).length>0&&t!==C(this,yt)){Ht(this,qt,Qt).call(this,"validation");const i=setTimeout(()=>{ft(this,yt,t),this.validateSelections()},300);C(this,ut).set("validation",i)}}),_t(()=>{const t=JSON.stringify(this.selections);if(this.api&&this.isValid&&Object.keys(this.selections).length>0&&t!==C(this,wt)){Ht(this,qt,Qt).call(this,"pricing");const i=setTimeout(()=>{ft(this,wt,t),this.calculatePricing()},500);C(this,ut).set("pricing",i)}}),_t(()=>{if(this.isDirty&&this.configurationId){const t=setInterval(()=>{this.saveConfiguration()},3e4);return()=>clearInterval(t)}}))}get isValid(){return this.validationResults.length===0}get totalPrice(){return this.pricingData?.total_price||0}get basePrice(){return this.pricingData?.base_price||0}get adjustments(){return this.pricingData?.adjustments||[]}get selectedOptions(){if(!this.model?.option_groups)return[];const t=[];for(const i of this.model.option_groups)for(const d of i.options)this.selections[d.id]>0&&t.push({...d,quantity:this.selections[d.id],group_name:i.name});return t}get completionPercentage(){if(!this.model?.option_groups)return 0;const t=this.model.option_groups.filter(d=>d.required);if(t.length===0)return 100;const i=t.filter(d=>d.options.some(l=>this.selections[l.id]>0));return Math.round(i.length/t.length*100)}get canProceedToNextStep(){return this.completionPercentage>=100&&this.isValid}setModelId(t){console.log("🆔 setModelId called:",{current:this.modelId,new:t}),this.modelId!==t&&(console.log("🔄 ModelId changing from",this.modelId,"to",t),this.modelId=t,this.reset())}async loadModel(){if(!this.api||C(this,pt)){console.log("⚠️ Skipping loadModel - no API or already loading");return}ft(this,pt,!0),this.isLoading=!0,this.error=null,console.log("📡 Loading model:",this.modelId);try{const t=await this.api.getModel();if(console.log("✅ Model loaded successfully:",t.name),this.model=t,Object.keys(this.selections).length===0){const i={};if(t.option_groups)for(const d of t.option_groups)for(const l of d.options)l.default_selected&&(i[l.id]=l.default_quantity||1);Object.keys(i).length>0&&(console.log("🎯 Setting initial selections:",i),this.selections=i,this.isDirty=!0)}}catch(t){this.error=t.message,console.error("❌ Failed to load model:",t)}finally{this.isLoading=!1,ft(this,pt,!1),console.log("🏁 loadModel completed")}}updateSelection(t,i){(this.selections[t]||0)!==i&&(i>0?this.selections[t]=i:delete this.selections[t],this.isDirty=!0,this.selections={...this.selections})}async validateSelections(){if(!(!this.api||this.isValidating)){this.isValidating=!0;try{const t=await this.api.validateConfiguration(this.selections);this.validationResults=t.violations||[]}catch(t){console.error("Validation failed:",t),this.validationResults=[{type:"error",message:"Failed to validate configuration. Please try again."}]}finally{this.isValidating=!1}}}async calculatePricing(){if(!(!this.api||this.isPricing)){this.isPricing=!0;try{const t=await this.api.calculatePricing(this.selections);this.pricingData=t}catch(t){console.error("Pricing calculation failed:",t),this.pricingData=null}finally{this.isPricing=!1}}}async saveConfiguration(){if(!this.api||!this.isDirty)return null;try{let t;return this.configurationId?t=await this.api.updateConfiguration(this.configurationId,{selections:this.selections,pricing:this.pricingData}):(t=await this.api.createConfiguration({model_id:this.modelId,selections:this.selections,pricing:this.pricingData}),this.configurationId=t.id),this.lastSaved=new Date,this.isDirty=!1,t}catch(t){throw console.error("Failed to save configuration:",t),t}}nextStep(){this.canProceedToNextStep&&(this.currentStep=Math.min(this.currentStep+1,3))}previousStep(){this.currentStep=Math.max(this.currentStep-1,0)}goToStep(t){this.currentStep=Math.max(0,Math.min(t,3))}reset(){console.log("🔄 Resetting store state");for(const t of C(this,ut).values())clearTimeout(t);C(this,ut).clear(),this.model=null,this.selections={},this.validationResults=[],this.pricingData=null,this.currentStep=0,this.configurationId=null,this.lastSaved=null,this.isDirty=!1,this.error=null,ft(this,yt,""),ft(this,wt,""),ft(this,pt,!1)}generateShareableUrl(){const t={modelId:this.modelId,selections:this.selections,timestamp:Date.now()},i=btoa(JSON.stringify(t));return`${window.location.origin}/configure/${this.modelId}?config=${i}`}loadFromShareableUrl(t){try{const i=JSON.parse(atob(t));i.modelId&&i.selections&&(this.setModelId(i.modelId),this.selections=i.selections,this.isDirty=!0)}catch(i){console.warn("Failed to load shared configuration:",i)}}exportConfiguration(){return{model_id:this.modelId,model_name:this.model?.name,selections:this.selectedOptions.map(t=>({option_id:t.id,option_name:t.name,quantity:this.selections[t.id],unit_price:t.base_price,total_price:t.base_price*this.selections[t.id]})),pricing:this.pricingData,validation:{is_valid:this.isValid,errors:this.validationResults},metadata:{created_at:new Date().toISOString(),completion_percentage:this.completionPercentage}}}}Ct=new WeakMap,It=new WeakMap,Mt=new WeakMap,Pt=new WeakMap,jt=new WeakMap,zt=new WeakMap,Ot=new WeakMap,Dt=new WeakMap,Lt=new WeakMap,Rt=new WeakMap,Tt=new WeakMap,Vt=new WeakMap,Et=new WeakMap,Bt=new WeakMap,yt=new WeakMap,wt=new WeakMap,ut=new WeakMap,pt=new WeakMap,qt=new WeakSet,Qt=function(t){const i=C(this,ut).get(t);i&&(clearTimeout(i),C(this,ut).delete(t))};const o=new pe;de();var _e=c('<div class="absolute inset-0 flex items-center" aria-hidden="true"><div></div></div>'),xe=(u,t)=>o.goToStep(r(t).id),be=te('<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),ye=c('<span class="text-sm font-medium"> </span>'),we=c('<li><!> <button><!></button> <div class="mt-2 text-center"><div> </div> <div> </div></div></li>'),ke=c('<nav aria-label="Progress"><ol class="flex items-center"></ol></nav>');function Se(u,t){gt(t,!1);const i=[{id:0,name:"Select",description:"Choose your product"},{id:1,name:"Configure",description:"Customize options"},{id:2,name:"Review",description:"Verify & price"},{id:3,name:"Complete",description:"Finalize order"}];le();var d=ke(),l=e(d);dt(l,5,()=>i,lt,(b,y,T)=>{var J=we(),N=e(J);{var x=_=>{var S=_e(),I=e(S);p(()=>at(I,1,`h-0.5 w-full ${o.currentStep>r(y).id?"bg-primary-600":"bg-gray-200"}`)),s(_,S)};m(N,_=>{T<i.length-1&&_(x)})}var w=a(N,2);w.__click=[xe,y];var B=e(w);{var V=_=>{var S=be();s(_,S)},j=_=>{var S=ye(),I=e(S);p(()=>h(I,r(y).id+1)),s(_,S)};m(B,_=>{o.currentStep>r(y).id?_(V):_(j,!1)})}var D=a(w,2),A=e(D),F=e(A),k=a(A,2),v=e(k);p(()=>{at(J,1,`relative ${T<i.length-1?"pr-8 sm:pr-20":""}`),at(w,1,`relative w-8 h-8 flex items-center justify-center rounded-full transition-colors
                 ${o.currentStep>r(y).id?"bg-primary-600 text-white":o.currentStep===r(y).id?"bg-primary-50 border-2 border-primary-600 text-primary-600":"bg-white border-2 border-gray-300 text-gray-500"}`),$t(w,"aria-current",o.currentStep===r(y).id?"step":void 0),at(A,1,`text-xs font-medium ${o.currentStep>=r(y).id?"text-gray-900":"text-gray-500"}`),h(F,r(y).name),at(k,1,`text-xs ${o.currentStep>=r(y).id?"text-gray-500":"text-gray-400"}`),h(v,r(y).description)}),s(b,J)}),s(u,d),mt()}bt(["click"]);var Ce=c('<p class="mt-4 text-sm text-gray-600"> </p>'),Ie=c('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" aria-live="polite"><div class="bg-white rounded-lg p-6 text-center"><div></div> <!></div></div>'),Me=c('<span class="ml-3 text-sm text-gray-600"> </span>'),Pe=c('<div class="flex items-center justify-center" aria-live="polite"><div></div> <!></div>');function Xt(u,t){let i=rt(t,"size",3,"md"),d=rt(t,"color",3,"primary"),l=rt(t,"message",3,""),b=rt(t,"overlay",3,!1);const y={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"},T={primary:"border-primary-600",gray:"border-gray-600",white:"border-white"};var J=kt(),N=xt(J);{var x=B=>{var V=Ie(),j=e(V),D=e(j),A=a(D,2);{var F=k=>{var v=Ce(),_=e(v);p(()=>h(_,l())),s(k,v)};m(A,k=>{l()&&k(F)})}p(()=>at(D,1,`animate-spin rounded-full ${y[i()]??""} border-2 border-gray-200 ${T[d()]??""} border-t-transparent mx-auto`)),s(B,V)},w=B=>{var V=Pe(),j=e(V),D=a(j,2);{var A=F=>{var k=Me(),v=e(k);p(()=>h(v,l())),s(F,k)};m(D,F=>{l()&&F(A)})}p(()=>at(j,1,`animate-spin rounded-full ${y[i()]??""} border-2 border-gray-200 ${T[d()]??""} border-t-transparent`)),s(B,V)};m(N,B=>{b()?B(x):B(w,!1)})}s(u,J)}function je(u,t,i,d){t()<i()&&d("retry")}function ze(u,t){t(!t())}var Oe=c('<div class="mt-3 text-xs text-red-600 bg-red-100 p-2 rounded border"><pre class="whitespace-pre-wrap"> </pre></div>'),De=c('<button type="button" class="text-sm bg-red-100 text-red-800 px-3 py-1 rounded hover:bg-red-200 transition-colors"> </button>'),Le=c('<div class="rounded-md bg-red-50 p-4 border border-red-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3 flex-1"><h3 class="text-sm font-medium text-red-800"> </h3> <div class="mt-2 text-sm text-red-700"><p> </p></div> <!> <div class="mt-4 flex space-x-3"><!> <button type="button" class="text-sm text-red-600 hover:text-red-500 underline"> </button></div></div></div></div>');function Re(u,t){gt(t,!0);let i=rt(t,"error",3,null),d=rt(t,"context",3,"Application"),l=rt(t,"showDetails",7,!1),b=rt(t,"retryable",3,!0),y=rt(t,"retryCount",3,0),T=rt(t,"maxRetries",3,3);const J=ee();let N=nt(()=>b()&&y()<T());var x=kt(),w=xt(x);{var B=V=>{var j=Le(),D=e(j),A=a(e(D),2),F=e(A),k=e(F),v=a(F,2),_=e(v),S=e(_),I=a(v,2);{var R=W=>{var f=Oe(),n=e(f),g=e(n);p(z=>h(g,z),[()=>i().stack||JSON.stringify(i(),null,2)]),s(W,f)};m(I,W=>{l()&&W(R)})}var H=a(I,2),Z=e(H);{var G=W=>{var f=De();f.__click=[je,y,T,J];var n=e(f);p(()=>h(n,`Retry ${y()>0?`(${y()}/${T()})`:""}`)),s(W,f)};m(Z,W=>{r(N)&&W(G)})}var K=a(Z,2);K.__click=[ze,l];var tt=e(K);p(()=>{h(k,`${d()??""} Error`),h(S,`Something went wrong. ${i().message||"An unexpected error occurred."}`),h(tt,`${l()?"Hide":"Show"} Details`)}),s(V,j)};m(w,V=>{i()&&V(B)})}s(u,x),mt()}bt(["click"]);function Te(u,t,i){t.group.max_selections&&r(i)>=t.group.max_selections||Kt(i)}function Ve(u,t){r(t)>0&&Kt(t,-1)}function Ee(u,t,i){r(t)?L(i,0):L(i,1)}var Be=c('<div class="absolute -top-2 -right-2 w-6 h-6 bg-primary-600 rounded-full flex items-center justify-center"><svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div>'),qe=c('<p class="mt-1 text-sm text-gray-500"> </p>'),Fe=c('<span class="text-xs text-gray-500"> </span>'),Ue=c('<div class="text-xs text-primary-600"> </div>'),Ae=c('<span class="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded"> </span>'),Ne=c('<span class="text-xs text-gray-500"> </span>'),He=c('<div class="mt-2 flex flex-wrap gap-1"><!> <!></div>'),Qe=c('<div class="w-2 h-2 bg-white rounded-full"></div>'),Je=c('<button type="button"><div><!></div> <span> </span></button>'),Ge=c('<div class="flex items-center space-x-3"><span class="text-sm text-gray-500">Quantity:</span> <div class="flex items-center space-x-2"><button type="button"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg></button> <span class="w-8 text-center text-sm font-medium"> </span> <button type="button"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></button></div></div>'),Ke=c('<div class="text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded"> </div>'),We=c('<div><!> <div class="p-4"><div class="flex items-start justify-between"><div class="flex-1"><h3 class="text-sm font-medium text-gray-900"> </h3> <!></div> <div class="ml-4 text-right"><div class="text-sm font-medium text-gray-900"> <!></div> <!></div></div> <!> <div class="mt-4 flex items-center justify-between"><!> <!></div></div></div>');function Ye(u,t){gt(t,!0);let i=et(At(o.selections[t.option.id]||0)),d=nt(()=>r(i)>0),l=nt(()=>r(i)*t.option.base_price);_t(()=>{o.updateSelection(t.option.id,r(i))}),_t(()=>{if(t.group.selection_type==="single"&&r(d))for(const f of t.group.options)f.id!==t.option.id&&o.selections[f.id]>0&&o.updateSelection(f.id,0)});var b=We(),y=e(b);{var T=f=>{var n=Be();s(f,n)};m(y,f=>{r(d)&&f(T)})}var J=a(y,2),N=e(J),x=e(N),w=e(x),B=e(w),V=a(w,2);{var j=f=>{var n=qe(),g=e(n);p(()=>h(g,t.option.description)),s(f,n)};m(V,f=>{t.option.description&&f(j)})}var D=a(x,2),A=e(D),F=e(A),k=a(F);{var v=f=>{var n=Fe(),g=e(n);p(()=>h(g,`/${t.option.price_unit??""}`)),s(f,n)};m(k,f=>{t.option.price_unit&&t.option.price_unit!=="each"&&f(v)})}var _=a(A,2);{var S=f=>{var n=Ue(),g=e(n);p(z=>h(g,`Total: $${z??""}`),[()=>r(l).toFixed(2)]),s(f,n)};m(_,f=>{r(l)>t.option.base_price&&f(S)})}var I=a(N,2);{var R=f=>{var n=He(),g=e(n);dt(g,17,()=>t.option.constraints.slice(0,3),lt,(O,M)=>{var q=Ae(),Q=e(q);p(()=>h(Q,r(M))),s(O,q)});var z=a(g,2);{var Y=O=>{var M=Ne(),q=e(M);p(()=>h(q,`+${t.option.constraints.length-3} more`)),s(O,M)};m(z,O=>{t.option.constraints.length>3&&O(Y)})}s(f,n)};m(I,f=>{t.option.constraints&&t.option.constraints.length>0&&f(R)})}var H=a(I,2),Z=e(H);{var G=f=>{var n=Je();n.__click=[Ee,d,i];var g=e(n),z=e(g);{var Y=q=>{var Q=Qe();s(q,Q)};m(z,q=>{r(d)&&q(Y)})}var O=a(g,2),M=e(O);p(()=>{at(n,1,`flex items-center space-x-2 text-sm font-medium
                 ${r(d)?"text-primary-600":"text-gray-500 hover:text-gray-700"}`),at(g,1,`w-4 h-4 rounded-full border-2 flex items-center justify-center
                      ${r(d)?"border-primary-600 bg-primary-600":"border-gray-300"}`),h(M,r(d)?"Selected":"Select")}),s(f,n)},K=f=>{var n=Ge(),g=a(e(n),2),z=e(g);z.__click=[Ve,i];var Y=a(z,2),O=e(Y),M=a(Y,2);M.__click=[Te,t,i],p(()=>{at(z,1,`w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center
                     ${r(i)>0?"hover:bg-gray-100 text-gray-700":"text-gray-400 cursor-not-allowed"}`),z.disabled=r(i)<=0,h(O,r(i)),at(M,1,`w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center
                     hover:bg-gray-100 text-gray-700
                     ${t.group.max_selections&&r(i)>=t.group.max_selections?"opacity-50 cursor-not-allowed":""}`),M.disabled=t.group.max_selections&&r(i)>=t.group.max_selections}),s(f,n)};m(Z,f=>{t.group.selection_type==="single"?f(G):f(K,!1)})}var tt=a(Z,2);{var W=f=>{var n=Ke(),g=e(n);p(()=>h(g,t.option.availability_status)),s(f,n)};m(tt,f=>{t.option.availability_status&&t.option.availability_status!=="available"&&f(W)})}p(f=>{at(b,1,`relative rounded-lg border-2 transition-all duration-200 
            ${r(d)?"border-primary-500 bg-primary-50":"border-gray-200 bg-white hover:border-gray-300"}`),h(B,t.option.name),h(F,`$${f??""} `)},[()=>t.option.base_price.toFixed(2)]),s(u,b),mt()}bt(["click"]);var Xe=c('<span class="ml-2 text-sm text-red-500">*</span>'),Ze=te('<svg class="ml-2 w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'),$e=c('<p class="mt-1 text-sm text-gray-500"> </p>'),ti=c('<div class="text-xs text-gray-400">Choose one</div>'),ei=c('<div class="text-xs text-gray-400"><!></div>'),ii=c("<div> </div>"),ri=c('<div class="mt-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2"></div>'),ai=c('<div class="text-xs bg-gray-50 p-2 rounded"> </div>'),oi=c('<div class="mt-4 text-sm text-gray-600"><details class="group"><summary class="cursor-pointer font-medium group-hover:text-gray-800"> </summary> <div class="mt-2 space-y-1"></div></details></div>'),si=c('<div class="mb-8"><div class="mb-4"><div class="flex items-center justify-between"><div><h2 class="text-lg font-medium text-gray-900 flex items-center"> <!> <!></h2> <!></div> <div class="text-right"><div class="text-sm text-gray-500"> <!> selected</div> <!></div></div> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div> <!></div>');function ni(u,t){gt(t,!0);let i=nt(()=>t.group.options.reduce((n,g)=>n+(o.selections[g.id]||0),0)),d=nt(()=>t.group.required),l=nt(()=>!r(d)||r(i)>=(t.group.min_selections||1)),b=nt(()=>o.validationResults.some(n=>n.group_id===t.group.id||t.group.options.some(g=>n.option_id===g.id)));var y=si(),T=e(y),J=e(T),N=e(J),x=e(N),w=e(x),B=a(w);{var V=n=>{var g=Xe();s(n,g)};m(B,n=>{r(d)&&n(V)})}var j=a(B,2);{var D=n=>{var g=Ze();s(n,g)};m(j,n=>{r(l)&&n(D)})}var A=a(x,2);{var F=n=>{var g=$e(),z=e(g);p(()=>h(z,t.group.description)),s(n,g)};m(A,n=>{t.group.description&&n(F)})}var k=a(N,2),v=e(k),_=e(v),S=a(_);{var I=n=>{var g=Ut();p(()=>h(g,`/ ${t.group.max_selections??""}`)),s(n,g)};m(S,n=>{t.group.max_selections&&n(I)})}var R=a(v,2);{var H=n=>{var g=ti();s(n,g)},Z=(n,g)=>{{var z=Y=>{var O=ei(),M=e(O);{var q=E=>{var P=Ut();p(()=>h(P,`${t.group.min_selections??""}-${t.group.max_selections??""} required`)),s(E,P)},Q=(E,P)=>{{var $=X=>{var ot=Ut();p(()=>h(ot,`Min ${t.group.min_selections??""} required`)),s(X,ot)},U=(X,ot)=>{{var ct=vt=>{var Ft=Ut();p(()=>h(Ft,`Max ${t.group.max_selections??""} allowed`)),s(vt,Ft)};m(X,vt=>{t.group.max_selections&&vt(ct)},ot)}};m(E,X=>{t.group.min_selections?X($):X(U,!1)},P)}};m(M,E=>{t.group.min_selections&&t.group.max_selections?E(q):E(Q,!1)})}s(Y,O)};m(n,Y=>{(t.group.min_selections||t.group.max_selections)&&Y(z)},g)}};m(R,n=>{t.group.selection_type==="single"?n(H):n(Z,!1)})}var G=a(J,2);{var K=n=>{var g=ri();dt(g,21,()=>o.validationResults,lt,(z,Y)=>{var O=kt(),M=xt(O);{var q=Q=>{var E=ii(),P=e(E);p(()=>h(P,r(Y).message)),s(Q,E)};m(M,Q=>{r(Y).group_id===t.group.id&&Q(q)})}s(z,O)}),s(n,g)};m(G,n=>{r(b)&&n(K)})}var tt=a(T,2);dt(tt,21,()=>t.group.options,lt,(n,g)=>{Ye(n,{get option(){return r(g)},get group(){return t.group}})});var W=a(tt,2);{var f=n=>{var g=oi(),z=e(g),Y=e(z),O=e(Y),M=a(Y,2);dt(M,21,()=>t.group.constraints,lt,(q,Q)=>{var E=ai(),P=e(E);p(()=>h(P,r(Q))),s(q,E)}),p(()=>h(O,`View Constraints (${t.group.constraints.length??""})`)),s(n,g)};m(W,n=>{t.group.constraints&&t.group.constraints.length>0&&n(f)})}p(()=>{h(w,`${t.group.name??""} `),h(_,`${r(i)??""} `)}),s(u,y),mt()}var di=c('<div class="text-sm text-gray-500 flex items-center"><div class="animate-spin w-4 h-4 border-2 border-gray-300 border-t-primary-600 rounded-full mr-2"></div> Calculating...</div>'),li=c('<div class="text-sm text-green-600">Updated</div>'),ci=c('<span class="text-green-600 ml-2"> </span>'),vi=c('<div class="text-sm text-gray-500"> <!></div>'),ui=c('<div class="text-gray-500 text-xs"> </div>'),gi=c('<div class="flex justify-between text-sm"><div class="flex-1"><div class="text-gray-900"> </div> <!></div> <div class="text-gray-900 font-medium"> </div></div>'),mi=c('<div class="flex justify-between text-sm"><span class="text-gray-600"> </span> <span> </span></div>'),hi=c('<div class="space-y-3"><h4 class="text-sm font-medium text-gray-700 border-b border-gray-200 pb-2">Price Breakdown</h4> <!> <div class="border-t border-gray-200 pt-3"><div class="flex justify-between text-sm"><span class="text-gray-500">Subtotal</span> <span class="text-gray-900"> </span></div></div> <!> <div class="border-t border-gray-200 pt-3"><div class="flex justify-between text-lg font-medium"><span class="text-gray-900">Total</span> <span class="text-gray-900"> </span></div></div></div>'),fi=()=>o.saveConfiguration(),pi=c('<div class="mt-6 space-y-3"><button type="button" class="w-full bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 transition-colors">Save Configuration</button> <button type="button" class="w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors">Export Configuration</button></div>'),_i=c('<div class="bg-white rounded-lg border border-gray-200 p-6"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-medium text-gray-900">Pricing</h3> <!></div> <div class="text-center mb-6"><div class="text-3xl font-bold text-gray-900"> </div> <!></div> <!> <!></div>');function Jt(u,t){gt(t,!0);let i=rt(t,"detailed",3,!1),d=rt(t,"showBreakdown",3,!0),l=nt(()=>o.adjustments.reduce((v,_)=>_.amount<0?v+Math.abs(_.amount):v,0));var b=_i(),y=e(b),T=a(e(y),2);{var J=v=>{var _=di();s(v,_)},N=(v,_)=>{{var S=I=>{var R=li();s(I,R)};m(v,I=>{o.pricingData&&I(S)},_)}};m(T,v=>{o.isPricing?v(J):v(N,!1)})}var x=a(y,2),w=e(x),B=e(w),V=a(w,2);{var j=v=>{var _=vi(),S=e(_),I=a(S);{var R=H=>{var Z=ci(),G=e(Z);p(K=>h(G,`Save $${K??""}`),[()=>r(l).toFixed(2)]),s(H,Z)};m(I,H=>{r(l)>0&&H(R)})}p(H=>h(S,`Base: $${H??""} `),[()=>o.basePrice.toFixed(2)]),s(v,_)};m(V,v=>{o.basePrice!==o.totalPrice&&v(j)})}var D=a(x,2);{var A=v=>{var _=hi(),S=a(e(_),2);dt(S,17,()=>o.selectedOptions,lt,(g,z)=>{var Y=gi(),O=e(Y),M=e(O),q=e(M),Q=a(M,2);{var E=U=>{var X=ui(),ot=e(X);p(ct=>h(ot,`$${ct??""} × ${o.selections[r(z).id]??""}`),[()=>r(z).base_price.toFixed(2)]),s(U,X)};m(Q,U=>{o.selections[r(z).id]>1&&U(E)})}var P=a(O,2),$=e(P);p(U=>{h(q,r(z).name),h($,`$${U??""}`)},[()=>(r(z).base_price*o.selections[r(z).id]).toFixed(2)]),s(g,Y)});var I=a(S,2),R=e(I),H=a(e(R),2),Z=e(H),G=a(I,2);{var K=g=>{var z=kt(),Y=xt(z);dt(Y,17,()=>o.adjustments,lt,(O,M)=>{var q=mi(),Q=e(q),E=e(Q),P=a(Q,2),$=e(P);p(U=>{h(E,r(M).rule_name||r(M).name),at(P,1,r(M).amount<0?"text-green-600":"text-red-600"),h($,`${r(M).amount<0?"-":"+"}$${U??""}`)},[()=>Math.abs(r(M).amount).toFixed(2)]),s(O,q)}),s(g,z)};m(G,g=>{o.adjustments.length>0&&g(K)})}var tt=a(G,2),W=e(tt),f=a(e(W),2),n=e(f);p((g,z)=>{h(Z,`$${g??""}`),h(n,`$${z??""}`)},[()=>o.basePrice.toFixed(2),()=>o.totalPrice.toFixed(2)]),s(v,_)};m(D,v=>{d()&&o.pricingData&&o.selectedOptions.length>0&&v(A)})}var F=a(D,2);{var k=v=>{var _=pi(),S=e(_);S.__click=[fi];var I=a(S,2);I.__click=()=>{const R=o.exportConfiguration(),H=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),Z=URL.createObjectURL(H),G=document.createElement("a");G.href=Z,G.download=`configuration-${Date.now()}.json`,G.click()},s(v,_)};m(F,v=>{i()&&v(k)})}p(v=>h(B,`$${v??""}`),[()=>o.totalPrice.toFixed(2)]),s(u,b),mt()}bt(["click"]);var xi=c("<li> </li>"),bi=c('<div class="rounded-md bg-red-50 p-4 border border-red-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-red-800"> </h3> <div class="mt-2 text-sm text-red-700"><ul class="space-y-1"></ul></div></div></div></div>'),yi=c("<li> </li>"),wi=c('<div class="rounded-md bg-yellow-50 p-4 border border-yellow-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-yellow-800"> </h3> <div class="mt-2 text-sm text-yellow-700"><ul class="space-y-1"></ul></div></div></div></div>'),ki=c("<li> </li>"),Si=c('<div class="rounded-md bg-blue-50 p-4 border border-blue-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-blue-800"> </h3> <div class="mt-2 text-sm text-blue-700"><ul class="space-y-1"></ul></div></div></div></div>'),Ci=c('<div class="space-y-3"><!> <!> <!></div>'),Ii=c('<div class="text-center py-4"><div class="animate-spin w-6 h-6 border-2 border-gray-300 border-t-primary-600 rounded-full mx-auto"></div> <p class="mt-2 text-sm text-gray-500">Validating configuration...</p></div>'),Mi=c('<div class="rounded-md bg-green-50 p-4 border border-green-200"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-green-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-green-800">Configuration Valid</h3> <div class="mt-2 text-sm text-green-700"><p>Your configuration meets all requirements and constraints.</p></div></div></div></div>');function Gt(u,t){gt(t,!0);let i=rt(t,"showSuggestions",3,!0),d=nt(()=>o.validationResults.filter(x=>x.severity==="error"||x.level==="error")),l=nt(()=>o.validationResults.filter(x=>x.severity==="warning"||x.level==="warning")),b=nt(()=>o.validationResults.filter(x=>x.severity==="info"||x.level==="suggestion"));var y=kt(),T=xt(y);{var J=x=>{var w=Ci(),B=e(w);{var V=k=>{var v=bi(),_=e(v),S=a(e(_),2),I=e(S),R=e(I),H=a(I,2),Z=e(H);dt(Z,21,()=>r(d),lt,(G,K)=>{var tt=xi(),W=e(tt);p(()=>h(W,`• ${r(K).message??""}`)),s(G,tt)}),p(()=>h(R,`Configuration Errors (${r(d).length??""})`)),s(k,v)};m(B,k=>{r(d).length>0&&k(V)})}var j=a(B,2);{var D=k=>{var v=wi(),_=e(v),S=a(e(_),2),I=e(S),R=e(I),H=a(I,2),Z=e(H);dt(Z,21,()=>r(l),lt,(G,K)=>{var tt=yi(),W=e(tt);p(()=>h(W,`• ${r(K).message??""}`)),s(G,tt)}),p(()=>h(R,`Warnings (${r(l).length??""})`)),s(k,v)};m(j,k=>{r(l).length>0&&k(D)})}var A=a(j,2);{var F=k=>{var v=Si(),_=e(v),S=a(e(_),2),I=e(S),R=e(I),H=a(I,2),Z=e(H);dt(Z,21,()=>r(b),lt,(G,K)=>{var tt=ki(),W=e(tt);p(()=>h(W,`• ${r(K).message??""}`)),s(G,tt)}),p(()=>h(R,`Suggestions (${r(b).length??""})`)),s(k,v)};m(A,k=>{i()&&r(b).length>0&&k(F)})}s(x,w)},N=(x,w)=>{{var B=j=>{var D=Ii();s(j,D)},V=j=>{var D=Mi();s(j,D)};m(x,j=>{o.isValidating?j(B):j(V,!1)},w)}};m(T,x=>{o.validationResults.length>0?x(J):x(N,!1)})}s(u,y),mt()}var Pi=c('<div class="text-sm text-gray-500 mt-1"> </div>'),ji=c('<div class="text-sm text-gray-600 mt-1"> </div>'),zi=c('<div class="text-sm text-gray-500"> </div>'),Oi=c('<div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"><div class="flex-1"><div class="font-medium text-gray-900"> </div> <!> <!></div> <div class="text-right"><div class="font-medium text-gray-900"> </div> <!></div></div>'),Di=c('<div class="bg-white rounded-lg border border-gray-200 p-6"><h3 class="text-lg font-medium text-gray-900 mb-4">Selected Options</h3> <div class="space-y-4"></div></div>'),Li=(u,t)=>L(t,!0),Ri=()=>o.saveConfiguration(),Ti=(u,t)=>L(t,!1),Vi=u=>u.stopPropagation(),Ei=(u,t,i)=>t(r(i)),Bi=(u,t)=>L(t,!1),qi=c('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-6 max-w-md w-full mx-4"><h3 class="text-lg font-medium text-gray-900 mb-4">Share Configuration</h3> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">Shareable Link</label> <div class="flex"><input type="text" readonly="" class="flex-1 px-3 py-2 border border-gray-300 rounded-l-md text-sm bg-gray-50"/> <button type="button" class="px-4 py-2 bg-primary-600 text-white rounded-r-md hover:bg-primary-700 transition-colors text-sm"> </button></div></div> <div class="flex justify-end space-x-3"><button type="button" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">Close</button></div></div></div></div>'),Fi=c('<div class="space-y-6"><div class="bg-white rounded-lg border border-gray-200 p-6"><h2 class="text-xl font-semibold text-gray-900 mb-4">Configuration Summary</h2> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-2xl font-bold text-primary-600"> </div> <div class="text-sm text-gray-500">Options Selected</div></div> <div class="text-center p-4 bg-gray-50 rounded-lg"><div class="text-2xl font-bold text-primary-600"> </div> <div class="text-sm text-gray-500">Complete</div></div> <div class="text-center p-4 bg-gray-50 rounded-lg"><div> </div> <div class="text-sm text-gray-500"> </div></div></div></div> <!> <div class="bg-white rounded-lg border border-gray-200 p-6"><h3 class="text-lg font-medium text-gray-900 mb-4">Validation Status</h3> <!></div> <!> <div class="bg-white rounded-lg border border-gray-200 p-6"><h3 class="text-lg font-medium text-gray-900 mb-4">Actions</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><button type="button" class="flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg> Share Configuration</button> <button type="button" class="flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Export Configuration</button> <button type="button" class="flex items-center justify-center px-4 py-2 bg-primary-600 text-white rounded-md text-sm font-medium hover:bg-primary-700 transition-colors"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path></svg> Save Configuration</button> <button type="button" class="flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700 transition-colors"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 3H3m4 10v6a1 1 0 001 1h6a1 1 0 001-1v-6m-8 0V9a1 1 0 011-1h6a1 1 0 011 1v4.01"></path></svg> Request Quote</button></div></div></div> <!>',1);function Ui(u,t){gt(t,!0);let i=nt(()=>o.generateShareableUrl()),d=et(!1),l=et(!1);async function b(O){try{await navigator.clipboard.writeText(O),L(l,!0),setTimeout(()=>L(l,!1),2e3)}catch(M){console.warn("Failed to copy to clipboard:",M)}}function y(){const O=o.exportConfiguration(),M=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),q=URL.createObjectURL(M),Q=document.createElement("a");Q.href=q,Q.download=`configuration-${Date.now()}.json`,Q.click(),URL.revokeObjectURL(q)}var T=Fi(),J=xt(T),N=e(J),x=a(e(N),2),w=e(x),B=e(w),V=e(B),j=a(w,2),D=e(j),A=e(D),F=a(j,2),k=e(F),v=e(k),_=a(k,2),S=e(_),I=a(N,2);{var R=O=>{var M=Di(),q=a(e(M),2);dt(q,21,()=>o.selectedOptions,lt,(Q,E)=>{var P=Oi(),$=e(P),U=e($),X=e(U),ot=a(U,2);{var ct=st=>{var ht=Pi(),St=e(ht);p(()=>h(St,r(E).description)),s(st,ht)};m(ot,st=>{r(E).description&&st(ct)})}var vt=a(ot,2);{var Ft=st=>{var ht=ji(),St=e(ht);p(()=>h(St,`Quantity: ${o.selections[r(E).id]??""}`)),s(st,ht)};m(vt,st=>{o.selections[r(E).id]>1&&st(Ft)})}var re=a($,2),Wt=e(re),ae=e(Wt),oe=a(Wt,2);{var se=st=>{var ht=zi(),St=e(ht);p(ne=>h(St,`$${ne??""} each`),[()=>r(E).base_price.toFixed(2)]),s(st,ht)};m(oe,st=>{o.selections[r(E).id]>1&&st(se)})}p(st=>{h(X,r(E).name),h(ae,`$${st??""}`)},[()=>(r(E).base_price*o.selections[r(E).id]).toFixed(2)]),s(Q,P)}),s(O,M)};m(I,O=>{o.selectedOptions.length>0&&O(R)})}var H=a(I,2),Z=a(e(H),2);Gt(Z,{});var G=a(H,2);Jt(G,{detailed:!0});var K=a(G,2),tt=a(e(K),2),W=e(tt);W.__click=[Li,d];var f=a(W,2);f.__click=y;var n=a(f,2);n.__click=[Ri];var g=a(n,2),z=a(J,2);{var Y=O=>{var M=qi();M.__click=[Ti,d];var q=e(M);q.__click=[Vi];var Q=a(e(q),2),E=e(Q),P=a(e(E),2),$=e(P),U=a($,2);U.__click=[Ei,b,i];var X=e(U),ot=a(E,2),ct=e(ot);ct.__click=[Bi,d],p(()=>{ce($,r(i)),h(X,r(l)?"Copied!":"Copy")}),s(O,M)};m(z,O=>{r(d)&&O(Y)})}p(()=>{h(V,o.selectedOptions.length),h(A,`${o.completionPercentage??""}%`),at(k,1,`text-2xl font-bold ${o.isValid?"text-green-600":"text-red-600"}`),h(v,o.isValid?"✓":"✗"),h(S,o.isValid?"Valid":"Has Errors"),n.disabled=!o.isValid,g.disabled=!o.isValid}),s(u,T),mt()}bt(["click"]);var Ai=c('<div class="space-y-6"><!> <!> <!></div>'),Ni=c('<div class="mt-4"><!> <!></div>'),Hi=()=>o.previousStep(),Qi=(u,t)=>o.canProceedToNextStep?t():o.nextStep(),Ji=c('<div class="mt-8 flex justify-between items-center"><button type="button">Previous</button> <button type="button"> </button></div>'),Gi=c("<!> <div><div><!></div> <!></div> <!>",1),Ki=c("<div><!></div>");function Wi(u,t){gt(t,!0);let i=rt(t,"theme",7,"light"),d=rt(t,"apiUrl",3,"http://localhost:8080/api/v1"),l=rt(t,"embedMode",3,!1),b=rt(t,"onComplete",3,null),y=rt(t,"onConfigurationChange",3,null);rt(t,"onError",3,null),ee();let T=et(0),J=At(l()),N=et(!1);typeof window<"u"&&(window.__API_BASE_URL__=d()),ie(()=>{console.log("🚀 ConfiguratorApp mounting with modelId:",t.modelId),o.initialize(),r(N)||(o.setModelId(t.modelId),L(N,!0)),document.documentElement.setAttribute("data-theme",i()),l()&&x()}),_t(()=>{r(N)&&t.modelId!==o.modelId&&(console.log("📝 ModelId prop changed, updating store:",t.modelId),o.setModelId(t.modelId))});function x(){window.addEventListener("message",w),window.parent!==window&&window.parent.postMessage({type:"cpq-configurator-ready",modelId:t.modelId},"*"),new ResizeObserver(()=>{window.parent!==window&&window.parent.postMessage({type:"cpq-configurator-resize",height:document.body.scrollHeight},"*")}).observe(document.body)}function w(v){const{type:_,data:S}=v.data;switch(_){case"cpq-set-theme":i(S.theme),document.documentElement.setAttribute("data-theme",i());break;case"cpq-load-configuration":S.config&&o.loadFromShareableUrl(S.config);break;case"cpq-get-configuration":window.parent.postMessage({type:"cpq-configuration-response",configuration:o.exportConfiguration()},"*");break}}function B(){Kt(T),o.loadModel()}function V(){y()&&y()(o.exportConfiguration()),l()&&window.parent!==window&&window.parent.postMessage({type:"cpq-configuration-change",configuration:o.exportConfiguration()},"*")}function j(){const v=o.exportConfiguration();b()&&b()(v),l()&&window.parent!==window&&window.parent.postMessage({type:"cpq-configuration-complete",configuration:v},"*")}_t(()=>{r(N)&&Object.keys(o.selections).length>0&&V()});var D=Ki(),A=e(D);{var F=v=>{Re(v,{get error(){return o.error},onRetry:B,get retryCount(){return r(T)}})},k=(v,_)=>{{var S=R=>{Xt(R,{message:"Loading product configuration...",size:"large"})},I=(R,H)=>{{var Z=K=>{var tt=Gi(),W=xt(tt);{var f=P=>{Se(P,{get currentStep(){return o.currentStep},totalSteps:4,get completionPercentage(){return o.completionPercentage}})};m(W,P=>{l()||P(f)})}var n=a(W,2),g=e(n),z=e(g);{var Y=P=>{var $=kt(),U=xt($);dt(U,17,()=>o.model.option_groups,lt,(X,ot)=>{ni(X,{get group(){return r(ot)}})}),s(P,$)};m(z,P=>{o.model.option_groups&&P(Y)})}var O=a(g,2);{var M=P=>{var $=Ai(),U=e($);Gt(U,{});var X=a(U,2);Jt(X,{detailed:!0});var ot=a(X,2);{var ct=vt=>{Ui(vt,{})};m(ot,vt=>{o.completionPercentage>=100&&vt(ct)})}s(P,$)},q=P=>{var $=Ni(),U=e($);Jt(U,{detailed:!1});var X=a(U,2);Gt(X,{}),s(P,$)};m(O,P=>{l()?P(q,!1):P(M)})}var Q=a(n,2);{var E=P=>{var $=Ji(),U=e($);U.__click=[Hi];var X=a(U,2);X.__click=[Qi,j];var ot=e(X);p(()=>{at(U,1,`flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors
                 ${o.currentStep===0?"opacity-50 cursor-not-allowed":""}`),U.disabled=o.currentStep===0,at(X,1,`flex items-center px-4 py-2 bg-primary-600 text-white rounded-md text-sm font-medium hover:bg-primary-700 transition-colors
                 ${!o.canProceedToNextStep&&o.currentStep===3?"opacity-50 cursor-not-allowed":""}`),X.disabled=!o.canProceedToNextStep&&o.currentStep===3,h(ot,o.currentStep===3?"Complete Configuration":"Next")}),s(P,$)};m(Q,P=>{l()||P(E)})}p(()=>{at(n,1,`grid grid-cols-1 ${l()?"lg:grid-cols-1":"lg:grid-cols-3"} gap-6`),at(g,1,`${l()?"col-span-1":"col-span-2"} space-y-6`)}),s(K,tt)},G=K=>{Xt(K,{message:"Initializing configurator...",size:"large"})};m(R,K=>{o.model?K(Z):K(G,!1)},H)}};m(v,R=>{o.isLoading?R(S):R(I,!1)},_)}};m(A,v=>{o.error?v(F):v(k,!1)})}p(()=>{at(D,1,`cpq-configurator ${l()?"cpq-embed-mode":""} ${J?"cpq-compact":""}`),$t(D,"data-theme",i())}),s(u,D),mt()}bt(["click"]);function Yi(u,t,i){L(t,"home"),L(i,""),window.history.pushState({},"","/")}var Xi=c('<meta name="description" content="Configure your perfect product"/>'),Zi=(u,t,i)=>u.key==="Enter"&&r(t).trim()&&i(r(t).trim()),$i=(u,t,i)=>t(r(i).trim()),tr=(u,t)=>t("sample-laptop"),er=(u,t)=>t("desktop-model-456"),ir=(u,t)=>t("server-model-789"),rr=c('<div class="max-w-4xl mx-auto p-4 py-16"><div class="text-center mb-12"><h1 class="text-4xl font-bold text-gray-900 mb-4">Product Configurator</h1> <p class="text-xl text-gray-600 mb-8">Configure your perfect product with our advanced configurator</p></div> <div class="max-w-md mx-auto"><div class="bg-white rounded-lg shadow-lg p-6"><h2 class="text-lg font-semibold text-gray-900 mb-4">Start Configuration</h2> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">Enter Model ID</label> <input type="text" placeholder="e.g., sample-laptop" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"/></div> <button type="button" class="w-full bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed">Start Configuration</button></div> <div class="mt-6 pt-6 border-t border-gray-200"><h3 class="text-sm font-medium text-gray-700 mb-3">Quick Start</h3> <div class="space-y-2"><button type="button" class="w-full text-left px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded transition-colors">📱 Laptop Configuration</button> <button type="button" class="w-full text-left px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded transition-colors">🖥️ Desktop Configuration</button> <button type="button" class="w-full text-left px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded transition-colors">🖥️ Server Configuration</button></div></div></div></div> <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8"><div class="text-center"><div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div> <h3 class="text-lg font-semibold text-gray-900 mb-2">Real-time Validation</h3> <p class="text-gray-600">Instant constraint checking with advanced MTBDD engine</p></div> <div class="text-center"><div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path></svg></div> <h3 class="text-lg font-semibold text-gray-900 mb-2">Live Pricing</h3> <p class="text-gray-600">Real-time price calculation with volume discounts</p></div> <div class="text-center"><div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></div> <h3 class="text-lg font-semibold text-gray-900 mb-2">Easy Sharing</h3> <p class="text-gray-600">Share configurations via URL, email, or export</p></div></div></div>'),ar=c('<div class="relative"><div class="absolute top-4 left-4 z-10"><button type="button" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 bg-white rounded-md shadow-sm border border-gray-300 hover:bg-gray-50 transition-colors"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> Back to Home</button></div> <!></div>'),or=c('<div class="min-h-screen bg-gray-50"><!></div>');function sr(u,t){gt(t,!0);let i=et("home"),d=et("");ie(()=>{const w=window.location.pathname.match(/^\/configure\/(.+)$/);return w&&(L(d,w[1],!0),L(i,"configure")),window.addEventListener("popstate",l),()=>window.removeEventListener("popstate",l)});function l(){const w=window.location.pathname.match(/^\/configure\/(.+)$/);w?(L(d,w[1],!0),L(i,"configure")):(L(i,"home"),L(d,""))}function b(x){L(d,x,!0),L(i,"configure"),window.history.pushState({},"",`/configure/${x}`)}var y=or();ve(x=>{var w=Xi();ue.title="CPQ Configurator",s(x,w)});var T=e(y);{var J=x=>{var w=rr(),B=a(e(w),2),V=e(B),j=a(e(V),2),D=e(j),A=a(e(D),2);A.__keydown=[Zi,d,b];var F=a(D,2);F.__click=[$i,b,d];var k=a(j,2),v=a(e(k),2),_=e(v);_.__click=[tr,b];var S=a(_,2);S.__click=[er,b];var I=a(S,2);I.__click=[ir,b],p(R=>F.disabled=R,[()=>!r(d).trim()]),ge(A,()=>r(d),R=>L(d,R)),s(x,w)},N=(x,w)=>{{var B=V=>{var j=ar(),D=e(j),A=e(D);A.__click=[Yi,i,d];var F=a(D,2);Wi(F,{get modelId(){return r(d)},embedMode:!1,onComplete:k=>{console.log("Configuration completed:",k)},onError:k=>{console.error("Configuration error:",k)}}),s(V,j)};m(x,V=>{r(i)==="configure"&&V(B)},w)}};m(T,x=>{r(i)==="home"?x(J):x(N,!1)})}s(u,y),mt()}bt(["keydown","click"]);me(sr,{target:document.getElementById("app")});
