var Mt=Object.defineProperty,St=Object.defineProperties;var Rt=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var lt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var ot=(s,t,r)=>t in s?Mt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,j=(s,t)=>{for(var r in t||(t={}))lt.call(t,r)&&ot(s,r,t[r]);if(Ie)for(var r of Ie(t))ct.call(t,r)&&ot(s,r,t[r]);return s},A=(s,t)=>St(s,Rt(t));var $=(s,t)=>{var r={};for(var n in s)lt.call(s,n)&&t.indexOf(n)<0&&(r[n]=s[n]);if(s!=null&&Ie)for(var n of Ie(s))t.indexOf(n)<0&&ct.call(s,n)&&(r[n]=s[n]);return r};var Ot=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var F=(s,t,r)=>new Promise((n,o)=>{var a=c=>{try{l(r.next(c))}catch(d){o(d)}},x=c=>{try{l(r.throw(c))}catch(d){o(d)}},l=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,x);l((r=r.apply(s,t)).next())});import{a as At,b as _t,g as $t,r as i,L as ee,u as st,N as Ft,O as Tt,c as _e,R as ce,d as It,B as Dt,e as Pt,f as pe}from"./react-vendor-Dpmj3Mlm.js";import{a as Bt,u as ne,b as Ce,c as z,Q as qt,d as Vt}from"./query-vendor-BiQ4PM1H.js";import{m as q,A as ae}from"./ui-vendor-DfZcDE7P.js";import{o as Ut,r as Gt,a as Ht,b as Wt,c as Zt,s as Xe,n as Qt,e as zt,u as Xt,C as dt}from"./form-vendor-Cz442zfz.js";var Ta=Ot(T=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const x of a.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&n(x)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();var Je={exports:{}},Se={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ut;function Jt(){if(ut)return Se;ut=1;var s=At(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function x(l,c,d){var g,w={},v=null,L=null;d!==void 0&&(v=""+d),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(L=c.ref);for(g in c)n.call(c,g)&&!a.hasOwnProperty(g)&&(w[g]=c[g]);if(l&&l.defaultProps)for(g in c=l.defaultProps,c)w[g]===void 0&&(w[g]=c[g]);return{$$typeof:t,type:l,key:v,ref:L,props:w,_owner:o.current}}return Se.Fragment=r,Se.jsx=x,Se.jsxs=x,Se}var mt;function Yt(){return mt||(mt=1,Je.exports=Jt()),Je.exports}var e=Yt(),De={},xt;function Kt(){if(xt)return De;xt=1;var s=_t();return De.createRoot=s.createRoot,De.hydrateRoot=s.hydrateRoot,De}var es=Kt();const ts=$t(es);let ss={data:""},rs=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||ss,as=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ns=/\/\*[^]*?\*\/|  +/g,ht=/\n+/g,ge=(s,t)=>{let r="",n="",o="";for(let a in s){let x=s[a];a[0]=="@"?a[1]=="i"?r=a+" "+x+";":n+=a[1]=="f"?ge(x,a):a+"{"+ge(x,a[1]=="k"?"":t)+"}":typeof x=="object"?n+=ge(x,t?t.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):x!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=ge.p?ge.p(a,x):a+":"+x+";")}return r+(t&&o?t+"{"+o+"}":o)+n},le={},gt=s=>{if(typeof s=="object"){let t="";for(let r in s)t+=r+gt(s[r]);return t}return s},is=(s,t,r,n,o)=>{let a=gt(s),x=le[a]||(le[a]=(c=>{let d=0,g=11;for(;d<c.length;)g=101*g+c.charCodeAt(d++)>>>0;return"go"+g})(a));if(!le[x]){let c=a!==s?s:(d=>{let g,w,v=[{}];for(;g=as.exec(d.replace(ns,""));)g[4]?v.shift():g[3]?(w=g[3].replace(ht," ").trim(),v.unshift(v[0][w]=v[0][w]||{})):v[0][g[1]]=g[2].replace(ht," ").trim();return v[0]})(s);le[x]=ge(o?{["@keyframes "+x]:c}:c,r?"":"."+x)}let l=r&&le.g?le.g:null;return r&&(le.g=le[x]),((c,d,g,w)=>{w?d.data=d.data.replace(w,c):d.data.indexOf(c)===-1&&(d.data=g?c+d.data:d.data+c)})(le[x],t,n,l),x},os=(s,t,r)=>s.reduce((n,o,a)=>{let x=t[a];if(x&&x.call){let l=x(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;x=c?"."+c:l&&typeof l=="object"?l.props?"":ge(l,""):l===!1?"":l}return n+o+(x==null?"":x)},"");function We(s){let t=this||{},r=s.call?s(t.p):s;return is(r.unshift?r.raw?os(r,[].slice.call(arguments,1),t.p):r.reduce((n,o)=>Object.assign(n,o&&o.call?o(t.p):o),{}):r,rs(t.target),t.g,t.o,t.k)}let ft,Ke,et;We.bind({g:1});let de=We.bind({k:1});function ls(s,t,r,n){ge.p=t,ft=s,Ke=r,et=n}function fe(s,t){let r=this||{};return function(){let n=arguments;function o(a,x){let l=Object.assign({},a),c=l.className||o.className;r.p=Object.assign({theme:Ke&&Ke()},l),r.o=/ *go\d+/.test(c),l.className=We.apply(r,n)+(c?" "+c:"");let d=s;return s[0]&&(d=l.as||s,delete l.as),et&&d[0]&&et(l),ft(d,l)}return o}}var cs=s=>typeof s=="function",Ue=(s,t)=>cs(s)?s(t):s,ds=(()=>{let s=0;return()=>(++s).toString()})(),yt=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");s=!t||t.matches}return s}})(),us=20,bt=(s,t)=>{switch(t.type){case 0:return A(j({},s),{toasts:[t.toast,...s.toasts].slice(0,us)});case 1:return A(j({},s),{toasts:s.toasts.map(a=>a.id===t.toast.id?j(j({},a),t.toast):a)});case 2:let{toast:r}=t;return bt(s,{type:s.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=t;return A(j({},s),{toasts:s.toasts.map(a=>a.id===n||n===void 0?A(j({},a),{dismissed:!0,visible:!1}):a)});case 4:return t.toastId===void 0?A(j({},s),{toasts:[]}):A(j({},s),{toasts:s.toasts.filter(a=>a.id!==t.toastId)});case 5:return A(j({},s),{pausedAt:t.time});case 6:let o=t.time-(s.pausedAt||0);return A(j({},s),{pausedAt:void 0,toasts:s.toasts.map(a=>A(j({},a),{pauseDuration:a.pauseDuration+o}))})}},Be=[],be={toasts:[],pausedAt:void 0},Ee=s=>{be=bt(be,s),Be.forEach(t=>{t(be)})},ms={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},xs=(s={})=>{let[t,r]=i.useState(be),n=i.useRef(be);i.useEffect(()=>(n.current!==be&&r(be),Be.push(r),()=>{let a=Be.indexOf(r);a>-1&&Be.splice(a,1)}),[]);let o=t.toasts.map(a=>{var x,l,c;return A(j(j(j({},s),s[a.type]),a),{removeDelay:a.removeDelay||((x=s[a.type])==null?void 0:x.removeDelay)||(s==null?void 0:s.removeDelay),duration:a.duration||((l=s[a.type])==null?void 0:l.duration)||(s==null?void 0:s.duration)||ms[a.type],style:j(j(j({},s.style),(c=s[a.type])==null?void 0:c.style),a.style)})});return A(j({},t),{toasts:o})},hs=(s,t="blank",r)=>A(j({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0},r),{id:(r==null?void 0:r.id)||ds()}),$e=s=>(t,r)=>{let n=hs(t,s,r);return Ee({type:2,toast:n}),n.id},E=(s,t)=>$e("blank")(s,t);E.error=$e("error");E.success=$e("success");E.loading=$e("loading");E.custom=$e("custom");E.dismiss=s=>{Ee({type:3,toastId:s})};E.remove=s=>Ee({type:4,toastId:s});E.promise=(s,t,r)=>{let n=E.loading(t.loading,j(j({},r),r==null?void 0:r.loading));return typeof s=="function"&&(s=s()),s.then(o=>{let a=t.success?Ue(t.success,o):void 0;return a?E.success(a,j(j({id:n},r),r==null?void 0:r.success)):E.dismiss(n),o}).catch(o=>{let a=t.error?Ue(t.error,o):void 0;a?E.error(a,j(j({id:n},r),r==null?void 0:r.error)):E.dismiss(n)}),s};var ps=(s,t)=>{Ee({type:1,toast:{id:s,height:t}})},gs=()=>{Ee({type:5,time:Date.now()})},Re=new Map,fs=1e3,ys=(s,t=fs)=>{if(Re.has(s))return;let r=setTimeout(()=>{Re.delete(s),Ee({type:4,toastId:s})},t);Re.set(s,r)},bs=s=>{let{toasts:t,pausedAt:r}=xs(s);i.useEffect(()=>{if(r)return;let a=Date.now(),x=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&E.dismiss(l.id);return}return setTimeout(()=>E.dismiss(l.id),c)});return()=>{x.forEach(l=>l&&clearTimeout(l))}},[t,r]);let n=i.useCallback(()=>{r&&Ee({type:6,time:Date.now()})},[r]),o=i.useCallback((a,x)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:d}=x||{},g=t.filter(L=>(L.position||d)===(a.position||d)&&L.height),w=g.findIndex(L=>L.id===a.id),v=g.filter((L,S)=>S<w&&L.visible).length;return g.filter(L=>L.visible).slice(...l?[v+1]:[0,v]).reduce((L,S)=>L+(S.height||0)+c,0)},[t]);return i.useEffect(()=>{t.forEach(a=>{if(a.dismissed)ys(a.id,a.removeDelay);else{let x=Re.get(a.id);x&&(clearTimeout(x),Re.delete(a.id))}})},[t]),{toasts:t,handlers:{updateHeight:ps,startPause:gs,endPause:n,calculateOffset:o}}},vs=de`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,js=de`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ws=de`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ns=fe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vs} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${js} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ws} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Es=de`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ks=fe("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${Es} 1s linear infinite;
`,Cs=de`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ls=de`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ms=fe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Cs} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ls} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ss=fe("div")`
  position: absolute;
`,Rs=fe("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Os=de`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,As=fe("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Os} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,_s=({toast:s})=>{let{icon:t,type:r,iconTheme:n}=s;return t!==void 0?typeof t=="string"?i.createElement(As,null,t):t:r==="blank"?null:i.createElement(Rs,null,i.createElement(ks,j({},n)),r!=="loading"&&i.createElement(Ss,null,r==="error"?i.createElement(Ns,j({},n)):i.createElement(Ms,j({},n))))},$s=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Fs=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,Ts="0%{opacity:0;} 100%{opacity:1;}",Is="0%{opacity:1;} 100%{opacity:0;}",Ds=fe("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ps=fe("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Bs=(s,t)=>{let r=s.includes("top")?1:-1,[n,o]=yt()?[Ts,Is]:[$s(r),Fs(r)];return{animation:t?`${de(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${de(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},qs=i.memo(({toast:s,position:t,style:r,children:n})=>{let o=s.height?Bs(s.position||t||"top-center",s.visible):{opacity:0},a=i.createElement(_s,{toast:s}),x=i.createElement(Ps,j({},s.ariaProps),Ue(s.message,s));return i.createElement(Ds,{className:s.className,style:j(j(j({},o),r),s.style)},typeof n=="function"?n({icon:a,message:x}):i.createElement(i.Fragment,null,a,x))});ls(i.createElement);var Vs=({id:s,className:t,style:r,onHeightUpdate:n,children:o})=>{let a=i.useCallback(x=>{if(x){let l=()=>{let c=x.getBoundingClientRect().height;n(s,c)};l(),new MutationObserver(l).observe(x,{subtree:!0,childList:!0,characterData:!0})}},[s,n]);return i.createElement("div",{ref:a,className:t,style:r},o)},Us=(s,t)=>{let r=s.includes("top"),n=r?{top:0}:{bottom:0},o=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return j(j({left:0,right:0,display:"flex",position:"absolute",transition:yt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`},n),o)},Gs=We`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Pe=16,Hs=({reverseOrder:s,position:t="top-center",toastOptions:r,gutter:n,children:o,containerStyle:a,containerClassName:x})=>{let{toasts:l,handlers:c}=bs(r);return i.createElement("div",{id:"_rht_toaster",style:j({position:"fixed",zIndex:9999,top:Pe,left:Pe,right:Pe,bottom:Pe,pointerEvents:"none"},a),className:x,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let g=d.position||t,w=c.calculateOffset(d,{reverseOrder:s,gutter:n,defaultPosition:t}),v=Us(g,w);return i.createElement(Vs,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?Gs:"",style:v},d.type==="custom"?Ue(d.message,d):o?o(d):i.createElement(qs,{toast:d,position:g}))}))};const J=(s,t=null)=>{if(!s)return t?[]:null;if(s.success&&s.data){const r=s.data;return t&&r[t]?r[t]:r}if(s.data){const r=s.data;return t&&r[t]?r[t]:t?r[t]||[]:r}return t&&s[t]?s[t]:t?[]:s},Oe={options:s=>J(s,"options"),groups:s=>J(s,"groups"),rules:s=>J(s,"rules"),pricingRules:s=>J(s,"pricing_rules")||J(s,"price_rules"),model:s=>J(s),configurations:s=>J(s,"configurations"),statistics:s=>J(s,"statistics")},Ws="http://localhost:8080",D=Bt.create({baseURL:`${Ws}/api/v1`,timeout:3e4,headers:{"Content-Type":"application/json"}}),Zs={trackApiCall:(s,t)=>{t>1e3&&console.warn(`Slow API call: ${s} took ${t}ms`);const r=JSON.parse(localStorage.getItem("api_performance")||"[]");r.push({url:s,duration:t,timestamp:Date.now()}),r.length>100&&r.splice(0,r.length-100),localStorage.setItem("api_performance",JSON.stringify(r))}};D.interceptors.request.use(s=>{const t=localStorage.getItem("auth_token");return t&&(s.headers.Authorization=`Bearer ${t}`),s.headers["X-Request-ID"]=`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s.metadata={startTime:Date.now()},s},s=>Promise.reject(s));D.interceptors.response.use(s=>{const t=Date.now()-s.config.metadata.startTime;return Zs.trackApiCall(s.config.url,t),s},s=>F(null,null,function*(){var o,a,x;const{response:t,request:r,config:n}=s;if(t){const{status:l,data:c}=t;if(l===401){localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.pathname.includes("/login")||(E.error("Session expired. Please login again."),window.location.href="/login");const g=new Error("Authentication required");return g.status=l,g.code="UNAUTHORIZED",Promise.reject(g)}switch(l){case 400:break;case 403:E.error("Access denied");break;case 404:E.error("Resource not found");break;case 422:break;case 429:E.error("Too many requests. Please try again later.");break;case 500:E.error("Server error. Please try again later.");break;default:E.error(`Request failed with status ${l}`)}const d=new Error(((o=c==null?void 0:c.error)==null?void 0:o.message)||(c==null?void 0:c.message)||`HTTP ${l} Error`);return d.status=l,d.code=((a=c==null?void 0:c.error)==null?void 0:a.code)||"API_ERROR",d.details=((x=c==null?void 0:c.error)==null?void 0:x.details)||{},d.validationErrors=(c==null?void 0:c.validationErrors)||[],Promise.reject(d)}else if(r){E.error("Network error. Please check your connection.");const l=new Error("Network error - no response received");return l.code="NETWORK_ERROR",Promise.reject(l)}else{const l=new Error("Request configuration error");return l.code="CONFIG_ERROR",Promise.reject(l)}}));const Q={getModels:()=>F(null,null,function*(){return(yield D.get("/models")).data}),getModel:s=>F(null,null,function*(){return(yield D.get(`/models/${s}`)).data}),createModel:s=>F(null,null,function*(){const t={name:s.name,description:s.description||"",version:s.version||"1.0.0",groups:[],options:[],rules:[],price_rules:[],is_active:!0};return(yield D.post("/models",t)).data}),updateModel:(s,t)=>F(null,null,function*(){const r={name:t.name,description:t.description||"",version:t.version||"1.0.0"};return(yield D.put(`/models/${s}`,r)).data}),deleteModel:s=>F(null,null,function*(){return(yield D.delete(`/models/${s}`)).data}),cloneModel:s=>F(null,null,function*(){return(yield D.post(`/models/${s}/clone`)).data}),getModelGroups:s=>F(null,null,function*(){const t=yield D.get(`/models/${s}/groups`);return Oe.groups(t.data)}),getModelGroupsWithOptions:s=>F(null,null,function*(){const t=yield D.get(`/models/${s}/groups?include=options`);return Oe.groups(t.data)}),createGroup:(s,t)=>F(null,null,function*(){const r=yield D.post(`/models/${s}/groups`,t);return J(r.data)}),updateGroup:(s,t,r)=>F(null,null,function*(){const n=yield D.put(`/models/${s}/groups/${t}`,r);return J(n.data)}),deleteGroup:(s,t)=>F(null,null,function*(){const r=yield D.delete(`/models/${s}/groups/${t}`);return J(r.data)}),getModelOptions:s=>F(null,null,function*(){const t=yield D.get(`/models/${s}/options`);return Oe.options(t.data)}),createOption:(s,t)=>F(null,null,function*(){const r=yield D.post(`/models/${s}/options`,t);return J(r.data)}),updateOption:(s,t,r)=>F(null,null,function*(){const n=yield D.put(`/models/${s}/options/${t}`,r);return J(n.data)}),deleteOption:(s,t)=>F(null,null,function*(){const r=yield D.delete(`/models/${s}/options/${t}`);return J(r.data)}),getConfigurations:(...t)=>F(null,[...t],function*(s={}){return(yield D.get("/configurations",{params:s})).data}),getConfiguration:s=>F(null,null,function*(){return(yield D.get(`/configurations/${s}`)).data}),createConfiguration:s=>F(null,null,function*(){return(yield D.post("/configurations",s)).data}),updateConfiguration:(s,t)=>F(null,null,function*(){return(yield D.put(`/configurations/${s}`,t)).data}),deleteConfiguration:s=>F(null,null,function*(){return(yield D.delete(`/configurations/${s}`)).data}),validateConfiguration:(s,t)=>F(null,null,function*(){return(yield D.post(`/configurations/${s}/validate`,{modelId:t})).data}),priceConfiguration:(s,t)=>F(null,null,function*(){return(yield D.post(`/configurations/${s}/price`,{modelId:t})).data}),validateSelections:(s,t)=>F(null,null,function*(){return(yield D.post(`/models/${s}/validate`,{selections:t})).data}),calculatePrice:(n,o,...a)=>F(null,[n,o,...a],function*(s,t,r={}){return(yield D.post(`/models/${s}/price`,{selections:t,context:r})).data})},ie={getModelStatistics:s=>F(null,null,function*(){return(yield D.get(`/models/${s}/statistics`)).data}),detectConflicts:s=>F(null,null,function*(){return(yield D.post(`/models/${s}/conflicts`)).data}),analyzeImpact:(s,t)=>F(null,null,function*(){return(yield D.post(`/models/${s}/impact`,t)).data}),getModelQuality:s=>F(null,null,function*(){return(yield D.post(`/models/${s}/quality`)).data}),getOptimizationRecommendations:s=>F(null,null,function*(){return(yield D.post(`/models/${s}/optimize`)).data}),getModelRules:s=>F(null,null,function*(){const t=yield D.get(`/models/${s}/rules`);return Oe.rules(t.data)}),addRule:(s,t)=>F(null,null,function*(){const r=yield D.post(`/models/${s}/rules`,t);return J(r.data)}),updateRule:(s,t,r)=>F(null,null,function*(){var n;try{const o=yield D.put(`/models/${s}/rules/${t}`,r);return J(o.data)}catch(o){throw console.error("Error updating rule:",((n=o.response)==null?void 0:n.data)||o),o}}),deleteRule:(s,t)=>F(null,null,function*(){const r=yield D.delete(`/models/${s}/rules/${t}`);return J(r.data)}),validateRule:(s,t)=>F(null,null,function*(){return(yield D.post(`/models/${s}/rules/validate`,t)).data}),getPricingRules:s=>F(null,null,function*(){const t=yield D.get(`/models/${s}/pricing-rules`);return Oe.pricingRules(t.data)}),createPricingRule:(s,t)=>F(null,null,function*(){const r=yield D.post(`/models/${s}/pricing-rules`,t);return J(r.data)}),updatePricingRule:(s,t,r)=>F(null,null,function*(){const n=yield D.put(`/models/${s}/pricing-rules/${t}`,r);return J(n.data)}),deletePricingRule:(s,t)=>F(null,null,function*(){const r=yield D.delete(`/models/${s}/pricing-rules/${t}`);return J(r.data)}),updateRulePriorities:(s,t)=>F(null,null,function*(){return(yield D.put(`/models/${s}/rules/priorities`,{priorities:t})).data})},vt=i.createContext({}),Ze=()=>{const s=i.useContext(vt);if(!s)throw new Error("useAuth must be used within AuthProvider");return s},Qs=({children:s})=>{const[t,r]=i.useState(null),[n,o]=i.useState(!1),[a,x]=i.useState(!0);i.useEffect(()=>{F(null,null,function*(){try{const w=localStorage.getItem("auth_token"),v=localStorage.getItem("user_data");if(w&&v)try{const L=JSON.parse(v);r(L),o(!0)}catch(L){localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),r(null),o(!1)}}catch(w){localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),r(null),o(!1)}finally{x(!1)}})},[]);const d={user:t,isAuthenticated:n,isLoading:a,login:(g,w)=>F(null,null,function*(){try{if(x(!0),!g||!w)return{success:!1,error:"Please enter both email and password"};const v={id:`user_${Date.now()}`,email:g,username:g.split("@")[0],role:g.includes("admin")?"admin":"user",name:g.split("@")[0].charAt(0).toUpperCase()+g.split("@")[0].slice(1),login_time:new Date().toISOString()},L=btoa(JSON.stringify({user_id:v.id,email:v.email,role:v.role,exp:Date.now()+24*60*60*1e3}));return localStorage.setItem("auth_token",L),localStorage.setItem("user_data",JSON.stringify(v)),r(v),o(!0),{success:!0,user:v}}catch(v){return{success:!1,error:"Login failed due to an error. Please try again."}}finally{x(!1)}}),logout:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),r(null),o(!1),window.location.href="/login"}};return e.jsx(vt.Provider,{value:d,children:s})};function zs(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))}const Xs=i.forwardRef(zs);function Js(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const jt=i.forwardRef(Js);function Ys(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Ks=i.forwardRef(Ys);function er(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const Ye=i.forwardRef(er);function tr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const sr=i.forwardRef(tr);function rr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"}))}const ar=i.forwardRef(rr);function nr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const ir=i.forwardRef(nr);function or(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ae=i.forwardRef(or);function lr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const rt=i.forwardRef(lr);function cr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const wt=i.forwardRef(cr);function dr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const at=i.forwardRef(dr);function ur(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const mr=i.forwardRef(ur);function xr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const tt=i.forwardRef(xr);function hr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const pr=i.forwardRef(hr);function gr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const Le=i.forwardRef(gr);function fr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const ve=i.forwardRef(fr);function yr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ge=i.forwardRef(yr);function br(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const vr=i.forwardRef(br);function jr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Nt=i.forwardRef(jr);function wr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"}))}const Nr=i.forwardRef(wr);function Er(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const Et=i.forwardRef(Er);function kr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Y=i.forwardRef(kr);function Cr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const Ne=i.forwardRef(Cr);function Lr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Fe=i.forwardRef(Lr);function Mr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const Sr=i.forwardRef(Mr);function Rr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Or=i.forwardRef(Rr);function Ar(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const Qe=i.forwardRef(Ar);function _r(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const qe=i.forwardRef(_r);function $r(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Fr=i.forwardRef($r);function Tr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Te=i.forwardRef(Tr);function Ir(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const oe=i.forwardRef(Ir);function Dr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"}))}const je=i.forwardRef(Dr);function Pr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"}))}const pt=i.forwardRef(Pr);function Br(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const qr=i.forwardRef(Br);function Vr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const kt=i.forwardRef(Vr);function Ur(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Me=i.forwardRef(Ur);function Gr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Hr=i.forwardRef(Gr);function Wr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Ve=i.forwardRef(Wr);function Zr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const Qr=i.forwardRef(Zr);function zr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.745 3A23.933 23.933 0 0 0 3 12c0 3.183.62 6.22 1.745 9M19.5 3c.967 2.78 1.5 5.817 1.5 9s-.533 6.22-1.5 9M8.25 8.885l1.444-.89a.75.75 0 0 1 1.105.402l2.402 7.206a.75.75 0 0 0 1.104.401l1.445-.889m-8.25.75.213.09a1.687 1.687 0 0 0 2.062-.617l4.45-6.676a1.688 1.688 0 0 1 2.062-.618l.213.09"}))}const Xr=i.forwardRef(zr);function Jr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"}))}const we=i.forwardRef(Jr);function Yr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ct=i.forwardRef(Yr);function Kr(o,n){var a=o,{title:s,titleId:t}=a,r=$(a,["title","titleId"]);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),s?i.createElement("title",{id:t},s):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const He=i.forwardRef(Kr),ea=()=>{const{user:s,logout:t}=Ze();return e.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsx("div",{className:"flex",children:e.jsx("div",{className:"flex-shrink-0 flex items-center",children:e.jsxs(ee,{to:"/dashboard",className:"flex items-center",children:[e.jsx(Le,{className:"h-8 w-8 text-blue-600"}),e.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"CPQ Admin"})]})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(Hr,{className:"h-5 w-5 text-gray-400 mr-2"}),(s==null?void 0:s.username)||"Admin"]}),e.jsxs("button",{onClick:t,className:"flex items-center text-sm text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md transition-colors",children:[e.jsx(Xs,{className:"h-5 w-5 mr-1"}),"Logout"]})]})]})})})},ta=()=>{const{modelId:s}=st(),t=[{name:"Dashboard",href:"/dashboard",icon:Or,description:"System overview"},{name:"Models",href:"/models",icon:ve,description:"Manage product models"}];return s&&t.push({name:"Model Builder",href:`/models/${s}`,icon:pr,description:"Edit model configuration"},{name:"Configurations",href:`/models/${s}/configurations`,icon:je,description:"View user configurations"}),e.jsx("div",{className:"w-64 bg-gray-50 border-r border-gray-200 min-h-screen",children:e.jsx("nav",{className:"p-4 space-y-2",children:t.map(r=>e.jsxs(Ft,{to:r.href,className:({isActive:n})=>`group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${n?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(r.icon,{className:"mr-3 h-5 w-5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{children:r.name}),r.description&&e.jsx("div",{className:"text-xs text-gray-500",children:r.description})]})]},r.name))})})},sa=()=>e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(ea,{}),e.jsxs("div",{className:"flex",children:[e.jsx(ta,{}),e.jsx("main",{className:"flex-1 p-6",children:e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(Tt,{})})})]})]}),te=({size:s="medium",message:t="Loading...",color:r="blue",showMessage:n=!0})=>{const o={small:"h-4 w-4",medium:"h-8 w-8",large:"h-12 w-12",xl:"h-16 w-16"},a={blue:"border-blue-600",gray:"border-gray-600",white:"border-white",green:"border-green-600",red:"border-red-600"},x={small:"text-sm",medium:"text-base",large:"text-lg",xl:"text-xl"};return e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(q.div,{className:`
          ${o[s]} 
          border-2 
          ${a[r]} 
          border-t-transparent 
          rounded-full
        `,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),n&&t&&e.jsx(q.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:`
            mt-3 
            ${x[s]} 
            text-gray-600 
            font-medium
          `,children:t})]})},ra=()=>{const{login:s,isAuthenticated:t,isLoading:r}=Ze(),[n,o]=i.useState({email:"",password:""}),[a,x]=i.useState(!1),[l,c]=i.useState(!1);if(t)return e.jsx(_e,{to:"/dashboard",replace:!0});if(r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx(te,{size:"large",message:"Checking authentication..."})});const d=w=>F(null,null,function*(){if(w.preventDefault(),!n.email||!n.password){E.error("Please enter both email and password");return}c(!0);try{const v=yield s(n.email,n.password);v.success?E.success("Login successful!"):E.error(v.error||"Login failed")}catch(v){E.error(v.message||"Login failed")}finally{c(!1)}}),g=w=>{const{name:v,value:L}=w.target;o(S=>A(j({},S),{[v]:L}))};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(q.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},className:"mx-auto h-16 w-16 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"CPQ Admin Portal"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to manage your product configurations"})]}),e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(Y,{className:"h-5 w-5 text-blue-400 mt-0.5"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Demo Credentials"}),e.jsxs("div",{className:"mt-1 text-sm text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," demo@cpq.local"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Password:"})," demo123"]})]})]})]})}),e.jsxs(q.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-8 space-y-6",onSubmit:d,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:n.email,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email",disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{id:"password",name:"password",type:a?"text":"password",required:!0,value:n.password,onChange:g,className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password",disabled:l}),e.jsx("button",{type:"button",onClick:()=>x(!a),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:l,children:a?e.jsx(Ne,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Fe,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{size:"small",color:"white",showMessage:!1}),e.jsx("span",{className:"ml-2",children:"Signing in..."})]}):"Sign in"})})]}),e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"CPQ Enterprise Configuration System v1.0"})})]})})},aa=()=>{var v,L,S;const{user:s}=Ze(),{data:t,isLoading:r,error:n}=ne({queryKey:["models"],queryFn:Q.getModels,staleTime:5*60*1e3,retry:1}),{data:o,isLoading:a,error:x}=ne({queryKey:["configurations-recent"],queryFn:()=>Q.getConfigurations({limit:10,sort_by:"createdAt",sort_order:"desc"}),staleTime:2*60*1e3,retry:1}),l=ce.useMemo(()=>t?t.data&&Array.isArray(t.data.models)?t.data.models:Array.isArray(t)?t:[]:[],[t]),c=ce.useMemo(()=>o?o.data&&Array.isArray(o.data.configurations)?o.data.configurations:o.data&&Array.isArray(o.data)?o.data:Array.isArray(o)?o:[]:[],[o]),d={totalModels:l.length,activeModels:l.filter(M=>M&&(M.isActive||M.active)).length,totalConfigurations:c.length,validConfigurations:c.filter(M=>M&&M.is_valid).length,totalOptions:l.reduce((M,C)=>{const R=(C==null?void 0:C.options)||[];return M+(Array.isArray(R)?R.length:0)},0),totalRules:l.reduce((M,C)=>{const R=(C==null?void 0:C.rules)||[];return M+(Array.isArray(R)?R.length:0)},0)},g=r||a,w=M=>{if(!M)return"Unknown";try{const C=new Date(M),R=new Date,W=(R-C)/(1e3*60*60);return W<1?`${Math.floor((R-C)/6e4)} minutes ago`:W<24?`${Math.floor(W)} hours ago`:C.toLocaleDateString()}catch(C){return"Unknown"}};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(te,{size:"large",message:"Loading dashboard..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome back, ",(s==null?void 0:s.username)||"Admin","!"]}),e.jsx("p",{className:"text-blue-100 mt-1",children:"Here's an overview of your CPQ system"})]}),e.jsxs(ee,{to:"/models",className:"flex items-center px-4 py-2 bg-white text-blue-600 rounded-md hover:bg-blue-50 transition-colors",children:[e.jsx(oe,{className:"w-5 h-5 mr-2"}),"Create Model"]})]})}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(Y,{className:"h-5 w-5 text-red-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading models"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:n.message})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-6 rounded-lg border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Models"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.totalModels})]})]})}),e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-6 rounded-lg border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Configurations"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.totalConfigurations})]})]})}),e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white p-6 rounded-lg border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Le,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Options"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.totalOptions})]})]})}),e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white p-6 rounded-lg border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Rules"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.totalRules})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Models"}),e.jsx(ee,{to:"/models",className:"text-sm text-blue-600 hover:text-blue-700",children:"View all"})]})}),e.jsx("div",{className:"p-6",children:n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Y,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Unable to load models"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Check your backend connection"})]}):l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ve,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No models yet"}),e.jsxs(ee,{to:"/models",className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Create First Model"]})]}):e.jsx("div",{className:"space-y-4",children:l.slice(0,5).map(M=>{var C,R;return e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:M.name||"Unnamed Model"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[((C=M.options)==null?void 0:C.length)||0," options • ",((R=M.rules)==null?void 0:R.length)||0," rules"]})]})]}),e.jsx(ee,{to:`/models/${M.id}`,className:"text-sm text-blue-600 hover:text-blue-700",children:"Edit"})]},M.id)})})})]}),e.jsxs("div",{className:"bg-white rounded-lg border",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Recent Configurations"}),l.length>0&&e.jsx(ee,{to:`/models/${(v=l[0])==null?void 0:v.id}/configurations`,className:"text-sm text-blue-600 hover:text-blue-700",children:"View all"})]})}),e.jsx("div",{className:"p-6",children:x?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Y,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Unable to load configurations"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Check your backend connection"})]}):c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(je,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No configurations yet"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Users will create configurations from your models"})]}):e.jsx("div",{className:"space-y-4",children:c.slice(0,5).map(M=>{var R;const C=l.find(W=>W.id===M.model_id);return e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[M.is_valid?e.jsx(Ae,{className:"h-5 w-5 text-green-500 mr-3"}):e.jsx(Ct,{className:"h-5 w-5 text-red-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(C==null?void 0:C.name)||"Unknown Model"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[w(M.created_at)," • ",M.is_valid?"Valid":"Invalid"]})]})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[((R=M.selected_options)==null?void 0:R.length)||0," selections"]})]},M.id)})})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(ee,{to:l.length>0?`/models/${(L=l[0])==null?void 0:L.id}`:"/models",className:"flex items-center p-4 bg-white rounded-lg hover:shadow-md transition-shadow border",children:[e.jsx(we,{className:"h-8 w-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Model Builder"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Configure options and rules"})]}),e.jsx(Ye,{className:"h-5 w-5 text-gray-400 ml-auto"})]}),e.jsxs(ee,{to:l.length>0?`/models/${(S=l[0])==null?void 0:S.id}/configurations`:"/models",className:"flex items-center p-4 bg-white rounded-lg hover:shadow-md transition-shadow border",children:[e.jsx(je,{className:"h-8 w-8 text-purple-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"View Configurations"}),e.jsx("p",{className:"text-sm text-gray-500",children:"See user configurations"})]}),e.jsx(Ye,{className:"h-5 w-5 text-gray-400 ml-auto"})]}),e.jsxs(ee,{to:"/models",className:"flex items-center p-4 bg-white rounded-lg hover:shadow-md transition-shadow border",children:[e.jsx(ve,{className:"h-8 w-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Create New Model"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start building a new model"})]}),e.jsx(Ye,{className:"h-5 w-5 text-gray-400 ml-auto"})]})]})]})]})},ke=({isOpen:s,onClose:t,title:r,children:n,size:o="md",showCloseButton:a=!0,closeOnOverlayClick:x=!0,closeOnEscape:l=!0})=>{i.useEffect(()=>{if(!l||!s)return;const g=w=>{w.key==="Escape"&&t()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s,t,l]),i.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]);const c={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-7xl"},d=g=>{x&&g.target===g.currentTarget&&t()};return e.jsx(ae,{children:s&&e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:d}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs(q.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:`
                relative w-full ${c[o]} 
                bg-white rounded-lg shadow-xl 
                transform transition-all
              `,onClick:g=>g.stopPropagation(),children:[(r||a)&&e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r&&e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r}),a&&e.jsx("button",{onClick:t,className:`
                        p-1 rounded-md text-gray-400
                        hover:text-gray-600 hover:bg-gray-100
                        focus:outline-none focus:ring-2 focus:ring-blue-500
                        transition-colors
                      `,"aria-label":"Close modal",children:e.jsx(He,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6",children:n})]})})]})})},na=()=>{const s=Ce(),[t,r]=i.useState(!1),[n,o]=i.useState(!1),[a,x]=i.useState(!1),[l,c]=i.useState(null),[d,g]=i.useState({name:"",description:"",version:"1.0.0"}),{data:w,isLoading:v,error:L}=ne({queryKey:["models"],queryFn:Q.getModels,staleTime:30*1e3,retry:1,onSuccess:y=>{console.log("Models data received:",y)},onError:y=>{console.error("Models query error:",y)}}),S=ce.useMemo(()=>(console.log("Processing models response:",w),w?w.data&&Array.isArray(w.data.models)?(console.log("Found models in response.data.models, length:",w.data.models.length),w.data.models):Array.isArray(w)?(console.log("Response is direct array, length:",w.length),w):w.data&&Array.isArray(w.data)?(console.log("Found array in response.data, length:",w.data.length),w.data):(console.error("Unexpected response structure, returning empty array"),[]):(console.log("No response data"),[])),[w]),M=z({mutationFn:Q.createModel,onSuccess:()=>{s.invalidateQueries(["models"]),E.success("Model created successfully"),r(!1),G()},onError:y=>{E.error(y.message||"Failed to create model")}}),C=z({mutationFn:Q.deleteModel,onSuccess:()=>{s.invalidateQueries(["models"]),E.success("Model deleted successfully"),o(!1),c(null)},onError:y=>{E.error(y.message||"Failed to delete model")}}),R=z({mutationFn:Q.cloneModel,onSuccess:()=>{s.invalidateQueries(["models"]),E.success("Model cloned successfully")},onError:y=>{E.error(y.message||"Failed to clone model")}}),W=z({mutationFn:({modelId:y,modelData:m})=>Q.updateModel(y,m),onSuccess:()=>{s.invalidateQueries(["models"]),E.success("Model updated successfully"),x(!1),c(null),G()},onError:y=>{E.error(y.message||"Failed to update model")}}),G=()=>{g({name:"",description:"",version:"1.0.0"})},N=y=>{if(y.preventDefault(),!d.name.trim()){E.error("Model name is required");return}M.mutate(d)},P=()=>{l&&C.mutate(l.id)},V=y=>{R.mutate(y.id)},U=y=>{c(y),g({name:y.name||"",description:y.description||"",version:y.version||"1.0.0"}),x(!0)},u=y=>{if(y.preventDefault(),!d.name.trim()){E.error("Model name is required");return}W.mutate({modelId:l.id,modelData:d})},b=y=>{if(!y)return"Unknown";try{return new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(m){return console.error("Date formatting error:",m,"for date:",y),"Invalid Date"}},_=y=>{if(!y)return{label:"Unknown",color:"gray"};const m=y.options&&Array.isArray(y.options)&&y.options.length>0,p=y.groups&&Array.isArray(y.groups)&&y.groups.length>0,f=y.rules&&Array.isArray(y.rules)&&y.rules.length>0;return!m&&!p?{label:"Empty",color:"red"}:f?{label:"Complete",color:"green"}:{label:"Basic",color:"yellow"}};return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(te,{size:"large",message:"Loading models..."})}):L?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"mx-auto h-12 w-12 text-red-500"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Failed to load models"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:L.message}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("button",{onClick:()=>s.invalidateQueries(["models"]),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Try Again"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Debug: Check browser console for details"})]})]}):(console.log("🔍 Final models array for render:",S,"Length:",S.length),e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Product Models"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create and manage configuration models for your products"})]}),e.jsxs("button",{onClick:()=>r(!0),className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(oe,{className:"h-5 w-5 mr-2"}),"Create Model"]})]})}),S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ve,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No models yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first product configuration model"}),e.jsxs("button",{onClick:()=>r(!0),className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create First Model"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(ae,{children:S.map(y=>{var p,f,k;const m=_(y);return e.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-lg border hover:shadow-lg transition-shadow duration-200",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center min-w-0",children:[e.jsx(ve,{className:"h-8 w-8 text-blue-600 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:y.name||"Unnamed Model"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded-full ${m.color==="green"?"bg-green-100 text-green-800":m.color==="yellow"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:m.label})]})]}),e.jsx("div",{className:"relative self-start",children:e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(Nr,{className:"h-5 w-5 text-gray-400"})})})]}),y.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:y.description}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[e.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:((p=y.groups)==null?void 0:p.length)||0}),e.jsx("div",{className:"text-xs text-gray-500",children:"Groups"})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:((f=y.options)==null?void 0:f.length)||0}),e.jsx("div",{className:"text-xs text-gray-500",children:"Options"})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:((k=y.rules)==null?void 0:k.length)||0}),e.jsx("div",{className:"text-xs text-gray-500",children:"Rules"})]})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-4",children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"Updated ",b(y.updated_at||y.created_at)]}),e.jsxs("div",{className:"grid grid-cols-3 sm:flex gap-1 sm:gap-2",children:[e.jsxs(ee,{to:`/models/${y.id}`,className:"flex sm:flex-1 flex items-center justify-center px-2 sm:px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-xs sm:text-sm",children:[e.jsx(we,{className:"h-4 w-4 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Build"})]}),e.jsx(ee,{to:`/models/${y.id}/configurations`,className:"flex items-center justify-center px-2 sm:px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",title:"View Configurations",children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>U(y),className:"flex items-center justify-center px-2 sm:px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",title:"Edit Model",disabled:W.isLoading,children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>V(y),className:"flex items-center justify-center px-2 sm:px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",title:"Clone Model",disabled:R.isLoading,children:e.jsx(vr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{c(y),o(!0)},className:"flex items-center justify-center px-2 sm:px-3 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors",title:"Delete Model",children:e.jsx(Me,{className:"h-4 w-4"})})]})]})},y.id)})})}),e.jsx(ke,{isOpen:t,onClose:()=>{r(!1),G()},title:"Create New Model",children:e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Model Name *"}),e.jsx("input",{type:"text",id:"name",required:!0,value:d.name,onChange:y=>g(A(j({},d),{name:y.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter model name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:"description",rows:3,value:d.description,onChange:y=>g(A(j({},d),{description:y.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe this model..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"version",className:"block text-sm font-medium text-gray-700",children:"Version"}),e.jsx("input",{type:"text",id:"version",value:d.version,onChange:y=>g(A(j({},d),{version:y.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1.0.0, 2.1.3, etc."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{r(!1),G()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:M.isLoading,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:M.isLoading?"Creating...":"Create Model"})]})]})}),e.jsx(ke,{isOpen:n,onClose:()=>{o(!1),c(null)},title:"Delete Model",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{className:"h-6 w-6 text-red-600 mr-3"}),e.jsxs("p",{className:"text-sm text-gray-900",children:['Are you sure you want to delete "',l==null?void 0:l.name,'"? This action cannot be undone.']})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Warning:"})," This will permanently delete the model and all its configurations."]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{o(!1),c(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:P,disabled:C.isLoading,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 disabled:opacity-50",children:C.isLoading?"Deleting...":"Delete Model"})]})]})}),e.jsx(ke,{isOpen:a,onClose:()=>{x(!1),c(null),G()},title:"Edit Model",children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-name",className:"block text-sm font-medium text-gray-700",children:"Model Name *"}),e.jsx("input",{type:"text",id:"edit-name",required:!0,value:d.name,onChange:y=>g(A(j({},d),{name:y.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter model name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:"edit-description",rows:3,value:d.description,onChange:y=>g(A(j({},d),{description:y.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe this model..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-version",className:"block text-sm font-medium text-gray-700",children:"Version"}),e.jsx("input",{type:"text",id:"edit-version",value:d.version,onChange:y=>g(A(j({},d),{version:y.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1.0.0, 2.1.3, etc."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{x(!1),c(null),G()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:W.isLoading,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:W.isLoading?"Updating...":"Update Model"})]})]})})]}))};class ze extends ce.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("ErrorBoundary caught an error:",t,r)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-64 flex items-center justify-center bg-gray-50 rounded-lg border",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.35 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Component Error"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"This component encountered an error and couldn't render properly."}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Try Again"}),!1]})}):this.props.children}}const Z=(s,t=[])=>Array.isArray(s)?s:t,ia=({modelId:s})=>{const[t,r]=i.useState(null),[n,o]=i.useState(!1),[a,x]=i.useState(""),[l,c]=i.useState("all"),[d,g]=i.useState(!1),[w,v]=i.useState("grid"),L=Ce(),{data:S=[],isLoading:M,error:C}=ne({queryKey:["model-options",s],queryFn:()=>Q.getModelOptions(s),enabled:!!s,refetchOnWindowFocus:!1}),{data:R=[],isLoading:W}=ne({queryKey:["model-groups",s],queryFn:()=>Q.getModelGroups(s),enabled:!!s,refetchOnWindowFocus:!1}),G=z({mutationFn:m=>{const p=A(j({},m),{id:`option_${Date.now()}_${Math.random().toString(36).substr(2,9)}`});return Q.createOption(s,p)},onSuccess:()=>{L.invalidateQueries(["model-options",s]),L.invalidateQueries(["model-groups",s]),E.success("Option created successfully!"),o(!1)},onError:m=>{E.error(m.message||"Failed to create option")}}),N=z({mutationFn:f=>{var k=f,{optionId:m}=k,p=$(k,["optionId"]);return Q.updateOption(s,m,p)},onSuccess:()=>{L.invalidateQueries(["model-options",s]),L.invalidateQueries(["model-groups",s]),E.success("Option updated successfully!"),r(null)},onError:m=>{E.error(m.message||"Failed to update option")}}),P=z({mutationFn:m=>Q.deleteOption(s,m),onSuccess:()=>{L.invalidateQueries(["model-options",s]),L.invalidateQueries(["model-groups",s]),E.success("Option deleted successfully!")},onError:m=>{E.error(m.message||"Failed to delete option")}}),V=z({mutationFn:({optionId:m,is_active:p})=>Q.updateOption(s,m,{is_active:p}),onSuccess:()=>{L.invalidateQueries(["model-options",s]),L.invalidateQueries(["model-groups",s]),E.success("Option status updated!")},onError:m=>{E.error(m.message||"Failed to update option status")}}),U=Z(S).filter(m=>{const p=m.name.toLowerCase().includes(a.toLowerCase())||(m.description||"").toLowerCase().includes(a.toLowerCase()),f=l==="all"||m.group_id===l,k=d||m.is_active;return p&&f&&k}),u=m=>{const p=Z(R).find(f=>f.id===m);return p?p.name:"Ungrouped"},b=m=>{var f;const p=[];return(f=m.name)!=null&&f.trim()||p.push("Name is required"),m.group_id||p.push("Group selection is required"),m.base_price&&isNaN(m.base_price)&&p.push("Price must be a valid number"),p},_=({option:m,onSave:p,onCancel:f,isCreating:k=!1})=>{var xe;const[O,K]=i.useState(j({name:(m==null?void 0:m.name)||"",description:(m==null?void 0:m.description)||"",group_id:(m==null?void 0:m.group_id)||((xe=Z(R)[0])==null?void 0:xe.id)||"",base_price:(m==null?void 0:m.base_price)||0,is_active:(m==null?void 0:m.is_active)!==!1,is_default:(m==null?void 0:m.is_default)||!1,attributes:(m==null?void 0:m.attributes)||{},display_order:(m==null?void 0:m.display_order)||1,price:(m==null?void 0:m.price)||(m==null?void 0:m.base_price)||0},m)),[H,I]=i.useState(""),[X,ye]=i.useState(""),[se,re]=i.useState([]),ue=()=>{const B=b(O);re(B),B.length===0&&p(O)},me=()=>{H&&X&&(K(A(j({},O),{attributes:A(j({},O.attributes),{[H]:X})})),I(""),ye(""))},it=B=>{const he=j({},O.attributes);delete he[B],K(A(j({},O),{attributes:he}))};return e.jsx(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx(q.div,{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:B=>B.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:k?"Create New Option":"Edit Option"}),e.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(He,{className:"w-6 h-6"})})]}),se.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Y,{className:"w-5 h-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-red-800",children:"Please fix the following errors:"})]}),e.jsx("ul",{className:"text-sm text-red-700 list-disc list-inside space-y-1",children:se.map((B,he)=>e.jsx("li",{children:B},he))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Option Name *"}),e.jsx("input",{type:"text",value:O.name,onChange:B=>K(A(j({},O),{name:B.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter option name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group *"}),e.jsxs("select",{value:O.group_id,onChange:B=>K(A(j({},O),{group_id:B.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select a group"}),Z(R).map(B=>e.jsx("option",{value:B.id,children:B.name},B.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:O.description,onChange:B=>K(A(j({},O),{description:B.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe this option..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price ($)"}),e.jsx("input",{type:"number",value:O.base_price,onChange:B=>K(A(j({},O),{base_price:Number(B.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",step:"0.01",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",value:O.display_order,onChange:B=>K(A(j({},O),{display_order:Number(B.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("div",{className:"flex items-center space-x-3 pt-2",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:O.is_active,onChange:B=>K(A(j({},O),{is_active:B.target.checked})),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Custom Attributes"}),Object.entries(O.attributes).length>0&&e.jsx("div",{className:"mb-4 space-y-2",children:Object.entries(O.attributes).map(([B,he])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[e.jsxs("span",{className:"text-sm",children:[e.jsxs("strong",{children:[B,":"]})," ",he]}),e.jsx("button",{onClick:()=>it(B),className:"text-red-500 hover:text-red-700",children:e.jsx(He,{className:"w-4 h-4"})})]},B))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:H,onChange:B=>I(B.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Attribute name"}),e.jsx("input",{type:"text",value:X,onChange:B=>ye(B.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Attribute value"}),e.jsx("button",{onClick:me,disabled:!H||!X,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(oe,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[e.jsx("button",{onClick:f,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:ue,disabled:G.isLoading||N.isLoading,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:[G.isLoading||N.isLoading?e.jsx(te,{size:"sm",className:"mr-2"}):e.jsx(rt,{className:"w-4 h-4 mr-2"}),k?"Create Option":"Save Changes"]})]})]})})})},y=({option:m})=>{var f;const p=u(m.group_id);return e.jsx(q.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`bg-white border rounded-lg p-4 hover:shadow-md transition-all ${m.is_active?"border-gray-200 hover:border-blue-300":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:`font-medium ${m.is_active?"text-gray-900":"text-gray-500"}`,children:m.name}),!m.is_active&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(Ne,{className:"w-3 h-3 mr-1"}),"Inactive"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-2",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(kt,{className:"w-3 h-3 mr-1"}),p]}),e.jsxs("span",{children:["$",((f=m.base_price)==null?void 0:f.toFixed(2))||"0.00"]}),e.jsxs("span",{children:["Order: ",m.display_order]})]}),m.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:m.description}),Object.keys(m.attributes||{}).length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(m.attributes).map(([k,O])=>e.jsxs("span",{className:"inline-block px-2 py-1 text-xs bg-blue-50 text-blue-700 rounded",children:[k,": ",O]},k))})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>V.mutate({optionId:m.id,is_active:!m.is_active}),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:m.is_active?"Deactivate":"Activate",children:m.is_active?e.jsx(Fe,{className:"w-4 h-4"}):e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(m),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit Option",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this option?")&&P.mutate(m.id)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete Option",children:e.jsx(Me,{className:"w-4 h-4"})})]})]})})};return M||W?e.jsx(te,{message:"Loading options..."}):C?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to Load Options"}),e.jsx("p",{className:"text-gray-600",children:C.message})]}):e.jsx(ze,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Le,{className:"w-5 h-5 mr-2"}),"Options Management"]}),e.jsx("p",{className:"text-gray-600",children:"Manage configuration options and their properties"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Add Option"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search options...",value:a,onChange:m=>x(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("div",{className:"sm:w-48",children:e.jsxs("select",{value:l,onChange:m=>c(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Groups"}),Z(R).map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))]})}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("label",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:m=>g(m.target.checked),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 mr-2"}),"Show Inactive"]})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 pt-2 border-t",children:[e.jsxs("span",{children:["Showing ",U.length," of ",S.length," options"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Active: ",Z(S).filter(m=>m.is_active).length]}),e.jsxs("span",{children:["Inactive: ",Z(S).filter(m=>!m.is_active).length]})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(ae,{children:U.length>0?U.sort((m,p)=>m.display_order-p.display_order).map(m=>e.jsx(y,{option:m},m.id)):e.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-white rounded-lg border",children:[e.jsx(mr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Options Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:a||l!=="all"?"Try adjusting your search or filters":"Get started by creating your first option"}),!a&&l==="all"&&e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Create First Option"})]})})}),e.jsxs(ae,{children:[n&&e.jsx(_,{isCreating:!0,onSave:m=>G.mutate(m),onCancel:()=>o(!1)}),t&&e.jsx(_,{option:t,isCreating:!1,onSave:m=>N.mutate(j({optionId:t.id},m)),onCancel:()=>r(null)})]})]})})},oa=({modelId:s})=>{const[t,r]=i.useState(null),[n,o]=i.useState(!1),[a,x]=i.useState(new Set),[l,c]=i.useState(""),[d,g]=i.useState(!1),w=Ce(),{data:v=[],isLoading:L,error:S}=ne({queryKey:["model-groups",s],queryFn:()=>Q.getModelGroupsWithOptions(s),enabled:!!s,refetchOnWindowFocus:!1}),M=z({mutationFn:u=>{const b=A(j({},u),{id:`group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`});return Q.createGroup(s,b)},onSuccess:()=>{w.invalidateQueries(["model-groups",s]),E.success("Group created successfully!"),o(!1)},onError:u=>{E.error(u.message||"Failed to create group")}}),C=z({mutationFn:_=>{var y=_,{groupId:u}=y,b=$(y,["groupId"]);return Q.updateGroup(s,u,b)},onSuccess:()=>{w.invalidateQueries(["model-groups",s]),E.success("Group updated successfully!"),r(null)},onError:u=>{E.error(u.message||"Failed to update group")}}),R=z({mutationFn:u=>Q.deleteGroup(s,u),onSuccess:()=>{w.invalidateQueries(["model-groups",s]),E.success("Group deleted successfully!")},onError:u=>{E.error(u.message||"Failed to delete group")}}),W=z({mutationFn:({groupId:u,is_active:b})=>Q.updateGroup(s,u,{is_active:b}),onSuccess:()=>{w.invalidateQueries(["model-groups",s]),E.success("Group status updated!")},onError:u=>{E.error(u.message||"Failed to update group status")}}),G=u=>{const b=new Set(a);b.has(u)?b.delete(u):b.add(u),x(b)},N=(Array.isArray(v)?v:[]).filter(u=>{const b=u.name.toLowerCase().includes(l.toLowerCase())||(u.description||"").toLowerCase().includes(l.toLowerCase()),_=d||u.is_active;return b&&_}),P=u=>{const b=[];return u.type==="multi_select"&&(u.min_selections>u.max_selections&&b.push("Minimum selections cannot exceed maximum selections"),u.max_selections>Z(u.options).length&&b.push("Maximum selections exceeds available options")),u.is_active&&(Z(u.options).length===0?b.push("Group has no options - add options in the Options tab"):Z(u.options).filter(y=>y.is_active).length===0&&b.push("Group has no active options")),b},V=u=>{const b={single_select:{name:"Single Select",description:"User can select exactly one option",icon:"◯",color:"blue"},multi_select:{name:"Multi Select",description:"User can select multiple options",icon:"☐",color:"green"},optional:{name:"Optional",description:"User can optionally select one option",icon:"⊘",color:"purple"}};return b[u]||b.single_select},U=({group:u,onSave:b,onCancel:_,isCreating:y=!1})=>{const[m,p]=i.useState(j({name:(u==null?void 0:u.name)||"",description:(u==null?void 0:u.description)||"",type:(u==null?void 0:u.type)||"single_select",is_active:(u==null?void 0:u.is_active)!==!1,display_order:(u==null?void 0:u.display_order)||1,min_selections:(u==null?void 0:u.min_selections)||0,max_selections:(u==null?void 0:u.max_selections)||1,is_required:(u==null?void 0:u.is_required)||!1,option_ids:(u==null?void 0:u.option_ids)||[]},u)),[f,k]=i.useState([]),O=I=>{var ye;const X=[];return(ye=I.name)!=null&&ye.trim()||X.push("Name is required"),I.type==="multi_select"&&(I.min_selections>I.max_selections&&X.push("Minimum selections cannot exceed maximum selections"),I.min_selections<0&&X.push("Minimum selections cannot be negative"),I.max_selections<1&&X.push("Maximum selections must be at least 1")),X},K=()=>{const I=O(m);k(I),I.length===0&&b(m)},H=I=>{let X={type:I};I==="single_select"||I==="optional"?(X.min_selections=I==="optional"?0:1,X.max_selections=1):I==="multi_select"&&(X.min_selections=0,X.max_selections=5),p(j(j({},m),X))};return e.jsx(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx(q.div,{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:I=>I.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:y?"Create New Group":"Edit Group"}),e.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(He,{className:"w-6 h-6"})})]}),f.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Y,{className:"w-5 h-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-red-800",children:"Please fix the following errors:"})]}),e.jsx("ul",{className:"text-sm text-red-700 list-disc list-inside space-y-1",children:f.map((I,X)=>e.jsx("li",{children:I},X))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Name *"}),e.jsx("input",{type:"text",value:m.name,onChange:I=>p(A(j({},m),{name:I.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter group name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Type *"}),e.jsxs("select",{value:m.type,onChange:I=>H(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"single_select",children:"Single Select"}),e.jsx("option",{value:"multi_select",children:"Multi Select"}),e.jsx("option",{value:"optional",children:"Optional"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:I=>p(A(j({},m),{description:I.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe this group..."})]}),m.type==="multi_select"&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-3",children:"Selection Constraints"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-1",children:"Minimum Selections"}),e.jsx("input",{type:"number",value:m.min_selections,onChange:I=>p(A(j({},m),{min_selections:Number(I.target.value)})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-blue-800 mb-1",children:"Maximum Selections"}),e.jsx("input",{type:"number",value:m.max_selections,onChange:I=>p(A(j({},m),{max_selections:Number(I.target.value)})),className:"w-full px-3 py-2 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",value:m.display_order,onChange:I=>p(A(j({},m),{display_order:Number(I.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("div",{className:"flex items-center pt-2",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:m.is_active,onChange:I=>p(A(j({},m),{is_active:I.target.checked})),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Active"})]})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t mt-6",children:[e.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:K,disabled:M.isLoading||C.isLoading,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:[M.isLoading||C.isLoading?e.jsx(te,{size:"sm",className:"mr-2"}):e.jsx(rt,{className:"w-4 h-4 mr-2"}),y?"Create Group":"Save Changes"]})]})]})})})};return L?e.jsx(te,{message:"Loading groups..."}):S?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to Load Groups"}),e.jsx("p",{className:"text-gray-600",children:S.message})]}):e.jsx(ze,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Ve,{className:"w-5 h-5 mr-2"}),"Groups Management"]}),e.jsx("p",{className:"text-gray-600",children:"Organize options into logical groups with constraints"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Add Group"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search groups...",value:l,onChange:u=>c(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:u=>g(u.target.checked),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 mr-2"}),"Show Inactive"]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>x(new Set(N.map(u=>u.id))),className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800",children:"Expand All"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{onClick:()=>x(new Set),className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800",children:"Collapse All"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 pt-2 border-t",children:[e.jsxs("span",{children:["Showing ",N.length," of ",v.length," groups"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Active: ",(Array.isArray(v)?v:[]).filter(u=>u.is_active).length]}),e.jsxs("span",{children:["Inactive: ",(Array.isArray(v)?v:[]).filter(u=>!u.is_active).length]})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(ae,{children:N.length>0?N.sort((u,b)=>u.display_order-b.display_order).map(u=>{var m,p,f;const b=a.has(u.id),_=P(u),y=V(u.type);return e.jsxs(q.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`bg-white border rounded-lg overflow-hidden ${u.is_active?"border-gray-200":"border-gray-200 bg-gray-50"} ${_.length>0?"border-l-4 border-l-red-500":""}`,children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4 flex-1",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${u.is_active?`bg-${y.color}-100`:"bg-gray-100"}`,children:e.jsx("span",{className:`text-lg ${u.is_active?`text-${y.color}-600`:"text-gray-400"}`,children:y.icon})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:`font-medium ${u.is_active?"text-gray-900":"text-gray-500"}`,children:u.name}),!u.is_active&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(Ne,{className:"w-3 h-3 mr-1"}),"Inactive"]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-${y.color}-100 text-${y.color}-800`,children:y.name})]}),u.description&&e.jsx("p",{className:"text-sm text-gray-600",children:u.description})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>W.mutate({groupId:u.id,is_active:!u.is_active}),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:u.is_active?"Deactivate":"Activate",children:u.is_active?e.jsx(Fe,{className:"w-4 h-4"}):e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(u),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit Group",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this group? This will also remove all options in the group.")&&R.mutate(u.id)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete Group",children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>G(u.id),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:b?e.jsx(wt,{className:"w-4 h-4"}):e.jsx(at,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-6 text-sm text-gray-600",children:[u.type==="multi_select"&&e.jsxs("span",{children:["Selections: ",u.min_selections," - ",u.max_selections]}),e.jsxs("span",{children:["Order: ",u.display_order]}),e.jsxs("span",{children:["Active Options: ",((m=Z(u.options))==null?void 0:m.filter(k=>k.is_active).length)||0]}),e.jsxs("span",{children:["Total Options: ",((p=Z(u.options))==null?void 0:p.length)||0]})]}),_.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Y,{className:"w-4 h-4 text-red-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-red-800",children:"Configuration Issues"})]}),e.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:_.map((k,O)=>e.jsxs("li",{children:["• ",k]},O))})]})]}),e.jsx(ae,{children:b&&e.jsx(q.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-gray-200 bg-gray-50",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h5",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Options (",((f=Z(u.options))==null?void 0:f.length)||0,")"]}),Z(u.options)&&Z(u.options).length>0?e.jsx("div",{className:"space-y-2",children:Z(u.options).map(k=>{var O;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[e.jsx("span",{className:`text-sm ${k.is_active?"text-gray-900":"text-gray-500"}`,children:k.name}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["$",((O=k.base_price)==null?void 0:O.toFixed(2))||"0.00"]}),!k.is_active&&e.jsx("span",{className:"text-red-500",children:"Inactive"})]})]},k.id)})}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No options in this group"})]}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Constraints"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Type:"}),e.jsx("span",{className:"font-medium",children:y.name})]}),u.type==="multi_select"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Min Selections:"}),e.jsx("span",{className:"font-medium",children:u.min_selections})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Max Selections:"}),e.jsx("span",{className:"font-medium",children:u.max_selections})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Display Order:"}),e.jsx("span",{className:"font-medium",children:u.display_order})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`font-medium ${u.is_active?"text-green-600":"text-red-600"}`,children:u.is_active?"Active":"Inactive"})]})]})]})]})})})})]},u.id)}):e.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-white rounded-lg border",children:[e.jsx(qr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Groups Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:l?"Try adjusting your search term":"Get started by creating your first group"}),!l&&e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Create First Group"})]})})}),e.jsxs(ae,{children:[n&&e.jsx(U,{isCreating:!0,onSave:u=>M.mutate(u),onCancel:()=>o(!1)}),t&&e.jsx(U,{group:t,isCreating:!1,onSave:u=>C.mutate(j({groupId:t.id},u)),onCancel:()=>r(null)})]})]})})};var la=function(s,t){for(var r={};s.length;){var n=s[0],o=n.code,a=n.message,x=n.path.join(".");if(!r[x])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[x]={message:l.message,type:l.code}}else r[x]={message:a,type:o};if("unionErrors"in n&&n.unionErrors.forEach(function(g){return g.errors.forEach(function(w){return s.push(w)})}),t){var c=r[x].types,d=c&&c[n.code];r[x]=Ht(x,t,r,o,d?[].concat(d,n.message):n.message)}s.shift()}return r},ca=function(s,t,r){return r===void 0&&(r={}),function(n,o,a){try{return Promise.resolve(function(x,l){try{var c=Promise.resolve(s[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(d){return a.shouldUseNativeValidation&&Ut({},a),{errors:{},values:r.raw?n:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(x){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(x))return{values:{},errors:Gt(la(x.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw x}))}catch(x){return Promise.reject(x)}}};const h={NUMBER:"NUMBER",BOOLEAN:"BOOLEAN",IDENTIFIER:"IDENTIFIER",PLUS:"PLUS",MINUS:"MINUS",MULTIPLY:"MULTIPLY",DIVIDE:"DIVIDE",MODULO:"MODULO",EQ:"EQ",NE:"NE",LT:"LT",LE:"LE",GT:"GT",GE:"GE",AND:"AND",OR:"OR",NOT:"NOT",IMPLIES:"IMPLIES",EQUIV:"EQUIV",LPAREN:"LPAREN",RPAREN:"RPAREN",COMMA:"COMMA",MIN:"MIN",MAX:"MAX",ABS:"ABS",NEGATE:"NEGATE",CEIL:"CEIL",FLOOR:"FLOOR",THRESHOLD:"THRESHOLD",ITE:"ITE",XOR:"XOR",EOF:"EOF",INVALID:"INVALID"};class nt{constructor(t){this.input=t,this.position=0,this.line=1,this.column=1,this.keywords=new Map([["true",h.BOOLEAN],["false",h.BOOLEAN],["TRUE",h.BOOLEAN],["FALSE",h.BOOLEAN],["AND",h.AND],["OR",h.OR],["NOT",h.NOT],["MIN",h.MIN],["MAX",h.MAX],["ABS",h.ABS],["NEGATE",h.NEGATE],["CEIL",h.CEIL],["FLOOR",h.FLOOR],["THRESHOLD",h.THRESHOLD],["ITE",h.ITE],["IMPLIES",h.IMPLIES],["EQUIV",h.EQUIV],["XOR",h.XOR]])}currentPos(){return{line:this.line,column:this.column,offset:this.position}}peek(){return this.position>=this.input.length?"\0":this.input[this.position]}peekNext(){return this.position+1>=this.input.length?"\0":this.input[this.position+1]}advance(){if(this.position>=this.input.length)return"\0";const t=this.input[this.position];return this.position++,t===`
`?(this.line++,this.column=1):this.column++,t}skipWhitespace(){for(;/\s/.test(this.peek());)this.advance()}readNumber(){const t=this.position;let r=!1;for(;/\d/.test(this.peek())||this.peek()==="."&&!r;)this.peek()==="."&&(r=!0),this.advance();return this.input.slice(t,this.position)}readIdentifier(){const t=this.position;for(;/[a-zA-Z0-9_]/.test(this.peek());)this.advance();return this.input.slice(t,this.position)}nextToken(){if(this.skipWhitespace(),this.position>=this.input.length)return{type:h.EOF,value:"",position:this.currentPos()};const t=this.currentPos(),r=this.peek(),n={"+":h.PLUS,"*":h.MULTIPLY,"/":h.DIVIDE,"%":h.MODULO,"(":h.LPAREN,")":h.RPAREN,",":h.COMMA};if(n[r])return this.advance(),{type:n[r],value:r,position:t};if(r==="<")return this.advance(),this.peek()==="="?(this.advance(),{type:h.LE,value:"<=",position:t}):this.peek()==="-"&&this.peekNext()===">"?(this.advance(),this.advance(),{type:h.EQUIV,value:"<->",position:t}):{type:h.LT,value:"<",position:t};if(r===">")return this.advance(),this.peek()==="="?(this.advance(),{type:h.GE,value:">=",position:t}):{type:h.GT,value:">",position:t};if(r==="=")return this.advance(),this.peek()==="="?(this.advance(),{type:h.EQ,value:"==",position:t}):{type:h.INVALID,value:"=",position:t,error:"Use '==' for equality"};if(r==="!")return this.advance(),this.peek()==="="?(this.advance(),{type:h.NE,value:"!=",position:t}):{type:h.NOT,value:"!",position:t};if(r==="&")return this.advance(),this.peek()==="&"?(this.advance(),{type:h.AND,value:"&&",position:t}):{type:h.INVALID,value:"&",position:t,error:"Use '&&' or 'AND'"};if(r==="|")return this.advance(),this.peek()==="|"?(this.advance(),{type:h.OR,value:"||",position:t}):{type:h.INVALID,value:"|",position:t,error:"Use '||' or 'OR'"};if(r==="-")return this.advance(),this.peek()===">"?(this.advance(),{type:h.IMPLIES,value:"->",position:t}):{type:h.MINUS,value:"-",position:t};if(/\d/.test(r)){const o=this.readNumber();return{type:h.NUMBER,value:o,position:t}}if(/[a-zA-Z]/.test(r)){const o=this.readIdentifier();return{type:this.keywords.get(o)||h.IDENTIFIER,value:o,position:t}}return this.advance(),{type:h.INVALID,value:r,position:t,error:`Unexpected character '${r}'`}}tokenize(){const t=[];let r;do r=this.nextToken(),t.push(r);while(r.type!==h.EOF);return t}}class Lt{constructor(t){this.tokens=t,this.current=0}peek(){return this.tokens[this.current]||{type:h.EOF}}advance(){return this.current<this.tokens.length-1&&this.current++,this.tokens[this.current-1]}match(...t){return t.includes(this.peek().type)}consume(t,r){var n,o;if(this.peek().type===t)return this.advance();throw new Error(`${r} at ${(n=this.peek().position)==null?void 0:n.line}:${(o=this.peek().position)==null?void 0:o.column}`)}parse(){try{const t=this.parseExpression();if(this.peek().type!==h.EOF)throw new Error(`Unexpected token after expression: ${this.peek().value}`);return{success:!0,ast:t,errors:[]}}catch(t){return{success:!1,ast:null,errors:[{message:t.message,position:this.peek().position,type:"syntax"}]}}}parseExpression(){return this.parseLogicalOr()}parseLogicalOr(){let t=this.parseLogicalAnd();for(;this.match(h.OR);){const r=this.advance(),n=this.parseLogicalAnd();t={type:"BinaryOp",operator:r.value,left:t,right:n}}return t}parseLogicalAnd(){let t=this.parseLogicalImplies();for(;this.match(h.AND);){const r=this.advance(),n=this.parseLogicalImplies();t={type:"BinaryOp",operator:r.value,left:t,right:n}}return t}parseLogicalImplies(){let t=this.parseLogicalNot();if(this.match(h.IMPLIES,h.EQUIV)){const r=this.advance(),n=this.parseLogicalNot();if(this.match(h.IMPLIES,h.EQUIV))throw new Error(`Chained logical operators require explicit parentheses: ${r.value}`);t={type:"BinaryOp",operator:r.value,left:t,right:n}}return t}parseLogicalNot(){if(this.match(h.NOT)){const t=this.advance(),r=this.parseComparison();return{type:"UnaryOp",operator:t.value,operand:r}}return this.parseComparison()}parseComparison(){let t=this.parseArithmetic();if(this.match(h.EQ,h.NE,h.LT,h.LE,h.GT,h.GE)){const r=this.advance(),n=this.parseArithmetic();t={type:"BinaryOp",operator:r.value,left:t,right:n}}return t}parseArithmetic(){let t=this.parseTerm();for(;this.match(h.PLUS,h.MINUS);){const r=this.advance(),n=this.parseTerm();t={type:"BinaryOp",operator:r.value,left:t,right:n,position:r.position}}return t}parseTerm(){let t=this.parseFactor();for(;this.match(h.MULTIPLY,h.DIVIDE,h.MODULO,h.MIN,h.MAX);){const r=this.advance(),n=this.parseFactor();t={type:"BinaryOp",operator:r.value,left:t,right:n,position:r.position}}return t}parseFactor(){if(this.match(h.MINUS,h.PLUS)){const t=this.advance(),r=this.parsePrimary();return{type:"UnaryOp",operator:t.value,operand:r}}return this.parsePrimary()}parsePrimary(){if(this.match(h.NUMBER)){const t=this.advance();return{type:"Number",value:parseFloat(t.value),position:t.position}}if(this.match(h.BOOLEAN)){const t=this.advance();return{type:"Boolean",value:t.value==="true"||t.value==="TRUE",position:t.position}}if(this.match(h.IDENTIFIER)){const t=this.advance();return{type:"Variable",name:t.value,position:t.position}}if(this.match(h.LPAREN)){this.advance();const t=this.parseExpression();return this.consume(h.RPAREN,"Expected ')'"),t}if(this.match(h.ABS,h.NEGATE,h.CEIL,h.FLOOR))return this.parseUnaryFunction();if(this.match(h.MIN,h.MAX,h.THRESHOLD,h.XOR,h.IMPLIES,h.EQUIV))return this.parseBinaryFunction();if(this.match(h.ITE))return this.parseITEFunction();throw new Error(`Unexpected token: ${this.peek().value}`)}parseUnaryFunction(){const t=this.advance();this.consume(h.LPAREN,"Expected '('");const r=this.parseExpression();return this.consume(h.RPAREN,"Expected ')'"),{type:"FunctionCall",name:t.value,args:[r]}}parseBinaryFunction(){const t=this.advance();this.consume(h.LPAREN,"Expected '('");const r=this.parseExpression();this.consume(h.COMMA,"Expected ','");const n=this.parseExpression();return this.consume(h.RPAREN,"Expected ')'"),{type:"FunctionCall",name:t.value,args:[r,n]}}parseITEFunction(){const t=this.advance();this.consume(h.LPAREN,"Expected '('");const r=this.parseExpression();this.consume(h.COMMA,"Expected ','");const n=this.parseExpression();this.consume(h.COMMA,"Expected ','");const o=this.parseExpression();return this.consume(h.RPAREN,"Expected ')'"),{type:"FunctionCall",name:t.value,args:[r,n,o]}}}class da{constructor(t={}){this.variables=t,this.errors=[]}evaluate(t){this.errors=[];try{return{success:!0,result:this.evaluateNode(t),errors:this.errors}}catch(r){return{success:!1,result:null,errors:[...this.errors,{message:r.message,type:"runtime"}]}}}evaluateNode(t){switch(t.type){case"Number":return t.value;case"Boolean":return t.value;case"Variable":if(!(t.name in this.variables))throw new Error(`Undefined variable: ${t.name}`);return this.variables[t.name];case"UnaryOp":return this.evaluateUnaryOp(t);case"BinaryOp":return this.evaluateBinaryOp(t);case"FunctionCall":return this.evaluateFunctionCall(t);default:throw new Error(`Unknown node type: ${t.type}`)}}evaluateUnaryOp(t){const r=this.evaluateNode(t.operand);switch(t.operator){case"+":if(typeof r!="number")throw new Error("Unary + requires number");return r;case"-":if(typeof r!="number")throw new Error("Unary - requires number");return-r;case"NOT":case"!":if(typeof r!="boolean")throw new Error("NOT requires boolean");return!r;default:throw new Error(`Unknown unary operator: ${t.operator}`)}}evaluateBinaryOp(t){if(t.operator==="AND"||t.operator==="&&"){const o=this.evaluateNode(t.left);if(typeof o!="boolean")throw new Error("AND requires boolean operands");if(!o)return!1;const a=this.evaluateNode(t.right);if(typeof a!="boolean")throw new Error("AND requires boolean operands");return a}if(t.operator==="OR"||t.operator==="||"){const o=this.evaluateNode(t.left);if(typeof o!="boolean")throw new Error("OR requires boolean operands");if(o)return!0;const a=this.evaluateNode(t.right);if(typeof a!="boolean")throw new Error("OR requires boolean operands");return a}const r=this.evaluateNode(t.left),n=this.evaluateNode(t.right);switch(t.operator){case"+":if(typeof r!="number"||typeof n!="number")throw new Error("Arithmetic requires numbers");return r+n;case"-":if(typeof r!="number"||typeof n!="number")throw new Error("Arithmetic requires numbers");return r-n;case"*":if(typeof r!="number"||typeof n!="number")throw new Error("Arithmetic requires numbers");return r*n;case"/":if(typeof r!="number"||typeof n!="number")throw new Error("Division requires numbers");if(n===0)throw new Error("Division by zero");return r/n;case"%":if(typeof r!="number"||typeof n!="number")throw new Error("Modulo requires numbers");if(n===0)throw new Error("Modulo by zero");return r%n;case"==":return r===n;case"!=":return r!==n;case"<":if(typeof r!="number"||typeof n!="number")throw new Error("Ordering requires numbers");return r<n;case"<=":if(typeof r!="number"||typeof n!="number")throw new Error("Ordering requires numbers");return r<=n;case">":if(typeof r!="number"||typeof n!="number")throw new Error("Ordering requires numbers");return r>n;case">=":if(typeof r!="number"||typeof n!="number")throw new Error("Ordering requires numbers");return r>=n;case"->":if(typeof r!="boolean"||typeof n!="boolean")throw new Error("Implies requires boolean operands");return!r||n;case"<->":if(typeof r!="boolean"||typeof n!="boolean")throw new Error("Equivalence requires boolean operands");return r===n;case"MIN":if(typeof r!="number"||typeof n!="number")throw new Error("MIN requires numbers");return Math.min(r,n);case"MAX":if(typeof r!="number"||typeof n!="number")throw new Error("MAX requires numbers");return Math.max(r,n);default:throw new Error(`Unknown binary operator: ${t.operator}`)}}evaluateFunctionCall(t){const r=t.args.map(n=>this.evaluateNode(n));switch(t.name){case"ABS":if(r.length!==1)throw new Error("ABS requires 1 argument");if(typeof r[0]!="number")throw new Error("ABS requires number");return Math.abs(r[0]);case"NEGATE":if(r.length!==1)throw new Error("NEGATE requires 1 argument");if(typeof r[0]!="number")throw new Error("NEGATE requires number");return-r[0];case"CEIL":if(r.length!==1)throw new Error("CEIL requires 1 argument");if(typeof r[0]!="number")throw new Error("CEIL requires number");return Math.ceil(r[0]);case"FLOOR":if(r.length!==1)throw new Error("FLOOR requires 1 argument");if(typeof r[0]!="number")throw new Error("FLOOR requires number");return Math.floor(r[0]);case"MIN":if(r.length!==2)throw new Error("MIN requires 2 arguments");if(typeof r[0]!="number"||typeof r[1]!="number")throw new Error("MIN requires numbers");return Math.min(r[0],r[1]);case"MAX":if(r.length!==2)throw new Error("MAX requires 2 arguments");if(typeof r[0]!="number"||typeof r[1]!="number")throw new Error("MAX requires numbers");return Math.max(r[0],r[1]);case"THRESHOLD":if(r.length!==2)throw new Error("THRESHOLD requires 2 arguments");if(typeof r[0]!="number"||typeof r[1]!="number")throw new Error("THRESHOLD requires numbers");return r[0]>=r[1];case"ITE":if(r.length!==3)throw new Error("ITE requires 3 arguments");if(typeof r[0]!="boolean")throw new Error("ITE condition must be boolean");return r[0]?r[1]:r[2];case"IMPLIES":if(r.length!==2)throw new Error("IMPLIES requires 2 arguments");if(typeof r[0]!="boolean"||typeof r[1]!="boolean")throw new Error("IMPLIES requires booleans");return!r[0]||r[1];case"EQUIV":if(r.length!==2)throw new Error("EQUIV requires 2 arguments");if(typeof r[0]!="boolean"||typeof r[1]!="boolean")throw new Error("EQUIV requires booleans");return r[0]===r[1];case"XOR":if(r.length!==2)throw new Error("XOR requires 2 arguments");if(typeof r[0]!="boolean"||typeof r[1]!="boolean")throw new Error("XOR requires booleans");return r[0]!==r[1];default:throw new Error(`Unknown function: ${t.name}`)}}}class ua{constructor(){this.indentSize=2}format(t){try{const n=new nt(t).tokenize(),a=new Lt(n).parse();return a.success?this.formatAST(a.ast,0):this.basicFormat(t)}catch(r){return this.basicFormat(t)}}basicFormat(t){let r=t;return r=r.replace(/([+\-*/%<>=!&|])/g," $1 "),r=r.replace(/([<>])(\s*)(=)/g,"$1$3"),r=r.replace(/([!])(\s*)(=)/g,"$1$3"),r=r.replace(/([&])(\s*)([&])/g,"$1$3"),r=r.replace(/([|])(\s*)([|])/g,"$1$3"),r=r.replace(/(<)(\s*)(-)\s*(>)/g,"$1$3$4"),r=r.replace(/(-)(\s*)(>)/g,"$1$3"),r=r.replace(/\s+/g," "),r=r.replace(/,\s*/g,", "),r=r.replace(/\(\s+/g,"("),r=r.replace(/\s+\)/g,")"),r.trim()}formatAST(t,r=0){if(!t)return"";const n=" ".repeat(r*this.indentSize);switch(t.type){case"Number":return t.value.toString();case"Boolean":return t.value.toString();case"Variable":return t.name;case"UnaryOp":const o=this.formatAST(t.operand,r);return t.operator==="NOT"?`NOT ${o}`:`${t.operator}${o}`;case"BinaryOp":const a=this.formatAST(t.left,r),x=this.formatAST(t.right,r),l=this.needsParentheses(t),c=`${a} ${t.operator} ${x}`;return l?`(${c})`:c;case"FunctionCall":const d=t.args.map(g=>this.formatAST(g,r+1));return t.name==="ITE"&&d.length===3&&t.args.some(w=>this.isComplexExpression(w))?`ITE(
${n}  ${d[0]},
${n}  ${d[1]},
${n}  ${d[2]}
${n})`:`${t.name}(${d.join(", ")})`;default:return""}}needsParentheses(t){if(t.type!=="BinaryOp")return!1;const r=n=>n?!!(n.type==="BinaryOp"||n.left&&r(n.left)||n.right&&r(n.right)):!1;return r(t.left)||r(t.right)}isComplexExpression(t){if(!t)return!1;const r=n=>{if(!n)return 0;let o=1;return n.left&&(o+=r(n.left)),n.right&&(o+=r(n.right)),n.operand&&(o+=r(n.operand)),n.args&&(o+=n.args.reduce((a,x)=>a+r(x),0)),o};return r(t)>3}}const ma=(s,t)=>{const r={"(":")",")":"("},n=["("];if(t>=s.length)return null;const o=s[t];if(!r[o])return null;const a=n.includes(o),x=r[o],l=a?1:-1,c=t+l;let d=1,g=c;for(;g>=0&&g<s.length&&d>0;){const w=s[g];if(w===o?d++:w===x&&d--,d===0)return{start:t,end:g,char:o,matchingChar:x};g+=l}return null};class xa{constructor(){this.warnings=[],this.suggestions=[]}validate(t,r){return this.warnings=[],this.suggestions=[],t?(this.validateNode(t,r),{warnings:this.warnings,suggestions:this.suggestions}):{warnings:this.warnings,suggestions:this.suggestions}}validateNode(t,r){if(t){switch(t.type){case"Variable":this.validateVariable(t,r);break;case"BinaryOp":this.validateBinaryOp(t,r);break;case"UnaryOp":this.validateUnaryOp(t,r);break;case"FunctionCall":this.validateFunctionCall(t,r);break}t.left&&this.validateNode(t.left,r),t.right&&this.validateNode(t.right,r),t.operand&&this.validateNode(t.operand,r),t.args&&t.args.forEach(n=>this.validateNode(n,r))}}validateVariable(t,r){t.name in r||this.warnings.push({type:"undefined-variable",message:`Variable '${t.name}' is not defined`,suggestion:`Define variable '${t.name}' or check spelling`,severity:"error"})}validateBinaryOp(t,r){const n=this.inferType(t.left,r),o=this.inferType(t.right,r);n&&o&&n!==o&&(["==","!="].includes(t.operator)?this.warnings.push({type:"type-mismatch",message:`Comparing ${n} with ${o}`,suggestion:"Ensure both operands are the same type",severity:"warning"}):["+","-","*","/","%","<","<=",">",">="].includes(t.operator)&&(n!=="number"||o!=="number")&&this.warnings.push({type:"type-mismatch",message:`Arithmetic operation requires numbers, got ${n} and ${o}`,suggestion:"Use numeric expressions for arithmetic",severity:"error"}))}validateUnaryOp(t,r){const n=this.inferType(t.operand,r);n&&((t.operator==="+"||t.operator==="-")&&n!=="number"?this.warnings.push({type:"type-mismatch",message:`Unary ${t.operator} requires number, got ${n}`,suggestion:"Use numeric expression",severity:"error"}):(t.operator==="NOT"||t.operator==="!")&&n!=="boolean"&&this.warnings.push({type:"type-mismatch",message:`NOT requires boolean, got ${n}`,suggestion:"Use boolean expression",severity:"error"}))}validateFunctionCall(t,r){const n=t.args.map(o=>this.inferType(o,r));switch(t.name){case"ITE":n[0]&&n[0]!=="boolean"&&this.warnings.push({type:"type-mismatch",message:`ITE condition must be boolean, got ${n[0]}`,suggestion:"Use boolean expression for condition",severity:"error"});break;case"THRESHOLD":n.some(o=>o&&o!=="number")&&this.warnings.push({type:"type-mismatch",message:"THRESHOLD requires numeric arguments",suggestion:"Use numeric expressions",severity:"error"});break}}inferType(t,r){if(!t)return null;switch(t.type){case"Number":return"number";case"Boolean":return"boolean";case"Variable":return t.name in r?typeof r[t.name]:null;case"BinaryOp":if(["+","-","*","/","%"].includes(t.operator))return"number";if(["==","!=","<","<=",">",">=","AND","&&","OR","||","->","<->"].includes(t.operator))return"boolean";break;case"UnaryOp":if(["+","-"].includes(t.operator))return"number";if(["NOT","!"].includes(t.operator))return"boolean";break;case"FunctionCall":if(["ABS","NEGATE","CEIL","FLOOR","MIN","MAX"].includes(t.name))return"number";if(["THRESHOLD","IMPLIES","EQUIV","XOR"].includes(t.name))return"boolean";break}return null}}function ha(s,t={}){const r=new Map;function n(a,x="unknown"){if(a)switch(a.type){case"Variable":r.has(a.name)||r.set(a.name,{name:a.name,type:x,usages:[]}),r.get(a.name).usages.push({context:x});break;case"BinaryOp":["==","!="].includes(a.operator)?(n(a.left,"any"),n(a.right,"any")):["<","<=",">",">=","+","-","*","/","%","MIN","MAX"].includes(a.operator)?(n(a.left,"number"),n(a.right,"number")):["AND","&&","OR","||","->","<->"].includes(a.operator)?(n(a.left,"boolean"),n(a.right,"boolean")):(n(a.left),n(a.right));break;case"UnaryOp":a.operator==="NOT"||a.operator==="!"?n(a.operand,"boolean"):a.operator==="+"||a.operator==="-"?n(a.operand,"number"):n(a.operand);break;case"FunctionCall":const c={ABS:["number"],NEGATE:["number"],CEIL:["number"],FLOOR:["number"],MIN:["number","number"],MAX:["number","number"],THRESHOLD:["number","number"],ITE:["boolean","any","any"],IMPLIES:["boolean","boolean"],EQUIV:["boolean","boolean"],XOR:["boolean","boolean"]}[a.name]||[];a.args&&a.args.forEach((d,g)=>{n(d,c[g]||"unknown")});break;default:a.left&&n(a.left),a.right&&n(a.right),a.operand&&n(a.operand),a.args&&a.args.forEach(d=>n(d))}}return n(s),Array.from(r.values()).map(a=>{let x=a.type;if(a.name in t&&t[a.name]!==void 0){const l=typeof t[a.name];(l==="number"||l==="boolean")&&(x=l)}return A(j({},a),{type:x==="unknown"&&a.name in t?typeof t[a.name]:x,value:t[a.name],isDefined:a.name in t})})}const pa=()=>{const s=[{text:"true",type:"boolean",description:"Boolean true literal"},{text:"false",type:"boolean",description:"Boolean false literal"},{text:"AND",type:"operator",description:"Logical AND operator"},{text:"OR",type:"operator",description:"Logical OR operator"},{text:"NOT",type:"operator",description:"Logical NOT operator"},{text:"ABS(",type:"function",description:"Absolute value function"},{text:"NEGATE(",type:"function",description:"Negation function"},{text:"CEIL(",type:"function",description:"Ceiling function"},{text:"FLOOR(",type:"function",description:"Floor function"},{text:"MIN(",type:"function",description:"Minimum of two values"},{text:"MAX(",type:"function",description:"Maximum of two values"},{text:"THRESHOLD(",type:"function",description:"Threshold comparison (x >= threshold)"},{text:"ITE(",type:"function",description:"If-then-else conditional"},{text:"IMPLIES(",type:"function",description:"Logical implication function"},{text:"EQUIV(",type:"function",description:"Logical equivalence function"},{text:"XOR(",type:"function",description:"Exclusive OR function"}];return{getSuggestions(t,r,n=[]){const o=t.slice(0,r);t.slice(r);const a=o.match(/[a-zA-Z_][a-zA-Z0-9_]*$/),x=a?a[0]:"",l=[];return s.forEach(c=>{c.text.toLowerCase().startsWith(x.toLowerCase())&&l.push(A(j({},c),{insertText:c.text,detail:c.description}))}),n.forEach(c=>{c.name.toLowerCase().startsWith(x.toLowerCase())&&l.push({text:c.name,type:"variable",description:`Variable (${c.type||"unknown"})`,insertText:c.name,detail:c.isDefined?`Value: ${c.value}`:"Undefined"})}),l.slice(0,10)}}},ga=({text:s,errors:t=[],bracketMatch:r=null})=>{const o=i.useCallback(a=>{if(!a)return[];const l=new nt(a).tokenize(),c=[];let d=0;return l.forEach((g,w)=>{var C;if(g.type===h.EOF)return;const v=((C=g.position)==null?void 0:C.offset)||d;v>d&&c.push({type:"text",content:a.slice(d,v),index:c.length});const L=v+g.value.length;let S="text-gray-800";r&&(v===r.start||v===r.end)?S="text-gray-800 bg-yellow-200 border border-yellow-400 rounded":g.type===h.INVALID?S="text-red-600 bg-red-100 rounded px-1":[h.NUMBER].includes(g.type)?S="text-blue-600 font-medium":[h.BOOLEAN].includes(g.type)?S="text-purple-600 font-medium":[h.IDENTIFIER].includes(g.type)?S="text-green-600":[h.PLUS,h.MINUS,h.MULTIPLY,h.DIVIDE,h.EQ,h.NE,h.LT,h.LE,h.GT,h.GE,h.IMPLIES,h.EQUIV].includes(g.type)?S="text-orange-600 font-bold":[h.AND,h.OR,h.NOT].includes(g.type)?S="text-red-600 font-bold":[h.MIN,h.MAX,h.ABS,h.NEGATE,h.CEIL,h.FLOOR,h.THRESHOLD,h.ITE,h.XOR].includes(g.type)?S="text-indigo-600 font-bold":[h.LPAREN,h.RPAREN,h.COMMA].includes(g.type)&&(S="text-gray-600"),c.push({type:"token",content:g.value,className:S,index:c.length,token:g}),d=L}),d<a.length&&c.push({type:"text",content:a.slice(d),index:c.length}),c},[r])(s);return e.jsx("pre",{className:"whitespace-pre-wrap font-mono text-sm leading-6",children:o.map(a=>e.jsx("span",{className:a.className,children:a.content},a.index))})},fa=({suggestions:s,selectedIndex:t,onSelect:r,onClose:n,position:o})=>!s||s.length===0?null:e.jsx("div",{className:"absolute z-50 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",style:{top:o.top,left:o.left,minWidth:"250px"},children:s.map((a,x)=>e.jsxs("div",{className:`px-3 py-2 cursor-pointer border-b border-gray-100 last:border-b-0 ${x===t?"bg-blue-100":"hover:bg-gray-50"}`,onClick:()=>r(a),children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium ${a.type==="function"?"bg-indigo-100 text-indigo-800":a.type==="variable"?"bg-green-100 text-green-800":a.type==="operator"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:a.type}),e.jsx("span",{className:"font-medium",children:a.text})]})}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:a.description}),a.detail&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:a.detail})]},x))}),ya=({result:s,executionTime:t})=>{var r;return s?e.jsxs("div",{className:`p-3 rounded-lg ${s.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center",children:[s.success?e.jsx(rt,{className:"h-5 w-5 text-green-600 mr-2"}):e.jsx(Et,{className:"h-5 w-5 text-red-600 mr-2"}),e.jsx("span",{className:`text-sm font-medium ${s.success?"text-green-800":"text-red-800"}`,children:s.success?"Expression is valid":"Expression has errors"}),s.success&&t&&e.jsxs("span",{className:"text-xs text-green-600 ml-2",children:["(",t,"ms)"]})]}),!s.success&&s.errors&&s.errors.length>0&&e.jsx("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:s.errors.map((n,o)=>e.jsx("li",{children:n.message},o))}),s.success&&typeof s.result!="undefined"&&e.jsxs("div",{className:"mt-2 text-sm text-green-700",children:[e.jsx("strong",{children:"Result:"}),e.jsx("span",{className:`ml-2 font-mono ${typeof s.result=="boolean"?"text-purple-600":"text-blue-600"}`,children:(r=s.result)==null?void 0:r.toString()}),e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",typeof s.result,")"]})]})]}):null},ba=({warnings:s,suggestions:t})=>{const r=[...s||[],...t||[]];return r.length===0?null:e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Code Analysis"})]}),e.jsx("div",{className:"space-y-1",children:r.map((n,o)=>e.jsx("div",{className:`p-2 rounded text-sm ${n.severity==="error"?"bg-red-50 border border-red-200":n.severity==="warning"?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"}`,children:e.jsxs("div",{className:"flex items-start space-x-1",children:[n.severity==="error"?e.jsx(Et,{className:"h-3 w-3 text-red-600 mt-0.5 flex-shrink-0"}):n.severity==="warning"?e.jsx(Y,{className:"h-3 w-3 text-yellow-600 mt-0.5 flex-shrink-0"}):e.jsx(Qe,{className:"h-3 w-3 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`font-medium ${n.severity==="error"?"text-red-800":n.severity==="warning"?"text-yellow-800":"text-blue-800"}`,children:n.message}),n.suggestion&&e.jsxs("div",{className:`text-xs mt-1 ${n.severity==="error"?"text-red-700":n.severity==="warning"?"text-yellow-700":"text-blue-700"}`,children:["💡 ",n.suggestion]})]})]})},o))})]})},va=({variables:s,onVariableChange:t})=>!s||s.length===0?null:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Variables"})]}),e.jsx("div",{className:"space-y-2",children:s.map(r=>{var n,o;return e.jsxs("div",{className:"bg-white p-2 rounded border space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-mono text-green-600 text-sm font-medium",children:r.name}),e.jsx("span",{className:`inline-flex items-center px-1 py-0.5 rounded text-xs font-medium ${r.type==="number"?"bg-blue-100 text-blue-800":r.type==="boolean"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:r.type||"unknown"})]}),e.jsx("div",{className:"space-y-1",children:r.type==="boolean"||r.value!==void 0&&typeof r.value=="boolean"?e.jsxs("select",{value:((n=r.value)==null?void 0:n.toString())||"undefined",onChange:a=>{const x=a.target.value==="undefined"?void 0:a.target.value==="true";t(r.name,x)},className:"w-full px-2 py-1 border border-gray-300 rounded text-xs focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"undefined",children:"undefined"}),e.jsx("option",{value:"true",children:"true"}),e.jsx("option",{value:"false",children:"false"})]}):e.jsx("input",{type:"number",value:((o=r.value)==null?void 0:o.toString())||"",onChange:a=>{const x=a.target.value===""?void 0:parseFloat(a.target.value);t(r.name,x)},placeholder:"Enter number...",className:"w-full px-2 py-1 border border-gray-300 rounded text-xs focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]},r.name)})})]}),ja=({value:s="",onChange:t,onValidationChange:r,variables:n={},placeholder:o="Enter your expression...",className:a="",showValidation:x=!0,showVariables:l=!0,showWarnings:c=!0})=>{const[d,g]=i.useState(null),[w,v]=i.useState(null),[L,S]=i.useState([]),[M,C]=i.useState(!1),[R,W]=i.useState([]),[G,N]=i.useState(0),[P,V]=i.useState({top:0,left:0}),[U,u]=i.useState(null),[b,_]=i.useState(0),[y,m]=i.useState(null),[p,f]=i.useState({warnings:[],suggestions:[]}),k=i.useRef(null);i.useMemo(()=>pa(),[]);const O=i.useMemo(()=>new ua,[]),K=i.useMemo(()=>new xa,[]);i.useEffect(()=>{const re=setTimeout(()=>{try{const me=new nt(s).tokenize(),xe=new Lt(me).parse();if(g(xe),xe.success){const B=ha(xe.ast,n);S(B);const he=K.validate(xe.ast,n);f(he)}else S([]),f({warnings:[],suggestions:[]});r&&r(xe)}catch(ue){const me={success:!1,errors:[{message:ue.message,type:"parse"}]};g(me),S([]),f({warnings:[],suggestions:[]}),r&&r(me)}},500);return()=>clearTimeout(re)},[s,n,K,r]),i.useEffect(()=>{if(d!=null&&d.success){const se=performance.now();try{const ue=new da(n).evaluate(d.ast),me=performance.now();v(ue),u(Math.round((me-se)*1e3)/1e3)}catch(re){v({success:!1,errors:[{message:re.message,type:"evaluation"}]}),u(null)}}else v(null),u(null)},[d,n]),i.useEffect(()=>{const se=ma(s,b);m(se)},[s,b]);const H=i.useCallback(se=>{const re=se.target.value,ue=se.target.selectionStart;t(re),_(ue),C(!1)},[t]),I=i.useCallback(se=>{_(se.target.selectionStart)},[]),X=i.useCallback((se,re)=>{t&&console.log(`Variable ${se} changed to:`,re)},[t]),ye=i.useCallback(()=>{if(!k.current)return;const re=O.format(s);t(re),setTimeout(()=>{k.current&&(k.current.focus(),k.current.setSelectionRange(re.length,re.length))},0)},[s,O,t]);return e.jsxs("div",{className:`space-y-4 ${a}`,children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-300 shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Expression Editor"}),e.jsxs("button",{type:"button",onClick:ye,className:"inline-flex items-center px-2 py-1 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",title:"Format expression",children:[e.jsx(Ks,{className:"h-3 w-3 mr-1"}),"Format"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:k,value:s,onChange:H,onSelect:I,placeholder:o,className:"w-full h-32 p-4 font-mono text-sm resize-none border-0 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-transparent relative z-10 leading-6",style:{color:"transparent",caretColor:"black"}}),e.jsx("div",{className:"absolute inset-4 pointer-events-none z-0",children:e.jsx(ga,{text:s,errors:(d==null?void 0:d.errors)||[],bracketMatch:y})})]}),x&&e.jsx("div",{className:"border-t border-gray-200 p-4",children:e.jsx(ya,{result:w||d,executionTime:U})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[l&&L.length>0&&e.jsx(va,{variables:L,onVariableChange:X}),c&&e.jsx(ba,{warnings:p.warnings,suggestions:p.suggestions})]}),M&&e.jsx(fa,{suggestions:R,selectedIndex:G,onSelect:()=>{},onClose:()=>C(!1),position:P})]})},wa=Wt({name:Xe().min(1,"Rule name is required"),description:Xe().optional(),type:zt(["constraint","dependency","exclusion","requirement"]),priority:Qt().min(1).max(100).optional(),expression:Xe().min(1,"Rule expression is required"),isActive:Zt().default(!0)}),Na=({rule:s=null,model:t,onSave:r,onCancel:n,isLoading:o=!1})=>{var p;const[a,x]=i.useState(!1),l=f=>({validation_rule:"constraint",requires:"dependency",excludes:"exclusion",mutual_exclusive:"exclusion",group_limit:"constraint",pricing_rule:"constraint"})[f]||"constraint",{register:c,handleSubmit:d,control:g,watch:w,setValue:v,formState:{errors:L,isValid:S}}=Xt({resolver:ca(wa),defaultValues:{name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.message)||"",type:s!=null&&s.type?l(s.type):"constraint",priority:(s==null?void 0:s.priority)||50,expression:(s==null?void 0:s.expression)||"",isActive:(s==null?void 0:s.is_active)!==!1}}),M=w("expression"),C=w("type"),R={constraint:{label:"Constraint Rule",description:"Defines what combinations are allowed or not allowed",color:"blue",examples:["option_a && option_b","!(option_c && option_d)","option_a || option_b"]},dependency:{label:"Dependency Rule",description:"Specifies that one option requires another",color:"green",examples:["option_a -> option_b","IMPLIES(option_a, option_b)","(option_a && option_b) -> option_c"]},exclusion:{label:"Exclusion Rule",description:"Defines mutually exclusive options",color:"red",examples:["XOR(option_a, option_b)","!(option_a && option_b)","option_a != option_b"]},requirement:{label:"Requirement Rule",description:"Specifies mandatory options under certain conditions",color:"purple",examples:["ITE(condition, option_a, true)","condition -> option_a","THRESHOLD(sum_options, 1)"]}},W=[{label:"&&",value:"&&",description:"Logical AND - both conditions must be true"},{label:"||",value:"||",description:"Logical OR - either condition can be true"},{label:"!",value:"!",description:"Logical NOT - negates the condition"},{label:"->",value:"->",description:"Implies - if first then second"},{label:"<->",value:"<->",description:"Equivalence - both have same truth value"},{label:"==",value:"==",description:"Equality comparison"},{label:"!=",value:"!=",description:"Inequality comparison"},{label:">",value:">",description:"Greater than"},{label:"<",value:"<",description:"Less than"}],G=[{label:"ITE(cond, then, else)",value:"ITE(",description:"If-then-else conditional"},{label:"IMPLIES(a, b)",value:"IMPLIES(",description:"Logical implication function"},{label:"EQUIV(a, b)",value:"EQUIV(",description:"Logical equivalence function"},{label:"XOR(a, b)",value:"XOR(",description:"Exclusive OR function"},{label:"MIN(a, b)",value:"MIN(",description:"Minimum of two values"},{label:"MAX(a, b)",value:"MAX(",description:"Maximum of two values"},{label:"ABS(x)",value:"ABS(",description:"Absolute value"},{label:"THRESHOLD(x, limit)",value:"THRESHOLD(",description:"Check if x >= limit"}],N=Z(t==null?void 0:t.options),P=f=>({constraint:"validation_rule",dependency:"requires",exclusion:"excludes",requirement:"requires"})[f]||f,V=f=>{const k={id:(s==null?void 0:s.id)||`rule_${Date.now()}`,name:f.name,type:P(f.type),expression:f.expression,message:f.description||"",is_active:f.isActive,priority:f.priority||50};r(k)},U=f=>{const k=M||"",O=k?`${k} ${f}`:f;v("expression",O)},u=f=>{U(f)},b=f=>{U(f.id)},[_,y]=i.useState({isValid:!0,errors:[]}),m=i.useCallback(f=>{y(k=>{const O={isValid:(f==null?void 0:f.success)===!0,errors:(f==null?void 0:f.errors)||[]};return k.isValid!==O.isValid||JSON.stringify(k.errors)!==JSON.stringify(O.errors)?O:k})},[]);return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s?"Edit Rule":"Create New Rule"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Define constraints and dependencies for your model"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("button",{type:"button",onClick:()=>x(!a),className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:[e.jsx(Fe,{className:"h-4 w-4 mr-1"}),a?"Hide Preview":"Show Preview"]})})]}),e.jsxs("form",{onSubmit:d(V),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rule Name"}),e.jsx("input",A(j({},c("name")),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter rule name..."})),L.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:L.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),e.jsx("textarea",A(j({},c("description")),{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe what this rule does..."}))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rule Type"}),e.jsx(dt,{name:"type",control:g,render:({field:f})=>e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(R).map(([k,O])=>e.jsxs("button",{type:"button",onClick:()=>f.onChange(k),className:`p-3 rounded-lg border text-left transition-all ${f.value===k?`border-${O.color}-500 bg-${O.color}-50`:"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"font-medium text-sm",children:O.label}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:O.description})]},k))})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority (1-100)"}),e.jsx("input",A(j({},c("priority",{valueAsNumber:!0})),{type:"number",min:"1",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher numbers = higher priority"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(dt,{name:"isActive",control:g,render:({field:f})=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:f.value,onChange:f.onChange,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Rule is active"})]})})})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Expression Builder"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Operators"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:W.map(f=>e.jsx("button",{type:"button",onClick:()=>u(f.value),className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200",title:f.description,children:f.label},f.value))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Functions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:G.map(f=>e.jsx("button",{type:"button",onClick:()=>u(f.value),className:"px-3 py-1 text-xs font-medium bg-indigo-100 text-indigo-800 rounded-full hover:bg-indigo-200",title:f.description,children:f.label},f.value))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Available Options (",N.length,")"]}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-2",children:e.jsx("div",{className:"space-y-1",children:Z(N).map(f=>e.jsxs("button",{type:"button",onClick:()=>b(f),className:"w-full text-left px-2 py-1 text-xs hover:bg-gray-100 rounded flex items-center justify-between",children:[e.jsx("span",{children:f.name}),e.jsx("span",{className:"text-gray-500",children:f.id})]},f.id))})})]}),R[C]&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Examples"}),e.jsx("div",{className:"space-y-1",children:R[C].examples.map((f,k)=>e.jsx("button",{type:"button",onClick:()=>v("expression",f),className:"block w-full text-left px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded font-mono",children:f},k))})]})]})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rule Expression"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expression"}),e.jsx(ja,{value:M||"",onChange:f=>v("expression",f),onValidationChange:m,variables:N.reduce((f,k)=>A(j({},f),{[k.id]:!0}),{}),placeholder:"Enter your rule expression using backend syntax...",showValidation:!0,showVariables:!1,showWarnings:!0,height:"200px",className:"border border-gray-300 rounded-lg focus-within:ring-blue-500 focus-within:border-blue-500"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Qe,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("div",{className:"font-medium mb-1",children:"Supported Syntax:"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Logical:"})," ","&& (AND), || (OR), ! (NOT), -> (IMPLIES), <-> (EQUIV)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Comparison:"})," ","==, !=, <, <=, >, >="]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Arithmetic:"})," +, -, *, /, %"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Functions:"})," ITE(cond, then, else), IMPLIES(a, b), XOR(a, b), ABS(x), MIN/MAX(a, b)"]})]})]})]})})]})]}),a&&M&&e.jsxs(q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rule Preview"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",w("name")||"Untitled Rule"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",(p=R[C])==null?void 0:p.label]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Priority:"})," ",w("priority")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",w("isActive")?"Active":"Inactive"]}),e.jsx("div",{children:e.jsx("strong",{children:"Expression:"})}),e.jsx("div",{className:"font-mono text-xs bg-white p-2 rounded border",children:M})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!S||o||!_.isValid,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Saving...":s?"Update Rule":"Create Rule"})]})]})]})},Ea=({modelId:s})=>{const[t,r]=i.useState(null),[n,o]=i.useState(!1),[a,x]=i.useState(new Set),[l,c]=i.useState(""),[d,g]=i.useState("all"),[w,v]=i.useState(!1),L=Ce(),{data:S,isLoading:M}=ne({queryKey:["model",s],queryFn:()=>Q.getModel(s),enabled:!!s}),C=ce.useMemo(()=>S?S.data?(console.log("Model data from response:",S.data),S.data):(console.log("Model data (direct):",S),S):null,[S]),{data:R=[],isLoading:W,error:G}=ne({queryKey:["model-rules",s],queryFn:()=>ie.getModelRules(s),enabled:!!s,refetchOnWindowFocus:!1}),N=z({mutationFn:p=>{const f=A(j({},p),{id:`rule_${Date.now()}_${Math.random().toString(36).substr(2,9)}`});return ie.addRule(s,f)},onSuccess:()=>{L.invalidateQueries(["model-rules",s]),L.invalidateQueries(["model",s]),E.success("Rule created successfully!"),o(!1)},onError:p=>{E.error(p.message||"Failed to create rule")}}),P=z({mutationFn:k=>{var O=k,{ruleId:p}=O,f=$(O,["ruleId"]);return console.log("Updating rule:",p,"with data:",f),ie.updateRule(s,p,f)},onSuccess:()=>{L.invalidateQueries(["model-rules",s]),L.invalidateQueries(["model",s]),E.success("Rule updated successfully!"),r(null)},onError:p=>{console.error("Error updating rule:",p),E.error(p.message||"Failed to update rule")}}),V=z({mutationFn:p=>ie.deleteRule(s,p),onSuccess:()=>{L.invalidateQueries(["model-rules",s]),L.invalidateQueries(["model",s]),E.success("Rule deleted successfully!")},onError:p=>{E.error(p.message||"Failed to delete rule")}}),U=z({mutationFn:({rule:p,is_active:f})=>{const k=A(j({},p),{is_active:f});return ie.updateRule(s,p.id,k)},onSuccess:()=>{L.invalidateQueries(["model-rules",s]),E.success("Rule status updated!")},onError:p=>{E.error(p.message||"Failed to update rule status")}}),u=p=>{const f=new Set(a);f.has(p)?f.delete(p):f.add(p),x(f)},b=p=>({validation_rule:"constraint",requires:"dependency",excludes:"exclusion",mutual_exclusive:"exclusion",group_limit:"constraint",pricing_rule:"constraint"})[p]||p,_=Z(R).filter(p=>{const f=p.name.toLowerCase().includes(l.toLowerCase())||(p.expression||"").toLowerCase().includes(l.toLowerCase())||(p.message||"").toLowerCase().includes(l.toLowerCase()),k=b(p.type),O=d==="all"||k===d,K=w||p.is_active!==!1;return f&&O&&K}),y=p=>{const f=b(p),k={constraint:{name:"Constraint",description:"Defines what combinations are allowed",icon:"🔒",color:"blue"},dependency:{name:"Dependency",description:"One option requires another",icon:"🔗",color:"green"},exclusion:{name:"Exclusion",description:"Mutually exclusive options",icon:"⚡",color:"red"},requirement:{name:"Requirement",description:"Mandatory options under conditions",icon:"✓",color:"purple"}};return k[f]||k.constraint},m=({rule:p})=>{const f=a.has(p.id),k=y(p.type);return e.jsxs(q.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`bg-white border rounded-lg overflow-hidden ${p.is_active!==!1?"border-gray-200":"border-gray-200 bg-gray-50"}`,children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg bg-${k.color}-100`,children:e.jsx("span",{className:"text-lg",children:k.icon})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${p.is_active!==!1?"text-gray-900":"text-gray-500"}`,children:p.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-${k.color}-100 text-${k.color}-800`,children:k.name}),p.is_active===!1&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(Ne,{className:"w-3 h-3 mr-1"}),"Inactive"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Priority: ",p.priority||50]})]})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:e.jsx("code",{className:"text-sm text-gray-800 font-mono break-all",children:p.expression})}),p.message&&e.jsxs("div",{className:"mt-3 flex items-start",children:[e.jsx(Qe,{className:"w-4 h-4 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-gray-600",children:p.message})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>U.mutate({rule:p,is_active:p.is_active===!1}),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:p.is_active!==!1?"Deactivate":"Activate",children:p.is_active!==!1?e.jsx(Fe,{className:"w-4 h-4"}):e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(p),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit Rule",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this rule?")&&V.mutate(p.id)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete Rule",children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(p.id),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:f?e.jsx(wt,{className:"w-4 h-4"}):e.jsx(at,{className:"w-4 h-4"})})]})]})}),e.jsx(ae,{children:f&&e.jsx(q.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-gray-200 bg-gray-50",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"Rule Details"}),e.jsxs("dl",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-600",children:"Type:"}),e.jsx("dd",{className:"font-medium",children:k.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-600",children:"Priority:"}),e.jsx("dd",{className:"font-medium",children:p.priority||50})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-600",children:"Status:"}),e.jsx("dd",{className:`font-medium ${p.is_active!==!1?"text-green-600":"text-red-600"}`,children:p.is_active!==!1?"Active":"Inactive"})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-600",children:k.description})]})]})})})})]})};return W||M?e.jsx(te,{message:"Loading rules..."}):G?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to Load Rules"}),e.jsx("p",{className:"text-gray-600",children:G.message})]}):e.jsx(ze,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(we,{className:"w-5 h-5 mr-2"}),"Rules Management"]}),e.jsx("p",{className:"text-gray-600",children:"Define constraints and business logic for your model"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Add Rule"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search rules...",value:l,onChange:p=>c(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("div",{className:"sm:w-48",children:e.jsxs("select",{value:d,onChange:p=>g(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"constraint",children:"Constraint"}),e.jsx("option",{value:"dependency",children:"Dependency"}),e.jsx("option",{value:"exclusion",children:"Exclusion"}),e.jsx("option",{value:"requirement",children:"Requirement"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:p=>v(p.target.checked),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 mr-2"}),"Show Inactive"]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>x(new Set(_.map(p=>p.id))),className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800",children:"Expand All"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{onClick:()=>x(new Set),className:"px-2 py-1 text-xs text-gray-600 hover:text-gray-800",children:"Collapse All"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 pt-2 border-t",children:[e.jsxs("span",{children:["Showing ",_.length," of ",R.length," rules"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Active: ",Z(R).filter(p=>p.is_active!==!1).length]}),e.jsxs("span",{children:["Inactive: ",Z(R).filter(p=>p.is_active===!1).length]})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(ae,{children:_.length>0?_.sort((p,f)=>(p.priority||50)-(f.priority||50)).map(p=>e.jsx(m,{rule:p},p.id)):e.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-white rounded-lg border",children:[e.jsx(Nt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Rules Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:l||d!=="all"?"Try adjusting your search or filters":"Get started by creating your first rule"}),!l&&d==="all"&&e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Create First Rule"})]})})}),e.jsx(ae,{children:(n||t)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl border border-gray-200 max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:e.jsx(Na,{rule:t,model:C,onSave:p=>{t?P.mutate(j({ruleId:t.id},p)):N.mutate(p)},onCancel:()=>{o(!1),r(null)},isLoading:N.isLoading||P.isLoading})})})})]})})},ka=({modelId:s,onUpdate:t})=>{const r=Ce(),[n,o]=i.useState(!1),[a,x]=i.useState(!1),[l,c]=i.useState(null),[d,g]=i.useState({name:"",description:"",type:"volume_tier",expression:"",priority:50,is_active:!0}),{data:w=[],isLoading:v,error:L}=ne({queryKey:["pricing-rules",s],queryFn:()=>ie.getPricingRules(s),enabled:!!s}),S=z({mutationFn:b=>ie.createPricingRule(s,b),onSuccess:()=>{r.invalidateQueries(["pricing-rules",s]),E.success("Pricing rule created successfully"),o(!1),R(),t==null||t()},onError:b=>{E.error(b.message||"Failed to create pricing rule")}}),M=z({mutationFn:({ruleId:b,data:_})=>ie.updatePricingRule(s,b,_),onSuccess:()=>{r.invalidateQueries(["pricing-rules",s]),E.success("Pricing rule updated successfully"),x(!1),c(null),R(),t==null||t()},onError:b=>{E.error(b.message||"Failed to update pricing rule")}}),C=z({mutationFn:b=>ie.deletePricingRule(s,b),onSuccess:()=>{r.invalidateQueries(["pricing-rules",s]),E.success("Pricing rule deleted successfully"),t==null||t()},onError:b=>{E.error(b.message||"Failed to delete pricing rule")}}),R=()=>{g({name:"",description:"",type:"volume_tier",expression:"",priority:50,is_active:!0})},W=()=>{if(!d.name.trim()){E.error("Rule name is required");return}if(!d.expression.trim()){E.error("Rule expression is required");return}S.mutate(d)},G=()=>{if(!d.name.trim()){E.error("Rule name is required");return}if(!d.expression.trim()){E.error("Rule expression is required");return}M.mutate({ruleId:l.id,data:d})},N=b=>{c(b),g({name:b.name,description:b.description||"",type:b.type||"volume_tier",expression:b.expression||"",priority:b.priority||50,is_active:b.is_active!==!1}),x(!0)},P=b=>{window.confirm("Are you sure you want to delete this pricing rule?")&&C.mutate(b)},V=b=>{const _={volume_tier:{label:"Volume Tier",icon:ir,color:"purple"},fixed_discount:{label:"Fixed Discount",icon:Ge,color:"blue"},percent_discount:{label:"Percent Discount",icon:kt,color:"green"},surcharge:{label:"Surcharge",icon:ar,color:"orange"},bundle:{label:"Bundle",icon:sr,color:"indigo"}};return _[b]||_.volume_tier},U=b=>!b||!b.expression?"No expression":b.expression,u=({isEdit:b=!1})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rule Name *"}),e.jsx("input",{type:"text",value:d.name,onChange:_=>g(A(j({},d),{name:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Volume Discount Tier 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),e.jsxs("select",{value:d.type,onChange:_=>g(A(j({},d),{type:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"volume_tier",children:"Volume Tier"}),e.jsx("option",{value:"fixed_discount",children:"Fixed Discount"}),e.jsx("option",{value:"percent_discount",children:"Percent Discount"}),e.jsx("option",{value:"surcharge",children:"Surcharge"}),e.jsx("option",{value:"bundle",children:"Bundle"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expression *"}),e.jsx("input",{type:"text",value:d.expression,onChange:_=>g(A(j({},d),{expression:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., accessory_count >= 5 or discount_percent = 10"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Enter the pricing rule expression (e.g., "quantity >= 10" or "discount_percent = 15")'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:_=>g(A(j({},d),{description:_.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe when this pricing rule applies..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsx("input",{type:"number",value:d.priority,onChange:_=>g(A(j({},d),{priority:parseInt(_.target.value)||50})),min:"1",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher priority rules apply first"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.is_active,onChange:_=>g(A(j({},d),{is_active:_.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})})]})]});return v?e.jsx(te,{message:"Loading pricing rules..."}):L?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to Load Pricing Rules"}),e.jsx("p",{className:"text-gray-600",children:L.message})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing Rules"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure dynamic pricing rules and discounts"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Add Pricing Rule"]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(ae,{mode:"popLayout",children:Z(w).map(b=>{const _=V(b.type);return e.jsx(q.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-lg border p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(_.icon,{className:`w-5 h-5 text-${_.color}-600`}),e.jsx("h4",{className:"font-medium text-gray-900",children:b.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full bg-${_.color}-100 text-${_.color}-800`,children:_.label}),e.jsx("span",{className:"text-sm font-mono text-gray-600 bg-gray-100 px-2 py-1 rounded",children:U(b)}),!b.is_active&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600",children:"Inactive"})]}),b.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:b.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["Priority: ",b.priority]}),e.jsxs("span",{children:["Type: ",b.type]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>N(b),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit Rule",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>P(b.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete Rule",children:e.jsx(Me,{className:"w-4 h-4"})})]})]})},b.id)})})}),Z(w).length===0&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(Ge,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No Pricing Rules"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create pricing rules to define dynamic pricing for your model"}),e.jsxs("button",{onClick:()=>o(!0),className:"mt-4 flex items-center mx-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Add First Rule"]})]}),e.jsxs(ke,{isOpen:n,onClose:()=>{o(!1),R()},title:"Create Pricing Rule",children:[e.jsx(u,{}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{o(!1),R()},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:W,disabled:S.isLoading,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:S.isLoading?"Creating...":"Create Rule"})]})]}),e.jsxs(ke,{isOpen:a,onClose:()=>{x(!1),c(null),R()},title:"Edit Pricing Rule",children:[e.jsx(u,{isEdit:!0}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{x(!1),c(null),R()},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:G,disabled:M.isLoading,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:M.isLoading?"Updating...":"Update Rule"})]})]})]})},Ca=()=>{var m,p,f,k,O,K;const{modelId:s}=st(),t=It(),r=Ce(),[n,o]=i.useState("overview"),[a,x]=i.useState(null),[l,c]=i.useState(null),[d,g]=i.useState(null),[w,v]=i.useState(!1),{data:L,isLoading:S,error:M}=ne({queryKey:["model",s],queryFn:()=>Q.getModel(s),enabled:!!s,refetchOnWindowFocus:!1}),C=ce.useMemo(()=>L?L.data?L.data:L:null,[L]),{data:R,isLoading:W}=ne({queryKey:["model-stats",s],queryFn:()=>ie.getModelStatistics(s),enabled:!!s,refetchOnWindowFocus:!1}),G=ce.useMemo(()=>R?R.data?R.data:R:null,[R]),N=z({mutationFn:()=>Q.deleteModel(s),onSuccess:()=>{E.success("Model deleted successfully"),t("/models")},onError:H=>{E.error(H.message||"Failed to delete model")}}),P=z({mutationFn:()=>ie.validateModel(s),onSuccess:H=>{const I=H.data||H;x(I),E.success("Model validation completed")},onError:H=>{E.error(H.message||"Validation failed")}}),V=z({mutationFn:()=>ie.detectConflicts(s),onSuccess:H=>{const I=H.data||H;c(I),E.success("Conflict detection completed")},onError:H=>{E.error(H.message||"Conflict detection failed")}}),U=i.useCallback(()=>{r.invalidateQueries(["model",s]),r.invalidateQueries(["model-stats",s])},[s,r]),u=i.useCallback(()=>{P.mutate()},[P]),b=i.useCallback(()=>{V.mutate()},[V]),_=i.useCallback(()=>{N.mutate()},[N]),y=[{id:"overview",name:"Overview",icon:Qe,description:"Model summary and statistics"},{id:"options",name:"Options",icon:qe,description:"Manage configuration options"},{id:"groups",name:"Groups",icon:Ve,description:"Organize options into groups"},{id:"rules",name:"Rules",icon:we,description:"Configure business rules"},{id:"pricing",name:"Pricing",icon:Ge,description:"Set up pricing rules"},{id:"validation",name:"Validation",icon:Ae,description:"Validate model integrity"}];return S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(te,{size:"large",message:"Loading model..."})}):M?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"mx-auto h-12 w-12 text-red-500"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Failed to load model"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:M.message}),e.jsxs("div",{className:"mt-4 space-x-3",children:[e.jsx("button",{onClick:()=>r.invalidateQueries(["model",s]),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Try Again"}),e.jsx(ee,{to:"/models",className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Back to Models"})]})]}):C?e.jsx(ze,{children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs(ee,{to:"/models",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(jt,{className:"h-4 w-4 mr-1"}),"Back to Models"]})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Le,{className:"h-8 w-8"}),C.name||"Unnamed Model"]}),C.description&&e.jsx("p",{className:"text-gray-600 mt-1",children:C.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["Version: ",C.version||"1.0.0"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Updated: ",new Date(C.updated_at||C.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:u,disabled:P.isLoading,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:[P.isLoading?e.jsx(te,{size:"small",color:"white",showMessage:!1}):e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Validate"]}),e.jsxs("button",{onClick:b,disabled:V.isLoading,className:"flex items-center px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 disabled:opacity-50",children:[V.isLoading?e.jsx(te,{size:"small",color:"white",showMessage:!1}):e.jsx(pt,{className:"h-4 w-4 mr-2"}),"Check Conflicts"]}),e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),G&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(qe,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Options"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((m=C.options)==null?void 0:m.length)||0})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ve,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Groups"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((p=C.groups)==null?void 0:p.length)||0})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Rules"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((f=C.rules)==null?void 0:f.length)||0})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Configurations"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.configurations_count||0})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:y.map(H=>e.jsxs("button",{onClick:()=>o(H.id),className:`
                    flex items-center py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap
                    ${n===H.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:[e.jsx(H.icon,{className:"h-5 w-5 mr-2"}),H.name]},H.id))})}),e.jsx("div",{className:"p-6",children:e.jsx(ae,{mode:"wait",children:e.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:[n==="overview"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Model Overview"}),a&&e.jsxs("div",{className:"mb-6 p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Validation Results"}),e.jsx("div",{className:`p-3 rounded ${a.is_valid?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:a.is_valid?"Model is valid":"Model has validation errors"})]}),l&&e.jsxs("div",{className:"mb-6 p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Conflict Detection"}),e.jsx("div",{className:`p-3 rounded ${l.conflict_count===0?"bg-green-50 text-green-800":"bg-yellow-50 text-yellow-800"}`,children:l.conflict_count===0?"No conflicts detected":`${l.conflict_count} conflicts found`})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Model Information"}),e.jsxs("dl",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"ID:"}),e.jsx("dd",{className:"text-gray-900 font-mono",children:C.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"Version:"}),e.jsx("dd",{className:"text-gray-900",children:C.version||"1.0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"Created:"}),e.jsx("dd",{className:"text-gray-900",children:new Date(C.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"Updated:"}),e.jsx("dd",{className:"text-gray-900",children:new Date(C.updated_at).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>o("options"),className:"w-full flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(qe,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsx("span",{className:"text-sm font-medium",children:"Manage Options"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[((k=C.options)==null?void 0:k.length)||0," items"]})]}),e.jsxs("button",{onClick:()=>o("groups"),className:"w-full flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ve,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsx("span",{className:"text-sm font-medium",children:"Manage Groups"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[((O=C.groups)==null?void 0:O.length)||0," items"]})]}),e.jsxs("button",{onClick:()=>o("rules"),className:"w-full flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsx("span",{className:"text-sm font-medium",children:"Configure Rules"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[((K=C.rules)==null?void 0:K.length)||0," items"]})]})]})]})]})]})}),n==="options"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuration Options"}),e.jsx(ia,{modelId:s,onUpdate:U})]}),n==="groups"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Option Groups"}),e.jsx(oa,{modelId:s,onUpdate:U})]}),n==="rules"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Business Rules"}),e.jsx(Ea,{modelId:s,onUpdate:U})]}),n==="pricing"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pricing Rules"}),e.jsx(ka,{modelId:s,onUpdate:U})]}),n==="validation"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Model Validation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:u,disabled:P.isLoading,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[P.isLoading?e.jsx(te,{size:"small",color:"white",showMessage:!1}):e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Run Validation"]}),e.jsxs("button",{onClick:b,disabled:V.isLoading,className:"flex items-center px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 disabled:opacity-50",children:[V.isLoading?e.jsx(te,{size:"small",color:"white",showMessage:!1}):e.jsx(pt,{className:"h-4 w-4 mr-2"}),"Detect Conflicts"]})]}),a&&e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Validation Results"}),e.jsx("pre",{className:"text-sm bg-gray-50 p-3 rounded overflow-auto",children:JSON.stringify(a,null,2)})]}),l&&e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Conflict Detection Results"}),e.jsx("pre",{className:"text-sm bg-gray-50 p-3 rounded overflow-auto",children:JSON.stringify(l,null,2)})]})]})]})]},n)})})]}),e.jsx(ke,{isOpen:w,onClose:()=>v(!1),title:"Delete Model",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{className:"h-6 w-6 text-red-600 mr-3"}),e.jsxs("p",{className:"text-sm text-gray-900",children:['Are you sure you want to delete "',C.name,'"? This action cannot be undone.']})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Warning:"})," This will permanently delete the model and all its configurations."]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:_,disabled:N.isLoading,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 disabled:opacity-50",children:N.isLoading?"Deleting...":"Delete Model"})]})]})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Model not found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"The requested model could not be found."}),e.jsx(ee,{to:"/models",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Back to Models"})]})},La=()=>{const{modelId:s}=st(),[t,r]=i.useState(""),[n,o]=i.useState("all"),[a,x]=i.useState("createdAt"),[l,c]=i.useState("desc"),[d,g]=i.useState(null),{data:w}=ne({queryKey:["model",s],queryFn:()=>Q.getModel(s),enabled:!!s}),{data:v,isLoading:L,error:S}=ne({queryKey:["configurations",s,{status:n,sort:a,order:l}],queryFn:()=>Q.getConfigurations({model_id:s,status:n!=="all"?n:void 0,sort_by:a,sort_order:l}),enabled:!!s,refetchInterval:3e4}),M=v==null?void 0:v.filter(N=>{var V,U,u,b;if(!t)return!0;const P=t.toLowerCase();return((V=N.id)==null?void 0:V.toLowerCase().includes(P))||((U=N.user_id)==null?void 0:U.toLowerCase().includes(P))||((u=N.user_email)==null?void 0:u.toLowerCase().includes(P))||((b=N.name)==null?void 0:b.toLowerCase().includes(P))}),C={total:(v==null?void 0:v.length)||0,complete:(v==null?void 0:v.filter(N=>N.status==="complete").length)||0,incomplete:(v==null?void 0:v.filter(N=>N.status==="incomplete").length)||0,valid:(v==null?void 0:v.filter(N=>N.is_valid).length)||0},R=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),W=N=>typeof N!="number"?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(N),G=N=>N.status==="complete"&&N.is_valid?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:[e.jsx(Ae,{className:"w-3 h-3 mr-1"}),"Complete"]}):N.status==="complete"&&!N.is_valid?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:[e.jsx(Ct,{className:"w-3 h-3 mr-1"}),"Invalid"]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:[e.jsx(tt,{className:"w-3 h-3 mr-1"}),"In Progress"]});return L?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(te,{size:"large",message:"Loading configurations..."})}):S?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"mx-auto h-12 w-12 text-red-500"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Failed to load configurations"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:S.message})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs(ee,{to:"/models",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(jt,{className:"h-4 w-4 mr-1"}),"Back to Models"]})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(je,{className:"h-8 w-8 text-blue-600"}),"Configurations for ",w==null?void 0:w.name]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"View all configurations created by users for this model"})]}),e.jsx(ee,{to:`/models/${s}`,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Edit Model"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:C.total}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Configurations"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:C.complete}),e.jsx("div",{className:"text-sm text-gray-500",children:"Complete"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:C.incomplete}),e.jsx("div",{className:"text-sm text-gray-500",children:"In Progress"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:C.valid}),e.jsx("div",{className:"text-sm text-gray-500",children:"Valid"})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg border mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:t,onChange:N=>r(N.target.value),placeholder:"Search by ID, user, or name...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sr,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:n,onChange:N=>o(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"complete",children:"Complete"}),e.jsx("option",{value:"incomplete",children:"In Progress"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:a,onChange:N=>x(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"createdAt",children:"Created Date"}),e.jsx("option",{value:"updatedAt",children:"Updated Date"}),e.jsx("option",{value:"total_price",children:"Price"})]}),e.jsxs("select",{value:l,onChange:N=>c(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"desc",children:"Newest First"}),e.jsx("option",{value:"asc",children:"Oldest First"})]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsx(ae,{mode:"popLayout",children:M==null?void 0:M.map(N=>e.jsx(q.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-lg border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6 cursor-pointer",onClick:()=>g(d===N.id?null:N.id),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:N.name||`Configuration ${N.id}`}),G(N)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Qr,{className:"h-4 w-4 mr-2"}),N.user_email||N.user_id||"Anonymous"]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),R(N.createdAt)]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),W(N.total_price)]})]}),N.selections&&e.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[Object.keys(N.selections).length," options selected"]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(at,{className:`h-5 w-5 text-gray-400 transform transition-transform ${d===N.id?"rotate-90":""}`})})]}),e.jsx(ae,{children:d===N.id&&e.jsx(q.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mt-4 pt-4 border-t overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Configuration Details"}),e.jsxs("dl",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"Configuration ID:"}),e.jsx("dd",{className:"font-mono text-gray-900",children:N.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"Last Updated:"}),e.jsx("dd",{className:"text-gray-900",children:R(N.updatedAt)})]}),N.metadata&&e.jsx(e.Fragment,{children:Object.entries(N.metadata).map(([P,V])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("dt",{className:"text-gray-500",children:[P,":"]}),e.jsx("dd",{className:"text-gray-900",children:V})]},P))})]})]}),N.selections&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Selected Options"}),e.jsx("div",{className:"space-y-1 text-sm max-h-40 overflow-y-auto",children:Object.entries(N.selections).map(([P,V])=>{var u;const U=(u=w==null?void 0:w.options)==null?void 0:u.find(b=>b.id===P);return e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:(U==null?void 0:U.name)||P}),e.jsx("span",{className:"text-gray-900",children:V>1?`${V}x`:"✓"})]},P)})})]}),N.validation_errors&&N.validation_errors.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Validation Issues"}),e.jsx("ul",{className:"space-y-1 text-sm text-red-600",children:N.validation_errors.map((P,V)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(Y,{className:"h-4 w-4 mr-1 mt-0.5 flex-shrink-0"}),P]},V))})]})]})})})]})},N.id))})}),(!M||M.length===0)&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border",children:[e.jsx(Nt,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No configurations found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t||n!=="all"?"Try adjusting your filters":"No users have created configurations for this model yet"})]})]})},Ma=({children:s,requiredRole:t=null})=>{const{user:r,isAuthenticated:n,isLoading:o}=Ze();return o?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?t&&(r==null?void 0:r.role)!==t?e.jsx(_e,{to:"/dashboard",replace:!0}):s:e.jsx(_e,{to:"/login",replace:!0})},Sa=new qt({defaultOptions:{queries:{staleTime:5*60*1e3,cacheTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1}}});function Ra(){return e.jsx(Vt,{client:Sa,children:e.jsxs(Qs,{children:[e.jsx(Dt,{children:e.jsxs(Pt,{children:[e.jsx(pe,{path:"/login",element:e.jsx(ra,{})}),e.jsxs(pe,{path:"/",element:e.jsx(Ma,{children:e.jsx(sa,{})}),children:[e.jsx(pe,{index:!0,element:e.jsx(_e,{to:"/dashboard",replace:!0})}),e.jsx(pe,{path:"dashboard",element:e.jsx(aa,{})}),e.jsx(pe,{path:"models",element:e.jsx(na,{})}),e.jsx(pe,{path:"models/:modelId",element:e.jsx(Ca,{})}),e.jsx(pe,{path:"models/:modelId/configurations",element:e.jsx(La,{})}),e.jsx(pe,{path:"*",element:e.jsx(_e,{to:"/dashboard",replace:!0})})]})]})}),e.jsx(Hs,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}const Oa=window.appStartTime||Date.now();class Aa extends ce.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("Global Error Boundary caught an error:",t,r)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Page"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors",children:"Try Again"})]}),!1]})}):this.props.children}}function _a(){const s=document.getElementById("loading-screen");s&&(document.body.classList.add("app-loaded"),setTimeout(()=>{s.style.display="none"},300));const t=Date.now()-Oa;console.log(`App loaded in ${t}ms`),window.gtag&&window.gtag("event","timing_complete",{name:"app_load",value:t})}function $a(){const t=["Promise","fetch","Map","Set","Symbol","WeakMap","WeakSet"].filter(r=>!(r in window));if(t.length>0){console.warn("Missing browser features:",t);const r=document.createElement("div");r.innerHTML=`
      <div style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: #fbbf24;
        color: #92400e;
        padding: 12px;
        text-align: center;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        font-size: 14px;
        z-index: 10000;
      ">
        <strong>Browser Compatibility Warning:</strong> 
        Your browser may not support all features. For the best experience, please update to a modern browser.
        <button onclick="this.parentElement.parentElement.remove()" style="
          margin-left: 12px;
          background: none;
          border: 1px solid currentColor;
          color: inherit;
          padding: 4px 8px;
          border-radius: 4px;
          cursor: pointer;
        ">Dismiss</button>
      </div>
    `,document.body.appendChild(r)}}function Fa(){try{ts.createRoot(document.getElementById("root")).render(e.jsx(ce.StrictMode,{children:e.jsx(Aa,{children:e.jsx(Ra,{})})})),_a()}catch(s){console.error("Failed to render app:",s);const t=document.getElementById("root");t&&(t.innerHTML=`
        <div style="
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #f3f4f6;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        ">
          <div style="
            background: white;
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
          ">
            <h1 style="color: #dc2626; margin-bottom: 1rem;">Application Error</h1>
            <p style="color: #6b7280; margin-bottom: 1.5rem;">
              Failed to load the CPQ application. Please refresh the page or contact support.
            </p>
            <button 
              onclick="window.location.reload()" 
              style="
                background: #2563eb;
                color: white;
                border: none;
                padding: 0.75rem 1.5rem;
                border-radius: 0.375rem;
                cursor: pointer;
                font-weight: 500;
              "
            >
              Refresh Page
            </button>
          </div>
        </div>
      `)}}$a();Fa();typeof window!="undefined"&&window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&(window.__REACT_DEVTOOLS_GLOBAL_HOOK__.inject=function(){}),console.log("%cCPQ Enterprise Configuration System","color: #2563eb; font-size: 18px; font-weight: bold;"),console.log("%cProduction Build - Version 1.0.0","color: #059669; font-size: 12px;");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(s=>{console.log("SW registered: ",s)}).catch(s=>{console.log("SW registration failed: ",s)})})});export default Ta();
